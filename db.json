{"meta":{"version":1,"warehouse":"5.0.1"},"models":{"Asset":[{"_id":"themes/anzhiyu/source/favicon.ico","path":"favicon.ico","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/css/index.styl","path":"css/index.styl","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/css/var.styl","path":"css/var.styl","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/js/tw_cn.js","path":"js/tw_cn.js","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/algolia.svg","path":"img/algolia.svg","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/404.jpg","path":"img/404.jpg","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/comment_bg.png","path":"img/comment_bg.png","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/512.png","path":"img/512.png","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/default_cover.jpg","path":"img/default_cover.jpg","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/friend_404.gif","path":"img/friend_404.gif","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/favicon.ico","path":"img/favicon.ico","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/loading.gif","path":"img/loading.gif","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/js/anzhiyu/comment_barrage.js","path":"js/anzhiyu/comment_barrage.js","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/js/anzhiyu/random_friends_post.js","path":"js/anzhiyu/random_friends_post.js","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/js/anzhiyu/people.js","path":"js/anzhiyu/people.js","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/js/anzhiyu/ai_abstract.js","path":"js/anzhiyu/ai_abstract.js","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/js/search/algolia.js","path":"js/search/algolia.js","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/js/search/local-search.js","path":"js/search/local-search.js","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/js/anzhiyu/right_click_menu.js","path":"js/anzhiyu/right_click_menu.js","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/siteicon/32.png","path":"img/siteicon/32.png","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/siteicon/16.png","path":"img/siteicon/16.png","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/siteicon/apple-icon-180.png","path":"img/siteicon/apple-icon-180.png","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/siteicon/manifest-icon-192.maskable.png","path":"img/siteicon/manifest-icon-192.maskable.png","modified":0,"renderable":1},{"_id":"themes/anzhiyu/source/img/siteicon/manifest-icon-512.maskable.png","path":"img/siteicon/manifest-icon-512.maskable.png","modified":0,"renderable":1}],"Cache":[{"_id":"themes/anzhiyu/source/css/_extra/home_top/random-banner.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1728381006000},{"_id":"themes/anzhiyu/.gitignore","hash":"d507747699b68b0ec536b91d8be526c71ccf5c74","modified":1728381006000},{"_id":"themes/anzhiyu/LICENSE","hash":"31a3d460bb3c7d98845187c716a30db81c44b615","modified":1728381006000},{"_id":"themes/anzhiyu/README_EN.md","hash":"3b27231432adf2bd180857fc6d3de646dfd444bf","modified":1728381006000},{"_id":"themes/anzhiyu/README.md","hash":"46c4c8c308bd18c813da6b37356c7953f0d2e4af","modified":1728381006000},{"_id":"themes/anzhiyu/_config.yml_bak","hash":"a9dc87847239343e2c0079e155222eaf78029604","modified":1728381006000},{"_id":"themes/anzhiyu/plugins.yml","hash":"23296290f36523e41926e22888f3d87b236dfbf0","modified":1728381006000},{"_id":"themes/anzhiyu/package.json","hash":"b1bd6fd513cd4d1a98a904b37c6cd28296af7ee7","modified":1728381006000},{"_id":"themes/anzhiyu/sw-rules.js","hash":"0dc0fbe4d5e9acad4fffe69355830dcd41f89da6","modified":1728381006000},{"_id":"themes/anzhiyu/languages/zh-CN.yml","hash":"dbd5b387322693ed53df84eab709bf04ffeb8b81","modified":1728381006000},{"_id":"themes/anzhiyu/languages/default.yml","hash":"be22c8d1730408a2ac3ec9a57406e297fc1f7ce6","modified":1728381006000},{"_id":"themes/anzhiyu/languages/zh-TW.yml","hash":"0e0b432912390e3de9d99bc54add99e4d265d3d1","modified":1728381006000},{"_id":"themes/anzhiyu/languages/en.yml","hash":"4c46ef35360b8322269417bcae68e609ca8f85be","modified":1728381006000},{"_id":"themes/anzhiyu/layout/archive.pug","hash":"b8778e55f1aab2431daa4a64cba991ef40e33224","modified":1728381006000},{"_id":"themes/anzhiyu/layout/category.pug","hash":"1d55b22a50675d1ecfb95d031ea011245c7c6511","modified":1728381006000},{"_id":"themes/anzhiyu/layout/index.pug","hash":"cf1b756e06864a47352bb9890519eafcf5d0340d","modified":1728381006000},{"_id":"themes/anzhiyu/layout/page.pug","hash":"98e81d10e6caab2ff79b4a2788d2312acded36ef","modified":1728381006000},{"_id":"themes/anzhiyu/layout/post.pug","hash":"0d8d8cfd31e97053c908dac3ee19072825a6a2dc","modified":1728381006000},{"_id":"themes/anzhiyu/layout/tag.pug","hash":"354b85519feab71c0233eb240655d0e0ec67021c","modified":1728381006000},{"_id":"themes/anzhiyu/source/favicon.ico","hash":"14310db268ea8d3b2096f434c6e293fc207f5f09","modified":1728381006000},{"_id":"themes/anzhiyu/.github/workflows/issue_close_question.yml","hash":"a7f1bf4578faa6092898a9a44bfd467cbb1788dd","modified":1728381006000},{"_id":"themes/anzhiyu/.github/workflows/issue_close_stale.yml","hash":"6151bdec23ded908adf01ba5ecdf3c0da573449d","modified":1728381006000},{"_id":"themes/anzhiyu/.github/workflows/issue_invalid.yml","hash":"8cdde230c8f9330cc7cd5c149ea5fc258ffb0b8b","modified":1728381006000},{"_id":"themes/anzhiyu/.github/workflows/issue_duplicate.yml","hash":"42a8e022434604081fe443d416bd443efd887015","modified":1728381006000},{"_id":"themes/anzhiyu/.github/workflows/issue_wontfix.yml","hash":"3b498c22281bb454f8ee1135a4becee0adc5b9ae","modified":1728381006000},{"_id":"themes/anzhiyu/.github/workflows/publish.yml","hash":"05857c2f265246d8de00e31037f2720709540c09","modified":1728381006000},{"_id":"themes/anzhiyu/.github/workflows/issue_question.yml","hash":"72ce6e36847f20952d8f8742e4fd1969cd086320","modified":1728381006000},{"_id":"themes/anzhiyu/.github/ISSUE_TEMPLATE/config.yml","hash":"a23b745378bc745b15f2dfefcc6a203d5d1d5fcd","modified":1728381006000},{"_id":"themes/anzhiyu/.github/ISSUE_TEMPLATE/bug_report.yml","hash":"3978be1ecdd21be564aa590b17eda6f03cd77e19","modified":1728381006000},{"_id":"themes/anzhiyu/.github/ISSUE_TEMPLATE/feature_request.yml","hash":"53260c55a97ed93e6a1f9acc23b9d21193cae6ef","modified":1728381006000},{"_id":"themes/anzhiyu/.github/workflows/stale.yml","hash":"ac62b989b5550c756e1986fcc68f243170705383","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/404.pug","hash":"aa158d5a661aa2fab4737b9460ce34f6784fdee5","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/additional-js.pug","hash":"d7e42261a79651ce13ff2213947ecb3e4c41ee81","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/bbTimeList.pug","hash":"0a0c4cdf69314c3a9ecb078f4213c76129a9ac06","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/categoryGroup.pug","hash":"243f63820db5f3241e682ae8f3baffd6501df3de","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/footer.pug","hash":"50131aa8ad85fd6c08d8e1cb2d3dcfceb5964abe","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/layout.pug","hash":"3bc51657414be0c94bd27752616cc7f7d54f20cd","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/music.pug","hash":"163f5bbeadbe481a809652e6ce453022db26694a","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/head.pug","hash":"8db5b7382011745f53b99b5b5577ae28140068e2","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/mourn.pug","hash":"d114b9493fbe6551b0c4ad1c1d8886b7f98a0d60","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/pagination.pug","hash":"1e0be343f9bdc6cefc5ff0dd3c2936ed91d5be86","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/rightside.pug","hash":"d865835bc5432d8ec15fd0cb168643f3e9b77a18","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/sidebar.pug","hash":"fd6d7873df74994ed6a36bd07a438c427db97e18","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/index.styl","hash":"ddded5cd1da248fdc30556a33877579ff8379a48","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/shortcutKey.pug","hash":"dcf8fb7bbddd4a64626f4fcf2523ace2dfce879f","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/var.styl","hash":"7bdedada1176e55d5fb72e3cc9f46e01d03b704a","modified":1728381006000},{"_id":"themes/anzhiyu/source/js/main.js","hash":"888563ad7324e565e6f5060ca126d69c7309bef1","modified":1728381006000},{"_id":"themes/anzhiyu/source/js/tw_cn.js","hash":"6cbec565e98cbd49aa75e6161d8fa996ae3be91a","modified":1728381006000},{"_id":"themes/anzhiyu/source/js/utils.js","hash":"68e7f87c38365ef1271b69943395aa5fdb5417ea","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/events/404.js","hash":"170e72e851257365468024557c767360c3deafbf","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/events/comment.js","hash":"a3d1f417965ca20253c36f9e93429f3df6268856","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/events/cdn.js","hash":"39aaf1d4fed1382c85776581225747285b7b388c","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/events/merge_config.js","hash":"4bc10659ac9b483032a13bd3d7bce9094fd7c58b","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/events/stylus.js","hash":"675eee74f9efcbc846b89eb9ba41f130a95310ee","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/events/welcome.js","hash":"3177e070519a10fff904595e152a329115d22c61","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/events/init.js","hash":"006401bd6f4bb3fc8756e752d6ab93bf770bb77f","modified":1728381006000},{"_id":"themes/anzhiyu/source/img/comment_bg.png","hash":"91612a887446fb436e9151981e2289f2a426a3e5","modified":1728381006000},{"_id":"themes/anzhiyu/source/img/algolia.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1728381006000},{"_id":"themes/anzhiyu/source/img/default_cover.jpg","hash":"455fa65e2736f61ac36360dd4f76fc1ab6a1cdd5","modified":1728381006000},{"_id":"themes/anzhiyu/source/img/512.png","hash":"6988b23a31304d9de45b95a1e7c05dd42024e560","modified":1728381006000},{"_id":"themes/anzhiyu/source/img/favicon.ico","hash":"14310db268ea8d3b2096f434c6e293fc207f5f09","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/filters/post_lazyload.js","hash":"61f06b25c09434340e81c8c3dbbd1a0d58406652","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/filters/random_cover.js","hash":"98275d777b3c388345de3ee8caf5d16900388925","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/Introduction-card.js","hash":"61a55f9b1f5f576e6900d2900cb42754575a4cb7","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/bilibili.js","hash":"085e033cb359e8f109968748cedbd0079515e7c6","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/button.js","hash":"430c31584930bc5407811c3dbc01be92473cfcbf","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/btns.js","hash":"200e1ce72f335caa71dc8423f5c5e2aba1195b61","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/checkbox.js","hash":"fa93b169fe74bced502b0d16fe3d6bd17434b8f3","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/dogeplayer.js","hash":"e9b0d88e38d3caf88b66ea39ca704d45c643ba51","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/folding.js","hash":"dc4e409eabebf5769b50c12c9e8c66b749d0ae85","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/gallery.js","hash":"0364b021f2519a937464e585a7e2cbdde57ca412","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/flink.js","hash":"5b0086d1b726d1068b3d8ee0563ae31485896c4b","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/hide.js","hash":"37b81ff46d104554b9a5934bfd434dbfd6a84958","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/iconfont.js","hash":"ea983f7c8dd060ed411044df1c10aa6b72dec34f","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/image.js","hash":"0b7051574af6cf28c378db65f6c6dab722a8e118","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/inline-labels.js","hash":"08fbdc0ea622270e1236a28778f875c8ad2e5516","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/inlineImg.js","hash":"a43ee2c7871bdd93cb6beb804429e404570f7929","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/label.js","hash":"87acd7d5615dd8034c51ba28d4964992d2ffed37","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/link.js","hash":"a5d49f1d0e4602b0fce158efd0b1ec02c0bfd3e3","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/media.js","hash":"76efb072e0716e55deedb044fed1ad585871335b","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/mermaid.js","hash":"d3d6c8a23ddfecac35f7022eecd4ffc6171a37fa","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/site.js","hash":"bc34bfab53f520bec33d273ee599de5905ca19a9","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/span.js","hash":"0a2188be1e3ee6ed183c0f16d24795ef31116e10","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/note.js","hash":"d51812b43924f1bbf413c67499510dd125022005","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/tabs.js","hash":"dea5cd52bb9fd658bc03074b2388d91ea528fc2b","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/timeline.js","hash":"300eb779588bf35a1b687d9f829d866074b707e3","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/tag/tip.js","hash":"e45a0955439dfbe6c0b4d27f8403896a0fb1d33b","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/helpers/aside_archives.js","hash":"ca03ba2a0a7f2132ac5d3f66cb1bbd9e078aed3f","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/helpers/aside_categories.js","hash":"19244d6a9e42c34b9df2250be2467c352fa5fd41","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/helpers/catalog_list.js","hash":"aa38fd791d58df3fd518adf144578f160073d06e","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/helpers/findArchiveLength.js","hash":"d8aa1a4824ba6b0df911af563ae5fb361257a88a","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/helpers/get_version.js","hash":"f2b7364706fc4d039da4a486e133baf7accf6836","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/helpers/page.js","hash":"dff1124a8825479606e45e69e329a3ad1903ec87","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/helpers/related_post.js","hash":"c5f70efdbfd733f4dfec0ca8fe4aded0eec394cf","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/helpers/inject_head_js.js","hash":"847bc24452bc23dfc860b219588cfb2bff84cfbf","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/helpers/sort_attr_post.js","hash":"6b6e9fb0d0dc38e8d7136dc7720c70f0c29619ab","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/helpers/random.js","hash":"d659d1d05c919d1abba2dc55439749e6e5b6e707","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/helpers/year.js","hash":"94f15ddba7d29cdcc4dd52ed6c35c9c29cc19d37","modified":1728381006000},{"_id":"themes/anzhiyu/scripts/helpers/tags_page_list.js","hash":"35d71c025a3289be188371cc56320c563213c4af","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/ai-info.pug","hash":"0c2e9e58069880c0617208840cf2f0712339ddf0","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/clock.pug","hash":"c13b21cdcbc5280deb26537c58af5443cb66c62f","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/rightmenu.pug","hash":"2747252c6337d8fb7ba773cdb466611607f9a23b","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/console.pug","hash":"d46c93a7a22129795cc856045967b0e07c5e53c2","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/tags-group-all.pug","hash":"bc16fa91883895544273161cc8672bfe5c010e5e","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/anzhiyu/log-js.pug","hash":"a44b4f89f39d1e32889849c3dd1403dffa2786a4","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/header/index.pug","hash":"c865d51436cfd5413df6c691a7ab1f0eb600e79c","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/header/nav.pug","hash":"e567624b78d723346193a9b0d28032031997b865","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/bili-banner/index.pug","hash":"8cb1c404adc6fe188bdceca3c09d3f215048e9bd","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/header/post-info.pug","hash":"0f1503c88d05ada69919e0bdbbf7b2ea1603d20b","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/header/menu_item.pug","hash":"4537154b8830310ce5dff3c9cfd558f0ec1311a5","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/head/analytics.pug","hash":"15530d9ac59c576d79af75dd687efe71e8d261b0","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/header/social.pug","hash":"2185b69eb54656ed9e401bc47ca3cd9905b022f3","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/head/config.pug","hash":"068b2fe70e7f26cdd1f0ee6c75d79266ceed89dd","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/head/Open_Graph.pug","hash":"dff5b967a641f385c4661fe66ad62d53cabf857a","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/head/google_adsense.pug","hash":"95a37e92b39c44bcbea4be7e29ddb3921c5b8220","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/head/config_site.pug","hash":"3038adec24b17f019bdd7d6aa15ebe091b11397d","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/head/noscript.pug","hash":"d16ad2ee0ff5751fd7f8a5ce1b83935518674977","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/head/pwa.pug","hash":"a4cc65381275e09f3f54f6e958d359c89c7b2c4e","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/head/preconnect.pug","hash":"56ef61e74598cf60551d363a15fc53842b8dc41b","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/head/site_verification.pug","hash":"e2e8d681f183f00ce5ee239c42d2e36b3744daad","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/loading/index.pug","hash":"f86b0c45874ae1335ab575c29d4f9c8ea09ab92a","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/loading/fullpage-loading.pug","hash":"39977280dd32f1435a97f285a75f2a02902472d6","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/loading/pace.pug","hash":"7f04cabd68f75d7f953503283316e1594bbec45f","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/mixins/article-sort.pug","hash":"7a06f5f24f8e32b3025cf43474db9519d48517e5","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/mixins/post-ui.pug","hash":"80858e19caf57c275cb7d6acf3bfff7d0c90c774","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/page/about.pug","hash":"fa529ca6b5ab9001822668697f410cc3020980ad","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/page/album_detail.pug","hash":"c735533f7671905d06bae5645306cd08abb0b43c","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/page/album.pug","hash":"0ca70f1ec4757d6127048d71762752dabf1af2ea","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/page/categories.pug","hash":"f23d074ef6875311e74169da7592ecf667539775","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/page/essay.pug","hash":"b0a25ded52c72c84bd29593bd7a57046c4b36195","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/page/fcircle.pug","hash":"a4bfc9855bcfc859f0c04e869e0ec8cb8d2a1357","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/page/default-page.pug","hash":"12c65c174d26a41821df9bad26cdf1087ec5b0ca","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/page/equipment.pug","hash":"87ca40c49ddfe9c266cd96b4eb3594d7c64c1d55","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/page/music.pug","hash":"3cbec3b3dc0f0e812f29c222ebb2d2a3d8c2719f","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/page/flink.pug","hash":"3756dfd0ad97968c02a9be662dc5e9253cbc33b9","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/page/room.pug","hash":"c35a2fb076e0196ba28389b5309dde33a2add576","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/page/tags.pug","hash":"62882d8a699254486add2f7b0f089521732e4869","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/post/post-copyright.pug","hash":"10638ede3b9ea1ef4e336f5c4d690239ef353843","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/post/ptool.pug","hash":"173d1a63099109bd909de919281db9f2b2a023f0","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/post/reward.pug","hash":"cdf5ff34ba8efe526cfe77ddf3277d997d172d41","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/popup/index.pug","hash":"3ac8714556f94a614100aeddeb7f7e0cdff2fb9c","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/aplayer.pug","hash":"c7cfade2b160380432c47eef4cd62273b6508c58","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/effect.pug","hash":"6528e86656906117a1af6b90e0349c2c4651d5e1","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/footerBarSubtitle.pug","hash":"3ee6950917389032c7538ef4951570cd75717b60","modified":1748758591143},{"_id":"themes/anzhiyu/layout/includes/third-party/pjax.pug","hash":"4ee026b34e6ecc2c03cf04933973b496472309c2","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/prismjs.pug","hash":"ffb9ea15a2b54423cd4cd441e2d061b8233e9b58","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/pangu.pug","hash":"0f024e36b8116118233e10118714bde304e01e12","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/top/top.pug","hash":"9f849b05e220efa72d56f524a27ab2877e27e9e3","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/widget/card_ad.pug","hash":"60dc48a7b5d89c2a49123c3fc5893ab9c57dd225","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/subtitle.pug","hash":"ee0c2bdd8b8ec45229d781dbd6804076953ded87","modified":1748758591138},{"_id":"themes/anzhiyu/layout/includes/widget/card_announcement.pug","hash":"ed8796dd3c5710d745fdcc0021b02a3cda07fd1b","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/widget/card_archives.pug","hash":"9ca97d85cc7b214e1107d0b4feac4d8ad2fd0ac8","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/widget/card_bottom_self.pug","hash":"13dc8ce922e2e2332fe6ad5856ebb5dbf9ea4444","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/widget/card_author.pug","hash":"b7e11bcd199f343a844315e5d16735205dded9d2","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/widget/card_categories.pug","hash":"d1a416d0a8a7916d0b1a41d73adc66f8c811e493","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/widget/card_console_archives.pug","hash":"8c095ae91183d6a2aeed64f378e60baaa29d4065","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/widget/card_console_tags.pug","hash":"d723516d48cd94a68819df5c61087c9e7339e2af","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/widget/card_newest_comment.pug","hash":"419eed9a771299c9ffb85fdf38073bbd5bd7775c","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/widget/card_recent_post.pug","hash":"544272cb0977b8a941de22f1f58f76d370b2cbbd","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/widget/card_tags.pug","hash":"3475134643b70cbf0e806806bd2e0d2a7371f8a5","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/widget/card_post_toc.pug","hash":"638417324111b66c834314b96cbf02e959be58f4","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/widget/card_top_self.pug","hash":"ae67c6d4130a6c075058a9c1faea1648bcc6f83e","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/widget/card_weixin.pug","hash":"28f11437bcba4df1e53fc1e32df213392b9ca4b6","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/widget/index.pug","hash":"e33c360217b11a7980e780a5bc20e9d31f5dacf5","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_global/icon.styl","hash":"da488461e8c5e504961c0a8f44b1e3605f72f956","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_global/loading.styl","hash":"734c69c16135543267794e12b43e776d501fb6ca","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_global/function.styl","hash":"e91b257ce982b670eb911c7120f379960083c959","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_global/index.styl","hash":"55850e21e138a0ad8250f4b2ff38412fdb343d1d","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_highlight/theme.styl","hash":"c074efc93f4f118c3fc3b3d3c9f9abc42e4858b4","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_highlight/highlight.styl","hash":"4a1f547d921d1b44f1221e60a42666a63a19e5a1","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/404.styl","hash":"02a8df2e9734848cc4670a4b9f6e9a776e995644","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/aside.styl","hash":"b62fbde63342f779b4dd27492e6da878c25f7dfb","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/chat.styl","hash":"29f48f9370f245e6e575b5836bccf47eb5688d8b","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/banner.styl","hash":"62f4202467cc9f313361911ed2a2005e66b3b2ca","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/widget/card_webinfo.pug","hash":"5ddf285ca0ecbb57cbbbc36a4e9eaaca40406257","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/footer.styl","hash":"ce21052dd27e752c3734083ec1401b96c542bfda","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/head.styl","hash":"960ca89ac2456f165e0b71214ef0b1519e1690ad","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/home_top.styl","hash":"c975f539ae6bed3b24c9dc3914b412f179ee2543","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/comments.styl","hash":"3dbb4c0e1ef79eab1f327d303c3aed61ddc3f58c","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/nav.styl","hash":"200ddfe40c4a820af25fcfa71aa450b22741f6df","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/oneGraphFlow.styl","hash":"1e5843caf8674429a5782712879c4a532074514d","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/pagination.styl","hash":"88f2fbb0ccb061410b07e1ed6303583230e96d4e","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/post.styl","hash":"2a4a8af05bc24edbd14c4160b17489242164727f","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/reward.styl","hash":"152b802a38f029dece2b8f8812404cec25975212","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/rightmenu.styl","hash":"cc622c70ff61ef70dfa6445b5b4b09eb92cf9994","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/relatedposts.styl","hash":"c67558ba609b59375f8ee6ad479fcb16ddda9cb6","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/ptool.styl","hash":"2ffeca0499c6ad1c4ea2ef783d7493b713b24569","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/rightside.styl","hash":"bebc753a414d3fb807b5bf8dfeb87fe602e92e73","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/shortcutKey.styl","hash":"ca7674768558396a8e2f9eaa452575bff099e4e8","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/sidebar.styl","hash":"57d6857a1209dacb6f3fd0eb3c3f539fef3a2daf","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_layout/third-party.styl","hash":"a6b708dfeda4ad837bbfc76bd74810805ca521a0","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_page/about.styl","hash":"72a3345b9791fcf51bb74ff6eebfda4674e8f60d","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_page/404.styl","hash":"50dbb9e6d98c71ffe16741b8c1b0c1b9771efd2b","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_page/archives.styl","hash":"8652be12d88083f71a1efb88a2482a0aeda2c65f","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_page/categories.styl","hash":"f01ee74948cedb44e53cd3bb1ef36b7d2778ede7","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_page/common.styl","hash":"99ca9cb011349c045ed779bd5db9763c2073bbfe","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_page/equipment.styl","hash":"8ed450c37e8b5b5d6ce04245b54fc0877b0ad0d9","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_page/homepage.styl","hash":"7b2b2b4a7f3139f7db2d535b2ed7167db8bfd0ed","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_page/flink.styl","hash":"990a1b5d937980ec1f6f764f4b5ce371279cc451","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_page/music.styl","hash":"290dd82c05bc21a0f22a7b666f2af233e9e8bbb2","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_page/reward.styl","hash":"3a6e95f58b1692c6ee67a669fc965d9dea026186","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_page/tag_page.styl","hash":"704a74185d0e872ca3358567a2ecede5c2d35910","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_page/tags.styl","hash":"580feb7e8b0822a1be48ac380f8c5c53b1523321","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_mode/darkmode.styl","hash":"43391bb6a4d1908c87515851c41b8d97b847b49b","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_mode/readmode.styl","hash":"a5a27dea73ed993ce81ca691eff9eb71c2b311a7","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_search/algolia.styl","hash":"f7cb2effef6b4e587fad385d7c11b4b23c110589","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_search/index.styl","hash":"fd2833ec664a9de9a7b3dd1cade7d65e3ad80ddd","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_search/local-search.styl","hash":"25e58a7a8bda4b73d0a0e551643ca01b09ccd7e5","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_third-party/normalize.min.css","hash":"007ada04a97d0fcaf55ee840a03f2f10b9abcbff","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_third-party/snackbar.styl","hash":"47a90d6a87744c6e4ced18b95220debef8f278d0","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/btns.styl","hash":"903b571a6e352e5014e35e9a675b7d2d6e5b82bd","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/Introduction-card.styl","hash":"ec70e67c2a8bc1a0ebe536091d97bc326faf9973","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/bilbili.styl","hash":"081833e071be562201c56ec4db000b7ac144a39a","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/button.styl","hash":"af1840996356aeae6ffbee49ab86aa7834ab18a0","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/checkbox.styl","hash":"2a31f4c0cd31f67342564ef22254eb317d82f331","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/folding.styl","hash":"537320d4762bef842beabfbde9b27f0e2ece2ba6","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_third-party/twikoo.styl","hash":"51475a99ec3281fb98ca8707e28064f91dd9c68a","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/hexo.styl","hash":"d76c38adf1d9c1279ef4241835667789f5b736e0","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/image.styl","hash":"4cf305b1d57d0c9bfe948f916fe9b124ee62fc0a","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/hide.styl","hash":"810c54530d3799fe492d9c3d4842ab5ca4243092","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/gallery.styl","hash":"697408d915056ae6e6814e0f24ca013f68227f74","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/inline-labels.styl","hash":"d9bdac4ca48b19cc028efc1a084ebf99c38bb8ec","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/inlineImg.styl","hash":"df9d405c33a9a68946b530410f64096bcb72560c","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/media.styl","hash":"05a249c807cd7760492a9ef5914b3e363d7d1028","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/label.styl","hash":"66c59e193d794cdb02cca7bd1dc4aea5a19d7e84","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/note.styl","hash":"3b357c94cb8e80039cc1689161637d5b9690ff18","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/span.styl","hash":"f75112e431fcbef352a7ee7f0aa85e8b2f0b4a26","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/site-card.styl","hash":"5ff77bfa663aca406e3a0bd822da0d6e3c3c2c8b","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/tabs.styl","hash":"b0dc66d3daafe8c3a022f7235de3d8224cb56ec9","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/timeline.styl","hash":"3076b68fece8ef394cbd44570037e5e479fdd277","modified":1728381006000},{"_id":"themes/anzhiyu/source/js/anzhiyu/comment_barrage.js","hash":"1b30f922238f626c6a90ce2705789ba2362a2a9e","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_tags/tip.styl","hash":"0f712be285681bac71e96c48d0836b8fea52bf6f","modified":1728381006000},{"_id":"themes/anzhiyu/source/js/anzhiyu/ai_abstract.js","hash":"be52eb13a416b18337d3b1142277920072e698c3","modified":1728381006000},{"_id":"themes/anzhiyu/source/js/anzhiyu/people.js","hash":"f3d2a3d0c730124d9f64dbf59486145c05a42ac6","modified":1728381006000},{"_id":"themes/anzhiyu/source/js/anzhiyu/random_friends_post.js","hash":"1548fdc0a8cb4291bc8793dc8d321c59c097c08e","modified":1728381006000},{"_id":"themes/anzhiyu/source/js/search/algolia.js","hash":"5c2a0d0489c51c6d9e54f5a3b0c6e66a5f649450","modified":1728381006000},{"_id":"themes/anzhiyu/source/js/search/local-search.js","hash":"3ad66c75b4a0fc28a14a5478ee8a19fde72f837f","modified":1728381006000},{"_id":"themes/anzhiyu/source/js/anzhiyu/right_click_menu.js","hash":"d605ee0cab24604f97ccef5747bfacaa108645ba","modified":1728381006000},{"_id":"themes/anzhiyu/source/img/siteicon/32.png","hash":"147aae33224066ef2a5987c3cbbfa4309c49cef4","modified":1728381006000},{"_id":"themes/anzhiyu/source/img/siteicon/16.png","hash":"8dc6ca32ff1264f7c1c3a8f62727a8c96ea7525b","modified":1728381006000},{"_id":"themes/anzhiyu/source/img/siteicon/apple-icon-180.png","hash":"7f580ec4819c9ef10b1306102152f4473f037a98","modified":1728381006000},{"_id":"themes/anzhiyu/source/img/siteicon/manifest-icon-192.maskable.png","hash":"528b94ebcd34fb55436d64fdda76ef43ccbf031f","modified":1728381006000},{"_id":"themes/anzhiyu/source/img/siteicon/manifest-icon-512.maskable.png","hash":"6f8b4b3df8d1498db55a559f7106dc9b6e6af647","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/card-post-count/artalk.pug","hash":"6b8e29a8ad921ae50f8c43b8b7459ddc152b05ed","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/card-post-count/twikoo.pug","hash":"56c028ba0ea8fac19f0125114d765dfc56ce2b48","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/card-post-count/index.pug","hash":"a20dd36c318c7a37870fbc9dcecbc03f94ade817","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/card-post-count/valine.pug","hash":"39427e107230a10790972349c9dd4c4f31d55eb7","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/chat/daovoice.pug","hash":"9b57a8e13de8fc51a5f550854e47164fd8ac1be8","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/card-post-count/waline.pug","hash":"b40b0cbd0389f03fed5ddf624fa598613135046a","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/chat/chatra.pug","hash":"ddce8352b371a1fb426bdb6c33f587eb37a69647","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/chat/crisp.pug","hash":"2fb098a7aa45010a8cd212dc0bd5308c6e7c63e3","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/chat/index.pug","hash":"9eff7757c825d776edde1c1dd09623a91d891e6b","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/comments/index.pug","hash":"d5bb2cd8d96523a6693fa1bfa68c307f6c63f325","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/chat/tidio.pug","hash":"76b08a6da3eed8f90304fa6546783e5c04a792fb","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/comments/giscus.pug","hash":"1359563b73f3ce1629be49dc7780b4670f370995","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/comments/artalk.pug","hash":"a486578b5b9cd130dbe22e7b4ad5cbe724dc4678","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/comments/js.pug","hash":"29539a0f6c5622efba25805c8ff3252a70e1a2b7","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/math/index.pug","hash":"b8ae5fd7d74e1edcef21f5004fc96147e064d219","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/comments/twikoo.pug","hash":"1582986ede8a9c727004d1dc114bd7ee92880641","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/comments/waline.pug","hash":"612ab49a4a2e676c7c1110b5f618726b2dc7ddf7","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/comments/valine.pug","hash":"e54a60b1795721153faaa887b46a68b68bcd3abc","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/math/katex.pug","hash":"235fb3c8b4da8ec6b010d4d30d3594d3dbfd0bbe","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/math/mathjax.pug","hash":"fc072ac839401174b5d3cf9acd3b694246c23a55","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/math/mermaid.pug","hash":"10f3949da0889c1ec3e3617da290927d834d1f6d","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/newest-comments/artalk.pug","hash":"bbaaa94d99c345f7412803a98bf3d83722743dfb","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/newest-comments/index.pug","hash":"6dafa98f6082e909c00396a4793ed3e7c866f824","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/newest-comments/twikoo-comment.pug","hash":"3b20540a0e687cb05fd71a716e78f16a175a7d58","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/newest-comments/waline.pug","hash":"3fbf5700aedaa63ea09e8f68c063961db785fa44","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/newest-comments/valine.pug","hash":"3de61f1b229f2928ae120ecfa6166862c1735d18","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/runtime/runtime-js.pug","hash":"63391ff01fd55d8c48b3a9e46d83d4af75908ffb","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/search/algolia.pug","hash":"fbdeb32013088e8f7f4c8a6a1f20622e58dc09c2","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/search/local-search.pug","hash":"d3f133564dda5e2c51661a914ae5aab8fb9dbaf6","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/search/index.pug","hash":"a99a41334387ee9a46c6f8e8212331a29a10d159","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/share/addtoany.pug","hash":"85c92f8a7e44d7cd1c86f089a05be438535e5362","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/search/docsearch.pug","hash":"cb42537ea530d6679a46a1db092da0e91756b2c3","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/share/index.pug","hash":"b0e932171cbdfeb8a98bc1e8b78172f672f5fdfd","modified":1728381006000},{"_id":"themes/anzhiyu/layout/includes/third-party/share/share-js.pug","hash":"f61d63724ea5c5f352568b3a16bde023affefbe5","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/album/album.css","hash":"d3938a8e6edcf2be0dff02728f605406feba800d","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/album/album_detail.css","hash":"b75189ece986fa6b645751791a72d2783fbae05f","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/categoryBar/categoryBar.css","hash":"b9ab5612f4d24092388defcb8db7399445a10710","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/catalog_list/catalog_list.css","hash":"77526a3317c058a965ca44e446412f1d74b97c96","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/anzhiyu/custom.css","hash":"262291db00a343991c5472131804a4fd00deed4f","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/clock/clock.css","hash":"b91f3216c6e859f89d9348bd9517c764e607402d","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/code/code.css","hash":"976b68722d6698d7687f362532d7a0e6b6050d3e","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/aside_weixin/aside_weixin.css","hash":"17015ed4c296ea890e807716c6abe0a11ddcb906","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/commentBarrage/commentBarrage.css","hash":"a1355fe5e03c5e5dbd17761cc7a80fa9758c5891","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/fix/aplayer.css","hash":"00aee0451ccb5b2f402ecb7f358acf78c53cee60","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/code/details_summary.css","hash":"30b01d74157aaccea84c4c0d7e0ebb65f5a7f9c9","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/fix/bilibili-bangumi.css","hash":"81567514e32d5c2cc647aff121f405c7a7b50897","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/fix/bilibili-ratio.css","hash":"ad6edf2b75dd717e9dff9fe4ca4db79c1599a6f9","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/fix/categories.css","hash":"563bd4583007329c6e34c28883ee26a39af6c8f3","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/fix/clock.css","hash":"90e0bce1341d9e01aa0efaf9c70256ef5fe6139b","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/fix/comments.css","hash":"667a4182d046cb6bf0561bdb7fe8c788ae79438f","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/fix/dark.css","hash":"febe18af9e0cc45c6a35f0e0ef085c182985afa6","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/fix/fcircle_page.css","hash":"02ce333e7f9ed6b9756a6706475192e2fd3fbd4b","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/fix/hide-block.css","hash":"15e0c13f8451bfe36fa5e464b86767bd98cab70b","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/fix/link_page.css","hash":"69e5ed458c0dc10d93ebb7e4943196be1167ed5a","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/fix/gitcalendar.css","hash":"f99c63423cbedb8f12ccea673d8e79e10a4cfb6c","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/fix/hexo-tag-dplayer.css","hash":"90e6ba180e0b9267aa0bf27eb9f0a1d2e9cb3ecc","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/fix/overflow.css","hash":"71e3bd9905684e6e2ba6e18282e982d96dc4d61d","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/fix/radius.css","hash":"6ef242f7a79427da9651a26c8a07e4e56ac56a42","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/fix/site-card.css","hash":"0a662f62c69d36ac583528c02346d848aa1d026a","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/essay_page/essay_page.css","hash":"0d62e0d6b6f57fce49d347c8ce969071933dcd45","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/essay_page/home_essay_bar.css","hash":"bfb259092223dcdfcb1a652330dc8ea1236fe76c","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/console/console.css","hash":"f61b9504a5f7b33d7508c9c5201c0c21ae9f8d53","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/greeting_box/greeting_box.css","hash":"208ba729979dffdaa2f82639027a09b8c64fc5c2","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/local_search/local_search.css","hash":"d3bc30e147897fb3026284d4244c4cf195d4588a","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/friends/friends.css","hash":"a2e50f529aa1fd60732d9a892166bb1d3ae725d7","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/footer/footer.css","hash":"d94ed305398eb831b9e7160ce54510b0d25fcf67","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/home_top/home_top_post_group.css","hash":"04d9a3bd9cb247f4c391af0cd7cb47206974ceaf","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/home_top/home_top.css","hash":"4bf724bd2f1a0447532456c60701e79b906c8dd0","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/home_top/categorygroup.css","hash":"bc5b8a6cddca8c36a96ea5ecd1e56a5860bbb09a","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/home_top/swiperstyle.css","hash":"ea249de8cebc68cda7e62705df2acd7c78d13f37","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/home_top/top_group_banner.css","hash":"909b63f4b66c1c324ea302e93b3cb7c038306d0b","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/reward/about-reward.css","hash":"f95871737b0e883ab70b30948b2cd4339bf36756","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/room/room.css","hash":"82eb83dc296c045b0388cd9417ff1bc822e46f41","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/reset/reset.css","hash":"0617cd338ebe4be2820d03d88376b30e0f378c1c","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/skills/skills.css","hash":"6dcf742c38dcdf988e3d6f545fbfa0227d3155ea","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/single_card/single_card.css","hash":"1559219f059389933e435dd081af5e6e17ef4b75","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/runtime/runtime.css","hash":"7fd033212b0dcdb06ca7f7a83343ea1b6044d59c","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_highlight/highlight/diff.styl","hash":"cf1fae641c927621a4df1be5ca4a853b9b526e23","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/tag/site.css","hash":"631a068d827a84a46fa03282b4ca38936c4bc4f3","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_extra/tag/link.css","hash":"dbc87df28d7dfa366ab3c91ac61967ac48d7877c","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_highlight/highlight/index.styl","hash":"75b01603cacde3b58cc2719dce1f72458ecf3842","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_highlight/prismjs/diff.styl","hash":"5972c61f5125068cbe0af279a0c93a54847fdc3b","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_highlight/prismjs/index.styl","hash":"7751de787861a9b45cf3879fb18601abc8935bde","modified":1728381006000},{"_id":"themes/anzhiyu/source/css/_highlight/prismjs/line-number.styl","hash":"8970cc1916c982b64a1478792b2822d1d31e276d","modified":1728381006000},{"_id":"themes/anzhiyu/source/img/404.jpg","hash":"030b9c7c9d654b3d67c1249a6e5900bf40c79373","modified":1728381006000},{"_id":"source/_data/creativity.yml","hash":"a21abaaabd7a21c48f83e5c713ce94aa015e2520","modified":1748755534820},{"_id":"source/tags/index.md","hash":"659ceca5d1ed59135d60aec6ba6c92a75c2da2e0","modified":1748747026573},{"_id":"source/_data/about.yml","hash":"96f8ebe5bdbcc1f5e4ddebaa567a2d1c7c9b803e","modified":1748757644301},{"_id":"source/categories/index.md","hash":"b13e293c5f2b7cc343ee0a430f942b42d0e4a8f4","modified":1748759720890},{"_id":"source/_posts/开发/前端/Vue3动态添加输入框并添加规则校验.md","hash":"efad03e1b5fac8cf34189ba3107a36aabb22086d","modified":1748849323396},{"_id":"source/about/index.md","hash":"5d5dca2caa5add728b539a2f890c060586f08d52","modified":1748757590537},{"_id":"source/_posts/碎碎念/hello-world.md","hash":"8bd63ac23f874572526138d90e3740c33e399867","modified":1748838369255},{"_id":"source/_posts/开发/前端/Table添加序号.md","hash":"72c849985441dc2b6fdd5674ccb3225fd6726265","modified":1748849323416},{"_id":"source/_posts/开发/前端/bladex-ui常用备忘录.md","hash":"938809ff27878ee093886081d4735b06a4d36877","modified":1748849323425},{"_id":"source/_posts/开发/后端/springboot使用easypoi根据模板导出word.md","hash":"1fcef9ee79a02aab9364a5f7c8cb484d9f546678","modified":1748849323411},{"_id":"source/_posts/开发/前端/有关于时间的问题.md","hash":"de827e42579c4570f6f94e15e6c0023f7220c2c3","modified":1748849323406},{"_id":"source/_posts/开发/前端/播放FLV在线流.md","hash":"381cebe415161716048a86895872826957c30799","modified":1748849323420},{"_id":"source/_posts/开发/前端/el上传图片案例.md","hash":"8c6033c658d3aeb34daab944484cb7c89357fced","modified":1748849323402},{"_id":"source/_posts/服务器/Centos/CentosLVM挂载.md","hash":"5447bc2df752c84766b4eb73c5bf994e4967eb93","modified":1748849060981},{"_id":"source/_posts/开发/AI/DB-GPT安装调试手册.md","hash":"ccfda973d3440670d36c4b23f2fd44b5dfc44eee","modified":1748849309079},{"_id":"source/_posts/服务器/Centos/Centos安装JDK.md","hash":"56afc39eaa3d7a2ada573a375ed8200721f1c879","modified":1748849063488},{"_id":"source/_posts/服务器/Centos/Centos安装Kafka.md","hash":"729243423652ca04867f3c6cbc2a19917f95deb1","modified":1748849066137},{"_id":"source/_posts/服务器/Centos/Centos安装MongoDB.md","hash":"b41bd0617209d90b6350172791d7d03f5e5c8b01","modified":1748849075151},{"_id":"source/_posts/服务器/Centos/Cenots安装Docker.md","hash":"b9acfe3827f65e53ece31ec99eaea67c4cdbfd8b","modified":1748849057734},{"_id":"source/_posts/服务器/Centos/Centos安装Maven.md","hash":"11bf80783c9679678d0b3ca3018ef51e913442b7","modified":1748849068162},{"_id":"source/_posts/服务器/Centos/Centos安装MySQL.md","hash":"bc5b49e9c0744ef42d9ef7762651900357de5343","modified":1748849077243},{"_id":"source/_posts/服务器/Centos/Centos安装Redis.md","hash":"2937148c5ae9dabe4a0955c8c05093e1598afeec","modified":1748849081546},{"_id":"source/_posts/服务器/Centos/Centos安装maven私服Nexus.md","hash":"8796c3e7d0d0d2698d9a613b0f60e52e92d851a7","modified":1748849071132},{"_id":"source/_posts/服务器/Centos/Centos安装Minio.md","hash":"f4dcb2166c45f1c31405fd512788356cee478b95","modified":1748849073021},{"_id":"source/_posts/服务器/Centos/Centos安装nginx.md","hash":"8d24c95094d2433499498f7d5ba1a02a472d7853","modified":1748849079496},{"_id":"source/_posts/服务器/Centos/Centos安装vim编辑器.md","hash":"7b01d78565fe84059827f785f25301d9dec6246b","modified":1748849083964},{"_id":"source/_posts/服务器/Centos/Centos指令大全.md","hash":"6c2e24fb86b5b2d69fc20ca722b19f40a50c7857","modified":1748849092575},{"_id":"source/_posts/服务器/Centos/Centos安装代理服务器Squid.md","hash":"bdaf41f2c1d3b8a0ae570ad0ebe35db0c3512c2c","modified":1748849088258},{"_id":"source/_posts/服务器/Centos/Centos安装wget.md","hash":"e996f4626d621065c0d539b6a4d93cb713eddf8a","modified":1748849086094},{"_id":"source/_posts/服务器/Centos/Centos查看是否链接外网 开启外网.md","hash":"2d9736e102e58770a52e63425f6cd1c283dbec01","modified":1748849100642},{"_id":"source/_posts/服务器/Centos/Centos文件服务器的搭建SMB.md","hash":"a1d94f76669124a6bcc4f428ede63546e2d5a8c6","modified":1748849095225},{"_id":"source/_posts/服务器/Centos/Centos日志文件定期删除脚本.md","hash":"b9986d26ccc1873feefb5436b608e0debad704cb","modified":1748849098332},{"_id":"source/_posts/服务器/Centos/Centos添加端口访问.md","hash":"0479d3a07d0b12ad840004d805657d90f0fc6652","modified":1748849102782},{"_id":"source/_posts/服务器/Centos/Centos系统安装.md","hash":"f81203ed5bf0bb073e01f22e5c461c3ee2415bac","modified":1748849110740},{"_id":"source/_posts/服务器/Centos/Centos离线部署Redis.md","hash":"999ec2e6862b12b08bab5da784673edcd975d455","modified":1748849105225},{"_id":"source/_posts/服务器/Centos/Centos系统优化.md","hash":"cf62013f205438f9ade6e76f6f855c83dd07c8b2","modified":1748849107680},{"_id":"source/_posts/服务器/Centos/Centos系统校时.md","hash":"8b84c88f7d534accd8a52a45b27e879fa5cb5c87","modified":1748849114773},{"_id":"source/_posts/服务器/Centos/使用Xtrabackup备份MySQL8.1数据库.md","hash":"070c9aef77b61eb0f97bfb2064b08ff5de4b875b","modified":1748849122364},{"_id":"source/_posts/服务器/Centos/rclone.md","hash":"45d655688c377aa1b8e1ca0cfd7683508f5335a4","modified":1748849120228},{"_id":"source/_posts/服务器/Centos/Centos防火墙设置.md","hash":"ad51ba0011498c457a5838b4544f14d335a7e678","modified":1748849117422},{"_id":"source/_posts/服务器/Centos/配置Jar.sh脚本.md","hash":"e0c302d56e4842cc02758fd0033d608298235f89","modified":1748849127892},{"_id":"source/_posts/服务器/MySQL/MySQL添加外部访问权限.md","hash":"2b3496faeacdcc660a2f416e8f3aac0ee7afb492","modified":1748849263690},{"_id":"source/_posts/服务器/Centos/宝塔面板关闭安全入口.md","hash":"440f536f634664176accf59b7141802cedf850c4","modified":1748849124376},{"_id":"source/_posts/服务器/MySQL/MySQL问题大全.md","hash":"25b240cae5c7e432979fa6fb99bf6f15ea9ec49a","modified":1748849265906},{"_id":"source/_posts/服务器/Docker/Centos系统安装Docker.md","hash":"f3c927adaeb2017fa0851a5b5cd9a1f5d4ed2a94","modified":1748849133218},{"_id":"source/_posts/服务器/MySQL/Ubuntu安装MySQL8.1.md","hash":"46edf24d2958aa208400ba2e9222779f5e3ffeda","modified":1748849268275},{"_id":"source/_posts/服务器/Docker/Docker容器实例.md","hash":"06e6ec437281a9b406dfcd576860184074b7204b","modified":1748849137019},{"_id":"source/_posts/服务器/Docker/Docker换源.md","hash":"57bdd1b117e9717a1f324619c567b85557a25cb7","modified":1748849140488},{"_id":"source/_posts/服务器/Docker/Docker操作容器.md","hash":"fe51ee4c2c335dd2a9578093bb4cd146f8e1aaa0","modified":1748849143280},{"_id":"source/_posts/服务器/Docker/Docker打包本地镜像.md","hash":"40a4e97898e9df9220d320c9cbae4bc5a835ee68","modified":1748849138654},{"_id":"source/_posts/服务器/Docker/Docker管理脚本.md","hash":"90df2d114fd66cd3a0caecc4a08ef868a297964a","modified":1748849150830},{"_id":"source/_posts/服务器/Docker/Docker操作镜像.md","hash":"6693a313afb9b30e8ab847f769a0cd30881fd1cf","modified":1748849145799},{"_id":"source/_posts/服务器/Docker/Docker系统命令.md","hash":"46e43514b96addc0d77d010ca5993982304f5d1e","modified":1748849153314},{"_id":"source/_posts/服务器/Docker/daemon.json.md","hash":"20e0ef797ae5c107873cee3247e720ff7d93836f","modified":1748849135140},{"_id":"source/_posts/服务器/Docker/Docker更换工作目录.md","hash":"19154ab96119be31b76a902237908c407009fee2","modified":1748849148180},{"_id":"source/_posts/服务器/Docker/Docker网络允许外部访问.md","hash":"7e36e77c93a526e102df3274c82343da30bec83e","modified":1748849155181},{"_id":"source/_posts/服务器/Docker/Ubuntu安装Docker.md","hash":"65b80c6c6a2b7248d4646bf80ae41ec35b9765e7","modified":1748849159133},{"_id":"source/_posts/服务器/Nacos/安装Nacos配置中心.md","hash":"6abf06121c9ca2999739df2113a42fdc4d200f1f","modified":1748849273725},{"_id":"source/_posts/服务器/Docker/Docker限制日志数量.md","hash":"47108e0b55a9d02ccf3f1d261cbb91a0d9ee00a8","modified":1748849157172},{"_id":"source/_posts/服务器/Nacos/Nacos开启鉴权配置.md","hash":"46ea8b685ad467715c327fa86da6b32bbabfbfc5","modified":1748849271001},{"_id":"source/_posts/服务器/Kubernetes/K8s修改数据目录.md","hash":"494e37f0d979468c56656b8a793fa99400c053b8","modified":1748849252699},{"_id":"source/_posts/服务器/Kubernetes/离线安装Kubesphere 4.1.md","hash":"ab657aebcc52a07f59fc6bfcdec6ef867a4b4109","modified":1748849257761},{"_id":"source/_posts/服务器/Kubernetes/离线模式安装插件卡住.md","hash":"96031e306e3c9cfc9a76d4a5b6cca7b21075c680","modified":1748849260309},{"_id":"source/_posts/服务器/Kubernetes/修改Kubelet默认工作目录.md","hash":"4d4b1d2198bd978da9b71e38ddb9443d606fa571","modified":1748849255120},{"_id":"source/_posts/服务器/Redis/设置redis密码.md","hash":"35257923f1821165336e5a3416272c58be8faef8","modified":1748849287491},{"_id":"source/_posts/服务器/Nginx/Nginx反向代理Minio.md","hash":"2a826eab506d8f30381983c572a36aed6515a703","modified":1748849279189},{"_id":"source/_posts/服务器/Redis/外部访问Redis.md","hash":"b1d31bfe89cda8f0f8e2adf6b89cc7db7692f113","modified":1748849285040},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Compose 命令.md","hash":"051f12dad31d8e8e0cbc8618cf4000bcd5fdd118","modified":1748849217366},{"_id":"source/_posts/服务器/Redis/Redis注册成服务.md","hash":"77764d88920798a0b2ad4ceb8f88c45902cbec35","modified":1748849282456},{"_id":"source/_posts/服务器/Kubernetes/manifest/RabbitMQ.md","hash":"fa4100d05820f0805a72dc4872bdcef4a445496c","modified":1748849250024},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Compose 安装.md","hash":"3712bf2433f69e7ce4ddf5b7fa5886e20c79b03d","modified":1748849219394},{"_id":"source/_posts/服务器/Docker/Docker-Compose/docker-compose 网络深究.md","hash":"b0441919cb86ef6f6ad8c81e749786997cb89aec","modified":1748849222744},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Alist.md","hash":"edbd3d30053392ac35c77506a2f84f0c172f1288","modified":1748849162703},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Elasticsearch.md","hash":"7426cf421af2d0d5070e48dca768601ffcb62048","modified":1748849170791},{"_id":"source/_posts/服务器/Docker/Docker-Compose/yml 配置指令参考.md","hash":"6c006fa5842fcca827da06422c8fcea70865fd8b","modified":1748849225485},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Dashdot.md","hash":"1f1ee926480d07cb706c165d6fac208105fbc4e6","modified":1748849168275},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Immich.md","hash":"b20f7cb40b47f70312767f58d3bdcb3210af3441","modified":1748849188888},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Halo.md","hash":"a7637f3604ab9d7aa8f39d37f9f470a2ff2a3c17","modified":1748849183054},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Homarr.md","hash":"6feafac3222d7d43ffc157b074929b007d5e6287","modified":1748849186199},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Sun-Panel.md","hash":"0fb578c3562d0f24d8e5b819a0042a51410e8c25","modified":1748849208982},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Jenkins.md","hash":"1f4e2328fe9a9d9889a33f59917e267caffb1056","modified":1748849191050},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Memos.md","hash":"abc363a276b858edce40dca3d2c25b184f23e5e2","modified":1748849198724},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/bitwarden.md","hash":"ed9ec3a0f8e5941649bf7798bafdb028c3561222","modified":1748849165728},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/flare.md","hash":"80912391bb816f6d7e9c8f3b4ef94b9d021d6aee","modified":1748849178471},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Portainer.md","hash":"db54a2c0c732ee689c82ca3b8964abaabf871efd","modified":1748849206660},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/MinIo.md","hash":"7e1165b47915e1399082781dfceb837a628da4b2","modified":1748849201146},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Nginx.md","hash":"e4f4fb356e5755cdf589fc1759359d8fa4323087","modified":1748849203402},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/lsky-pro-plus.md","hash":"d8b549d0940454dbe5e66c921249fd596430b26b","modified":1748849193907},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/synctv.md","hash":"be92c216cc13e8a1dd3f0d73459de35b6a9d451c","modified":1748849211535},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/lucky.md","hash":"7fdadc23d3b55f3c03419c75b8ddb7f453add256","modified":1748849196070},{"_id":"source/_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/wordpress.md","hash":"25311feaf79c9c6c23232aa9e9adbfb20b8cae4d","modified":1748849214373},{"_id":"themes/anzhiyu/source/img/friend_404.gif","hash":"4c0a482bce3710942aff900d62c48333827e5a53","modified":1728381006000},{"_id":"themes/anzhiyu/source/img/loading.gif","hash":"b9e8d78b86bc48d565e26c8c1ea275c2c758fb0d","modified":1728381006000},{"_id":"public/anzhiyu/random.js","hash":"56d1cf175d9da096853c37bb20384acbc6c51e6b","modified":1748850152939},{"_id":"public/404.html","hash":"2d0ba8cb6422ff5fcc8dd228645fb1c77525c369","modified":1748850152939},{"_id":"public/tags/index.html","hash":"d8964bf6d779a52830fc4a2417e801893381abb9","modified":1748850152939},{"_id":"public/about/index.html","hash":"bbc43a1da41713dad40bd8223577682ff137aa4f","modified":1748850152939},{"_id":"public/categories/index.html","hash":"cfc7c85fc88e54877a01c81a69f9028974f131a7","modified":1748850152939},{"_id":"public/p/e3de.html","hash":"79c08bb0ea8c9a6112fd1636f28f7104747ad423","modified":1748850152939},{"_id":"public/p/6975.html","hash":"e67c5f95896d5a13ec674c25c9fc4370e5b7464d","modified":1748850152939},{"_id":"public/p/81d2.html","hash":"5122deb45143898b7834ccef76d8e345fd92591f","modified":1748850152939},{"_id":"public/p/54b7.html","hash":"4f11b4cbfcd86ade06575c0d59a77e5b4d4b2622","modified":1748850152939},{"_id":"public/p/1b6d.html","hash":"2e1958f75c29393bd5aa034b74378db495ec908b","modified":1748850152939},{"_id":"public/p/143f.html","hash":"00edbbf133e797f30d10364323fa2cca2934634f","modified":1748850152939},{"_id":"public/p/f5a0.html","hash":"68a6372782b1c71462d67be6f51a49e10c8410fa","modified":1748850152939},{"_id":"public/p/8018.html","hash":"f12f162a815323294cc32aca8d7e67a061cc720a","modified":1748850152939},{"_id":"public/p/8fa6.html","hash":"83668c76a858f8c424bcadd914f57ee393b8c00a","modified":1748850152939},{"_id":"public/p/e8.html","hash":"9453a9396ab3373e408f1e0f597d63fa333ff797","modified":1748850152939},{"_id":"public/p/9863.html","hash":"bbe5a842c5f61cef36542c64da4811e012434cbb","modified":1748850152939},{"_id":"public/p/4436.html","hash":"bf70df4b47a502c3ff569b1769ce9214fefa1148","modified":1748850152939},{"_id":"public/p/3fb4.html","hash":"d2d6e50fdde029eb255d05a2ae7c4ef67687429b","modified":1748850152939},{"_id":"public/p/bf88.html","hash":"137529ec07cd66818fae0feed4f50fb5d65bbc34","modified":1748850152939},{"_id":"public/p/ded3.html","hash":"f6d447e957a9aa339726f12c9dca8aac2ebabd21","modified":1748850152939},{"_id":"public/p/4581.html","hash":"fbfd30da092947747c9bbfa2704ffa85982b83e2","modified":1748850152939},{"_id":"public/p/4f54.html","hash":"458eba0402568bde5d70a60fb4abed060a44a0aa","modified":1748850152939},{"_id":"public/p/b30e.html","hash":"17ca9490b4916438b3c0098837bf52c9b776d12f","modified":1748850152939},{"_id":"public/p/f403.html","hash":"d70ffd22c9e4e726e4bf18211fc6d480cc4a0048","modified":1748850152939},{"_id":"public/p/159.html","hash":"ed5993778d9c34ac8fa1918e4b0ea1665016f750","modified":1748850152939},{"_id":"public/p/2f49.html","hash":"602ced078435086bc417b246b0a4b10b00bb54f4","modified":1748850152939},{"_id":"public/p/bb89.html","hash":"9da3e549a0b50c527863efc531ef6d0f7334e98f","modified":1748850152939},{"_id":"public/p/c42c.html","hash":"bbb8534eea7c039a02528ebd0848e8d8a0744a12","modified":1748850152939},{"_id":"public/p/6812.html","hash":"8ff2e74a2c7ea56dca9b0b2793f47cd102b7886f","modified":1748850152939},{"_id":"public/p/4966.html","hash":"8f4a8f3dbe92fccfcb82222d1341ed54ff07d2a9","modified":1748850152939},{"_id":"public/p/7fcd.html","hash":"19661f7fc31c1d4fe2ec437e3b3a1adf607edfae","modified":1748850152939},{"_id":"public/p/943e.html","hash":"140c14434bbb5bd46f6d10a148f941e808922da1","modified":1748850152939},{"_id":"public/p/2006.html","hash":"1b73064e1332f1c00b9aada373892ba2d49c39f1","modified":1748850152939},{"_id":"public/p/4bdb.html","hash":"23968ea64e92b2bfe624ebdd8d4d165e6aed04d8","modified":1748850152939},{"_id":"public/p/2e3f.html","hash":"2dcf17bc9fa5544ab8e01455f43de8e2c4905fe4","modified":1748850152939},{"_id":"public/p/3af.html","hash":"9c767062dd90d9ee68e05eeff8e29f979ffb8956","modified":1748850152939},{"_id":"public/p/7d84.html","hash":"c7acf19ef4289e8062a099bf72cd4f0621d69e6e","modified":1748850152939},{"_id":"public/p/db3.html","hash":"2db820b95f36f516b33e9df18dfc484c9815c439","modified":1748850152939},{"_id":"public/p/1012.html","hash":"dd3eb94bf51ae43421184c4ec76836fef5e6bf6f","modified":1748850152939},{"_id":"public/p/177d.html","hash":"b0b71548837266dcf3329cfcb94eea63454c99c9","modified":1748850152939},{"_id":"public/p/5a3f.html","hash":"824da385368840641baaebbc49208614a740ccd9","modified":1748850152939},{"_id":"public/p/3939.html","hash":"0a75684d30d439a746982abaaec3f6687cc68cd4","modified":1748850152939},{"_id":"public/p/ac41.html","hash":"48fd5d3ab8c93b25c871b0c8275aa74f69ec1226","modified":1748850152939},{"_id":"public/p/1917.html","hash":"b9946ca473f4714fb65cdfed4db873b33e80a40e","modified":1748850152939},{"_id":"public/p/d426.html","hash":"f35e29acf1525db5546e14f86b54edd2600d075e","modified":1748850152939},{"_id":"public/p/bec6.html","hash":"9c1f16b2d4d8d37b5d88952515e1deaddcf01151","modified":1748850152939},{"_id":"public/p/f4db.html","hash":"b847e43f12661e50fb18d95d09ff4109e17956db","modified":1748850152939},{"_id":"public/p/ba30.html","hash":"88e2823c0b985853cde979eb8bf3ffe5895bbcdb","modified":1748850152939},{"_id":"public/p/7343.html","hash":"6d470cbb60cc773c1193d7a2a25bac5ff05b260b","modified":1748850152939},{"_id":"public/p/62eb.html","hash":"945c621ea894415c61f158731c2cadc180fc1d01","modified":1748850152939},{"_id":"public/p/7dbf.html","hash":"0e227eb69ad727a819d06571623da19bbd755d81","modified":1748850152939},{"_id":"public/p/3e17.html","hash":"65c8fdc073e874a762caf3762bd7462119e0f62c","modified":1748850152939},{"_id":"public/p/f40e.html","hash":"bd5872369b06b500d5094a1557b4e6fb825cbe06","modified":1748850152939},{"_id":"public/p/1984.html","hash":"d89a9bc511c59bda23304939ac99d1b3a1175fe6","modified":1748850152939},{"_id":"public/p/302a.html","hash":"0819f0c5b84d49ac2b77716187ab166bde60e826","modified":1748850152939},{"_id":"public/p/647a.html","hash":"eb94ad4a5dbe95351a4a30e484e1c659df415096","modified":1748850152939},{"_id":"public/p/ea1d.html","hash":"2052ad3fb9d694bb454fab0ba011605bdd8a518a","modified":1748850152939},{"_id":"public/p/bf3.html","hash":"bceba2e82cd539a8f97fdc99fceebc25c476d45c","modified":1748850152939},{"_id":"public/p/89eb.html","hash":"a681c1e022a66e421600c6bdc54a6b7111d43c0e","modified":1748850152939},{"_id":"public/p/c77.html","hash":"2030c489099dfb49d00441a8f62a59294cb076bf","modified":1748850152939},{"_id":"public/p/a503.html","hash":"47c9767f77c96e7e792ad33a467d2348a63aa0e7","modified":1748850152939},{"_id":"public/p/648e.html","hash":"801651b74c2da3bbbe40caee5a2ab87335e256a9","modified":1748850152939},{"_id":"public/p/ab90.html","hash":"ad6904c0eae5acc7f8d8bb525665197a34695af1","modified":1748850152939},{"_id":"public/p/7763.html","hash":"c70a2289381dfb951418b421c2235dea92499bb7","modified":1748850152939},{"_id":"public/p/b3cc.html","hash":"a481763e983c6bd460f5b4e9164a28ac166e8798","modified":1748850152939},{"_id":"public/p/3974.html","hash":"1cc31c691a2a1b98391643e6ed0a81877124e435","modified":1748850152939},{"_id":"public/p/f95c.html","hash":"0a1fb634457a1a95e8007d87fbaaed23f79ff741","modified":1748850152939},{"_id":"public/p/bb70.html","hash":"eb0547905fa0369ad8cb748df7308bc49a0a895c","modified":1748850152939},{"_id":"public/p/9d28.html","hash":"d87353e6bff48cc467ca4dca6372436faa667ae4","modified":1748850152939},{"_id":"public/p/c7c5.html","hash":"0f017932b772060f87afafe11c18aab5a3e858fb","modified":1748850152939},{"_id":"public/p/f6eb.html","hash":"0fba9f4aa149b518d7a76fc76463c161fc44cdff","modified":1748850152939},{"_id":"public/p/2e58.html","hash":"b07d77f78186d60857f922f09b6490300981b38d","modified":1748850152939},{"_id":"public/p/a25e.html","hash":"08639e0c88f6a1083df86eb47c9f1800f1ae2a78","modified":1748850152939},{"_id":"public/p/984c.html","hash":"0088900a60af05938b241d4b1ae429c3a959a40a","modified":1748850152939},{"_id":"public/p/d070.html","hash":"8537627b1f968ae7c70112b63bed77d77cc04be2","modified":1748850152939},{"_id":"public/p/c5b7.html","hash":"c0bfc04583600a71e1c84124ab853cd22c0723f4","modified":1748850152939},{"_id":"public/p/e395.html","hash":"85baa38b8a0fa99c8f6cb55364483a71c20700ff","modified":1748850152939},{"_id":"public/p/d6fb.html","hash":"0e2e44d30b18d29f199be416f3c0b5006cca0407","modified":1748850152939},{"_id":"public/p/89c7.html","hash":"7077ee920e9b03ea5735c8f30e5643f430acccd9","modified":1748850152939},{"_id":"public/p/13f0.html","hash":"971f0dc4d63203d3076628d032313fdc288d360b","modified":1748850152939},{"_id":"public/p/d647.html","hash":"ea24a5e435f2ddc6e7c6008587db2962768eed35","modified":1748850152939},{"_id":"public/p/ebcd.html","hash":"41a5cc96c7258f017e4e0f201b99308c121f696f","modified":1748850152939},{"_id":"public/p/5068.html","hash":"0fc415fa10b53908ae5f9324bc11d5a6a50ed0ae","modified":1748850152939},{"_id":"public/p/161a.html","hash":"4006698e0f99d65d92e8564d261f165a0eb7c3d5","modified":1748850152939},{"_id":"public/p/ed95.html","hash":"f4dad124dda3bf56facf3989ac434eaabab673c9","modified":1748850152939},{"_id":"public/p/3eeb.html","hash":"f127b2c5c32ce21f65564cfdc7ad83c7986ba652","modified":1748850152939},{"_id":"public/p/5a47.html","hash":"59667593bd4f0e3f1fa74eafb315f711549129e4","modified":1748850152939},{"_id":"public/archives/index.html","hash":"aba9f583939797cd319c4e26c833e4fd5fba45ee","modified":1748850152939},{"_id":"public/archives/page/2/index.html","hash":"f2ce84cbc31283904829057b9ba6f3bcd8ff0454","modified":1748850152939},{"_id":"public/archives/page/3/index.html","hash":"ca9adf50020bd3f1ec4d58ff4ea0b8fbbd063ee1","modified":1748850152939},{"_id":"public/archives/page/4/index.html","hash":"5f283bd82183e73f42221a6222ee0a5dbca33d30","modified":1748850152939},{"_id":"public/archives/page/5/index.html","hash":"0bd65bf8fb7ced63254acb874bf58d81c4fb563f","modified":1748850152939},{"_id":"public/archives/2022/index.html","hash":"5bde13425e2650551a88cca5ca593dea85b62aab","modified":1748850152939},{"_id":"public/archives/2022/03/index.html","hash":"a3c96fac69dec1733a4f2702ce331e56d0dd87fc","modified":1748850152939},{"_id":"public/archives/2022/04/index.html","hash":"666d5380f4a53c371feadc8fbc2f6d2bad931986","modified":1748850152939},{"_id":"public/archives/2022/08/index.html","hash":"2e35d344d479003319df658fda9e925fbcb7deaa","modified":1748850152939},{"_id":"public/archives/2022/12/index.html","hash":"3adfcf69a2711639eb310ec07590903027c0d44b","modified":1748850152939},{"_id":"public/archives/2023/index.html","hash":"92016dc54df0a6ee2be347d2234e24476abbe66e","modified":1748850152939},{"_id":"public/archives/2023/10/index.html","hash":"8669fde66166f2b40110acd38461945f8cbeef0f","modified":1748850152939},{"_id":"public/archives/2024/index.html","hash":"a82d887c6a23ea8abe96f7ca388117fc2bc8b852","modified":1748850152939},{"_id":"public/archives/2024/page/2/index.html","hash":"9b70b6f3c8b7b38f771e1562620940498e904859","modified":1748850152939},{"_id":"public/archives/2024/08/index.html","hash":"9e225cfb0a5c402529b0b06718e1c2b26085f73f","modified":1748850152939},{"_id":"public/archives/2024/10/index.html","hash":"f4674c4aa80948a4561fa592de0bac07db922886","modified":1748850152939},{"_id":"public/archives/2024/12/index.html","hash":"f9eb45276aae8e8d91ea75eb9f17d664ed2fe6f8","modified":1748850152939},{"_id":"public/archives/2025/index.html","hash":"faa352ca1891e95490c6e2b572619d29f8f4eaf6","modified":1748850152939},{"_id":"public/archives/2025/page/2/index.html","hash":"3e13a729896f57f33cc2394686e84d10fef81937","modified":1748850152939},{"_id":"public/archives/2025/page/3/index.html","hash":"4ca91addf474cfff5ea4b9af1d8f8d6f228b8478","modified":1748850152939},{"_id":"public/archives/2025/01/index.html","hash":"2512bd3bb53a27c38e662de80ec5d15dfad3d370","modified":1748850152939},{"_id":"public/archives/2025/02/index.html","hash":"c673537c610158bc972b07b37416d745aa3703cc","modified":1748850152939},{"_id":"public/archives/2025/02/page/2/index.html","hash":"8a7a18ef5faff7c35aa58e166810e4bb9bbba9a4","modified":1748850152939},{"_id":"public/archives/2025/03/index.html","hash":"3c0226c8418b31fc8e0c5a9304b5a2e7f104db03","modified":1748850152939},{"_id":"public/archives/2025/05/index.html","hash":"2360ff562ddf942da7aa262b3a286706724f0af9","modified":1748850152939},{"_id":"public/comments/index.html","hash":"82e07a1c271fd4fb8ac9ca646685b0d8819f28d5","modified":1748850152939},{"_id":"public/archives/2025/06/index.html","hash":"3c453bf1ee7685603dd5f5c6f7a6b230ae066fe1","modified":1748850152939},{"_id":"public/categories/后端/index.html","hash":"97638aaf42fdabcb79b919dadd62518f032e6316","modified":1748850152939},{"_id":"public/categories/碎碎念/index.html","hash":"f002c69e2c2f9c9030bfbf38d92082f3f6bee581","modified":1748850152939},{"_id":"public/categories/前端/index.html","hash":"4d453df02f237c482d17635efbebf072f77c457d","modified":1748850152939},{"_id":"public/categories/AI/index.html","hash":"f84a0025213b64fa964d45bc358b8372c322b630","modified":1748850152939},{"_id":"public/categories/服务器/index.html","hash":"b941a8956d956891c6b5fafa4875330935278758","modified":1748850152939},{"_id":"public/categories/服务器/page/3/index.html","hash":"5fcdf31dc4ed53152782a0f37dc8611cd6fc64da","modified":1748850152939},{"_id":"public/categories/服务器/page/2/index.html","hash":"a86db795f16b1daf847101deb69790e36cb360ad","modified":1748850152939},{"_id":"public/index.html","hash":"0422eaa38b6da054fc5fd54f2f5e65aa46657caf","modified":1748850152939},{"_id":"public/categories/服务器/page/4/index.html","hash":"55b397a1cdebd6422f552a90f227ed06aacf53ab","modified":1748850152939},{"_id":"public/page/2/index.html","hash":"038cf8d43ce436c9c2d224b1effdcce84bc5e003","modified":1748850152939},{"_id":"public/page/3/index.html","hash":"459f7c61606da19d97969e6fc1e69725316c0575","modified":1748850152939},{"_id":"public/page/5/index.html","hash":"1a9a80c625a4dd3a6f64a89b2ed298a780fcb1b3","modified":1748850152939},{"_id":"public/page/4/index.html","hash":"5c6e6ff2895d212e323b8fa7e84f3b87f3a8c69d","modified":1748850152939},{"_id":"public/page/6/index.html","hash":"ecd4dd9c89c58c57f50b6b250d88a1a3e075fb5d","modified":1748850152939},{"_id":"public/page/7/index.html","hash":"c754c036dcb1f2a499f9339700b8b1bdf4aa7656","modified":1748850152939},{"_id":"public/page/8/index.html","hash":"0b3a9da4c815cee02d37794feb9553919f7e74b2","modified":1748850152939},{"_id":"public/tags/vue/index.html","hash":"f2bf4373d26df4b4115def25e515c00043d8d1d6","modified":1748850152939},{"_id":"public/page/9/index.html","hash":"c9815324bacc2b8a67a42368eae36891d235e1ba","modified":1748850152939},{"_id":"public/tags/bladex/index.html","hash":"403b3d96543891c0840463a396a70b6dcd32cbf3","modified":1748850152939},{"_id":"public/tags/SpringBoot/index.html","hash":"35121c50f87b6aa9dc4b6b53aad5736da6067387","modified":1748850152939},{"_id":"public/tags/flv/index.html","hash":"753c6732e44477c8fd86c193e7a0555794c4df56","modified":1748850152939},{"_id":"public/tags/easypoi/index.html","hash":"f3c9ba828af134d3e17bfc63a026e4ef56b3dda5","modified":1748850152939},{"_id":"public/tags/Centos/page/2/index.html","hash":"6e353cb2a227c2a756a0c602992d3ace95058efd","modified":1748850152939},{"_id":"public/tags/Centos/index.html","hash":"b11b740ebe05623515157f0f90eee44e11e8faa0","modified":1748850152939},{"_id":"public/tags/DB-GPT/index.html","hash":"a93664c6c21376b10ed2e222299ca2a28b6a73ee","modified":1748850152939},{"_id":"public/tags/GPT/index.html","hash":"ec6c4244d5794644e17fced0f99a7b8a4a330022","modified":1748850152939},{"_id":"public/tags/LVM/index.html","hash":"3222857e1d527cce48d9366a45d5db438d6e0ef1","modified":1748850152939},{"_id":"public/tags/Docker/index.html","hash":"e63507a45356ee1ee38d8a509ab81368156a614a","modified":1748850152939},{"_id":"public/tags/Docker/page/2/index.html","hash":"2bb7533697a6edc8484de77341a25e005f392522","modified":1748850152939},{"_id":"public/tags/食用教程/index.html","hash":"f301afabff43168686a133285949d573c7e4bdd9","modified":1748850152939},{"_id":"public/tags/食用教程/page/2/index.html","hash":"eda2df62b39d9c3e9ec9ae549647902d7d8caaf7","modified":1748850152939},{"_id":"public/tags/Java/index.html","hash":"83a723bb42cc0f5d51f00ea44c1e853bf6e1553b","modified":1748850152939},{"_id":"public/tags/Kafka/index.html","hash":"5fad27c0b7e2878caf8261cf577a64e0987392bf","modified":1748850152939},{"_id":"public/tags/Maven/index.html","hash":"2917e9c88ae0595dfd8024137d244f507b98e081","modified":1748850152939},{"_id":"public/tags/MongoDB/index.html","hash":"5e7d28ec745abe8f6727904a24079dbe1f00a24a","modified":1748850152939},{"_id":"public/tags/MySQL/index.html","hash":"429f04a8cf63775731a386d45c2d28fc0d76b765","modified":1748850152939},{"_id":"public/tags/Nexus/index.html","hash":"d1537af4053595fcceff9187b77350effbaee27a","modified":1748850152939},{"_id":"public/tags/Minio/index.html","hash":"8106400cae671a39abafdcfe9e319f785b540ed7","modified":1748850152939},{"_id":"public/tags/Nginx/index.html","hash":"0f7ab5fbb5064d90b37d5e84cc5645576aa6b6e6","modified":1748850152939},{"_id":"public/tags/Redis/index.html","hash":"252a86c402a3d93377bc339638e21adf416ffea2","modified":1748850152939},{"_id":"public/tags/Vim/index.html","hash":"a81abf7ea1399510919e9573e2bc1a07f85f3e05","modified":1748850152939},{"_id":"public/tags/命令/index.html","hash":"50e6b42caf23d4d0c1b18da03afdfa587f744348","modified":1748850152939},{"_id":"public/tags/Squid/index.html","hash":"cec9e9f5f0a4f48e0497104b611083ec894ca494","modified":1748850152939},{"_id":"public/tags/Wget/index.html","hash":"c341eb66e88cd3dbee3290ac04d27128a6c25c1f","modified":1748850152939},{"_id":"public/tags/Samba/index.html","hash":"f58d45f1927ddfeb0fd2b02bdf9a3f7665332671","modified":1748850152939},{"_id":"public/tags/网络/index.html","hash":"5898ac54be8cdda9697301907e91e867a585eb12","modified":1748850152939},{"_id":"public/tags/SH脚本/index.html","hash":"0527fe82ca2efb67db9c49a5e433c3315c9d6132","modified":1748850152939},{"_id":"public/tags/Xtrabackup/index.html","hash":"c69550d4f1bcd64977c00e575af7aeb720e0d988","modified":1748850152939},{"_id":"public/tags/Docker-Compose/index.html","hash":"00be3f00dbdf5856cb95ada9f334bbf4ff7706b8","modified":1748850152939},{"_id":"public/tags/Docker-Compose/page/2/index.html","hash":"008ad3c40b964b27f25145a47b3ec33860f18dcc","modified":1748850152939},{"_id":"public/tags/lucky/index.html","hash":"7635b2db60715e06cfbe542d326bf8d59be32f65","modified":1748850152939},{"_id":"public/tags/宝塔/index.html","hash":"dff033bfa156ad17a78ab4346ac3f7222685763c","modified":1748850152939},{"_id":"public/tags/java/index.html","hash":"7d9dc38d409abee038456414dc24f3fd433e3597","modified":1748850152939},{"_id":"public/tags/Ubuntu/index.html","hash":"71f78f6e00291222375514e564ee0e318b906b01","modified":1748850152939},{"_id":"public/tags/Nacos/index.html","hash":"4ad570181c10d2f1933400b2d67877ea4f8e26da","modified":1748850152939},{"_id":"public/tags/K8S/index.html","hash":"98684baa30e9e6797b5a491a14fb2f23e2e9f217","modified":1748850152939},{"_id":"public/tags/Kubesphere/index.html","hash":"5ae4431dcada42e52e413a05cdf40dc88bba9322","modified":1748850152939},{"_id":"public/tags/RabbitMQ/index.html","hash":"bf5d4b25cf0a2264e9cb5ddec952cbca63fde82a","modified":1748850152939},{"_id":"public/tags/Alist/index.html","hash":"d46a27ac1c7acd966c0e81bfc05404dd029753be","modified":1748850152939},{"_id":"public/tags/Dashdot/index.html","hash":"7f0ca82e02cc48b0490f4e11ed78117103755508","modified":1748850152939},{"_id":"public/tags/Elasticsearch/index.html","hash":"debf873ffe8837f31ee8ed3a79e754f4e3834ae0","modified":1748850152939},{"_id":"public/tags/Halo/index.html","hash":"ae48d0d8912a67e0753a2b5dc6f7ead8b216d602","modified":1748850152939},{"_id":"public/tags/Immich/index.html","hash":"6c649d4e0f80412d8a2a13a0e4865f104bdb6982","modified":1748850152939},{"_id":"public/tags/jenkins/index.html","hash":"a07fcdedcd1b6989c3cbaa5a373ce385e176b900","modified":1748850152939},{"_id":"public/tags/Homarr/index.html","hash":"5be5271e134ab93ca03673613e4fc09ee7ef6419","modified":1748850152939},{"_id":"public/tags/Memos/index.html","hash":"cb7dc1e0a2e03165feaea762244efa9f7d6b0d3e","modified":1748850152939},{"_id":"public/tags/Sun-Panel/index.html","hash":"bc537d0fd857a0c23a77b8832874df1ea5424ba4","modified":1748850152939},{"_id":"public/tags/bitwarden/index.html","hash":"3e0fb5df4cc5f5f3d0ae779e27408a0b211174e0","modified":1748850152939},{"_id":"public/tags/flare/index.html","hash":"2e6c65aa12b05c03d5c086e1d46077391d77a3b4","modified":1748850152939},{"_id":"public/tags/Portainer/index.html","hash":"78a4790ef3a7d5e7ffb95fdc768234ce61845126","modified":1748850152939},{"_id":"public/tags/lsky-pro-plus/index.html","hash":"5985c28f3e7614c8cc3e2faed3674bbb62ed1945","modified":1748850152939},{"_id":"public/tags/synctv/index.html","hash":"9ab318bfa409e7d6fc1a7f54d864a72486326356","modified":1748850152939},{"_id":"public/tags/wordpress/index.html","hash":"0417dce4d715e02a6c6d518bec141e1256cc3f22","modified":1748850152939},{"_id":"public/favicon.ico","hash":"14310db268ea8d3b2096f434c6e293fc207f5f09","modified":1748850152939},{"_id":"public/img/algolia.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1748850152939},{"_id":"public/img/comment_bg.png","hash":"91612a887446fb436e9151981e2289f2a426a3e5","modified":1748850152939},{"_id":"public/img/512.png","hash":"6988b23a31304d9de45b95a1e7c05dd42024e560","modified":1748850152939},{"_id":"public/img/default_cover.jpg","hash":"455fa65e2736f61ac36360dd4f76fc1ab6a1cdd5","modified":1748850152939},{"_id":"public/img/favicon.ico","hash":"14310db268ea8d3b2096f434c6e293fc207f5f09","modified":1748850152939},{"_id":"public/img/siteicon/32.png","hash":"147aae33224066ef2a5987c3cbbfa4309c49cef4","modified":1748850152939},{"_id":"public/img/siteicon/16.png","hash":"8dc6ca32ff1264f7c1c3a8f62727a8c96ea7525b","modified":1748850152939},{"_id":"public/img/siteicon/manifest-icon-512.maskable.png","hash":"6f8b4b3df8d1498db55a559f7106dc9b6e6af647","modified":1748850152939},{"_id":"public/img/siteicon/apple-icon-180.png","hash":"7f580ec4819c9ef10b1306102152f4473f037a98","modified":1748850152939},{"_id":"public/img/siteicon/manifest-icon-192.maskable.png","hash":"528b94ebcd34fb55436d64fdda76ef43ccbf031f","modified":1748850152939},{"_id":"public/css/var.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1748850152939},{"_id":"public/js/anzhiyu/comment_barrage.js","hash":"1b30f922238f626c6a90ce2705789ba2362a2a9e","modified":1748850152939},{"_id":"public/js/anzhiyu/random_friends_post.js","hash":"1548fdc0a8cb4291bc8793dc8d321c59c097c08e","modified":1748850152939},{"_id":"public/js/anzhiyu/people.js","hash":"f3d2a3d0c730124d9f64dbf59486145c05a42ac6","modified":1748850152939},{"_id":"public/js/anzhiyu/ai_abstract.js","hash":"be52eb13a416b18337d3b1142277920072e698c3","modified":1748850152939},{"_id":"public/js/search/local-search.js","hash":"3ad66c75b4a0fc28a14a5478ee8a19fde72f837f","modified":1748850152939},{"_id":"public/js/search/algolia.js","hash":"5c2a0d0489c51c6d9e54f5a3b0c6e66a5f649450","modified":1748850152939},{"_id":"public/js/anzhiyu/right_click_menu.js","hash":"d605ee0cab24604f97ccef5747bfacaa108645ba","modified":1748850152939},{"_id":"public/css/index.css","hash":"46cfaada30ee683af3548defac78003a18704b79","modified":1748850152939},{"_id":"public/js/utils.js","hash":"68e7f87c38365ef1271b69943395aa5fdb5417ea","modified":1748850152939},{"_id":"public/js/main.js","hash":"888563ad7324e565e6f5060ca126d69c7309bef1","modified":1748850152939},{"_id":"public/js/tw_cn.js","hash":"6cbec565e98cbd49aa75e6161d8fa996ae3be91a","modified":1748850152939},{"_id":"public/img/404.jpg","hash":"030b9c7c9d654b3d67c1249a6e5900bf40c79373","modified":1748850152939},{"_id":"public/img/friend_404.gif","hash":"4c0a482bce3710942aff900d62c48333827e5a53","modified":1748850152939},{"_id":"public/img/loading.gif","hash":"b9e8d78b86bc48d565e26c8c1ea275c2c758fb0d","modified":1748850152939}],"Category":[{"name":"前端","_id":"cmbes86vz0004zcqb9hzq53gk"},{"name":"碎碎念","_id":"cmbes86w2000azcqb8j0tavje"},{"name":"后端","_id":"cmbes86w8000ozcqba6ch16kx"},{"name":"AI","_id":"cmbes86wa000wzcqbbe8m1526"},{"name":"服务器","_id":"cmbes86wb0014zcqb52jw5g57"}],"Data":[{"_id":"about","data":[{"class_name":"关于页","subtitle":"生活明朗，万物可爱✨","avatarImg":"https://npm.elemecdn.com/anzhiyu-blog-static@1.0.0/img/avatar.webp","avatarSkills":{"left":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙"],"right":["专修交互与设计 🤝","脚踏实地行动派 🏃","团队小组发动机 🧱","壮汉人狠话不多 💢"]},"name":"XXX","description":"是一名 前端工程师、学生、独立开发者、博主","aboutsiteTips":{"tips":"追求","title1":"源于","title2":"热爱而去 感受","word":["学习","生活","程序","体验"]},"helloAbout":"Hello there!","skillsTips":{"tips":"技能","title":"开启创造力"},"careers":{"tips":"生涯","title":"无限进步","list":[{"desc":"EDU,软件工程专业","color":"#357ef5"},{"desc":"EDU,软件工程专业","color":"#357ef5"},{"desc":"EDU,软件工程专业","color":"#357ef5"}],"img":"https://bu.dusays.com/2023/04/21/644287166329b.png"},"statistic":{"link":"/archives","text":"文章隧道","cover":"https://bu.dusays.com/2023/05/01/644f4b037b930.jpg"},"map":{"title":"我现在住在","StrengthenTitle":"中国，长沙市","background":"https://bu.dusays.com/2023/07/05/64a4c61cb20ef.jpg","backgroundDark":"https://bu.dusays.com/2023/07/05/64a4c63495ac5.jpg"},"selfInfo":{"selfInfoTips1":"生于","selfInfoContentYear":2002,"selfInfoTips2":"湖南信息学院","selfInfoContent2":"软件工程","selfInfoTips3":"现在职业","selfInfoContent3":"大三学生👨‍🎓"},"personalities":{"author_name":"执政官","personality_type":"ESFJ-A","photo_url":"https://bu.dusays.com/2023/07/05/64a4c63495ac5.jpg","personality_img":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/ESFJ-A.svg","name_url":"https://www.16personalities.com/ch/esfj-%E4%BA%BA%E6%A0%BC"},"maxim":{"maxim_tips":"座右铭","maxim_top":"生活明朗，","maxim_bottom":"万物可爱。"},"buff":{"buff_tips":"特长","buff_top":"脑回路新奇的 酸菜鱼","buff_bottom":"二次元指数 MAX"},"game":{"game_tips":"爱好游戏","game_title":"原神","game_uid":"UID: 125766904","game_bg":"https://bu.dusays.com/2023/04/22/64433bf26e25d.webp"},"comic":{"comic_tips":"爱好番剧","comic_title":"追番","comic_list":[{"name":"约定的梦幻岛","href":"https://www.bilibili.com/bangumi/media/md5267750/?spm_id_from=666.25.b_6d656469615f6d6f64756c65.1","cover":"https://bu.dusays.com/2023/05/27/647166c44b414.webp"},{"name":"咒术回战","href":"https://www.bilibili.com/bangumi/media/md28229899/?spm_id_from=666.25.b_6d656469615f6d6f64756c65.1","cover":"https://bu.dusays.com/2023/05/24/646db4398832e.webp"},{"name":"紫罗兰永恒花园","href":"https://www.bilibili.com/bangumi/media/md8892/?spm_id_from=666.25.b_6d656469615f6d6f64756c65.1","cover":"https://bu.dusays.com/2023/05/24/646db43983d99.webp"},{"name":"鬼灭之刃","href":"https://www.bilibili.com/bangumi/media/md22718131/?spm_id_from=666.25.b_6d656469615f6d6f64756c65.1","cover":"https://bu.dusays.com/2023/05/24/646db439856a0.webp"},{"name":"JOJO的奇妙冒险 黄金之风","href":"https://www.bilibili.com/bangumi/media/md135652/?spm_id_from=666.25.b_6d656469615f6d6f64756c65.1","cover":"https://bu.dusays.com/2023/05/30/64760e38d651a.webp"}]},"like":{"like_tips":"关注偏好","like_title":"数码科技","like_bg":"https://bu.dusays.com/2022/12/06/638f5f05ce1f7.jpg","like_bottom":"手机、电脑软硬件"},"music":{"music_tips":"音乐偏好","music_title":"许嵩、民谣、华语流行","music_bg":"https://p2.music.126.net/Mrg1i7DwcwjWBvQPIMt_Mg==/79164837213438.jpg","music_link":"/music"},"reward_list":[{"name":"海阔蓝","amount":8.8,"datatime":"2023-03-28T00:00:00.000Z"},{"name":"LK66","amount":66.6,"datatime":"2023-03-24T00:00:00.000Z"},{"name":"张时貳","amount":6.6,"datatime":"2023-01-22T00:00:00.000Z"},{"name":"ZeroAf","amount":9.9,"datatime":"2022-12-14T00:00:00.000Z"},{"name":"LuckyWangXi","amount":6.6,"datatime":"2022-12-14T00:00:00.000Z"},{"name":"刀中日月长","amount":10,"datatime":"2022-11-16T00:00:00.000Z"},{"name":"鹿啵包","amount":10,"datatime":"2022-11-08T00:00:00.000Z"},{"name":"疾速k","amount":50,"datatime":"2022-09-20T00:00:00.000Z"},{"name":"伴舟先生大霖子","amount":4.03,"datatime":"2022-10-27T00:00:00.000Z","suffix":"贝壳"},{"name":"Magica_0x0","amount":3.36,"datatime":"2022-10-07T00:00:00.000Z","suffix":"贝壳"},{"name":"名字就是要短像这样","amount":3.36,"datatime":"2022-08-25T00:00:00.000Z","suffix":"贝壳"},{"name":"Leviathan520","amount":1.34,"datatime":"2022-08-23T00:00:00.000Z","suffix":"贝壳"},{"name":"托马斯","amount":10,"datatime":"2022-08-19T00:00:00.000Z"},{"name":"哇是猫猫欸","amount":1.34,"datatime":"2022-08-19T00:00:00.000Z","suffix":"贝壳"}]}]},{"_id":"creativity","data":[{"class_name":"开启创造力","creativity_list":[{"name":"Java","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1184e9.jpg"},{"name":"Docker","color":"#57b6e6","icon":"https://bu.dusays.com/2023/04/09/643293b0f0abe.png"},{"name":"Photoshop","color":"#4082c3","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c240e.png"},{"name":"Node","color":"#333","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.1.1/img/svg/node-logo.svg"},{"name":"Webpack","color":"#2e3a41","icon":"https://bu.dusays.com/2023/04/09/643293b68026c.png"},{"name":"Pinia","color":"#fff","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/pinia-logo.svg"},{"name":"Python","color":"#fff","icon":"https://bu.dusays.com/2023/04/09/643293b1230f7.png"},{"name":"Vite","color":"#937df7","icon":"https://npm.elemecdn.com/anzhiyu-blog@2.0.8/img/svg/vite-logo.svg"},{"name":"Flutter","color":"#4499e4","icon":"https://bu.dusays.com/2023/04/09/643293b1055c2.png"},{"name":"Vue","color":"#b8f0ae","icon":"https://bu.dusays.com/2023/04/09/643293b6788bd.png"},{"name":"React","color":"#222","icon":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"},{"name":"CSS3","color":"#2c51db","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c251e.png"},{"name":"JS","color":"#f7cb4f","icon":"https://bu.dusays.com/2023/04/09/643293b121f02.png"},{"name":"HTML","color":"#e9572b","icon":"https://bu.dusays.com/2022/12/15/639aa3a5c241c.png"},{"name":"Git","color":"#df5b40","icon":"https://bu.dusays.com/2023/04/09/643293b10ccdd.webp"},{"name":"Apifox","color":"#e65164","icon":"https://bu.dusays.com/2022/11/19/6378d6458c6b6.png"}]}]}],"Page":[{"title":"标签","date":"2025-05-31T16:00:00.000Z","type":"tags","comments":0,"top_img":false,"_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ndate: 2025-06-01 00:00:00\ntype: \"tags\"\ncomments: false\ntop_img: false\n---\n","updated":"2025-06-01T03:03:46.573Z","path":"tags/index.html","layout":"page","_id":"cmbes86vs0000zcqb8ln52vz0","content":"","cover":"https://t.alcy.cc/pc?_r_=51ca9fd1-8ccd-dd6d-2951-0a70348b10ac","cover_type":"img","excerpt":"","more":""},{"title":"关于","date":"2025-05-31T16:00:00.000Z","aside":false,"top_img":false,"background":"#f8f9fe","comments":0,"type":"about","_content":"","source":"about/index.md","raw":"---\ntitle: 关于\ndate: 2025-06-01 00:00:00\naside: false\ntop_img: false\nbackground: \"#f8f9fe\"\ncomments: false\ntype: \"about\"\n---\n","updated":"2025-06-01T05:59:50.537Z","path":"about/index.html","layout":"page","_id":"cmbes86vx0002zcqb1bn35fmy","content":"","cover":"https://t.alcy.cc/pc?_r_=fb3684c7-5a7b-90ea-f473-13e667578f5e","cover_type":"img","excerpt":"","more":""},{"title":"分类","date":"2025-05-31T16:00:00.000Z","aside":false,"top_img":false,"type":"categories","main_color":"#ff7e00","_content":"","source":"categories/index.md","raw":"---\ntitle: 分类\ndate: 2025-06-01 00:00:00\naside: false\ntop_img: false\ntype: \"categories\"\nmain_color: \"#ff7e00\"\n---\n","updated":"2025-06-01T06:35:20.890Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cmbes86w00006zcqbezsm3ygd","content":"","cover":"https://t.alcy.cc/pc?_r_=7bde7860-f739-1b78-719a-d322d69ab62f","cover_type":"img","excerpt":"","more":""}],"Post":[{"title":"Table添加序号","abbrlink":"302a","date":"2025-01-01T01:10:00.000Z","_content":"\n\n## Vue 添加从1开始 添加序号\n\n**在template 添加**\n\n```vue\n <el-table-column label=\"序号\" align=\"center\" type=\"index\" :index=\"indexMethod\"/>\n```\n\n**在script添加**\n\n```js\n/** 自定义编号 */\n indexMethod(index) {\n    let pageNum = this.queryParams.pageNum - 1;\n    if ((pageNum !== -1 && pageNum !== 0)) {\n        return (index + 1) + (pageNum * this.queryParams.pageSize);\n   } else {\n        return (index + 1)\n   }\n }\n```\n","source":"_posts/开发/前端/Table添加序号.md","raw":"---\ntitle: Table添加序号\ncategories:\n  - 前端\ntags:\n  - vue\nabbrlink: 302a\ndate: 2025-01-01 09:10:00\n---\n\n\n## Vue 添加从1开始 添加序号\n\n**在template 添加**\n\n```vue\n <el-table-column label=\"序号\" align=\"center\" type=\"index\" :index=\"indexMethod\"/>\n```\n\n**在script添加**\n\n```js\n/** 自定义编号 */\n indexMethod(index) {\n    let pageNum = this.queryParams.pageNum - 1;\n    if ((pageNum !== -1 && pageNum !== 0)) {\n        return (index + 1) + (pageNum * this.queryParams.pageSize);\n   } else {\n        return (index + 1)\n   }\n }\n```\n","slug":"开发/前端/Table添加序号","published":1,"updated":"2025-06-02T07:28:43.416Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86vu0001zcqb7yk59g5x","content":"<h2 id=\"Vue-添加从1开始-添加序号\"><a href=\"#Vue-添加从1开始-添加序号\" class=\"headerlink\" title=\"Vue 添加从1开始 添加序号\"></a>Vue 添加从1开始 添加序号</h2><p><strong>在template 添加</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;el-table-column label=&quot;序号&quot; align=&quot;center&quot; type=&quot;index&quot; :index=&quot;indexMethod&quot;/&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong>在script添加</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** 自定义编号 */</span></span><br><span class=\"line\"> <span class=\"title function_\">indexMethod</span>(<span class=\"params\">index</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> pageNum = <span class=\"variable language_\">this</span>.<span class=\"property\">queryParams</span>.<span class=\"property\">pageNum</span> - <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((pageNum !== -<span class=\"number\">1</span> &amp;&amp; pageNum !== <span class=\"number\">0</span>)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (index + <span class=\"number\">1</span>) + (pageNum * <span class=\"variable language_\">this</span>.<span class=\"property\">queryParams</span>.<span class=\"property\">pageSize</span>);</span><br><span class=\"line\">   &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (index + <span class=\"number\">1</span>)</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=da97dfbe-dbd5-ee6f-4d1e-4b8a078bfc29","cover_type":"img","excerpt":"","more":"<h2 id=\"Vue-添加从1开始-添加序号\"><a href=\"#Vue-添加从1开始-添加序号\" class=\"headerlink\" title=\"Vue 添加从1开始 添加序号\"></a>Vue 添加从1开始 添加序号</h2><p><strong>在template 添加</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;el-table-column label=&quot;序号&quot; align=&quot;center&quot; type=&quot;index&quot; :index=&quot;indexMethod&quot;/&gt;</span><br></pre></td></tr></table></figure>\n\n<p><strong>在script添加</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** 自定义编号 */</span></span><br><span class=\"line\"> <span class=\"title function_\">indexMethod</span>(<span class=\"params\">index</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> pageNum = <span class=\"variable language_\">this</span>.<span class=\"property\">queryParams</span>.<span class=\"property\">pageNum</span> - <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((pageNum !== -<span class=\"number\">1</span> &amp;&amp; pageNum !== <span class=\"number\">0</span>)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (index + <span class=\"number\">1</span>) + (pageNum * <span class=\"variable language_\">this</span>.<span class=\"property\">queryParams</span>.<span class=\"property\">pageSize</span>);</span><br><span class=\"line\">   &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (index + <span class=\"number\">1</span>)</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"Hello World","top_img":"https://io.jianglin.cc:8443/lin/blog/default.png","cover":"https://io.jianglin.cc:8443/lin/blog/default.png","main_color":"#ff7e00","abbrlink":"3eeb","date":"2022-04-27T21:20:21.000Z","_content":"\n生日快乐🎂\n\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n\n\n---\n\n### 参考文档\n\nHexo教程：[文档|Hexo](https://hexo.io/zh-cn/docs/index.html)\n\n_config.yml：[_config.yml | 配置说明](https://hexo.io/zh-cn/docs/configuration)\n\n主题教程：[安知鱼 - anzhiyu](https://docs.anheyu.com/intro.html)\n","source":"_posts/碎碎念/hello-world.md","raw":"---\ntitle: Hello World\ncategories: 碎碎念\ntop_img: 'https://io.jianglin.cc:8443/lin/blog/default.png'\ncover: 'https://io.jianglin.cc:8443/lin/blog/default.png'\nmain_color: '#ff7e00'\nabbrlink: 3eeb\ndate: 2022-04-28 05:20:21\n---\n\n生日快乐🎂\n\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n\n\n---\n\n### 参考文档\n\nHexo教程：[文档|Hexo](https://hexo.io/zh-cn/docs/index.html)\n\n_config.yml：[_config.yml | 配置说明](https://hexo.io/zh-cn/docs/configuration)\n\n主题教程：[安知鱼 - anzhiyu](https://docs.anheyu.com/intro.html)\n","slug":"碎碎念/hello-world","published":1,"updated":"2025-06-02T04:26:09.255Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86vx0003zcqbafkg7you","content":"<p>生日快乐🎂</p>\n<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n<hr>\n<h3 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h3><p>Hexo教程：<a href=\"https://hexo.io/zh-cn/docs/index.html\">文档|Hexo</a></p>\n<p>_config.yml：<a href=\"https://hexo.io/zh-cn/docs/configuration\">_config.yml | 配置说明</a></p>\n<p>主题教程：<a href=\"https://docs.anheyu.com/intro.html\">安知鱼 - anzhiyu</a></p>\n","cover_type":"img","excerpt":"","more":"<p>生日快乐🎂</p>\n<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n<hr>\n<h3 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h3><p>Hexo教程：<a href=\"https://hexo.io/zh-cn/docs/index.html\">文档|Hexo</a></p>\n<p>_config.yml：<a href=\"https://hexo.io/zh-cn/docs/configuration\">_config.yml | 配置说明</a></p>\n<p>主题教程：<a href=\"https://docs.anheyu.com/intro.html\">安知鱼 - anzhiyu</a></p>\n"},{"title":"bladex-ui常用备忘录","abbrlink":"1b6d","date":"2025-02-26T10:02:00.000Z","_content":"\n## 获取localstorage缓存数据\n\n```JavaScript\n\nimport { mapGetters } from 'vuex';\n\n\ncomputed: {  \n  ...mapGetters(['userInfo', 'permission', 'roles'])  \n}\n```\n\n## join\n\n~~~js\nconst array = [\"Hello\", \"World\"];\nconst result = array.join(\",\");\nconsole.log(result); // 输出: \"Hello,World\"\n~~~\n","source":"_posts/开发/前端/bladex-ui常用备忘录.md","raw":"---\ntitle: bladex-ui常用备忘录\ncategories:\n  - 前端\ntags:\n  - vue\n  - bladex\nabbrlink: 1b6d\ndate: 2025-02-26 18:02:00\n---\n\n## 获取localstorage缓存数据\n\n```JavaScript\n\nimport { mapGetters } from 'vuex';\n\n\ncomputed: {  \n  ...mapGetters(['userInfo', 'permission', 'roles'])  \n}\n```\n\n## join\n\n~~~js\nconst array = [\"Hello\", \"World\"];\nconst result = array.join(\",\");\nconsole.log(result); // 输出: \"Hello,World\"\n~~~\n","slug":"开发/前端/bladex-ui常用备忘录","published":1,"updated":"2025-06-02T07:28:43.425Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86w00007zcqbadhk6hhl","content":"<h2 id=\"获取localstorage缓存数据\"><a href=\"#获取localstorage缓存数据\" class=\"headerlink\" title=\"获取localstorage缓存数据\"></a>获取localstorage缓存数据</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; mapGetters &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vuex&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">computed</span>: &#123;  </span><br><span class=\"line\">  ...<span class=\"title function_\">mapGetters</span>([<span class=\"string\">&#x27;userInfo&#x27;</span>, <span class=\"string\">&#x27;permission&#x27;</span>, <span class=\"string\">&#x27;roles&#x27;</span>])  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"join\"><a href=\"#join\" class=\"headerlink\" title=\"join\"></a>join</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> array = [<span class=\"string\">&quot;Hello&quot;</span>, <span class=\"string\">&quot;World&quot;</span>];</span><br><span class=\"line\"><span class=\"keyword\">const</span> result = array.<span class=\"title function_\">join</span>(<span class=\"string\">&quot;,&quot;</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(result); <span class=\"comment\">// 输出: &quot;Hello,World&quot;</span></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=1fb761a0-8f09-df43-cea9-121c6147e7c2","cover_type":"img","excerpt":"","more":"<h2 id=\"获取localstorage缓存数据\"><a href=\"#获取localstorage缓存数据\" class=\"headerlink\" title=\"获取localstorage缓存数据\"></a>获取localstorage缓存数据</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; mapGetters &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vuex&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">computed</span>: &#123;  </span><br><span class=\"line\">  ...<span class=\"title function_\">mapGetters</span>([<span class=\"string\">&#x27;userInfo&#x27;</span>, <span class=\"string\">&#x27;permission&#x27;</span>, <span class=\"string\">&#x27;roles&#x27;</span>])  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"join\"><a href=\"#join\" class=\"headerlink\" title=\"join\"></a>join</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> array = [<span class=\"string\">&quot;Hello&quot;</span>, <span class=\"string\">&quot;World&quot;</span>];</span><br><span class=\"line\"><span class=\"keyword\">const</span> result = array.<span class=\"title function_\">join</span>(<span class=\"string\">&quot;,&quot;</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(result); <span class=\"comment\">// 输出: &quot;Hello,World&quot;</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Vue3动态添加输入框并添加规则校验","abbrlink":"4436","date":"2025-02-26T01:55:00.000Z","_content":"\n## 前言\n\n利用Vue 3的响应式能力和组合式API，可以轻松实现动态添加输入框及其实时校验。通过`v-model`绑定输入框值，结合自定义规则与`watch`监听数据变化，开发者能够灵活地扩展表单功能并确保输入内容的有效性。本文将简明介绍如何运用Vue 3实现这一过程，让您的应用交互更加智能高效。\n\n## 正文\n\n```vue\n<template>\n  <div>\n      <el-form :model=\"info\" ref=\"forms\">\n          <el-table\n          ref=\"tableRef\"\n          :data=\"info.data\"\n          border>\n          <el-table-column align=\"center\" property=\"name\" label=\"*姓名\">\n              <template #default=\"row\">\n                  <el-form-item :prop=\"'data.' + row.$index + '.name'\" :rules=\"formRules.name\">\n                      <el-input placeholder=\"请输入姓名\" v-model=\"info.data[row.$index].name\" />\n                  </el-form-item>\n              </template>\n          </el-table-column>\n          <el-table-column align=\"center\" property=\"role\" label=\"角色\">\n              <template #default=\"row\">\n                  <el-form-item :prop=\"'data.' + row.$index + '.role'\" :rules=\"formRules.role\">\n                      <el-input placeholder=\"请输入角色\" v-model=\"info.data[row.$index].role\" />\n                  </el-form-item>\n              </template>\n          </el-table-column>\n          </el-table>\n      </el-form>\n    <el-button type=\"primary\" @click=\"submitForm()\">Submit</el-button>\n  </div>\n</template>\n```\n\n```vue\n<script setup lang=\"ts\">\nimport {ref, reactive} from 'vue'\nimport type { FormInstance } from 'element-plus'\nlet info:any = reactive({\n  data:[\n      {\n      id: 0,\n      name: '',\n      role:''\n      },{\n        id: 1,\n        name: '',\n        role:''\n      }\n  ]\n})\nconst formRules = reactive({\n  name: [{ required: true, message: '请输入姓名', trigger: 'change' }],\n  role: [{ required: true, message: '请输入角色', trigger: 'change' }]\n})\nconst forms = ref<FormInstance>()\nconst submitForm = async () => {\n  if (!forms) return\n  return await forms.value?.validate((valid: any) => {\n      if (valid) {\n      console.log('submit!')\n      } else {\n      console.log('error submit!')\n      return false\n      }\n  })\n}\n</script>\n```\n","source":"_posts/开发/前端/Vue3动态添加输入框并添加规则校验.md","raw":"---\ntitle: Vue3动态添加输入框并添加规则校验\ncategories:\n  - 前端\ntags:\n  - vue\nabbrlink: '4436'\ndate: 2025-02-26 09:55:00\n---\n\n## 前言\n\n利用Vue 3的响应式能力和组合式API，可以轻松实现动态添加输入框及其实时校验。通过`v-model`绑定输入框值，结合自定义规则与`watch`监听数据变化，开发者能够灵活地扩展表单功能并确保输入内容的有效性。本文将简明介绍如何运用Vue 3实现这一过程，让您的应用交互更加智能高效。\n\n## 正文\n\n```vue\n<template>\n  <div>\n      <el-form :model=\"info\" ref=\"forms\">\n          <el-table\n          ref=\"tableRef\"\n          :data=\"info.data\"\n          border>\n          <el-table-column align=\"center\" property=\"name\" label=\"*姓名\">\n              <template #default=\"row\">\n                  <el-form-item :prop=\"'data.' + row.$index + '.name'\" :rules=\"formRules.name\">\n                      <el-input placeholder=\"请输入姓名\" v-model=\"info.data[row.$index].name\" />\n                  </el-form-item>\n              </template>\n          </el-table-column>\n          <el-table-column align=\"center\" property=\"role\" label=\"角色\">\n              <template #default=\"row\">\n                  <el-form-item :prop=\"'data.' + row.$index + '.role'\" :rules=\"formRules.role\">\n                      <el-input placeholder=\"请输入角色\" v-model=\"info.data[row.$index].role\" />\n                  </el-form-item>\n              </template>\n          </el-table-column>\n          </el-table>\n      </el-form>\n    <el-button type=\"primary\" @click=\"submitForm()\">Submit</el-button>\n  </div>\n</template>\n```\n\n```vue\n<script setup lang=\"ts\">\nimport {ref, reactive} from 'vue'\nimport type { FormInstance } from 'element-plus'\nlet info:any = reactive({\n  data:[\n      {\n      id: 0,\n      name: '',\n      role:''\n      },{\n        id: 1,\n        name: '',\n        role:''\n      }\n  ]\n})\nconst formRules = reactive({\n  name: [{ required: true, message: '请输入姓名', trigger: 'change' }],\n  role: [{ required: true, message: '请输入角色', trigger: 'change' }]\n})\nconst forms = ref<FormInstance>()\nconst submitForm = async () => {\n  if (!forms) return\n  return await forms.value?.validate((valid: any) => {\n      if (valid) {\n      console.log('submit!')\n      } else {\n      console.log('error submit!')\n      return false\n      }\n  })\n}\n</script>\n```\n","slug":"开发/前端/Vue3动态添加输入框并添加规则校验","published":1,"updated":"2025-06-02T07:28:43.396Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86w10008zcqb7t7de57z","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>利用Vue 3的响应式能力和组合式API，可以轻松实现动态添加输入框及其实时校验。通过<code>v-model</code>绑定输入框值，结合自定义规则与<code>watch</code>监听数据变化，开发者能够灵活地扩展表单功能并确保输入内容的有效性。本文将简明介绍如何运用Vue 3实现这一过程，让您的应用交互更加智能高效。</p>\n<h2 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">      &lt;el-form :model=&quot;info&quot; ref=&quot;forms&quot;&gt;</span><br><span class=\"line\">          &lt;el-table</span><br><span class=\"line\">          ref=&quot;tableRef&quot;</span><br><span class=\"line\">          :data=&quot;info.data&quot;</span><br><span class=\"line\">          border&gt;</span><br><span class=\"line\">          &lt;el-table-column align=&quot;center&quot; property=&quot;name&quot; label=&quot;*姓名&quot;&gt;</span><br><span class=\"line\">              &lt;template #default=&quot;row&quot;&gt;</span><br><span class=\"line\">                  &lt;el-form-item :prop=&quot;&#x27;data.&#x27; + row.$index + &#x27;.name&#x27;&quot; :rules=&quot;formRules.name&quot;&gt;</span><br><span class=\"line\">                      &lt;el-input placeholder=&quot;请输入姓名&quot; v-model=&quot;info.data[row.$index].name&quot; /&gt;</span><br><span class=\"line\">                  &lt;/el-form-item&gt;</span><br><span class=\"line\">              &lt;/template&gt;</span><br><span class=\"line\">          &lt;/el-table-column&gt;</span><br><span class=\"line\">          &lt;el-table-column align=&quot;center&quot; property=&quot;role&quot; label=&quot;角色&quot;&gt;</span><br><span class=\"line\">              &lt;template #default=&quot;row&quot;&gt;</span><br><span class=\"line\">                  &lt;el-form-item :prop=&quot;&#x27;data.&#x27; + row.$index + &#x27;.role&#x27;&quot; :rules=&quot;formRules.role&quot;&gt;</span><br><span class=\"line\">                      &lt;el-input placeholder=&quot;请输入角色&quot; v-model=&quot;info.data[row.$index].role&quot; /&gt;</span><br><span class=\"line\">                  &lt;/el-form-item&gt;</span><br><span class=\"line\">              &lt;/template&gt;</span><br><span class=\"line\">          &lt;/el-table-column&gt;</span><br><span class=\"line\">          &lt;/el-table&gt;</span><br><span class=\"line\">      &lt;/el-form&gt;</span><br><span class=\"line\">    &lt;el-button type=&quot;primary&quot; @click=&quot;submitForm()&quot;&gt;Submit&lt;/el-button&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class=\"line\">import &#123;ref, reactive&#125; from &#x27;vue&#x27;</span><br><span class=\"line\">import type &#123; FormInstance &#125; from &#x27;element-plus&#x27;</span><br><span class=\"line\">let info:any = reactive(&#123;</span><br><span class=\"line\">  data:[</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">      id: 0,</span><br><span class=\"line\">      name: &#x27;&#x27;,</span><br><span class=\"line\">      role:&#x27;&#x27;</span><br><span class=\"line\">      &#125;,&#123;</span><br><span class=\"line\">        id: 1,</span><br><span class=\"line\">        name: &#x27;&#x27;,</span><br><span class=\"line\">        role:&#x27;&#x27;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">const formRules = reactive(&#123;</span><br><span class=\"line\">  name: [&#123; required: true, message: &#x27;请输入姓名&#x27;, trigger: &#x27;change&#x27; &#125;],</span><br><span class=\"line\">  role: [&#123; required: true, message: &#x27;请输入角色&#x27;, trigger: &#x27;change&#x27; &#125;]</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">const forms = ref&lt;FormInstance&gt;()</span><br><span class=\"line\">const submitForm = async () =&gt; &#123;</span><br><span class=\"line\">  if (!forms) return</span><br><span class=\"line\">  return await forms.value?.validate((valid: any) =&gt; &#123;</span><br><span class=\"line\">      if (valid) &#123;</span><br><span class=\"line\">      console.log(&#x27;submit!&#x27;)</span><br><span class=\"line\">      &#125; else &#123;</span><br><span class=\"line\">      console.log(&#x27;error submit!&#x27;)</span><br><span class=\"line\">      return false</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=0bb54af1-a339-419a-dc8c-a25a5fe4ed06","cover_type":"img","excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>利用Vue 3的响应式能力和组合式API，可以轻松实现动态添加输入框及其实时校验。通过<code>v-model</code>绑定输入框值，结合自定义规则与<code>watch</code>监听数据变化，开发者能够灵活地扩展表单功能并确保输入内容的有效性。本文将简明介绍如何运用Vue 3实现这一过程，让您的应用交互更加智能高效。</p>\n<h2 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">      &lt;el-form :model=&quot;info&quot; ref=&quot;forms&quot;&gt;</span><br><span class=\"line\">          &lt;el-table</span><br><span class=\"line\">          ref=&quot;tableRef&quot;</span><br><span class=\"line\">          :data=&quot;info.data&quot;</span><br><span class=\"line\">          border&gt;</span><br><span class=\"line\">          &lt;el-table-column align=&quot;center&quot; property=&quot;name&quot; label=&quot;*姓名&quot;&gt;</span><br><span class=\"line\">              &lt;template #default=&quot;row&quot;&gt;</span><br><span class=\"line\">                  &lt;el-form-item :prop=&quot;&#x27;data.&#x27; + row.$index + &#x27;.name&#x27;&quot; :rules=&quot;formRules.name&quot;&gt;</span><br><span class=\"line\">                      &lt;el-input placeholder=&quot;请输入姓名&quot; v-model=&quot;info.data[row.$index].name&quot; /&gt;</span><br><span class=\"line\">                  &lt;/el-form-item&gt;</span><br><span class=\"line\">              &lt;/template&gt;</span><br><span class=\"line\">          &lt;/el-table-column&gt;</span><br><span class=\"line\">          &lt;el-table-column align=&quot;center&quot; property=&quot;role&quot; label=&quot;角色&quot;&gt;</span><br><span class=\"line\">              &lt;template #default=&quot;row&quot;&gt;</span><br><span class=\"line\">                  &lt;el-form-item :prop=&quot;&#x27;data.&#x27; + row.$index + &#x27;.role&#x27;&quot; :rules=&quot;formRules.role&quot;&gt;</span><br><span class=\"line\">                      &lt;el-input placeholder=&quot;请输入角色&quot; v-model=&quot;info.data[row.$index].role&quot; /&gt;</span><br><span class=\"line\">                  &lt;/el-form-item&gt;</span><br><span class=\"line\">              &lt;/template&gt;</span><br><span class=\"line\">          &lt;/el-table-column&gt;</span><br><span class=\"line\">          &lt;/el-table&gt;</span><br><span class=\"line\">      &lt;/el-form&gt;</span><br><span class=\"line\">    &lt;el-button type=&quot;primary&quot; @click=&quot;submitForm()&quot;&gt;Submit&lt;/el-button&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class=\"line\">import &#123;ref, reactive&#125; from &#x27;vue&#x27;</span><br><span class=\"line\">import type &#123; FormInstance &#125; from &#x27;element-plus&#x27;</span><br><span class=\"line\">let info:any = reactive(&#123;</span><br><span class=\"line\">  data:[</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">      id: 0,</span><br><span class=\"line\">      name: &#x27;&#x27;,</span><br><span class=\"line\">      role:&#x27;&#x27;</span><br><span class=\"line\">      &#125;,&#123;</span><br><span class=\"line\">        id: 1,</span><br><span class=\"line\">        name: &#x27;&#x27;,</span><br><span class=\"line\">        role:&#x27;&#x27;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">const formRules = reactive(&#123;</span><br><span class=\"line\">  name: [&#123; required: true, message: &#x27;请输入姓名&#x27;, trigger: &#x27;change&#x27; &#125;],</span><br><span class=\"line\">  role: [&#123; required: true, message: &#x27;请输入角色&#x27;, trigger: &#x27;change&#x27; &#125;]</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">const forms = ref&lt;FormInstance&gt;()</span><br><span class=\"line\">const submitForm = async () =&gt; &#123;</span><br><span class=\"line\">  if (!forms) return</span><br><span class=\"line\">  return await forms.value?.validate((valid: any) =&gt; &#123;</span><br><span class=\"line\">      if (valid) &#123;</span><br><span class=\"line\">      console.log(&#x27;submit!&#x27;)</span><br><span class=\"line\">      &#125; else &#123;</span><br><span class=\"line\">      console.log(&#x27;error submit!&#x27;)</span><br><span class=\"line\">      return false</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n"},{"title":"el上传图片案例","abbrlink":"9863","date":"2025-02-26T10:20:00.000Z","_content":"\n\n\n## 效果\n\n\n## Code\n\n### Vue\n\n```html\n<el-form-item label=\"现场照片\" prop=\"urls\">  \n  <el-upload  \n    v-model:file-list=\"imgFileList1\"  \n    :action=\"action\"  \n    :headers=\"imgToken\"  \n    :on-success=\"handleSuccess1\"  \n    list-type=\"picture-card\"  \n    :before-upload=\"beforeAvatarUpload\"  \n    :on-preview=\"handlePictureCardPreview\"  \n    :on-remove=\"handleRemove1\" \"  \n  >  \n    <el-icon>  \n      <Plus />  \n    </el-icon>  \n  </el-upload>  \n</el-form-item>\n```\n\n### Data\n\n```javascript\n//上传图片路径  \nimgFileList1: [], //图片回显时使用  \nimgFileListForm: [], //图片回显时使用  \npiclist1: [], //图片回显时使用  \nimgToken: {  \n  'Blade-Auth': 'Bearer ' + JSON.parse(localStorage.getItem('saber-token')).content  \n},  \nlimitImg: 10, //限制图片上传的数量  \naction: `/api/blade-resource/oss/endpoint/put-file`,  \ndisabled: false,  \ndialogImageUrl: '', //如果只是显示一张图片的话，可以直接对其赋值  \ndialogVisible: false\n```\n\n### methods\n\n```javascript\nbeforeAvatarUpload(file) {  \n  const imgType = file.type === 'image/jpeg' || file.type === 'image/png';  \n  const imgSize = file.size / 1024 / 1024 < 5;  \n  if (!imgType) {  \n    this.$utils.toast('图片只能是 JPG/PNG 格式!', 'error');  \n  }  \n  if (!imgSize) {  \n    this.$utils.toast('图片大小不能超过 5MB!', 'error');  \n  }  \n  return imgType && imgSize;  \n},  \n  \nhandlePictureCardPreview(uploadFile) {  \n  this.dialogImageUrl = uploadFile.url;  \n  this.dialogVisible = true;  \n},  \n  \nhandleRemove1(res) {  \n  console.log(res);  \n  let index = this.imgFileListForm.findIndex(e => e === res.url);  \n  this.imgFileListForm.splice(index, 1);  \n  console.log(this.imgFileListForm);  \n},  \n  \nhandleSuccess1(res) {  \n  if (res.code === 200) {  \n    this.imgFileListForm.push(res.data.link);  \n  }  \n},\n```\n\n### 图片回显\n\n```JavaScript\n//在查询到数据的地方\nif (this.form.images) {  \n  this.form.images.forEach(value => {  \n    this.imgFileList1.push({ url: value });  \n  });  \n}\n```\n","source":"_posts/开发/前端/el上传图片案例.md","raw":"---\ntitle: el上传图片案例\ncategories:\n  - 前端\ntags:\n  - vue\nabbrlink: '9863'\ndate: 2025-02-26 18:20:00\n---\n\n\n\n## 效果\n\n\n## Code\n\n### Vue\n\n```html\n<el-form-item label=\"现场照片\" prop=\"urls\">  \n  <el-upload  \n    v-model:file-list=\"imgFileList1\"  \n    :action=\"action\"  \n    :headers=\"imgToken\"  \n    :on-success=\"handleSuccess1\"  \n    list-type=\"picture-card\"  \n    :before-upload=\"beforeAvatarUpload\"  \n    :on-preview=\"handlePictureCardPreview\"  \n    :on-remove=\"handleRemove1\" \"  \n  >  \n    <el-icon>  \n      <Plus />  \n    </el-icon>  \n  </el-upload>  \n</el-form-item>\n```\n\n### Data\n\n```javascript\n//上传图片路径  \nimgFileList1: [], //图片回显时使用  \nimgFileListForm: [], //图片回显时使用  \npiclist1: [], //图片回显时使用  \nimgToken: {  \n  'Blade-Auth': 'Bearer ' + JSON.parse(localStorage.getItem('saber-token')).content  \n},  \nlimitImg: 10, //限制图片上传的数量  \naction: `/api/blade-resource/oss/endpoint/put-file`,  \ndisabled: false,  \ndialogImageUrl: '', //如果只是显示一张图片的话，可以直接对其赋值  \ndialogVisible: false\n```\n\n### methods\n\n```javascript\nbeforeAvatarUpload(file) {  \n  const imgType = file.type === 'image/jpeg' || file.type === 'image/png';  \n  const imgSize = file.size / 1024 / 1024 < 5;  \n  if (!imgType) {  \n    this.$utils.toast('图片只能是 JPG/PNG 格式!', 'error');  \n  }  \n  if (!imgSize) {  \n    this.$utils.toast('图片大小不能超过 5MB!', 'error');  \n  }  \n  return imgType && imgSize;  \n},  \n  \nhandlePictureCardPreview(uploadFile) {  \n  this.dialogImageUrl = uploadFile.url;  \n  this.dialogVisible = true;  \n},  \n  \nhandleRemove1(res) {  \n  console.log(res);  \n  let index = this.imgFileListForm.findIndex(e => e === res.url);  \n  this.imgFileListForm.splice(index, 1);  \n  console.log(this.imgFileListForm);  \n},  \n  \nhandleSuccess1(res) {  \n  if (res.code === 200) {  \n    this.imgFileListForm.push(res.data.link);  \n  }  \n},\n```\n\n### 图片回显\n\n```JavaScript\n//在查询到数据的地方\nif (this.form.images) {  \n  this.form.images.forEach(value => {  \n    this.imgFileList1.push({ url: value });  \n  });  \n}\n```\n","slug":"开发/前端/el上传图片案例","published":1,"updated":"2025-06-02T07:28:43.402Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86w20009zcqbawnb6nnt","content":"<h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><h2 id=\"Code\"><a href=\"#Code\" class=\"headerlink\" title=\"Code\"></a>Code</h2><h3 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">el-form-item</span> <span class=\"attr\">label</span>=<span class=\"string\">&quot;现场照片&quot;</span> <span class=\"attr\">prop</span>=<span class=\"string\">&quot;urls&quot;</span>&gt;</span>  </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">el-upload</span>  </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-model:file-list</span>=<span class=\"string\">&quot;imgFileList1&quot;</span>  </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:action</span>=<span class=\"string\">&quot;action&quot;</span>  </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:headers</span>=<span class=\"string\">&quot;imgToken&quot;</span>  </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:on-success</span>=<span class=\"string\">&quot;handleSuccess1&quot;</span>  </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">list-type</span>=<span class=\"string\">&quot;picture-card&quot;</span>  </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:before-upload</span>=<span class=\"string\">&quot;beforeAvatarUpload&quot;</span>  </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:on-preview</span>=<span class=\"string\">&quot;handlePictureCardPreview&quot;</span>  </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:on-remove</span>=<span class=\"string\">&quot;handleRemove1&quot;</span> &quot;  </span></span><br><span class=\"line\"><span class=\"tag\">  &gt;</span>  </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-icon</span>&gt;</span>  </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">Plus</span> /&gt;</span>  </span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-icon</span>&gt;</span>  </span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">el-upload</span>&gt;</span>  </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">el-form-item</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Data\"><a href=\"#Data\" class=\"headerlink\" title=\"Data\"></a>Data</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//上传图片路径  </span></span><br><span class=\"line\"><span class=\"attr\">imgFileList1</span>: [], <span class=\"comment\">//图片回显时使用  </span></span><br><span class=\"line\"><span class=\"attr\">imgFileListForm</span>: [], <span class=\"comment\">//图片回显时使用  </span></span><br><span class=\"line\"><span class=\"attr\">piclist1</span>: [], <span class=\"comment\">//图片回显时使用  </span></span><br><span class=\"line\"><span class=\"attr\">imgToken</span>: &#123;  </span><br><span class=\"line\">  <span class=\"string\">&#x27;Blade-Auth&#x27;</span>: <span class=\"string\">&#x27;Bearer &#x27;</span> + <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(<span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&#x27;saber-token&#x27;</span>)).<span class=\"property\">content</span>  </span><br><span class=\"line\">&#125;,  </span><br><span class=\"line\"><span class=\"attr\">limitImg</span>: <span class=\"number\">10</span>, <span class=\"comment\">//限制图片上传的数量  </span></span><br><span class=\"line\"><span class=\"attr\">action</span>: <span class=\"string\">`/api/blade-resource/oss/endpoint/put-file`</span>,  </span><br><span class=\"line\"><span class=\"attr\">disabled</span>: <span class=\"literal\">false</span>,  </span><br><span class=\"line\"><span class=\"attr\">dialogImageUrl</span>: <span class=\"string\">&#x27;&#x27;</span>, <span class=\"comment\">//如果只是显示一张图片的话，可以直接对其赋值  </span></span><br><span class=\"line\"><span class=\"attr\">dialogVisible</span>: <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"methods\"><a href=\"#methods\" class=\"headerlink\" title=\"methods\"></a>methods</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">beforeAvatarUpload</span>(<span class=\"params\">file</span>) &#123;  </span><br><span class=\"line\">  <span class=\"keyword\">const</span> imgType = file.<span class=\"property\">type</span> === <span class=\"string\">&#x27;image/jpeg&#x27;</span> || file.<span class=\"property\">type</span> === <span class=\"string\">&#x27;image/png&#x27;</span>;  </span><br><span class=\"line\">  <span class=\"keyword\">const</span> imgSize = file.<span class=\"property\">size</span> / <span class=\"number\">1024</span> / <span class=\"number\">1024</span> &lt; <span class=\"number\">5</span>;  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!imgType) &#123;  </span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">$utils</span>.<span class=\"title function_\">toast</span>(<span class=\"string\">&#x27;图片只能是 JPG/PNG 格式!&#x27;</span>, <span class=\"string\">&#x27;error&#x27;</span>);  </span><br><span class=\"line\">  &#125;  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!imgSize) &#123;  </span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">$utils</span>.<span class=\"title function_\">toast</span>(<span class=\"string\">&#x27;图片大小不能超过 5MB!&#x27;</span>, <span class=\"string\">&#x27;error&#x27;</span>);  </span><br><span class=\"line\">  &#125;  </span><br><span class=\"line\">  <span class=\"keyword\">return</span> imgType &amp;&amp; imgSize;  </span><br><span class=\"line\">&#125;,  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"title function_\">handlePictureCardPreview</span>(<span class=\"params\">uploadFile</span>) &#123;  </span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">dialogImageUrl</span> = uploadFile.<span class=\"property\">url</span>;  </span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">dialogVisible</span> = <span class=\"literal\">true</span>;  </span><br><span class=\"line\">&#125;,  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"title function_\">handleRemove1</span>(<span class=\"params\">res</span>) &#123;  </span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res);  </span><br><span class=\"line\">  <span class=\"keyword\">let</span> index = <span class=\"variable language_\">this</span>.<span class=\"property\">imgFileListForm</span>.<span class=\"title function_\">findIndex</span>(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> e === res.<span class=\"property\">url</span>);  </span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">imgFileListForm</span>.<span class=\"title function_\">splice</span>(index, <span class=\"number\">1</span>);  </span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">imgFileListForm</span>);  </span><br><span class=\"line\">&#125;,  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"title function_\">handleSuccess1</span>(<span class=\"params\">res</span>) &#123;  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (res.<span class=\"property\">code</span> === <span class=\"number\">200</span>) &#123;  </span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">imgFileListForm</span>.<span class=\"title function_\">push</span>(res.<span class=\"property\">data</span>.<span class=\"property\">link</span>);  </span><br><span class=\"line\">  &#125;  </span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"图片回显\"><a href=\"#图片回显\" class=\"headerlink\" title=\"图片回显\"></a>图片回显</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//在查询到数据的地方</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">form</span>.<span class=\"property\">images</span>) &#123;  </span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">form</span>.<span class=\"property\">images</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">value</span> =&gt;</span> &#123;  </span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">imgFileList1</span>.<span class=\"title function_\">push</span>(&#123; <span class=\"attr\">url</span>: value &#125;);  </span><br><span class=\"line\">  &#125;);  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=ed5ad5c9-384d-e0fd-4d9d-a1d15e084271","cover_type":"img","excerpt":"","more":"<h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><h2 id=\"Code\"><a href=\"#Code\" class=\"headerlink\" title=\"Code\"></a>Code</h2><h3 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">el-form-item</span> <span class=\"attr\">label</span>=<span class=\"string\">&quot;现场照片&quot;</span> <span class=\"attr\">prop</span>=<span class=\"string\">&quot;urls&quot;</span>&gt;</span>  </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">el-upload</span>  </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-model:file-list</span>=<span class=\"string\">&quot;imgFileList1&quot;</span>  </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:action</span>=<span class=\"string\">&quot;action&quot;</span>  </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:headers</span>=<span class=\"string\">&quot;imgToken&quot;</span>  </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:on-success</span>=<span class=\"string\">&quot;handleSuccess1&quot;</span>  </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">list-type</span>=<span class=\"string\">&quot;picture-card&quot;</span>  </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:before-upload</span>=<span class=\"string\">&quot;beforeAvatarUpload&quot;</span>  </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:on-preview</span>=<span class=\"string\">&quot;handlePictureCardPreview&quot;</span>  </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:on-remove</span>=<span class=\"string\">&quot;handleRemove1&quot;</span> &quot;  </span></span><br><span class=\"line\"><span class=\"tag\">  &gt;</span>  </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-icon</span>&gt;</span>  </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">Plus</span> /&gt;</span>  </span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-icon</span>&gt;</span>  </span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">el-upload</span>&gt;</span>  </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">el-form-item</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Data\"><a href=\"#Data\" class=\"headerlink\" title=\"Data\"></a>Data</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//上传图片路径  </span></span><br><span class=\"line\"><span class=\"attr\">imgFileList1</span>: [], <span class=\"comment\">//图片回显时使用  </span></span><br><span class=\"line\"><span class=\"attr\">imgFileListForm</span>: [], <span class=\"comment\">//图片回显时使用  </span></span><br><span class=\"line\"><span class=\"attr\">piclist1</span>: [], <span class=\"comment\">//图片回显时使用  </span></span><br><span class=\"line\"><span class=\"attr\">imgToken</span>: &#123;  </span><br><span class=\"line\">  <span class=\"string\">&#x27;Blade-Auth&#x27;</span>: <span class=\"string\">&#x27;Bearer &#x27;</span> + <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(<span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&#x27;saber-token&#x27;</span>)).<span class=\"property\">content</span>  </span><br><span class=\"line\">&#125;,  </span><br><span class=\"line\"><span class=\"attr\">limitImg</span>: <span class=\"number\">10</span>, <span class=\"comment\">//限制图片上传的数量  </span></span><br><span class=\"line\"><span class=\"attr\">action</span>: <span class=\"string\">`/api/blade-resource/oss/endpoint/put-file`</span>,  </span><br><span class=\"line\"><span class=\"attr\">disabled</span>: <span class=\"literal\">false</span>,  </span><br><span class=\"line\"><span class=\"attr\">dialogImageUrl</span>: <span class=\"string\">&#x27;&#x27;</span>, <span class=\"comment\">//如果只是显示一张图片的话，可以直接对其赋值  </span></span><br><span class=\"line\"><span class=\"attr\">dialogVisible</span>: <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"methods\"><a href=\"#methods\" class=\"headerlink\" title=\"methods\"></a>methods</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">beforeAvatarUpload</span>(<span class=\"params\">file</span>) &#123;  </span><br><span class=\"line\">  <span class=\"keyword\">const</span> imgType = file.<span class=\"property\">type</span> === <span class=\"string\">&#x27;image/jpeg&#x27;</span> || file.<span class=\"property\">type</span> === <span class=\"string\">&#x27;image/png&#x27;</span>;  </span><br><span class=\"line\">  <span class=\"keyword\">const</span> imgSize = file.<span class=\"property\">size</span> / <span class=\"number\">1024</span> / <span class=\"number\">1024</span> &lt; <span class=\"number\">5</span>;  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!imgType) &#123;  </span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">$utils</span>.<span class=\"title function_\">toast</span>(<span class=\"string\">&#x27;图片只能是 JPG/PNG 格式!&#x27;</span>, <span class=\"string\">&#x27;error&#x27;</span>);  </span><br><span class=\"line\">  &#125;  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!imgSize) &#123;  </span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">$utils</span>.<span class=\"title function_\">toast</span>(<span class=\"string\">&#x27;图片大小不能超过 5MB!&#x27;</span>, <span class=\"string\">&#x27;error&#x27;</span>);  </span><br><span class=\"line\">  &#125;  </span><br><span class=\"line\">  <span class=\"keyword\">return</span> imgType &amp;&amp; imgSize;  </span><br><span class=\"line\">&#125;,  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"title function_\">handlePictureCardPreview</span>(<span class=\"params\">uploadFile</span>) &#123;  </span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">dialogImageUrl</span> = uploadFile.<span class=\"property\">url</span>;  </span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">dialogVisible</span> = <span class=\"literal\">true</span>;  </span><br><span class=\"line\">&#125;,  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"title function_\">handleRemove1</span>(<span class=\"params\">res</span>) &#123;  </span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res);  </span><br><span class=\"line\">  <span class=\"keyword\">let</span> index = <span class=\"variable language_\">this</span>.<span class=\"property\">imgFileListForm</span>.<span class=\"title function_\">findIndex</span>(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> e === res.<span class=\"property\">url</span>);  </span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">imgFileListForm</span>.<span class=\"title function_\">splice</span>(index, <span class=\"number\">1</span>);  </span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">imgFileListForm</span>);  </span><br><span class=\"line\">&#125;,  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"title function_\">handleSuccess1</span>(<span class=\"params\">res</span>) &#123;  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (res.<span class=\"property\">code</span> === <span class=\"number\">200</span>) &#123;  </span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">imgFileListForm</span>.<span class=\"title function_\">push</span>(res.<span class=\"property\">data</span>.<span class=\"property\">link</span>);  </span><br><span class=\"line\">  &#125;  </span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"图片回显\"><a href=\"#图片回显\" class=\"headerlink\" title=\"图片回显\"></a>图片回显</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//在查询到数据的地方</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">form</span>.<span class=\"property\">images</span>) &#123;  </span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">form</span>.<span class=\"property\">images</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">value</span> =&gt;</span> &#123;  </span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">imgFileList1</span>.<span class=\"title function_\">push</span>(&#123; <span class=\"attr\">url</span>: value &#125;);  </span><br><span class=\"line\">  &#125;);  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"播放FLV在线流","abbrlink":"3e17","date":"2025-01-01T02:55:00.000Z","_content":"\n\n## 安装依赖\n\n```shell\nnpm install vue flv.js --save\n```\n\n## 页面代码\n\n```vue\n<template>\n  <div>\n    <video ref=\"videoPlayer\" controls width=\"640\" height=\"360\"></video>\n  </div>\n</template>\n\n<script>\nimport flvjs from 'flv.js';\n\nexport default {\n  data() {\n    return {\n      flvPlayer: null,\n      videoSource: 'http://58.215.18.181:26088/flv?port=26935&app=gblive&stream=32021368001310543292' // 替换为你的 HTTP-FLV 视频流地址\n    };\n  },\n  mounted() {\n    this.initFlvPlayer();\n  },\n  beforeDestroy() {\n    this.destroyFlvPlayer();\n  },\n  methods: {\n    initFlvPlayer() {\n      if (flvjs.isSupported()) {\n        const videoPlayer = this.$refs.videoPlayer;\n        const flvPlayer = flvjs.createPlayer({\n          type: 'flv',\n          url: this.videoSource\n        });\n\n        flvPlayer.attachMediaElement(videoPlayer);\n        flvPlayer.load();\n        flvPlayer.play();\n\n        this.flvPlayer = flvPlayer;\n      } else {\n        console.error('FLV.js is not supported in this browser.');\n      }\n    },\n    destroyFlvPlayer() {\n      if (this.flvPlayer) {\n        this.flvPlayer.destroy();\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* 可以在这里添加一些样式 */\n</style>\n\n```\n","source":"_posts/开发/前端/播放FLV在线流.md","raw":"---\ntitle: 播放FLV在线流\ncategories:\n  - 前端\ntags:\n  - vue\n  - flv\nabbrlink: '3e17'\ndate: 2025-01-01 10:55:00\n---\n\n\n## 安装依赖\n\n```shell\nnpm install vue flv.js --save\n```\n\n## 页面代码\n\n```vue\n<template>\n  <div>\n    <video ref=\"videoPlayer\" controls width=\"640\" height=\"360\"></video>\n  </div>\n</template>\n\n<script>\nimport flvjs from 'flv.js';\n\nexport default {\n  data() {\n    return {\n      flvPlayer: null,\n      videoSource: 'http://58.215.18.181:26088/flv?port=26935&app=gblive&stream=32021368001310543292' // 替换为你的 HTTP-FLV 视频流地址\n    };\n  },\n  mounted() {\n    this.initFlvPlayer();\n  },\n  beforeDestroy() {\n    this.destroyFlvPlayer();\n  },\n  methods: {\n    initFlvPlayer() {\n      if (flvjs.isSupported()) {\n        const videoPlayer = this.$refs.videoPlayer;\n        const flvPlayer = flvjs.createPlayer({\n          type: 'flv',\n          url: this.videoSource\n        });\n\n        flvPlayer.attachMediaElement(videoPlayer);\n        flvPlayer.load();\n        flvPlayer.play();\n\n        this.flvPlayer = flvPlayer;\n      } else {\n        console.error('FLV.js is not supported in this browser.');\n      }\n    },\n    destroyFlvPlayer() {\n      if (this.flvPlayer) {\n        this.flvPlayer.destroy();\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* 可以在这里添加一些样式 */\n</style>\n\n```\n","slug":"开发/前端/播放FLV在线流","published":1,"updated":"2025-06-02T07:28:43.420Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86w4000dzcqbck294cj3","content":"<h2 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install vue flv.js --save</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"页面代码\"><a href=\"#页面代码\" class=\"headerlink\" title=\"页面代码\"></a>页面代码</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">    &lt;video ref=&quot;videoPlayer&quot; controls width=&quot;640&quot; height=&quot;360&quot;&gt;&lt;/video&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">import flvjs from &#x27;flv.js&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">      flvPlayer: null,</span><br><span class=\"line\">      videoSource: &#x27;http://58.215.18.181:26088/flv?port=26935&amp;app=gblive&amp;stream=32021368001310543292&#x27; // 替换为你的 HTTP-FLV 视频流地址</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\">    this.initFlvPlayer();</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  beforeDestroy() &#123;</span><br><span class=\"line\">    this.destroyFlvPlayer();</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    initFlvPlayer() &#123;</span><br><span class=\"line\">      if (flvjs.isSupported()) &#123;</span><br><span class=\"line\">        const videoPlayer = this.$refs.videoPlayer;</span><br><span class=\"line\">        const flvPlayer = flvjs.createPlayer(&#123;</span><br><span class=\"line\">          type: &#x27;flv&#x27;,</span><br><span class=\"line\">          url: this.videoSource</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        flvPlayer.attachMediaElement(videoPlayer);</span><br><span class=\"line\">        flvPlayer.load();</span><br><span class=\"line\">        flvPlayer.play();</span><br><span class=\"line\"></span><br><span class=\"line\">        this.flvPlayer = flvPlayer;</span><br><span class=\"line\">      &#125; else &#123;</span><br><span class=\"line\">        console.error(&#x27;FLV.js is not supported in this browser.&#x27;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    destroyFlvPlayer() &#123;</span><br><span class=\"line\">      if (this.flvPlayer) &#123;</span><br><span class=\"line\">        this.flvPlayer.destroy();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;style scoped&gt;</span><br><span class=\"line\">/* 可以在这里添加一些样式 */</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=e4aabef9-6426-d3ec-57ec-43e152b70198","cover_type":"img","excerpt":"","more":"<h2 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install vue flv.js --save</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"页面代码\"><a href=\"#页面代码\" class=\"headerlink\" title=\"页面代码\"></a>页面代码</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">    &lt;video ref=&quot;videoPlayer&quot; controls width=&quot;640&quot; height=&quot;360&quot;&gt;&lt;/video&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">import flvjs from &#x27;flv.js&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">      flvPlayer: null,</span><br><span class=\"line\">      videoSource: &#x27;http://58.215.18.181:26088/flv?port=26935&amp;app=gblive&amp;stream=32021368001310543292&#x27; // 替换为你的 HTTP-FLV 视频流地址</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\">    this.initFlvPlayer();</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  beforeDestroy() &#123;</span><br><span class=\"line\">    this.destroyFlvPlayer();</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    initFlvPlayer() &#123;</span><br><span class=\"line\">      if (flvjs.isSupported()) &#123;</span><br><span class=\"line\">        const videoPlayer = this.$refs.videoPlayer;</span><br><span class=\"line\">        const flvPlayer = flvjs.createPlayer(&#123;</span><br><span class=\"line\">          type: &#x27;flv&#x27;,</span><br><span class=\"line\">          url: this.videoSource</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        flvPlayer.attachMediaElement(videoPlayer);</span><br><span class=\"line\">        flvPlayer.load();</span><br><span class=\"line\">        flvPlayer.play();</span><br><span class=\"line\"></span><br><span class=\"line\">        this.flvPlayer = flvPlayer;</span><br><span class=\"line\">      &#125; else &#123;</span><br><span class=\"line\">        console.error(&#x27;FLV.js is not supported in this browser.&#x27;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    destroyFlvPlayer() &#123;</span><br><span class=\"line\">      if (this.flvPlayer) &#123;</span><br><span class=\"line\">        this.flvPlayer.destroy();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;style scoped&gt;</span><br><span class=\"line\">/* 可以在这里添加一些样式 */</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n"},{"title":"SpringBoot 使用 easypoi 根据模板导出word","abbrlink":"f6eb","date":"2024-12-18T10:02:00.000Z","_content":"\n\n## 前言\n\n项目上有个需求，在 Word 里面导出图片，需要根据固定模板导出文件，故整理\n\n## 导入依赖\n\n在相应的 pom 文件中添加下面的代码\n\n```xml\n<dependency>\n    <groupId>cn.afterturn</groupId>\n    <artifactId>easypoi-base</artifactId>\n    <version>4.4.0</version>\n</dependency>\n```\n\n## 在 resource 中添加文件夹并添加 word 模板\n\n```TEXT\n> 在模板中使用{{}}来进行占位\n> 需要添加多个图片时，使用{{fe:images t}}来进行占位。 **（其中的 images 替换成自己的字段）** \n> 如图：\n```\n## 在程序中加入 ExportWordUtil 工具类\n\n详细代码如下：\n\n```java\npublic class ExportWordUtil {\n\n    /****\n     * 导出word数据\n     * @param templatePath\n     * @param fileName\n     * @param params\n     */\n    public static void exportWord(String templatePath, String fileName, Map<String, Object> params, HttpServletResponse response) {\n        Assert.notNull(templatePath, \"模板路径不能为空！\");\n        Assert.notNull(fileName, \"文件名称不能为空！\");\n        Assert.isTrue(fileName.endsWith(\".docx\"), \"word导出请使用docx格式！\");\n        //生成本地文件时使用，可以添加为参数传进来\n//        String tempPath = fileName;\n        try {\n            XWPFDocument doc = WordExportUtil.exportWord07(templatePath, params);\n            // 设置强制下载不打开\n            response.setContentType(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\");\n            // 设置文件名\n            response.setCharacterEncoding(\"UTF-8\");\n            response.addHeader(\"Content-Disposition\", \"attachment;fileName=\" + URLEncoder.encode(fileName,\"UTF-8\"));\n            OutputStream out = response.getOutputStream();\n            doc.write(out);\n            out.close();\n\n            //生成本地文件时使用\n//            FileOutputStream fos = new FileOutputStream(tempPath);\n//            doc.write(fos);\n//            fos.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            //删除本地文件\n//            delFileWord(tempPath,fileName);\n        }\n    }\n\n\n    @NotNull\n    public static List<ImageEntity> getImageEntities(List<String> accident) {\n        List<ImageEntity> entities = new ArrayList<>();\n        if (accident != null) {\n            for (String image : accident) {\n                ImageEntity entity = new ImageEntity();\n                entity.setHeight(500);\n                entity.setWidth(500);\n                entity.setUrl(image);\n                entity.setType(ImageEntity.URL);\n                entities.add(entity);\n            }\n        } else {\n            ImageEntity entity = new ImageEntity();\n            entity.setHeight(500);\n            entity.setWidth(500);\n            entity.setUrl(\"\");\n            entity.setType(ImageEntity.URL);\n            entities.add(entity);\n        }\n        return entities;\n    }\n\n    /***\n     * 删除临时文件\n     * @param filePath\n     * @param fileName\n     */\n    private static void delFileWord(String filePath, String fileName){\n        File file =new File(filePath+fileName);\n        File file1 =new File(filePath);\n        file.delete();\n        file1.delete();\n    }\n\n}\n```\n\n其中的 exportWord 方法在本地存储文件时，可以添加一个参数 tempPath 并由程序其他地方传进来；getImageEntities 方法的使用的是 URL 的形式加载图片的，在网上还有一种方法是用 FDSUtils.downloadFile() 下载好图片在传进 word 中。代码如下：\n\n```java\nprivate List<ImageEntity> initImageData(String fileUrl) {\n    List<ImageEntity> result = new ArrayList<>();\n    if (StringUtils.isNotBlank(fileUrl)) {\n        if (fileUrl.indexOf(\",\") > 0) {\n            String[] fileUrlArr = fileUrl.split(\",\");\n            for (int i = 0 ; i < fileUrlArr.length ; i++) {\n                byte[] imageData = FDSUtils.downloadFile(fileUrlArr[i]);\n                ImageEntity item = new ImageEntity();\n                item.setWidth(300);\n                item.setHeight(300);\n                item.setData(imageData);\n                item.setType(ImageEntity.Data);\n                result.add(item);\n            }\n        } else {\n            byte[] imageData = FDSUtils.downloadFile(fileUrl);\n            ImageEntity item = new ImageEntity();\n            item.setWidth(300);\n            item.setHeight(300);\n            item.setData(imageData);\n            item.setType(ImageEntity.Data);\n            result.add(item);\n        }\n    } else {\n        ImageEntity item = new ImageEntity();\n        item.setWidth(300);\n        item.setHeight(300);\n        item.setData(null);\n        item.setType(ImageEntity.Data);\n        result.add(item);\n    }\n    return result;\n}\n```\n\n**这种方法我没有试过，其中的 FDSUtils.downloadFile() 方法需要自己封装，这个可以在网上找找！！！**\n\n","source":"_posts/开发/后端/springboot使用easypoi根据模板导出word.md","raw":"---\ntitle: SpringBoot 使用 easypoi 根据模板导出word\ncategories:\n  - 后端\ntags:\n  - SpringBoot\n  - easypoi\n  - Centos\nabbrlink: f6eb\ndate: 2024-12-18 18:02:00\n---\n\n\n## 前言\n\n项目上有个需求，在 Word 里面导出图片，需要根据固定模板导出文件，故整理\n\n## 导入依赖\n\n在相应的 pom 文件中添加下面的代码\n\n```xml\n<dependency>\n    <groupId>cn.afterturn</groupId>\n    <artifactId>easypoi-base</artifactId>\n    <version>4.4.0</version>\n</dependency>\n```\n\n## 在 resource 中添加文件夹并添加 word 模板\n\n```TEXT\n> 在模板中使用{{}}来进行占位\n> 需要添加多个图片时，使用{{fe:images t}}来进行占位。 **（其中的 images 替换成自己的字段）** \n> 如图：\n```\n## 在程序中加入 ExportWordUtil 工具类\n\n详细代码如下：\n\n```java\npublic class ExportWordUtil {\n\n    /****\n     * 导出word数据\n     * @param templatePath\n     * @param fileName\n     * @param params\n     */\n    public static void exportWord(String templatePath, String fileName, Map<String, Object> params, HttpServletResponse response) {\n        Assert.notNull(templatePath, \"模板路径不能为空！\");\n        Assert.notNull(fileName, \"文件名称不能为空！\");\n        Assert.isTrue(fileName.endsWith(\".docx\"), \"word导出请使用docx格式！\");\n        //生成本地文件时使用，可以添加为参数传进来\n//        String tempPath = fileName;\n        try {\n            XWPFDocument doc = WordExportUtil.exportWord07(templatePath, params);\n            // 设置强制下载不打开\n            response.setContentType(\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\");\n            // 设置文件名\n            response.setCharacterEncoding(\"UTF-8\");\n            response.addHeader(\"Content-Disposition\", \"attachment;fileName=\" + URLEncoder.encode(fileName,\"UTF-8\"));\n            OutputStream out = response.getOutputStream();\n            doc.write(out);\n            out.close();\n\n            //生成本地文件时使用\n//            FileOutputStream fos = new FileOutputStream(tempPath);\n//            doc.write(fos);\n//            fos.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            //删除本地文件\n//            delFileWord(tempPath,fileName);\n        }\n    }\n\n\n    @NotNull\n    public static List<ImageEntity> getImageEntities(List<String> accident) {\n        List<ImageEntity> entities = new ArrayList<>();\n        if (accident != null) {\n            for (String image : accident) {\n                ImageEntity entity = new ImageEntity();\n                entity.setHeight(500);\n                entity.setWidth(500);\n                entity.setUrl(image);\n                entity.setType(ImageEntity.URL);\n                entities.add(entity);\n            }\n        } else {\n            ImageEntity entity = new ImageEntity();\n            entity.setHeight(500);\n            entity.setWidth(500);\n            entity.setUrl(\"\");\n            entity.setType(ImageEntity.URL);\n            entities.add(entity);\n        }\n        return entities;\n    }\n\n    /***\n     * 删除临时文件\n     * @param filePath\n     * @param fileName\n     */\n    private static void delFileWord(String filePath, String fileName){\n        File file =new File(filePath+fileName);\n        File file1 =new File(filePath);\n        file.delete();\n        file1.delete();\n    }\n\n}\n```\n\n其中的 exportWord 方法在本地存储文件时，可以添加一个参数 tempPath 并由程序其他地方传进来；getImageEntities 方法的使用的是 URL 的形式加载图片的，在网上还有一种方法是用 FDSUtils.downloadFile() 下载好图片在传进 word 中。代码如下：\n\n```java\nprivate List<ImageEntity> initImageData(String fileUrl) {\n    List<ImageEntity> result = new ArrayList<>();\n    if (StringUtils.isNotBlank(fileUrl)) {\n        if (fileUrl.indexOf(\",\") > 0) {\n            String[] fileUrlArr = fileUrl.split(\",\");\n            for (int i = 0 ; i < fileUrlArr.length ; i++) {\n                byte[] imageData = FDSUtils.downloadFile(fileUrlArr[i]);\n                ImageEntity item = new ImageEntity();\n                item.setWidth(300);\n                item.setHeight(300);\n                item.setData(imageData);\n                item.setType(ImageEntity.Data);\n                result.add(item);\n            }\n        } else {\n            byte[] imageData = FDSUtils.downloadFile(fileUrl);\n            ImageEntity item = new ImageEntity();\n            item.setWidth(300);\n            item.setHeight(300);\n            item.setData(imageData);\n            item.setType(ImageEntity.Data);\n            result.add(item);\n        }\n    } else {\n        ImageEntity item = new ImageEntity();\n        item.setWidth(300);\n        item.setHeight(300);\n        item.setData(null);\n        item.setType(ImageEntity.Data);\n        result.add(item);\n    }\n    return result;\n}\n```\n\n**这种方法我没有试过，其中的 FDSUtils.downloadFile() 方法需要自己封装，这个可以在网上找找！！！**\n\n","slug":"开发/后端/springboot使用easypoi根据模板导出word","published":1,"updated":"2025-06-02T07:28:43.411Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86w5000fzcqbaxeratbw","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>项目上有个需求，在 Word 里面导出图片，需要根据固定模板导出文件，故整理</p>\n<h2 id=\"导入依赖\"><a href=\"#导入依赖\" class=\"headerlink\" title=\"导入依赖\"></a>导入依赖</h2><p>在相应的 pom 文件中添加下面的代码</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>cn.afterturn<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>easypoi-base<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.4.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"在-resource-中添加文件夹并添加-word-模板\"><a href=\"#在-resource-中添加文件夹并添加-word-模板\" class=\"headerlink\" title=\"在 resource 中添加文件夹并添加 word 模板\"></a>在 resource 中添加文件夹并添加 word 模板</h2><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; 在模板中使用&#123;&#123;&#125;&#125;来进行占位</span><br><span class=\"line\">&gt; 需要添加多个图片时，使用&#123;&#123;fe:images t&#125;&#125;来进行占位。 **（其中的 images 替换成自己的字段）** </span><br><span class=\"line\">&gt; 如图：</span><br></pre></td></tr></table></figure>\n<h2 id=\"在程序中加入-ExportWordUtil-工具类\"><a href=\"#在程序中加入-ExportWordUtil-工具类\" class=\"headerlink\" title=\"在程序中加入 ExportWordUtil 工具类\"></a>在程序中加入 ExportWordUtil 工具类</h2><p>详细代码如下：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ExportWordUtil</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/****</span></span><br><span class=\"line\"><span class=\"comment\">     * 导出word数据</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> templatePath</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> fileName</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> params</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">exportWord</span><span class=\"params\">(String templatePath, String fileName, Map&lt;String, Object&gt; params, HttpServletResponse response)</span> &#123;</span><br><span class=\"line\">        Assert.notNull(templatePath, <span class=\"string\">&quot;模板路径不能为空！&quot;</span>);</span><br><span class=\"line\">        Assert.notNull(fileName, <span class=\"string\">&quot;文件名称不能为空！&quot;</span>);</span><br><span class=\"line\">        Assert.isTrue(fileName.endsWith(<span class=\"string\">&quot;.docx&quot;</span>), <span class=\"string\">&quot;word导出请使用docx格式！&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//生成本地文件时使用，可以添加为参数传进来</span></span><br><span class=\"line\"><span class=\"comment\">//        String tempPath = fileName;</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">XWPFDocument</span> <span class=\"variable\">doc</span> <span class=\"operator\">=</span> WordExportUtil.exportWord07(templatePath, params);</span><br><span class=\"line\">            <span class=\"comment\">// 设置强制下载不打开</span></span><br><span class=\"line\">            response.setContentType(<span class=\"string\">&quot;application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">// 设置文件名</span></span><br><span class=\"line\">            response.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">            response.addHeader(<span class=\"string\">&quot;Content-Disposition&quot;</span>, <span class=\"string\">&quot;attachment;fileName=&quot;</span> + URLEncoder.encode(fileName,<span class=\"string\">&quot;UTF-8&quot;</span>));</span><br><span class=\"line\">            <span class=\"type\">OutputStream</span> <span class=\"variable\">out</span> <span class=\"operator\">=</span> response.getOutputStream();</span><br><span class=\"line\">            doc.write(out);</span><br><span class=\"line\">            out.close();</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//生成本地文件时使用</span></span><br><span class=\"line\"><span class=\"comment\">//            FileOutputStream fos = new FileOutputStream(tempPath);</span></span><br><span class=\"line\"><span class=\"comment\">//            doc.write(fos);</span></span><br><span class=\"line\"><span class=\"comment\">//            fos.close();</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//删除本地文件</span></span><br><span class=\"line\"><span class=\"comment\">//            delFileWord(tempPath,fileName);</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@NotNull</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> List&lt;ImageEntity&gt; <span class=\"title function_\">getImageEntities</span><span class=\"params\">(List&lt;String&gt; accident)</span> &#123;</span><br><span class=\"line\">        List&lt;ImageEntity&gt; entities = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (accident != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (String image : accident) &#123;</span><br><span class=\"line\">                <span class=\"type\">ImageEntity</span> <span class=\"variable\">entity</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ImageEntity</span>();</span><br><span class=\"line\">                entity.setHeight(<span class=\"number\">500</span>);</span><br><span class=\"line\">                entity.setWidth(<span class=\"number\">500</span>);</span><br><span class=\"line\">                entity.setUrl(image);</span><br><span class=\"line\">                entity.setType(ImageEntity.URL);</span><br><span class=\"line\">                entities.add(entity);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">ImageEntity</span> <span class=\"variable\">entity</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ImageEntity</span>();</span><br><span class=\"line\">            entity.setHeight(<span class=\"number\">500</span>);</span><br><span class=\"line\">            entity.setWidth(<span class=\"number\">500</span>);</span><br><span class=\"line\">            entity.setUrl(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">            entity.setType(ImageEntity.URL);</span><br><span class=\"line\">            entities.add(entity);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> entities;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/***</span></span><br><span class=\"line\"><span class=\"comment\">     * 删除临时文件</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> filePath</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> fileName</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">delFileWord</span><span class=\"params\">(String filePath, String fileName)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">File</span> <span class=\"variable\">file</span> <span class=\"operator\">=</span><span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(filePath+fileName);</span><br><span class=\"line\">        <span class=\"type\">File</span> <span class=\"variable\">file1</span> <span class=\"operator\">=</span><span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(filePath);</span><br><span class=\"line\">        file.delete();</span><br><span class=\"line\">        file1.delete();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>其中的 exportWord 方法在本地存储文件时，可以添加一个参数 tempPath 并由程序其他地方传进来；getImageEntities 方法的使用的是 URL 的形式加载图片的，在网上还有一种方法是用 FDSUtils.downloadFile() 下载好图片在传进 word 中。代码如下：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> List&lt;ImageEntity&gt; <span class=\"title function_\">initImageData</span><span class=\"params\">(String fileUrl)</span> &#123;</span><br><span class=\"line\">    List&lt;ImageEntity&gt; result = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (StringUtils.isNotBlank(fileUrl)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (fileUrl.indexOf(<span class=\"string\">&quot;,&quot;</span>) &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            String[] fileUrlArr = fileUrl.split(<span class=\"string\">&quot;,&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span> ; i &lt; fileUrlArr.length ; i++) &#123;</span><br><span class=\"line\">                <span class=\"type\">byte</span>[] imageData = FDSUtils.downloadFile(fileUrlArr[i]);</span><br><span class=\"line\">                <span class=\"type\">ImageEntity</span> <span class=\"variable\">item</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ImageEntity</span>();</span><br><span class=\"line\">                item.setWidth(<span class=\"number\">300</span>);</span><br><span class=\"line\">                item.setHeight(<span class=\"number\">300</span>);</span><br><span class=\"line\">                item.setData(imageData);</span><br><span class=\"line\">                item.setType(ImageEntity.Data);</span><br><span class=\"line\">                result.add(item);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">byte</span>[] imageData = FDSUtils.downloadFile(fileUrl);</span><br><span class=\"line\">            <span class=\"type\">ImageEntity</span> <span class=\"variable\">item</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ImageEntity</span>();</span><br><span class=\"line\">            item.setWidth(<span class=\"number\">300</span>);</span><br><span class=\"line\">            item.setHeight(<span class=\"number\">300</span>);</span><br><span class=\"line\">            item.setData(imageData);</span><br><span class=\"line\">            item.setType(ImageEntity.Data);</span><br><span class=\"line\">            result.add(item);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">ImageEntity</span> <span class=\"variable\">item</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ImageEntity</span>();</span><br><span class=\"line\">        item.setWidth(<span class=\"number\">300</span>);</span><br><span class=\"line\">        item.setHeight(<span class=\"number\">300</span>);</span><br><span class=\"line\">        item.setData(<span class=\"literal\">null</span>);</span><br><span class=\"line\">        item.setType(ImageEntity.Data);</span><br><span class=\"line\">        result.add(item);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>这种方法我没有试过，其中的 FDSUtils.downloadFile() 方法需要自己封装，这个可以在网上找找！！！</strong></p>\n","cover":"https://t.alcy.cc/pc?_r_=74d9d01f-55de-1bb1-3bf8-e54f7dee3124","cover_type":"img","excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>项目上有个需求，在 Word 里面导出图片，需要根据固定模板导出文件，故整理</p>\n<h2 id=\"导入依赖\"><a href=\"#导入依赖\" class=\"headerlink\" title=\"导入依赖\"></a>导入依赖</h2><p>在相应的 pom 文件中添加下面的代码</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>cn.afterturn<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>easypoi-base<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.4.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"在-resource-中添加文件夹并添加-word-模板\"><a href=\"#在-resource-中添加文件夹并添加-word-模板\" class=\"headerlink\" title=\"在 resource 中添加文件夹并添加 word 模板\"></a>在 resource 中添加文件夹并添加 word 模板</h2><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; 在模板中使用&#123;&#123;&#125;&#125;来进行占位</span><br><span class=\"line\">&gt; 需要添加多个图片时，使用&#123;&#123;fe:images t&#125;&#125;来进行占位。 **（其中的 images 替换成自己的字段）** </span><br><span class=\"line\">&gt; 如图：</span><br></pre></td></tr></table></figure>\n<h2 id=\"在程序中加入-ExportWordUtil-工具类\"><a href=\"#在程序中加入-ExportWordUtil-工具类\" class=\"headerlink\" title=\"在程序中加入 ExportWordUtil 工具类\"></a>在程序中加入 ExportWordUtil 工具类</h2><p>详细代码如下：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ExportWordUtil</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/****</span></span><br><span class=\"line\"><span class=\"comment\">     * 导出word数据</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> templatePath</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> fileName</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> params</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">exportWord</span><span class=\"params\">(String templatePath, String fileName, Map&lt;String, Object&gt; params, HttpServletResponse response)</span> &#123;</span><br><span class=\"line\">        Assert.notNull(templatePath, <span class=\"string\">&quot;模板路径不能为空！&quot;</span>);</span><br><span class=\"line\">        Assert.notNull(fileName, <span class=\"string\">&quot;文件名称不能为空！&quot;</span>);</span><br><span class=\"line\">        Assert.isTrue(fileName.endsWith(<span class=\"string\">&quot;.docx&quot;</span>), <span class=\"string\">&quot;word导出请使用docx格式！&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//生成本地文件时使用，可以添加为参数传进来</span></span><br><span class=\"line\"><span class=\"comment\">//        String tempPath = fileName;</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">XWPFDocument</span> <span class=\"variable\">doc</span> <span class=\"operator\">=</span> WordExportUtil.exportWord07(templatePath, params);</span><br><span class=\"line\">            <span class=\"comment\">// 设置强制下载不打开</span></span><br><span class=\"line\">            response.setContentType(<span class=\"string\">&quot;application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">// 设置文件名</span></span><br><span class=\"line\">            response.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">            response.addHeader(<span class=\"string\">&quot;Content-Disposition&quot;</span>, <span class=\"string\">&quot;attachment;fileName=&quot;</span> + URLEncoder.encode(fileName,<span class=\"string\">&quot;UTF-8&quot;</span>));</span><br><span class=\"line\">            <span class=\"type\">OutputStream</span> <span class=\"variable\">out</span> <span class=\"operator\">=</span> response.getOutputStream();</span><br><span class=\"line\">            doc.write(out);</span><br><span class=\"line\">            out.close();</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//生成本地文件时使用</span></span><br><span class=\"line\"><span class=\"comment\">//            FileOutputStream fos = new FileOutputStream(tempPath);</span></span><br><span class=\"line\"><span class=\"comment\">//            doc.write(fos);</span></span><br><span class=\"line\"><span class=\"comment\">//            fos.close();</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//删除本地文件</span></span><br><span class=\"line\"><span class=\"comment\">//            delFileWord(tempPath,fileName);</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@NotNull</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> List&lt;ImageEntity&gt; <span class=\"title function_\">getImageEntities</span><span class=\"params\">(List&lt;String&gt; accident)</span> &#123;</span><br><span class=\"line\">        List&lt;ImageEntity&gt; entities = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (accident != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (String image : accident) &#123;</span><br><span class=\"line\">                <span class=\"type\">ImageEntity</span> <span class=\"variable\">entity</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ImageEntity</span>();</span><br><span class=\"line\">                entity.setHeight(<span class=\"number\">500</span>);</span><br><span class=\"line\">                entity.setWidth(<span class=\"number\">500</span>);</span><br><span class=\"line\">                entity.setUrl(image);</span><br><span class=\"line\">                entity.setType(ImageEntity.URL);</span><br><span class=\"line\">                entities.add(entity);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">ImageEntity</span> <span class=\"variable\">entity</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ImageEntity</span>();</span><br><span class=\"line\">            entity.setHeight(<span class=\"number\">500</span>);</span><br><span class=\"line\">            entity.setWidth(<span class=\"number\">500</span>);</span><br><span class=\"line\">            entity.setUrl(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">            entity.setType(ImageEntity.URL);</span><br><span class=\"line\">            entities.add(entity);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> entities;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/***</span></span><br><span class=\"line\"><span class=\"comment\">     * 删除临时文件</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> filePath</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> fileName</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">delFileWord</span><span class=\"params\">(String filePath, String fileName)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">File</span> <span class=\"variable\">file</span> <span class=\"operator\">=</span><span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(filePath+fileName);</span><br><span class=\"line\">        <span class=\"type\">File</span> <span class=\"variable\">file1</span> <span class=\"operator\">=</span><span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(filePath);</span><br><span class=\"line\">        file.delete();</span><br><span class=\"line\">        file1.delete();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>其中的 exportWord 方法在本地存储文件时，可以添加一个参数 tempPath 并由程序其他地方传进来；getImageEntities 方法的使用的是 URL 的形式加载图片的，在网上还有一种方法是用 FDSUtils.downloadFile() 下载好图片在传进 word 中。代码如下：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> List&lt;ImageEntity&gt; <span class=\"title function_\">initImageData</span><span class=\"params\">(String fileUrl)</span> &#123;</span><br><span class=\"line\">    List&lt;ImageEntity&gt; result = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (StringUtils.isNotBlank(fileUrl)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (fileUrl.indexOf(<span class=\"string\">&quot;,&quot;</span>) &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            String[] fileUrlArr = fileUrl.split(<span class=\"string\">&quot;,&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span> ; i &lt; fileUrlArr.length ; i++) &#123;</span><br><span class=\"line\">                <span class=\"type\">byte</span>[] imageData = FDSUtils.downloadFile(fileUrlArr[i]);</span><br><span class=\"line\">                <span class=\"type\">ImageEntity</span> <span class=\"variable\">item</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ImageEntity</span>();</span><br><span class=\"line\">                item.setWidth(<span class=\"number\">300</span>);</span><br><span class=\"line\">                item.setHeight(<span class=\"number\">300</span>);</span><br><span class=\"line\">                item.setData(imageData);</span><br><span class=\"line\">                item.setType(ImageEntity.Data);</span><br><span class=\"line\">                result.add(item);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">byte</span>[] imageData = FDSUtils.downloadFile(fileUrl);</span><br><span class=\"line\">            <span class=\"type\">ImageEntity</span> <span class=\"variable\">item</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ImageEntity</span>();</span><br><span class=\"line\">            item.setWidth(<span class=\"number\">300</span>);</span><br><span class=\"line\">            item.setHeight(<span class=\"number\">300</span>);</span><br><span class=\"line\">            item.setData(imageData);</span><br><span class=\"line\">            item.setType(ImageEntity.Data);</span><br><span class=\"line\">            result.add(item);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">ImageEntity</span> <span class=\"variable\">item</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ImageEntity</span>();</span><br><span class=\"line\">        item.setWidth(<span class=\"number\">300</span>);</span><br><span class=\"line\">        item.setHeight(<span class=\"number\">300</span>);</span><br><span class=\"line\">        item.setData(<span class=\"literal\">null</span>);</span><br><span class=\"line\">        item.setType(ImageEntity.Data);</span><br><span class=\"line\">        result.add(item);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>这种方法我没有试过，其中的 FDSUtils.downloadFile() 方法需要自己封装，这个可以在网上找找！！！</strong></p>\n"},{"title":"bladex-ui常用备忘录","abbrlink":"1b6d","date":"2025-03-18T06:01:00.000Z","_content":"\n\n## docker部署db-gpt\n\n1. 拉取镜像\n\n   ```shell\n   docker pull eosphorosai/dbgpt:latest\n   ```\n2. 拉取text2vec-large-chinese\n\n   ```shell\n   # 首先需要安装git-lfs（自己百度），记得存放在挂载卷所在的位置\n   git clone https://huggingface.co/GanymedeNil/text2vec-large-chinese\n   ```\n3. 拉取需要的模型\n\n   ```shell\n   # 魔塔模型库：https://www.modelscope.cn/models?page=1\n   git克隆一下，记得对比文件大小，记得存放在挂载卷所在的位置\n   ```\n4. 运行docker\n\n   ```shell\n   docker run --ipc host --gpus all -d \\\n   -p 5670:5670 \\\n   -e LOCAL_DB_TYPE=mysql \\\n   -e LOCAL_DB_USER=root \\\n   -e LOCAL_DB_PASSWORD=123456 \\\n   -e LOCAL_DB_HOST=192.168.214.134 \\   #mysql配置改一下\n   -e LOCAL_DB_PORT=3306 \\\n   -e LOCAL_DB_NAME=dbgpt \\\n   -e LLM_MODEL=Qwen2.5-1.5B-Instruct \\   #模型配置改一下\n   -e LLM_MODEL_PATH=/app/models/Qwen2.5-1.5B-Instruct \\  #模型在容器内的路径（只需要修改模型名字）\n   -e LANGUAGE=zh \\\n   -v /data/models:/app/models \\\n   --name dbgpt \\\n   eosphorosai/dbgpt:latest\n   ```\n\n## Ubuntu安装DB-GPT\n\n1. 下载源码\n\n   ```shell\n   git clone https://github.com/eosphoros-ai/DB-GPT.git\n   ```\n2. 安装miniconda\n\n   ```shell\n   # 进入root账户\n   sudo -i\n\n   # 下载文件\n   wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh\n\n   # 添加可执行权限\n   chmod +x Miniconda3-latest-Linux-x86_64.sh\n\n   # 运行安装脚本\n   ./Miniconda3-latest-Linux-x86_64.sh\n\n   # 运行后：\n   ## 点击ENTER进入即可。之后会出现一个用户协议，按空格键直到协议最底部，然后输入“yes”接受协议，开始安装。之后需要确认想要安装的目录。\n   ## 一般就是安在主目录下就行（如上图那种格式），我就是将它安装在主目录下，如果你想更改路径请输入路径后在按回车键。\n   ## 之后输入yes即可，之后就显示安装成功了！\n\n   # 刷新路径信息\n   source  ~/.bashrc\n   ```\n3. 新建conda虚拟环境\n\n   ```shell\n   conda create -n dbgpt_env python=3.10\n   conda activate dbgpt_env\n   ```\n4. 安装\n\n   ```shell\n   pip install -e \".[default]\"\n\n   # 安装途中会有报错显示需要torch\n   ## 执行下面的命令\n   conda install pytorch==1.13.1 torchvision==0.14.1 torchaudio==0.13.1 cpuonly -c pytorch\n   # 注意：安装中由于有些文件需要外网环境，所以需要提前配置\n   ```\n5. 配置文件\n\n   ```shell\n   cp .env.template  .env\n   # 配置修改见下面。\n   # 下载embedding model\n   git clone https://www.modelscope.cn/Jerry0/text2vec-large-chinese.git\n   ```\n6. 运行程序\n\n   ```shell\n   # 在项目中执行下面的命令\n   python dbgpt/app/dbgpt_server.py\n   ```\n7. 运行成功后配置成后台服务\n\n   ```shell\n   # 使用nano或vim\n   nano /etc/systemd/system/dbgpt.service\n   ```\n\n   ```shell\n   #输入下面的配置\n\n   [Unit]\n   Description=dbgpt\n   After=network.target\n\n   [Service]\n   User=root\n   Group=root\n   WorkingDirectory=/app/dbgpt/DB-GPT/\n   ExecStart=/app/miniconda/miniconda3/envs/dbgpt_env/bin/python /app/dbgpt/DB-GPT/dbgpt/app/dbgpt_server.py\n   Restart=always\n   Environment=PYTHONUNBUFFERED=1\n\n   [Install]\n   WantedBy=multi-user.target\n   ```\n\n   ```shell\n   # 注意：ExecStart中是要执行的命令或脚本，需要使用conda中的虚拟环境中的python来执行。\n   ##查看conda的环境配置\n   ##查看环境列表和位置\n   conda env list\n   确认环境位置后添加上/bin/python\n\n\n   Description: 服务的描述。\n   After: 指定网络启动后再启动此服务。\n   User 和 Group: 运行该服务的用户和组。\n   WorkingDirectory: 工作目录路径。\n   ExecStart: 要执行的命令或脚本。\n   Restart: 始终重启服务。\n   Environment: 设置环境变量，这里设置了PYTHONUNBUFFERED以便实时看到输出。\n   WantedBy: 指定目标运行级别。\n   ```\n\n   ```shell\n   # 加载配置\n   systemctl daemon-reload\n   # 启动服务\n   systemctl start dbgpt\n   # 动态查看日志\n   journalctl -u  dbgpt -f\n   ```\n\n## 注意事项：\n\n1. 分词模型必须存在运行目录的model文件夹下\n\n   ~~~shell\n   # 必须存在\n   text2vec-large-chinese\n   ~~~\n\n## 配置文件\n\n### 基础配置\n\n~~~shell\n# 数据库\nLOCAL_DB_TYPE=mysql\nLOCAL_DB_USER=root\nLOCAL_DB_PASSWORD=Huanfa@2025\nLOCAL_DB_HOST=192.168.2.20\nLOCAL_DB_PORT=3306\nLOCAL_DB_NAME=dbgpt\n\n\n\n# 模型\nLIMIT_MODEL_CONCURRENCY=5\nMAX_POSITION_EMBEDDINGS=4096\nQUANTIZE_QLORA=True\nQUANTIZE_8bit=True\n~~~\n\nenv文件\n\n### 代理模型\n\n~~~shell\n# 模型名称\nMODEL_NAME=\"梁溪环发AI\"\n# 模型类型\nLLM_MODEL=ollama_proxyllm\n# 模型路径\nMODEL_PATH=ollama_proxyllm\n# 模型地址\nMODEL_SERVER=http://192.168.12.210:11434\n# 代理地址\nPROXY_SERVER_URL=http://192.168.12.210:11434\n# 代理模型后端\nPROXYLLM_BACKEND=qwen2.5:14b\n# 代理模型key\nPROXY_API_KEY=not_used\n# 嵌入类型\nEMBEDDING_MODEL=proxy_ollama\n\nproxy_ollama_proxy_server_url=http://192.168.12.210:11434\nproxy_ollama_proxy_backend=nomic-embed-text:latest\n~~~\n\n### Qwen2.5-1.5B-Instruct模型\n\n~~~shell\n# 模型名称\nLLM_MODEL=Qwen2.5-1.5B-Instruct\n# 模型位置\nLLM_MODEL_PATH=/app/models/Qwen2.5-1.5B-Instruct\n~~~\n\n## 在线添加模型\n\nModel name：（随便填）\n\nModel path：ollama_proxyllm（默认）\n\nproxy_server_url：（ollama服务地址）\n\nproxy_api_key：not_used（固定值）\n\nproxyllm_backend：（ollama模型）\n\nmodel_type：（固定值）\n\n![image-20250312160723213](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250312160723213.png)\n\n## Ollama\n\n1. 安装ollama后，配置**用户变量**\n\n~~~shell\n# 配置ip及其端口\nOLLAMA_HOST=192.168.12.210:11434\n# 配置模型存储位置\nOLLAMA_MODELS=D:\\ollama\\\n~~~\n\n2. 安装模型[Ollama Search](https://ollama.com/search)\n\n‍\n","source":"_posts/开发/AI/DB-GPT安装调试手册.md","raw":"---\ntitle: bladex-ui常用备忘录\ncategories:\n  - AI\ntags:\n  - DB-GPT\n  - GPT\nabbrlink: 1b6d\ndate: 2025-03-18 14:01:00\n---\n\n\n## docker部署db-gpt\n\n1. 拉取镜像\n\n   ```shell\n   docker pull eosphorosai/dbgpt:latest\n   ```\n2. 拉取text2vec-large-chinese\n\n   ```shell\n   # 首先需要安装git-lfs（自己百度），记得存放在挂载卷所在的位置\n   git clone https://huggingface.co/GanymedeNil/text2vec-large-chinese\n   ```\n3. 拉取需要的模型\n\n   ```shell\n   # 魔塔模型库：https://www.modelscope.cn/models?page=1\n   git克隆一下，记得对比文件大小，记得存放在挂载卷所在的位置\n   ```\n4. 运行docker\n\n   ```shell\n   docker run --ipc host --gpus all -d \\\n   -p 5670:5670 \\\n   -e LOCAL_DB_TYPE=mysql \\\n   -e LOCAL_DB_USER=root \\\n   -e LOCAL_DB_PASSWORD=123456 \\\n   -e LOCAL_DB_HOST=192.168.214.134 \\   #mysql配置改一下\n   -e LOCAL_DB_PORT=3306 \\\n   -e LOCAL_DB_NAME=dbgpt \\\n   -e LLM_MODEL=Qwen2.5-1.5B-Instruct \\   #模型配置改一下\n   -e LLM_MODEL_PATH=/app/models/Qwen2.5-1.5B-Instruct \\  #模型在容器内的路径（只需要修改模型名字）\n   -e LANGUAGE=zh \\\n   -v /data/models:/app/models \\\n   --name dbgpt \\\n   eosphorosai/dbgpt:latest\n   ```\n\n## Ubuntu安装DB-GPT\n\n1. 下载源码\n\n   ```shell\n   git clone https://github.com/eosphoros-ai/DB-GPT.git\n   ```\n2. 安装miniconda\n\n   ```shell\n   # 进入root账户\n   sudo -i\n\n   # 下载文件\n   wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh\n\n   # 添加可执行权限\n   chmod +x Miniconda3-latest-Linux-x86_64.sh\n\n   # 运行安装脚本\n   ./Miniconda3-latest-Linux-x86_64.sh\n\n   # 运行后：\n   ## 点击ENTER进入即可。之后会出现一个用户协议，按空格键直到协议最底部，然后输入“yes”接受协议，开始安装。之后需要确认想要安装的目录。\n   ## 一般就是安在主目录下就行（如上图那种格式），我就是将它安装在主目录下，如果你想更改路径请输入路径后在按回车键。\n   ## 之后输入yes即可，之后就显示安装成功了！\n\n   # 刷新路径信息\n   source  ~/.bashrc\n   ```\n3. 新建conda虚拟环境\n\n   ```shell\n   conda create -n dbgpt_env python=3.10\n   conda activate dbgpt_env\n   ```\n4. 安装\n\n   ```shell\n   pip install -e \".[default]\"\n\n   # 安装途中会有报错显示需要torch\n   ## 执行下面的命令\n   conda install pytorch==1.13.1 torchvision==0.14.1 torchaudio==0.13.1 cpuonly -c pytorch\n   # 注意：安装中由于有些文件需要外网环境，所以需要提前配置\n   ```\n5. 配置文件\n\n   ```shell\n   cp .env.template  .env\n   # 配置修改见下面。\n   # 下载embedding model\n   git clone https://www.modelscope.cn/Jerry0/text2vec-large-chinese.git\n   ```\n6. 运行程序\n\n   ```shell\n   # 在项目中执行下面的命令\n   python dbgpt/app/dbgpt_server.py\n   ```\n7. 运行成功后配置成后台服务\n\n   ```shell\n   # 使用nano或vim\n   nano /etc/systemd/system/dbgpt.service\n   ```\n\n   ```shell\n   #输入下面的配置\n\n   [Unit]\n   Description=dbgpt\n   After=network.target\n\n   [Service]\n   User=root\n   Group=root\n   WorkingDirectory=/app/dbgpt/DB-GPT/\n   ExecStart=/app/miniconda/miniconda3/envs/dbgpt_env/bin/python /app/dbgpt/DB-GPT/dbgpt/app/dbgpt_server.py\n   Restart=always\n   Environment=PYTHONUNBUFFERED=1\n\n   [Install]\n   WantedBy=multi-user.target\n   ```\n\n   ```shell\n   # 注意：ExecStart中是要执行的命令或脚本，需要使用conda中的虚拟环境中的python来执行。\n   ##查看conda的环境配置\n   ##查看环境列表和位置\n   conda env list\n   确认环境位置后添加上/bin/python\n\n\n   Description: 服务的描述。\n   After: 指定网络启动后再启动此服务。\n   User 和 Group: 运行该服务的用户和组。\n   WorkingDirectory: 工作目录路径。\n   ExecStart: 要执行的命令或脚本。\n   Restart: 始终重启服务。\n   Environment: 设置环境变量，这里设置了PYTHONUNBUFFERED以便实时看到输出。\n   WantedBy: 指定目标运行级别。\n   ```\n\n   ```shell\n   # 加载配置\n   systemctl daemon-reload\n   # 启动服务\n   systemctl start dbgpt\n   # 动态查看日志\n   journalctl -u  dbgpt -f\n   ```\n\n## 注意事项：\n\n1. 分词模型必须存在运行目录的model文件夹下\n\n   ~~~shell\n   # 必须存在\n   text2vec-large-chinese\n   ~~~\n\n## 配置文件\n\n### 基础配置\n\n~~~shell\n# 数据库\nLOCAL_DB_TYPE=mysql\nLOCAL_DB_USER=root\nLOCAL_DB_PASSWORD=Huanfa@2025\nLOCAL_DB_HOST=192.168.2.20\nLOCAL_DB_PORT=3306\nLOCAL_DB_NAME=dbgpt\n\n\n\n# 模型\nLIMIT_MODEL_CONCURRENCY=5\nMAX_POSITION_EMBEDDINGS=4096\nQUANTIZE_QLORA=True\nQUANTIZE_8bit=True\n~~~\n\nenv文件\n\n### 代理模型\n\n~~~shell\n# 模型名称\nMODEL_NAME=\"梁溪环发AI\"\n# 模型类型\nLLM_MODEL=ollama_proxyllm\n# 模型路径\nMODEL_PATH=ollama_proxyllm\n# 模型地址\nMODEL_SERVER=http://192.168.12.210:11434\n# 代理地址\nPROXY_SERVER_URL=http://192.168.12.210:11434\n# 代理模型后端\nPROXYLLM_BACKEND=qwen2.5:14b\n# 代理模型key\nPROXY_API_KEY=not_used\n# 嵌入类型\nEMBEDDING_MODEL=proxy_ollama\n\nproxy_ollama_proxy_server_url=http://192.168.12.210:11434\nproxy_ollama_proxy_backend=nomic-embed-text:latest\n~~~\n\n### Qwen2.5-1.5B-Instruct模型\n\n~~~shell\n# 模型名称\nLLM_MODEL=Qwen2.5-1.5B-Instruct\n# 模型位置\nLLM_MODEL_PATH=/app/models/Qwen2.5-1.5B-Instruct\n~~~\n\n## 在线添加模型\n\nModel name：（随便填）\n\nModel path：ollama_proxyllm（默认）\n\nproxy_server_url：（ollama服务地址）\n\nproxy_api_key：not_used（固定值）\n\nproxyllm_backend：（ollama模型）\n\nmodel_type：（固定值）\n\n![image-20250312160723213](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250312160723213.png)\n\n## Ollama\n\n1. 安装ollama后，配置**用户变量**\n\n~~~shell\n# 配置ip及其端口\nOLLAMA_HOST=192.168.12.210:11434\n# 配置模型存储位置\nOLLAMA_MODELS=D:\\ollama\\\n~~~\n\n2. 安装模型[Ollama Search](https://ollama.com/search)\n\n‍\n","slug":"开发/AI/DB-GPT安装调试手册","published":1,"updated":"2025-06-02T07:28:29.079Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86w6000kzcqb2w2phho8","content":"<h2 id=\"docker部署db-gpt\"><a href=\"#docker部署db-gpt\" class=\"headerlink\" title=\"docker部署db-gpt\"></a>docker部署db-gpt</h2><ol>\n<li><p>拉取镜像</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull eosphorosai/dbgpt:latest</span><br></pre></td></tr></table></figure></li>\n<li><p>拉取text2vec-large-chinese</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">首先需要安装git-lfs（自己百度），记得存放在挂载卷所在的位置</span></span><br><span class=\"line\">git clone https://huggingface.co/GanymedeNil/text2vec-large-chinese</span><br></pre></td></tr></table></figure></li>\n<li><p>拉取需要的模型</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">魔塔模型库：https://www.modelscope.cn/models?page=1</span></span><br><span class=\"line\">git克隆一下，记得对比文件大小，记得存放在挂载卷所在的位置</span><br></pre></td></tr></table></figure></li>\n<li><p>运行docker</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --ipc host --gpus all -d \\</span><br><span class=\"line\">-p 5670:5670 \\</span><br><span class=\"line\">-e LOCAL_DB_TYPE=mysql \\</span><br><span class=\"line\">-e LOCAL_DB_USER=root \\</span><br><span class=\"line\">-e LOCAL_DB_PASSWORD=123456 \\</span><br><span class=\"line\">-e LOCAL_DB_HOST=192.168.214.134 \\   #mysql配置改一下</span><br><span class=\"line\">-e LOCAL_DB_PORT=3306 \\</span><br><span class=\"line\">-e LOCAL_DB_NAME=dbgpt \\</span><br><span class=\"line\">-e LLM_MODEL=Qwen2.5-1.5B-Instruct \\   #模型配置改一下</span><br><span class=\"line\">-e LLM_MODEL_PATH=/app/models/Qwen2.5-1.5B-Instruct \\  #模型在容器内的路径（只需要修改模型名字）</span><br><span class=\"line\">-e LANGUAGE=zh \\</span><br><span class=\"line\">-v /data/models:/app/models \\</span><br><span class=\"line\">--name dbgpt \\</span><br><span class=\"line\">eosphorosai/dbgpt:latest</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"Ubuntu安装DB-GPT\"><a href=\"#Ubuntu安装DB-GPT\" class=\"headerlink\" title=\"Ubuntu安装DB-GPT\"></a>Ubuntu安装DB-GPT</h2><ol>\n<li><p>下载源码</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/eosphoros-ai/DB-GPT.git</span><br></pre></td></tr></table></figure></li>\n<li><p>安装miniconda</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">进入root账户</span></span><br><span class=\"line\">sudo -i</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下载文件</span></span><br><span class=\"line\">wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">添加可执行权限</span></span><br><span class=\"line\">chmod +x Miniconda3-latest-Linux-x86_64.sh</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">运行安装脚本</span></span><br><span class=\"line\">./Miniconda3-latest-Linux-x86_64.sh</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">运行后：</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 点击ENTER进入即可。之后会出现一个用户协议，按空格键直到协议最底部，然后输入“yes”接受协议，开始安装。之后需要确认想要安装的目录。</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 一般就是安在主目录下就行（如上图那种格式），我就是将它安装在主目录下，如果你想更改路径请输入路径后在按回车键。</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 之后输入yes即可，之后就显示安装成功了！</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">刷新路径信息</span></span><br><span class=\"line\">source  ~/.bashrc</span><br></pre></td></tr></table></figure></li>\n<li><p>新建conda虚拟环境</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda create -n dbgpt_env python=3.10</span><br><span class=\"line\">conda activate dbgpt_env</span><br></pre></td></tr></table></figure></li>\n<li><p>安装</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install -e &quot;.[default]&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装途中会有报错显示需要torch</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 执行下面的命令</span></span></span><br><span class=\"line\">conda install pytorch==1.13.1 torchvision==0.14.1 torchaudio==0.13.1 cpuonly -c pytorch</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">注意：安装中由于有些文件需要外网环境，所以需要提前配置</span></span><br></pre></td></tr></table></figure></li>\n<li><p>配置文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp .env.template  .env</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">配置修改见下面。</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下载embedding model</span></span><br><span class=\"line\">git clone https://www.modelscope.cn/Jerry0/text2vec-large-chinese.git</span><br></pre></td></tr></table></figure></li>\n<li><p>运行程序</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">在项目中执行下面的命令</span></span><br><span class=\"line\">python dbgpt/app/dbgpt_server.py</span><br></pre></td></tr></table></figure></li>\n<li><p>运行成功后配置成后台服务</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">使用nano或vim</span></span><br><span class=\"line\">nano /etc/systemd/system/dbgpt.service</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">输入下面的配置</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=dbgpt</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">User=root</span><br><span class=\"line\">Group=root</span><br><span class=\"line\">WorkingDirectory=/app/dbgpt/DB-GPT/</span><br><span class=\"line\">ExecStart=/app/miniconda/miniconda3/envs/dbgpt_env/bin/python /app/dbgpt/DB-GPT/dbgpt/app/dbgpt_server.py</span><br><span class=\"line\">Restart=always</span><br><span class=\"line\">Environment=PYTHONUNBUFFERED=1</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">注意：ExecStart中是要执行的命令或脚本，需要使用conda中的虚拟环境中的python来执行。</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\">#查看conda的环境配置</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\">#查看环境列表和位置</span></span></span><br><span class=\"line\">conda env list</span><br><span class=\"line\">确认环境位置后添加上/bin/python</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Description: 服务的描述。</span><br><span class=\"line\">After: 指定网络启动后再启动此服务。</span><br><span class=\"line\">User 和 Group: 运行该服务的用户和组。</span><br><span class=\"line\">WorkingDirectory: 工作目录路径。</span><br><span class=\"line\">ExecStart: 要执行的命令或脚本。</span><br><span class=\"line\">Restart: 始终重启服务。</span><br><span class=\"line\">Environment: 设置环境变量，这里设置了PYTHONUNBUFFERED以便实时看到输出。</span><br><span class=\"line\">WantedBy: 指定目标运行级别。</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">加载配置</span></span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动服务</span></span><br><span class=\"line\">systemctl start dbgpt</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">动态查看日志</span></span><br><span class=\"line\">journalctl -u  dbgpt -f</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"注意事项：\"><a href=\"#注意事项：\" class=\"headerlink\" title=\"注意事项：\"></a>注意事项：</h2><ol>\n<li><p>分词模型必须存在运行目录的model文件夹下</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">必须存在</span></span><br><span class=\"line\">text2vec-large-chinese</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h2><h3 id=\"基础配置\"><a href=\"#基础配置\" class=\"headerlink\" title=\"基础配置\"></a>基础配置</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">数据库</span></span><br><span class=\"line\">LOCAL_DB_TYPE=mysql</span><br><span class=\"line\">LOCAL_DB_USER=root</span><br><span class=\"line\">LOCAL_DB_PASSWORD=Huanfa@2025</span><br><span class=\"line\">LOCAL_DB_HOST=192.168.2.20</span><br><span class=\"line\">LOCAL_DB_PORT=3306</span><br><span class=\"line\">LOCAL_DB_NAME=dbgpt</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">模型</span></span><br><span class=\"line\">LIMIT_MODEL_CONCURRENCY=5</span><br><span class=\"line\">MAX_POSITION_EMBEDDINGS=4096</span><br><span class=\"line\">QUANTIZE_QLORA=True</span><br><span class=\"line\">QUANTIZE_8bit=True</span><br></pre></td></tr></table></figure>\n\n<p>env文件</p>\n<h3 id=\"代理模型\"><a href=\"#代理模型\" class=\"headerlink\" title=\"代理模型\"></a>代理模型</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">模型名称</span></span><br><span class=\"line\">MODEL_NAME=&quot;梁溪环发AI&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">模型类型</span></span><br><span class=\"line\">LLM_MODEL=ollama_proxyllm</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">模型路径</span></span><br><span class=\"line\">MODEL_PATH=ollama_proxyllm</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">模型地址</span></span><br><span class=\"line\">MODEL_SERVER=http://192.168.12.210:11434</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">代理地址</span></span><br><span class=\"line\">PROXY_SERVER_URL=http://192.168.12.210:11434</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">代理模型后端</span></span><br><span class=\"line\">PROXYLLM_BACKEND=qwen2.5:14b</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">代理模型key</span></span><br><span class=\"line\">PROXY_API_KEY=not_used</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">嵌入类型</span></span><br><span class=\"line\">EMBEDDING_MODEL=proxy_ollama</span><br><span class=\"line\"></span><br><span class=\"line\">proxy_ollama_proxy_server_url=http://192.168.12.210:11434</span><br><span class=\"line\">proxy_ollama_proxy_backend=nomic-embed-text:latest</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Qwen2-5-1-5B-Instruct模型\"><a href=\"#Qwen2-5-1-5B-Instruct模型\" class=\"headerlink\" title=\"Qwen2.5-1.5B-Instruct模型\"></a>Qwen2.5-1.5B-Instruct模型</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">模型名称</span></span><br><span class=\"line\">LLM_MODEL=Qwen2.5-1.5B-Instruct</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">模型位置</span></span><br><span class=\"line\">LLM_MODEL_PATH=/app/models/Qwen2.5-1.5B-Instruct</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"在线添加模型\"><a href=\"#在线添加模型\" class=\"headerlink\" title=\"在线添加模型\"></a>在线添加模型</h2><p>Model name：（随便填）</p>\n<p>Model path：ollama_proxyllm（默认）</p>\n<p>proxy_server_url：（ollama服务地址）</p>\n<p>proxy_api_key：not_used（固定值）</p>\n<p>proxyllm_backend：（ollama模型）</p>\n<p>model_type：（固定值）</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250312160723213.png\" alt=\"image-20250312160723213\"></p>\n<h2 id=\"Ollama\"><a href=\"#Ollama\" class=\"headerlink\" title=\"Ollama\"></a>Ollama</h2><ol>\n<li>安装ollama后，配置<strong>用户变量</strong></li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">配置ip及其端口</span></span><br><span class=\"line\">OLLAMA_HOST=192.168.12.210:11434</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">配置模型存储位置</span></span><br><span class=\"line\">OLLAMA_MODELS=D:\\ollama\\</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>安装模型<a href=\"https://ollama.com/search\">Ollama Search</a></li>\n</ol>\n<p>‍</p>\n","cover":"https://t.alcy.cc/pc?_r_=7edd1275-9376-8185-e7df-a289913114d9","cover_type":"img","excerpt":"","more":"<h2 id=\"docker部署db-gpt\"><a href=\"#docker部署db-gpt\" class=\"headerlink\" title=\"docker部署db-gpt\"></a>docker部署db-gpt</h2><ol>\n<li><p>拉取镜像</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull eosphorosai/dbgpt:latest</span><br></pre></td></tr></table></figure></li>\n<li><p>拉取text2vec-large-chinese</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">首先需要安装git-lfs（自己百度），记得存放在挂载卷所在的位置</span></span><br><span class=\"line\">git clone https://huggingface.co/GanymedeNil/text2vec-large-chinese</span><br></pre></td></tr></table></figure></li>\n<li><p>拉取需要的模型</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">魔塔模型库：https://www.modelscope.cn/models?page=1</span></span><br><span class=\"line\">git克隆一下，记得对比文件大小，记得存放在挂载卷所在的位置</span><br></pre></td></tr></table></figure></li>\n<li><p>运行docker</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --ipc host --gpus all -d \\</span><br><span class=\"line\">-p 5670:5670 \\</span><br><span class=\"line\">-e LOCAL_DB_TYPE=mysql \\</span><br><span class=\"line\">-e LOCAL_DB_USER=root \\</span><br><span class=\"line\">-e LOCAL_DB_PASSWORD=123456 \\</span><br><span class=\"line\">-e LOCAL_DB_HOST=192.168.214.134 \\   #mysql配置改一下</span><br><span class=\"line\">-e LOCAL_DB_PORT=3306 \\</span><br><span class=\"line\">-e LOCAL_DB_NAME=dbgpt \\</span><br><span class=\"line\">-e LLM_MODEL=Qwen2.5-1.5B-Instruct \\   #模型配置改一下</span><br><span class=\"line\">-e LLM_MODEL_PATH=/app/models/Qwen2.5-1.5B-Instruct \\  #模型在容器内的路径（只需要修改模型名字）</span><br><span class=\"line\">-e LANGUAGE=zh \\</span><br><span class=\"line\">-v /data/models:/app/models \\</span><br><span class=\"line\">--name dbgpt \\</span><br><span class=\"line\">eosphorosai/dbgpt:latest</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"Ubuntu安装DB-GPT\"><a href=\"#Ubuntu安装DB-GPT\" class=\"headerlink\" title=\"Ubuntu安装DB-GPT\"></a>Ubuntu安装DB-GPT</h2><ol>\n<li><p>下载源码</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/eosphoros-ai/DB-GPT.git</span><br></pre></td></tr></table></figure></li>\n<li><p>安装miniconda</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">进入root账户</span></span><br><span class=\"line\">sudo -i</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下载文件</span></span><br><span class=\"line\">wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">添加可执行权限</span></span><br><span class=\"line\">chmod +x Miniconda3-latest-Linux-x86_64.sh</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">运行安装脚本</span></span><br><span class=\"line\">./Miniconda3-latest-Linux-x86_64.sh</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">运行后：</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 点击ENTER进入即可。之后会出现一个用户协议，按空格键直到协议最底部，然后输入“yes”接受协议，开始安装。之后需要确认想要安装的目录。</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 一般就是安在主目录下就行（如上图那种格式），我就是将它安装在主目录下，如果你想更改路径请输入路径后在按回车键。</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 之后输入yes即可，之后就显示安装成功了！</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">刷新路径信息</span></span><br><span class=\"line\">source  ~/.bashrc</span><br></pre></td></tr></table></figure></li>\n<li><p>新建conda虚拟环境</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conda create -n dbgpt_env python=3.10</span><br><span class=\"line\">conda activate dbgpt_env</span><br></pre></td></tr></table></figure></li>\n<li><p>安装</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install -e &quot;.[default]&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装途中会有报错显示需要torch</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 执行下面的命令</span></span></span><br><span class=\"line\">conda install pytorch==1.13.1 torchvision==0.14.1 torchaudio==0.13.1 cpuonly -c pytorch</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">注意：安装中由于有些文件需要外网环境，所以需要提前配置</span></span><br></pre></td></tr></table></figure></li>\n<li><p>配置文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp .env.template  .env</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">配置修改见下面。</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下载embedding model</span></span><br><span class=\"line\">git clone https://www.modelscope.cn/Jerry0/text2vec-large-chinese.git</span><br></pre></td></tr></table></figure></li>\n<li><p>运行程序</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">在项目中执行下面的命令</span></span><br><span class=\"line\">python dbgpt/app/dbgpt_server.py</span><br></pre></td></tr></table></figure></li>\n<li><p>运行成功后配置成后台服务</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">使用nano或vim</span></span><br><span class=\"line\">nano /etc/systemd/system/dbgpt.service</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">输入下面的配置</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=dbgpt</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">User=root</span><br><span class=\"line\">Group=root</span><br><span class=\"line\">WorkingDirectory=/app/dbgpt/DB-GPT/</span><br><span class=\"line\">ExecStart=/app/miniconda/miniconda3/envs/dbgpt_env/bin/python /app/dbgpt/DB-GPT/dbgpt/app/dbgpt_server.py</span><br><span class=\"line\">Restart=always</span><br><span class=\"line\">Environment=PYTHONUNBUFFERED=1</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">注意：ExecStart中是要执行的命令或脚本，需要使用conda中的虚拟环境中的python来执行。</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\">#查看conda的环境配置</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\">#查看环境列表和位置</span></span></span><br><span class=\"line\">conda env list</span><br><span class=\"line\">确认环境位置后添加上/bin/python</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Description: 服务的描述。</span><br><span class=\"line\">After: 指定网络启动后再启动此服务。</span><br><span class=\"line\">User 和 Group: 运行该服务的用户和组。</span><br><span class=\"line\">WorkingDirectory: 工作目录路径。</span><br><span class=\"line\">ExecStart: 要执行的命令或脚本。</span><br><span class=\"line\">Restart: 始终重启服务。</span><br><span class=\"line\">Environment: 设置环境变量，这里设置了PYTHONUNBUFFERED以便实时看到输出。</span><br><span class=\"line\">WantedBy: 指定目标运行级别。</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">加载配置</span></span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动服务</span></span><br><span class=\"line\">systemctl start dbgpt</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">动态查看日志</span></span><br><span class=\"line\">journalctl -u  dbgpt -f</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"注意事项：\"><a href=\"#注意事项：\" class=\"headerlink\" title=\"注意事项：\"></a>注意事项：</h2><ol>\n<li><p>分词模型必须存在运行目录的model文件夹下</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">必须存在</span></span><br><span class=\"line\">text2vec-large-chinese</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h2><h3 id=\"基础配置\"><a href=\"#基础配置\" class=\"headerlink\" title=\"基础配置\"></a>基础配置</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">数据库</span></span><br><span class=\"line\">LOCAL_DB_TYPE=mysql</span><br><span class=\"line\">LOCAL_DB_USER=root</span><br><span class=\"line\">LOCAL_DB_PASSWORD=Huanfa@2025</span><br><span class=\"line\">LOCAL_DB_HOST=192.168.2.20</span><br><span class=\"line\">LOCAL_DB_PORT=3306</span><br><span class=\"line\">LOCAL_DB_NAME=dbgpt</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">模型</span></span><br><span class=\"line\">LIMIT_MODEL_CONCURRENCY=5</span><br><span class=\"line\">MAX_POSITION_EMBEDDINGS=4096</span><br><span class=\"line\">QUANTIZE_QLORA=True</span><br><span class=\"line\">QUANTIZE_8bit=True</span><br></pre></td></tr></table></figure>\n\n<p>env文件</p>\n<h3 id=\"代理模型\"><a href=\"#代理模型\" class=\"headerlink\" title=\"代理模型\"></a>代理模型</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">模型名称</span></span><br><span class=\"line\">MODEL_NAME=&quot;梁溪环发AI&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">模型类型</span></span><br><span class=\"line\">LLM_MODEL=ollama_proxyllm</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">模型路径</span></span><br><span class=\"line\">MODEL_PATH=ollama_proxyllm</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">模型地址</span></span><br><span class=\"line\">MODEL_SERVER=http://192.168.12.210:11434</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">代理地址</span></span><br><span class=\"line\">PROXY_SERVER_URL=http://192.168.12.210:11434</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">代理模型后端</span></span><br><span class=\"line\">PROXYLLM_BACKEND=qwen2.5:14b</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">代理模型key</span></span><br><span class=\"line\">PROXY_API_KEY=not_used</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">嵌入类型</span></span><br><span class=\"line\">EMBEDDING_MODEL=proxy_ollama</span><br><span class=\"line\"></span><br><span class=\"line\">proxy_ollama_proxy_server_url=http://192.168.12.210:11434</span><br><span class=\"line\">proxy_ollama_proxy_backend=nomic-embed-text:latest</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Qwen2-5-1-5B-Instruct模型\"><a href=\"#Qwen2-5-1-5B-Instruct模型\" class=\"headerlink\" title=\"Qwen2.5-1.5B-Instruct模型\"></a>Qwen2.5-1.5B-Instruct模型</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">模型名称</span></span><br><span class=\"line\">LLM_MODEL=Qwen2.5-1.5B-Instruct</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">模型位置</span></span><br><span class=\"line\">LLM_MODEL_PATH=/app/models/Qwen2.5-1.5B-Instruct</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"在线添加模型\"><a href=\"#在线添加模型\" class=\"headerlink\" title=\"在线添加模型\"></a>在线添加模型</h2><p>Model name：（随便填）</p>\n<p>Model path：ollama_proxyllm（默认）</p>\n<p>proxy_server_url：（ollama服务地址）</p>\n<p>proxy_api_key：not_used（固定值）</p>\n<p>proxyllm_backend：（ollama模型）</p>\n<p>model_type：（固定值）</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250312160723213.png\" alt=\"image-20250312160723213\"></p>\n<h2 id=\"Ollama\"><a href=\"#Ollama\" class=\"headerlink\" title=\"Ollama\"></a>Ollama</h2><ol>\n<li>安装ollama后，配置<strong>用户变量</strong></li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">配置ip及其端口</span></span><br><span class=\"line\">OLLAMA_HOST=192.168.12.210:11434</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">配置模型存储位置</span></span><br><span class=\"line\">OLLAMA_MODELS=D:\\ollama\\</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>安装模型<a href=\"https://ollama.com/search\">Ollama Search</a></li>\n</ol>\n<p>‍</p>\n"},{"title":"Centos LVM挂载","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/f8cf11ea06e6c25ccdf9568677b9cb53.png","main_color":"#E5B5E5","abbrlink":"2e58","date":"2024-10-08T16:02:00.000Z","_content":"\n\n> 说明：此操作在centos7下进行，如果是centos6发行版，需要注意格式化LV的文件系统类型（centos7.0开始默认文件系统是xfs，centos6是ext4）、最后一步写入系统的类型\n\n# 1、查看当前磁盘\n\n```shell\n[root@vm ~]# df -Th                                                     \n\nFilesystem              Type      Size  Used Avail Use% Mounted on\n/dev/mapper/centos-root xfs        44G  3.7G   41G   9% /\ndevtmpfs                devtmpfs  7.8G     0  7.8G   0% /dev\ntmpfs                   tmpfs     7.8G     0  7.8G   0% /dev/shm\ntmpfs                   tmpfs     7.8G  777M  7.0G  10% /run\ntmpfs                   tmpfs     7.8G     0  7.8G   0% /sys/fs/cgroup\n/dev/vda1               xfs      `1014M  179M  836M  18% /boot\ntmpfs                   tmpfs     1.6G   36K  1.6G   1% /run/user/0\ntmpfs                   tmpfs     1.6G   40K  1.6G   1% /run/user/1001\n```\n\n# 2、查看块分区\n\n```shell\n[root@vm ~]# lsblk \n\nNAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nvda             252:0    0   50G  0 disk \n├─vda1          252:1    0    1G  0 part /boot\n└─vda2          252:2    0   49G  0 part \n  ├─centos-root 253:0    0   44G  0 lvm  /\n  └─centos-swap 253:1    0    5G  0 lvm  [SWAP]\nvdb             252:16   0  974G  0 disk\n```\n\n可以看到 `/dev/vdb` 为新增的磁盘\n\n# 3、格式化磁盘\n\n```shell\n# 使用Parted对 vdb硬盘进行分区\nparted /dev/vdb\n\n# 查看该硬盘分区情况\nprint\n\n# 转为GPT模式\nmklabel gpt\n\n# 创建主分区 大小位1045GB\nmkpart primary 0 1045GB\n\n# 设置1分区为lvm标签\nset 1 lvm on\n\n# 退出工具\nquit\n```\n\n**案例：**\n\n```shell\n[root@vm ~]# parted /dev/vdb\n\nGNU Parted 3.1\nUsing /dev/vdb\nWelcome to GNU Parted! Type 'help' to view a list of commands.\n\n(parted) print\n\nError: /dev/vdb: unrecognised disk label\nModel: Virtio Block Device (virtblk)                                      \nDisk /dev/vdb: 1046GB\nSector size (logical/physical): 512B/512B\nPartition Table: unknown\nDisk Flags: \n\n(parted) mklabel gpt    \n\n(parted) mkpart primary 0 1045GB\n\nWarning: The resulting partition is not properly aligned for best performance.\nIgnore/Cancel? i    \n\n(parted) print   \n\nModel: Virtio Block Device (virtblk)\nDisk /dev/vdb: 1046GB\nSector size (logical/physical): 512B/512B\nPartition Table: gpt\nDisk Flags: \n\nNumber  Start   End     Size    File system  Name     Flags\n 1      17.4kB  1045GB  1045GB               primary\n\n(parted) set 1 lvm on    \n\n(parted) print\n\nModel: Virtio Block Device (virtblk)\nDisk /dev/vdb: 1046GB\nSector size (logical/physical): 512B/512B\nPartition Table: gpt\nDisk Flags: \n\nNumber  Start   End     Size    File system  Name     Flags\n 1      17.4kB  1045GB  1045GB               primary  lvm\n\n(parted) quit   \n\nInformation: You may need to update /etc/fstab\n\n```\n\n以上 (parted) 开头的代表输入的命令，具体功能可以通过 help 查看\n\n# 4、重读分区表\n\n```shell\npartprobe /dev/vdb\n```\n\n# 5、重新查看块分区\n\n```shell\n[root@vm ~]# lsblk \nNAME            MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT\nvda             252:0    0    50G  0 disk \n├─vda1          252:1    0     1G  0 part /boot\n└─vda2          252:2    0    49G  0 part \n  ├─centos-root 253:0    0    44G  0 lvm  /\n  └─centos-swap 253:1    0     5G  0 lvm  [SWAP]\nvdb             252:16   0   974G  0 disk \n└─vdb1          252:17   0 973.2G  0 part\n```\n\n可以看到vdb下多了vdb1，这个用来创建pv\n\n# 6、创建PV\n\n```shell\npvcreate -v /dev/vdb1\n```\n\n**案例：**\n\n```shell\n[root@vm ~]# pvcreate -v /dev/vdb1\n    Wiping internal VG cache\n    Wiping cache of LVM-capable devices\n    Wiping signatures on new PV /dev/vdb1.\n    Set up physical volume for \"/dev/vdb1\" with 2041015592 available sectors.\n    Zeroing start of device /dev/vdb1.\n    Writing physical volume data to disk \"/dev/vdb1\".\n  Physical volume \"/dev/vdb1\" successfully created.\n```\n\n### 注意\n\nPV创建好之后，到这一步可以选择扩展或者新建挂载点，**扩容的前提条件是扩容挂载点的磁盘格式是LVM格式**，这里先演示新建挂载点然后删除挂载点并扩容\n\n# 7、新增LVM挂载\n\n## 查看PV\n\n```shell\n[root@vm ~]# pvdisplay\n  --- Physical volume ---\n  PV Name               /dev/vda2\n  VG Name               centos\n  PV Size               <49.00 GiB / not usable 3.00 MiB\n  Allocatable           yes (but full)\n  PE Size               4.00 MiB\n  Total PE              12543\n  Free PE               0\n  Allocated PE          12543\n  PV UUID               CCUeq0-ZnG9-iUY8-dPOj-fVOa-XC10-ooGyle\n   \n  \"/dev/vdb1\" is a new physical volume of \"973.23 GiB\"\n  --- NEW Physical volume ---\n  PV Name               /dev/vdb1\n  VG Name               \n  PV Size               973.23 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               vUoC7C-MIP2-iwXr-0SWu-c2Wz-yb6o-qFrfo1\n```\n\n注意看 VG Name，前面的是系统安装时选择LVM格式的，后面的还没有创建，所以 VG Name 为空\n\n## 新建VG\n\n```shell\n[root@vm ~]# vgcreate -s 4M vg01 /dev/vdb1  \n  Volume group \"vg01\" successfully created\n```\n\n## 查看VG\n\n```shell\n[root@vm ~]# vgdisplay  \n  --- Volume group ---  \n  VG Name               vg01  \n  System ID               \n  Format                lvm2  \n  Metadata Areas        1  \n  Metadata Sequence No  1  \n  VG Access             read/write  \n  VG Status             resizable  \n  MAX LV                0  \n  Cur LV                0  \n  Open LV               0  \n  Max PV                0  \n  Cur PV                1  \n  Act PV                1  \n  VG Size               973.23 GiB  \n  PE Size               4.00 MiB  \n  Total PE              249147  \n  Alloc PE / Size       0 / 0     \n  Free  PE / Size       249147 / 973.23 GiB  \n  VG UUID               hb8zoy-kKjU-VXD5-EjCN-8hS2-MOzf-lq3O5j  \n     \n  --- Volume group ---  \n  VG Name               centos  \n  System ID               \n  Format                lvm2  \n  Metadata Areas        1  \n  Metadata Sequence No  3  \n  VG Access             read/write  \n  VG Status             resizable  \n  MAX LV                0  \n  Cur LV                2  \n  Open LV               2  \n  Max PV                0  \n  Cur PV                1  \n  Act PV                1  \n  VG Size               <49.00 GiB  \n  PE Size               4.00 MiB  \n  Total PE              12543  \n  Alloc PE / Size       12543 / <49.00 GiB  \n  Free  PE / Size       0 / 0     \n  VG UUID               kSwsMj-4FKB-zwFq-7MBq-EfOD-rccg-HC59x9\n```\n\n可以看到 vg01 为新建的VG\n\n## 新建LV\n\n```shell\n[root@vm ~]# lvcreate  -l 100%FREE -n lv01 vg01  \n  Logical volume \"lv01\" created\n```\n\n## 格式化LV\n\n格式化文件系统类型有xfs，ext4，这里测试使用ext4格式，**默认centos7下使用xfs格式，centos6为ext4格式**\n\n```shell\n[root@vm ~]# mkfs.ext4 /dev/vg01/lv01  \nmke2fs 1.42.9 (28-Dec-2013)  \nFilesystem label=  \nOS type: Linux  \nBlock size=4096 (log=2)  \nFragment size=4096 (log=2)  \nStride=0 blocks, Stripe width=0 blocks  \n63782912 inodes, 255126528 blocks  \n12756326 blocks (5.00%) reserved for the super user  \nFirst data block=0  \nMaximum filesystem blocks=2403336192  \n7786 block groups  \n32768 blocks per group, 32768 fragments per group  \n8192 inodes per group  \nSuperblock backups stored on blocks:   \n        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,   \n        4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968,   \n        102400000, 214990848  \n  \nAllocating group tables: done                              \nWriting inode tables: done                              \nCreating journal (32768 blocks): done  \nWriting superblocks and filesystem accounting information: done\n```\n\n## 新建挂载点并挂载\n\n```shell\nmkdir /app  \nmount /dev/vg01/lv01 /app\n```\n\n## 查看新增挂载后的块分区\n\n```shell\n[root@vm ~]# lsblk   \nNAME            MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT  \nvda             252:0    0    50G  0 disk   \n├─vda1          252:1    0     1G  0 part /boot  \n└─vda2          252:2    0    49G  0 part   \n  ├─centos-root 253:0    0    44G  0 lvm  /  \n  └─centos-swap 253:1    0     5G  0 lvm  [SWAP]  \nvdb             252:16   0   974G  0 disk   \n└─vdb1          252:17   0 973.2G  0 part   \n  └─vg01-lv01   253:2    0 973.2G  0 lvm  /app\n\n```\n\n可以看到新增磁盘以LVM格式挂载在 `/app` 下\n\n## 永久写入挂载点\n\n```shell\nblkid  \n​  \n# echo \"UUID=<UUID> /app ext4 defaults 0 0\" >> /etc/fstab\n```\n\n```shell\n\n[root@docker-server ~]# blkid  \n/dev/sda1: SEC_TYPE=\"msdos\" UUID=\"F312-EB5D\" TYPE=\"vfat\" PARTLABEL=\"EFI System Partition\" PARTUUID=\"7526c319-8c70-4fa9-ad1a-7a9a906c0f7c\"  \n/dev/sda2: UUID=\"a169778d-bcee-41d3-899e-aa68e670eb54\" TYPE=\"xfs\" PARTUUID=\"b9de11c9-a9a8-46c7-8484-a3f0450f648f\"  \n/dev/sda3: UUID=\"4WIoYK-aQng-dGMv-YYjq-RXaj-XKMV-o0RYCL\" TYPE=\"LVM2_member\" PARTUUID=\"b0ebc437-996e-4a3c-b6d3-cf5692413688\"  \n/dev/sdb1: UUID=\"PHHm7S-6haw-EeGN-2xRl-Cxna-3C9N-4QlPIy\" TYPE=\"LVM2_member\" PARTLABEL=\"primary\" PARTUUID=\"68320f1b-25b0-4070-8a22-79af2af7aa69\"  \n/dev/mapper/centos-root: UUID=\"375718d4-698b-4709-b721-2c652a87c118\" TYPE=\"xfs\"  \n/dev/mapper/centos-swap: UUID=\"d7e852bb-0ef8-4545-a3cb-4fb12b8fb9ff\" TYPE=\"swap\"  \n# lvm  \n/dev/mapper/vg01-lv01: UUID=\"37bbfff9-76da-4515-a9e5-b8820ea523e5\" TYPE=\"ext4\"   \n/dev/mapper/centos-home: UUID=\"d3f5743c-588a-4bc1-bb6a-51775db4713e\" TYPE=\"xfs\"  \n[root@docker-server ~]# cat /etc/fstab  \n​  \n#  \n# /etc/fstab  \n# Created by anaconda on Wed Jul  3 21:16:34 2024  \n#  \n# Accessible filesystems, by reference, are maintained under '/dev/disk'  \n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info  \n#  \n/dev/mapper/centos-root /                       xfs     defaults        0 0  \nUUID=a169778d-bcee-41d3-899e-aa68e670eb54 /boot                   xfs     defaults        0 0  \nUUID=F312-EB5D          /boot/efi               vfat    umask=0077,shortname=winnt 0 0  \n/dev/mapper/centos-home /home                   xfs     defaults        0 0  \n/dev/mapper/centos-swap swap                    swap    defaults        0 0  \n# 写入  \nUUID=37bbfff9-76da-4515-a9e5-b8820ea523e5 /app ext4 defaults 0 0  \n​\n```\n\n# 8、删除LVM挂载点\n\n## 删除挂载点\n\n```shell\n[root@vm ~]# umount -v /dev/vg01/lv01  \numount: /app (/dev/mapper/vg01-lv01) unmounted\n```\n\n## 查看块设备\n\n```shell\n[root@vm ~]# lsblk   \nNAME            MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT  \nvda             252:0    0    50G  0 disk   \n├─vda1          252:1    0     1G  0 part /boot  \n└─vda2          252:2    0    49G  0 part   \n  ├─centos-root 253:0    0    44G  0 lvm  /  \n  └─centos-swap 253:1    0     5G  0 lvm  [SWAP]  \nvdb             252:16   0   974G  0 disk   \n└─vdb1          252:17   0 973.2G  0 part   \n  └─vg01-lv01   253:2    0 973.2G  0 lvm\n```\n\n可以看到 `/app` 挂载点删除了，删除 /app 目录\n\n```shell\nrm -rf /app\n```\n\n## 删除LV\n\n参数为 LV Path\n\n```shell\n[root@vm ~]# lvremove /dev/vg01/lv01  \nDo you really want to remove active logical volume vg01/lv01? [y/n]: y  \n  Logical volume \"lv01\" successfully removed\n```\n\n## 删除VG\n\n参数为 VG Name\n\n```shell\n[root@vm ~]# vgremove vg01  \n  Volume group \"vg01\" successfully removed\n```\n\n## 扩容VG\n\n参数为 VG Name 和 PV Name\n\n```shell\n\n[root@vm ~]# vgextend centos /dev/vdb1  \n  Volume group \"centos\" successfully extended\n\n```\n\n此时 PV `/dev/vdb1` 全部扩展到 VG centos下\n\n## 查看LV\n\n```shell\n[root@vm ~]# lvdisplay   \n  --- Logical volume ---  \n  LV Path                /dev/centos/swap  \n  LV Name                swap  \n  VG Name                centos  \n  LV UUID                PCx0yU-o9JZ-R92O-lI01-f8EU-DKyM-etst0H  \n  LV Write Access        read/write  \n  LV Creation host, time localhost.localdomain, 2018-12-24 16:46:31 +0800  \n  LV Status              available  \n  # open                 2  \n  LV Size                5.00 GiB  \n  Current LE             1280  \n  Segments               1  \n  Allocation             inherit  \n  Read ahead sectors     auto  \n  - currently set to     8192  \n  Block device           253:1  \n     \n  --- Logical volume ---  \n  LV Path                /dev/centos/root  \n  LV Name                root  \n  VG Name                centos  \n  LV UUID                Idf9IO-AxkA-tS1C-FTgN-FsLT-d3Zk-7o1W5E  \n  LV Write Access        read/write  \n  LV Creation host, time localhost.localdomain, 2018-12-24 16:46:31 +0800  \n  LV Status              available  \n  # open                 1  \n  LV Size                <44.00 GiB  \n  Current LE             11263  \n  Segments               1  \n  Allocation             inherit  \n  Read ahead sectors     auto  \n  - currently set to     8192  \n  Block device           253:0\n```\n\n通过查看，系统安装时选择的磁盘格式是LVM并且有两个分区，接下来扩展根分区\n\n## 扩展LV分区\n\n参数为 LV Path\n\n```shell\n[root@vm ~]# lvextend -l +100%FREE /dev/centos/root  \n  Size of logical volume centos/root changed from <44.00 GiB (11263 extents) to <1017.23 GiB (260410 extents).  \n  Logical volume centos/root successfully resized\n```\n\n如果发现误操作，需要还原，可以通过以下命令缩小LV分区\n\n```shell\nlvreduce -L 1017.2G  /dev/centos/root\n```\n\n## 加载扩容到系统\n\n此时查看系统可以看到已经扩容，但没有加载到文件系统\n\n```shell\n[root@vm ~]# lsblk   \nNAME            MAJ:MIN RM    SIZE RO TYPE MOUNTPOINT  \nvda             252:0    0     50G  0 disk   \n├─vda1          252:1    0      1G  0 part /boot  \n└─vda2          252:2    0     49G  0 part   \n  ├─centos-root 253:0    0 1017.2G  0 lvm  /  \n  └─centos-swap 253:1    0      5G  0 lvm  [SWAP]  \nvdb             252:16   0    974G  0 disk   \n└─vdb1          252:17   0  973.2G  0 part   \n  └─centos-root 253:0    0 1017.2G  0 lvm  /  \n[root@vm ~]# df -h  \nFilesystem               Size  Used Avail Use% Mounted on  \n/dev/mapper/centos-root   44G  3.7G   41G   9% /  \ndevtmpfs                 7.8G     0  7.8G   0% /dev  \ntmpfs                    7.8G     0  7.8G   0% /dev/shm  \ntmpfs                    7.8G  777M  7.0G  10% /run  \ntmpfs                    7.8G     0  7.8G   0% /sys/fs/cgroup  \n/dev/vda1               1014M  179M  836M  18% /boot  \ntmpfs                    1.6G   36K  1.6G   1% /run/user/0  \ntmpfs                    1.6G   40K  1.6G   1% /run/user/1001\n\n```\n\n**加载扩容到系统** 参数为 LV path，**被扩容的挂载点一定是LVM格式**\n\n```shell\n[root@vm ~]# xfs_growfs /dev/centos/root  \nmeta-data=/dev/mapper/centos-root isize=512    agcount=4, agsize=2883328 blks  \n         =                       sectsz=512   attr=2, projid32bit=1  \n         =                       crc=1        finobt=0 spinodes=0  \ndata     =                       bsize=4096   blocks=11533312, imaxpct=25  \n         =                       sunit=0      swidth=0 blks  \nnaming   =version 2              bsize=4096   ascii-ci=0 ftype=1  \nlog      =internal               bsize=4096   blocks=5631, version=2  \n         =                       sectsz=512   sunit=0 blks, lazy-count=1  \nrealtime =none                   extsz=4096   blocks=0, rtextents=0  \ndata blocks changed from 11533312 to 266659840\n```\n\n说明：若使用ext4文件格式（centos6），是使用resize2fs命令来生效 **查看磁盘**\n\n```shell\n[root@vm ~]# df -h  \nFilesystem               Size  Used Avail Use% Mounted on  \n/dev/mapper/centos-root 1018G  3.7G 1014G   1% /  \ndevtmpfs                 7.8G     0  7.8G   0% /dev  \ntmpfs                    7.8G     0  7.8G   0% /dev/shm  \ntmpfs                    7.8G  777M  7.0G  10% /run  \ntmpfs                    7.8G     0  7.8G   0% /sys/fs/cgroup  \n/dev/vda1               1014M  179M  836M  18% /boot  \ntmpfs                    1.6G   36K  1.6G   1% /run/user/0  \ntmpfs                    1.6G   40K  1.6G   1% /run/user/1001\n```\n\n#### **情况 2：文件系统是 ext4**\n\n如果文件系统是 ext4，则需要使用 `resize2fs` 工具扩展文件系统。\n\n运行以下命令：\n\n```\nsudo resize2fs /dev/ubuntu-vg/ubuntu-lv\n```\n\n完成后，再次运行 `df -h` 检查文件系统的大小是否已更新。\n","source":"_posts/服务器/Centos/CentosLVM挂载.md","raw":"---\ntitle: Centos LVM挂载\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/f8cf11ea06e6c25ccdf9568677b9cb53.png\nmain_color: '#E5B5E5'\ntags:\n  - LVM\n  - Centos\nabbrlink: '2e58'\ndate: 2024-10-09 00:02:00\n---\n\n\n> 说明：此操作在centos7下进行，如果是centos6发行版，需要注意格式化LV的文件系统类型（centos7.0开始默认文件系统是xfs，centos6是ext4）、最后一步写入系统的类型\n\n# 1、查看当前磁盘\n\n```shell\n[root@vm ~]# df -Th                                                     \n\nFilesystem              Type      Size  Used Avail Use% Mounted on\n/dev/mapper/centos-root xfs        44G  3.7G   41G   9% /\ndevtmpfs                devtmpfs  7.8G     0  7.8G   0% /dev\ntmpfs                   tmpfs     7.8G     0  7.8G   0% /dev/shm\ntmpfs                   tmpfs     7.8G  777M  7.0G  10% /run\ntmpfs                   tmpfs     7.8G     0  7.8G   0% /sys/fs/cgroup\n/dev/vda1               xfs      `1014M  179M  836M  18% /boot\ntmpfs                   tmpfs     1.6G   36K  1.6G   1% /run/user/0\ntmpfs                   tmpfs     1.6G   40K  1.6G   1% /run/user/1001\n```\n\n# 2、查看块分区\n\n```shell\n[root@vm ~]# lsblk \n\nNAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nvda             252:0    0   50G  0 disk \n├─vda1          252:1    0    1G  0 part /boot\n└─vda2          252:2    0   49G  0 part \n  ├─centos-root 253:0    0   44G  0 lvm  /\n  └─centos-swap 253:1    0    5G  0 lvm  [SWAP]\nvdb             252:16   0  974G  0 disk\n```\n\n可以看到 `/dev/vdb` 为新增的磁盘\n\n# 3、格式化磁盘\n\n```shell\n# 使用Parted对 vdb硬盘进行分区\nparted /dev/vdb\n\n# 查看该硬盘分区情况\nprint\n\n# 转为GPT模式\nmklabel gpt\n\n# 创建主分区 大小位1045GB\nmkpart primary 0 1045GB\n\n# 设置1分区为lvm标签\nset 1 lvm on\n\n# 退出工具\nquit\n```\n\n**案例：**\n\n```shell\n[root@vm ~]# parted /dev/vdb\n\nGNU Parted 3.1\nUsing /dev/vdb\nWelcome to GNU Parted! Type 'help' to view a list of commands.\n\n(parted) print\n\nError: /dev/vdb: unrecognised disk label\nModel: Virtio Block Device (virtblk)                                      \nDisk /dev/vdb: 1046GB\nSector size (logical/physical): 512B/512B\nPartition Table: unknown\nDisk Flags: \n\n(parted) mklabel gpt    \n\n(parted) mkpart primary 0 1045GB\n\nWarning: The resulting partition is not properly aligned for best performance.\nIgnore/Cancel? i    \n\n(parted) print   \n\nModel: Virtio Block Device (virtblk)\nDisk /dev/vdb: 1046GB\nSector size (logical/physical): 512B/512B\nPartition Table: gpt\nDisk Flags: \n\nNumber  Start   End     Size    File system  Name     Flags\n 1      17.4kB  1045GB  1045GB               primary\n\n(parted) set 1 lvm on    \n\n(parted) print\n\nModel: Virtio Block Device (virtblk)\nDisk /dev/vdb: 1046GB\nSector size (logical/physical): 512B/512B\nPartition Table: gpt\nDisk Flags: \n\nNumber  Start   End     Size    File system  Name     Flags\n 1      17.4kB  1045GB  1045GB               primary  lvm\n\n(parted) quit   \n\nInformation: You may need to update /etc/fstab\n\n```\n\n以上 (parted) 开头的代表输入的命令，具体功能可以通过 help 查看\n\n# 4、重读分区表\n\n```shell\npartprobe /dev/vdb\n```\n\n# 5、重新查看块分区\n\n```shell\n[root@vm ~]# lsblk \nNAME            MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT\nvda             252:0    0    50G  0 disk \n├─vda1          252:1    0     1G  0 part /boot\n└─vda2          252:2    0    49G  0 part \n  ├─centos-root 253:0    0    44G  0 lvm  /\n  └─centos-swap 253:1    0     5G  0 lvm  [SWAP]\nvdb             252:16   0   974G  0 disk \n└─vdb1          252:17   0 973.2G  0 part\n```\n\n可以看到vdb下多了vdb1，这个用来创建pv\n\n# 6、创建PV\n\n```shell\npvcreate -v /dev/vdb1\n```\n\n**案例：**\n\n```shell\n[root@vm ~]# pvcreate -v /dev/vdb1\n    Wiping internal VG cache\n    Wiping cache of LVM-capable devices\n    Wiping signatures on new PV /dev/vdb1.\n    Set up physical volume for \"/dev/vdb1\" with 2041015592 available sectors.\n    Zeroing start of device /dev/vdb1.\n    Writing physical volume data to disk \"/dev/vdb1\".\n  Physical volume \"/dev/vdb1\" successfully created.\n```\n\n### 注意\n\nPV创建好之后，到这一步可以选择扩展或者新建挂载点，**扩容的前提条件是扩容挂载点的磁盘格式是LVM格式**，这里先演示新建挂载点然后删除挂载点并扩容\n\n# 7、新增LVM挂载\n\n## 查看PV\n\n```shell\n[root@vm ~]# pvdisplay\n  --- Physical volume ---\n  PV Name               /dev/vda2\n  VG Name               centos\n  PV Size               <49.00 GiB / not usable 3.00 MiB\n  Allocatable           yes (but full)\n  PE Size               4.00 MiB\n  Total PE              12543\n  Free PE               0\n  Allocated PE          12543\n  PV UUID               CCUeq0-ZnG9-iUY8-dPOj-fVOa-XC10-ooGyle\n   \n  \"/dev/vdb1\" is a new physical volume of \"973.23 GiB\"\n  --- NEW Physical volume ---\n  PV Name               /dev/vdb1\n  VG Name               \n  PV Size               973.23 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               vUoC7C-MIP2-iwXr-0SWu-c2Wz-yb6o-qFrfo1\n```\n\n注意看 VG Name，前面的是系统安装时选择LVM格式的，后面的还没有创建，所以 VG Name 为空\n\n## 新建VG\n\n```shell\n[root@vm ~]# vgcreate -s 4M vg01 /dev/vdb1  \n  Volume group \"vg01\" successfully created\n```\n\n## 查看VG\n\n```shell\n[root@vm ~]# vgdisplay  \n  --- Volume group ---  \n  VG Name               vg01  \n  System ID               \n  Format                lvm2  \n  Metadata Areas        1  \n  Metadata Sequence No  1  \n  VG Access             read/write  \n  VG Status             resizable  \n  MAX LV                0  \n  Cur LV                0  \n  Open LV               0  \n  Max PV                0  \n  Cur PV                1  \n  Act PV                1  \n  VG Size               973.23 GiB  \n  PE Size               4.00 MiB  \n  Total PE              249147  \n  Alloc PE / Size       0 / 0     \n  Free  PE / Size       249147 / 973.23 GiB  \n  VG UUID               hb8zoy-kKjU-VXD5-EjCN-8hS2-MOzf-lq3O5j  \n     \n  --- Volume group ---  \n  VG Name               centos  \n  System ID               \n  Format                lvm2  \n  Metadata Areas        1  \n  Metadata Sequence No  3  \n  VG Access             read/write  \n  VG Status             resizable  \n  MAX LV                0  \n  Cur LV                2  \n  Open LV               2  \n  Max PV                0  \n  Cur PV                1  \n  Act PV                1  \n  VG Size               <49.00 GiB  \n  PE Size               4.00 MiB  \n  Total PE              12543  \n  Alloc PE / Size       12543 / <49.00 GiB  \n  Free  PE / Size       0 / 0     \n  VG UUID               kSwsMj-4FKB-zwFq-7MBq-EfOD-rccg-HC59x9\n```\n\n可以看到 vg01 为新建的VG\n\n## 新建LV\n\n```shell\n[root@vm ~]# lvcreate  -l 100%FREE -n lv01 vg01  \n  Logical volume \"lv01\" created\n```\n\n## 格式化LV\n\n格式化文件系统类型有xfs，ext4，这里测试使用ext4格式，**默认centos7下使用xfs格式，centos6为ext4格式**\n\n```shell\n[root@vm ~]# mkfs.ext4 /dev/vg01/lv01  \nmke2fs 1.42.9 (28-Dec-2013)  \nFilesystem label=  \nOS type: Linux  \nBlock size=4096 (log=2)  \nFragment size=4096 (log=2)  \nStride=0 blocks, Stripe width=0 blocks  \n63782912 inodes, 255126528 blocks  \n12756326 blocks (5.00%) reserved for the super user  \nFirst data block=0  \nMaximum filesystem blocks=2403336192  \n7786 block groups  \n32768 blocks per group, 32768 fragments per group  \n8192 inodes per group  \nSuperblock backups stored on blocks:   \n        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,   \n        4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968,   \n        102400000, 214990848  \n  \nAllocating group tables: done                              \nWriting inode tables: done                              \nCreating journal (32768 blocks): done  \nWriting superblocks and filesystem accounting information: done\n```\n\n## 新建挂载点并挂载\n\n```shell\nmkdir /app  \nmount /dev/vg01/lv01 /app\n```\n\n## 查看新增挂载后的块分区\n\n```shell\n[root@vm ~]# lsblk   \nNAME            MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT  \nvda             252:0    0    50G  0 disk   \n├─vda1          252:1    0     1G  0 part /boot  \n└─vda2          252:2    0    49G  0 part   \n  ├─centos-root 253:0    0    44G  0 lvm  /  \n  └─centos-swap 253:1    0     5G  0 lvm  [SWAP]  \nvdb             252:16   0   974G  0 disk   \n└─vdb1          252:17   0 973.2G  0 part   \n  └─vg01-lv01   253:2    0 973.2G  0 lvm  /app\n\n```\n\n可以看到新增磁盘以LVM格式挂载在 `/app` 下\n\n## 永久写入挂载点\n\n```shell\nblkid  \n​  \n# echo \"UUID=<UUID> /app ext4 defaults 0 0\" >> /etc/fstab\n```\n\n```shell\n\n[root@docker-server ~]# blkid  \n/dev/sda1: SEC_TYPE=\"msdos\" UUID=\"F312-EB5D\" TYPE=\"vfat\" PARTLABEL=\"EFI System Partition\" PARTUUID=\"7526c319-8c70-4fa9-ad1a-7a9a906c0f7c\"  \n/dev/sda2: UUID=\"a169778d-bcee-41d3-899e-aa68e670eb54\" TYPE=\"xfs\" PARTUUID=\"b9de11c9-a9a8-46c7-8484-a3f0450f648f\"  \n/dev/sda3: UUID=\"4WIoYK-aQng-dGMv-YYjq-RXaj-XKMV-o0RYCL\" TYPE=\"LVM2_member\" PARTUUID=\"b0ebc437-996e-4a3c-b6d3-cf5692413688\"  \n/dev/sdb1: UUID=\"PHHm7S-6haw-EeGN-2xRl-Cxna-3C9N-4QlPIy\" TYPE=\"LVM2_member\" PARTLABEL=\"primary\" PARTUUID=\"68320f1b-25b0-4070-8a22-79af2af7aa69\"  \n/dev/mapper/centos-root: UUID=\"375718d4-698b-4709-b721-2c652a87c118\" TYPE=\"xfs\"  \n/dev/mapper/centos-swap: UUID=\"d7e852bb-0ef8-4545-a3cb-4fb12b8fb9ff\" TYPE=\"swap\"  \n# lvm  \n/dev/mapper/vg01-lv01: UUID=\"37bbfff9-76da-4515-a9e5-b8820ea523e5\" TYPE=\"ext4\"   \n/dev/mapper/centos-home: UUID=\"d3f5743c-588a-4bc1-bb6a-51775db4713e\" TYPE=\"xfs\"  \n[root@docker-server ~]# cat /etc/fstab  \n​  \n#  \n# /etc/fstab  \n# Created by anaconda on Wed Jul  3 21:16:34 2024  \n#  \n# Accessible filesystems, by reference, are maintained under '/dev/disk'  \n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info  \n#  \n/dev/mapper/centos-root /                       xfs     defaults        0 0  \nUUID=a169778d-bcee-41d3-899e-aa68e670eb54 /boot                   xfs     defaults        0 0  \nUUID=F312-EB5D          /boot/efi               vfat    umask=0077,shortname=winnt 0 0  \n/dev/mapper/centos-home /home                   xfs     defaults        0 0  \n/dev/mapper/centos-swap swap                    swap    defaults        0 0  \n# 写入  \nUUID=37bbfff9-76da-4515-a9e5-b8820ea523e5 /app ext4 defaults 0 0  \n​\n```\n\n# 8、删除LVM挂载点\n\n## 删除挂载点\n\n```shell\n[root@vm ~]# umount -v /dev/vg01/lv01  \numount: /app (/dev/mapper/vg01-lv01) unmounted\n```\n\n## 查看块设备\n\n```shell\n[root@vm ~]# lsblk   \nNAME            MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT  \nvda             252:0    0    50G  0 disk   \n├─vda1          252:1    0     1G  0 part /boot  \n└─vda2          252:2    0    49G  0 part   \n  ├─centos-root 253:0    0    44G  0 lvm  /  \n  └─centos-swap 253:1    0     5G  0 lvm  [SWAP]  \nvdb             252:16   0   974G  0 disk   \n└─vdb1          252:17   0 973.2G  0 part   \n  └─vg01-lv01   253:2    0 973.2G  0 lvm\n```\n\n可以看到 `/app` 挂载点删除了，删除 /app 目录\n\n```shell\nrm -rf /app\n```\n\n## 删除LV\n\n参数为 LV Path\n\n```shell\n[root@vm ~]# lvremove /dev/vg01/lv01  \nDo you really want to remove active logical volume vg01/lv01? [y/n]: y  \n  Logical volume \"lv01\" successfully removed\n```\n\n## 删除VG\n\n参数为 VG Name\n\n```shell\n[root@vm ~]# vgremove vg01  \n  Volume group \"vg01\" successfully removed\n```\n\n## 扩容VG\n\n参数为 VG Name 和 PV Name\n\n```shell\n\n[root@vm ~]# vgextend centos /dev/vdb1  \n  Volume group \"centos\" successfully extended\n\n```\n\n此时 PV `/dev/vdb1` 全部扩展到 VG centos下\n\n## 查看LV\n\n```shell\n[root@vm ~]# lvdisplay   \n  --- Logical volume ---  \n  LV Path                /dev/centos/swap  \n  LV Name                swap  \n  VG Name                centos  \n  LV UUID                PCx0yU-o9JZ-R92O-lI01-f8EU-DKyM-etst0H  \n  LV Write Access        read/write  \n  LV Creation host, time localhost.localdomain, 2018-12-24 16:46:31 +0800  \n  LV Status              available  \n  # open                 2  \n  LV Size                5.00 GiB  \n  Current LE             1280  \n  Segments               1  \n  Allocation             inherit  \n  Read ahead sectors     auto  \n  - currently set to     8192  \n  Block device           253:1  \n     \n  --- Logical volume ---  \n  LV Path                /dev/centos/root  \n  LV Name                root  \n  VG Name                centos  \n  LV UUID                Idf9IO-AxkA-tS1C-FTgN-FsLT-d3Zk-7o1W5E  \n  LV Write Access        read/write  \n  LV Creation host, time localhost.localdomain, 2018-12-24 16:46:31 +0800  \n  LV Status              available  \n  # open                 1  \n  LV Size                <44.00 GiB  \n  Current LE             11263  \n  Segments               1  \n  Allocation             inherit  \n  Read ahead sectors     auto  \n  - currently set to     8192  \n  Block device           253:0\n```\n\n通过查看，系统安装时选择的磁盘格式是LVM并且有两个分区，接下来扩展根分区\n\n## 扩展LV分区\n\n参数为 LV Path\n\n```shell\n[root@vm ~]# lvextend -l +100%FREE /dev/centos/root  \n  Size of logical volume centos/root changed from <44.00 GiB (11263 extents) to <1017.23 GiB (260410 extents).  \n  Logical volume centos/root successfully resized\n```\n\n如果发现误操作，需要还原，可以通过以下命令缩小LV分区\n\n```shell\nlvreduce -L 1017.2G  /dev/centos/root\n```\n\n## 加载扩容到系统\n\n此时查看系统可以看到已经扩容，但没有加载到文件系统\n\n```shell\n[root@vm ~]# lsblk   \nNAME            MAJ:MIN RM    SIZE RO TYPE MOUNTPOINT  \nvda             252:0    0     50G  0 disk   \n├─vda1          252:1    0      1G  0 part /boot  \n└─vda2          252:2    0     49G  0 part   \n  ├─centos-root 253:0    0 1017.2G  0 lvm  /  \n  └─centos-swap 253:1    0      5G  0 lvm  [SWAP]  \nvdb             252:16   0    974G  0 disk   \n└─vdb1          252:17   0  973.2G  0 part   \n  └─centos-root 253:0    0 1017.2G  0 lvm  /  \n[root@vm ~]# df -h  \nFilesystem               Size  Used Avail Use% Mounted on  \n/dev/mapper/centos-root   44G  3.7G   41G   9% /  \ndevtmpfs                 7.8G     0  7.8G   0% /dev  \ntmpfs                    7.8G     0  7.8G   0% /dev/shm  \ntmpfs                    7.8G  777M  7.0G  10% /run  \ntmpfs                    7.8G     0  7.8G   0% /sys/fs/cgroup  \n/dev/vda1               1014M  179M  836M  18% /boot  \ntmpfs                    1.6G   36K  1.6G   1% /run/user/0  \ntmpfs                    1.6G   40K  1.6G   1% /run/user/1001\n\n```\n\n**加载扩容到系统** 参数为 LV path，**被扩容的挂载点一定是LVM格式**\n\n```shell\n[root@vm ~]# xfs_growfs /dev/centos/root  \nmeta-data=/dev/mapper/centos-root isize=512    agcount=4, agsize=2883328 blks  \n         =                       sectsz=512   attr=2, projid32bit=1  \n         =                       crc=1        finobt=0 spinodes=0  \ndata     =                       bsize=4096   blocks=11533312, imaxpct=25  \n         =                       sunit=0      swidth=0 blks  \nnaming   =version 2              bsize=4096   ascii-ci=0 ftype=1  \nlog      =internal               bsize=4096   blocks=5631, version=2  \n         =                       sectsz=512   sunit=0 blks, lazy-count=1  \nrealtime =none                   extsz=4096   blocks=0, rtextents=0  \ndata blocks changed from 11533312 to 266659840\n```\n\n说明：若使用ext4文件格式（centos6），是使用resize2fs命令来生效 **查看磁盘**\n\n```shell\n[root@vm ~]# df -h  \nFilesystem               Size  Used Avail Use% Mounted on  \n/dev/mapper/centos-root 1018G  3.7G 1014G   1% /  \ndevtmpfs                 7.8G     0  7.8G   0% /dev  \ntmpfs                    7.8G     0  7.8G   0% /dev/shm  \ntmpfs                    7.8G  777M  7.0G  10% /run  \ntmpfs                    7.8G     0  7.8G   0% /sys/fs/cgroup  \n/dev/vda1               1014M  179M  836M  18% /boot  \ntmpfs                    1.6G   36K  1.6G   1% /run/user/0  \ntmpfs                    1.6G   40K  1.6G   1% /run/user/1001\n```\n\n#### **情况 2：文件系统是 ext4**\n\n如果文件系统是 ext4，则需要使用 `resize2fs` 工具扩展文件系统。\n\n运行以下命令：\n\n```\nsudo resize2fs /dev/ubuntu-vg/ubuntu-lv\n```\n\n完成后，再次运行 `df -h` 检查文件系统的大小是否已更新。\n","slug":"服务器/Centos/CentosLVM挂载","published":1,"updated":"2025-06-02T07:24:20.981Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86w7000mzcqb51q67346","content":"<blockquote>\n<p>说明：此操作在centos7下进行，如果是centos6发行版，需要注意格式化LV的文件系统类型（centos7.0开始默认文件系统是xfs，centos6是ext4）、最后一步写入系统的类型</p>\n</blockquote>\n<h1 id=\"1、查看当前磁盘\"><a href=\"#1、查看当前磁盘\" class=\"headerlink\" title=\"1、查看当前磁盘\"></a>1、查看当前磁盘</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# df -Th                                                     </span><br><span class=\"line\"></span><br><span class=\"line\">Filesystem              Type      Size  Used Avail Use% Mounted on</span><br><span class=\"line\">/dev/mapper/centos-root xfs        44G  3.7G   41G   9% /</span><br><span class=\"line\">devtmpfs                devtmpfs  7.8G     0  7.8G   0% /dev</span><br><span class=\"line\">tmpfs                   tmpfs     7.8G     0  7.8G   0% /dev/shm</span><br><span class=\"line\">tmpfs                   tmpfs     7.8G  777M  7.0G  10% /run</span><br><span class=\"line\">tmpfs                   tmpfs     7.8G     0  7.8G   0% /sys/fs/cgroup</span><br><span class=\"line\">/dev/vda1               xfs      `1014M  179M  836M  18% /boot</span><br><span class=\"line\">tmpfs                   tmpfs     1.6G   36K  1.6G   1% /run/user/0</span><br><span class=\"line\">tmpfs                   tmpfs     1.6G   40K  1.6G   1% /run/user/1001</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"2、查看块分区\"><a href=\"#2、查看块分区\" class=\"headerlink\" title=\"2、查看块分区\"></a>2、查看块分区</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lsblk </span><br><span class=\"line\"></span><br><span class=\"line\">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class=\"line\">vda             252:0    0   50G  0 disk </span><br><span class=\"line\">├─vda1          252:1    0    1G  0 part /boot</span><br><span class=\"line\">└─vda2          252:2    0   49G  0 part </span><br><span class=\"line\">  ├─centos-root 253:0    0   44G  0 lvm  /</span><br><span class=\"line\">  └─centos-swap 253:1    0    5G  0 lvm  [SWAP]</span><br><span class=\"line\">vdb             252:16   0  974G  0 disk</span><br></pre></td></tr></table></figure>\n\n<p>可以看到 <code>/dev/vdb</code> 为新增的磁盘</p>\n<h1 id=\"3、格式化磁盘\"><a href=\"#3、格式化磁盘\" class=\"headerlink\" title=\"3、格式化磁盘\"></a>3、格式化磁盘</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">使用Parted对 vdb硬盘进行分区</span></span><br><span class=\"line\">parted /dev/vdb</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看该硬盘分区情况</span></span><br><span class=\"line\">print</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">转为GPT模式</span></span><br><span class=\"line\">mklabel gpt</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">创建主分区 大小位1045GB</span></span><br><span class=\"line\">mkpart primary 0 1045GB</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">设置1分区为lvm标签</span></span><br><span class=\"line\">set 1 lvm on</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">退出工具</span></span><br><span class=\"line\">quit</span><br></pre></td></tr></table></figure>\n\n<p><strong>案例：</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# parted /dev/vdb</span><br><span class=\"line\"></span><br><span class=\"line\">GNU Parted 3.1</span><br><span class=\"line\">Using /dev/vdb</span><br><span class=\"line\">Welcome to GNU Parted! Type &#x27;help&#x27; to view a list of commands.</span><br><span class=\"line\"></span><br><span class=\"line\">(parted) print</span><br><span class=\"line\"></span><br><span class=\"line\">Error: /dev/vdb: unrecognised disk label</span><br><span class=\"line\">Model: Virtio Block Device (virtblk)                                      </span><br><span class=\"line\">Disk /dev/vdb: 1046GB</span><br><span class=\"line\">Sector size (logical/physical): 512B/512B</span><br><span class=\"line\">Partition Table: unknown</span><br><span class=\"line\">Disk Flags: </span><br><span class=\"line\"></span><br><span class=\"line\">(parted) mklabel gpt    </span><br><span class=\"line\"></span><br><span class=\"line\">(parted) mkpart primary 0 1045GB</span><br><span class=\"line\"></span><br><span class=\"line\">Warning: The resulting partition is not properly aligned for best performance.</span><br><span class=\"line\">Ignore/Cancel? i    </span><br><span class=\"line\"></span><br><span class=\"line\">(parted) print   </span><br><span class=\"line\"></span><br><span class=\"line\">Model: Virtio Block Device (virtblk)</span><br><span class=\"line\">Disk /dev/vdb: 1046GB</span><br><span class=\"line\">Sector size (logical/physical): 512B/512B</span><br><span class=\"line\">Partition Table: gpt</span><br><span class=\"line\">Disk Flags: </span><br><span class=\"line\"></span><br><span class=\"line\">Number  Start   End     Size    File system  Name     Flags</span><br><span class=\"line\"> 1      17.4kB  1045GB  1045GB               primary</span><br><span class=\"line\"></span><br><span class=\"line\">(parted) set 1 lvm on    </span><br><span class=\"line\"></span><br><span class=\"line\">(parted) print</span><br><span class=\"line\"></span><br><span class=\"line\">Model: Virtio Block Device (virtblk)</span><br><span class=\"line\">Disk /dev/vdb: 1046GB</span><br><span class=\"line\">Sector size (logical/physical): 512B/512B</span><br><span class=\"line\">Partition Table: gpt</span><br><span class=\"line\">Disk Flags: </span><br><span class=\"line\"></span><br><span class=\"line\">Number  Start   End     Size    File system  Name     Flags</span><br><span class=\"line\"> 1      17.4kB  1045GB  1045GB               primary  lvm</span><br><span class=\"line\"></span><br><span class=\"line\">(parted) quit   </span><br><span class=\"line\"></span><br><span class=\"line\">Information: You may need to update /etc/fstab</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>以上 (parted) 开头的代表输入的命令，具体功能可以通过 help 查看</p>\n<h1 id=\"4、重读分区表\"><a href=\"#4、重读分区表\" class=\"headerlink\" title=\"4、重读分区表\"></a>4、重读分区表</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">partprobe /dev/vdb</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"5、重新查看块分区\"><a href=\"#5、重新查看块分区\" class=\"headerlink\" title=\"5、重新查看块分区\"></a>5、重新查看块分区</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lsblk </span><br><span class=\"line\">NAME            MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</span><br><span class=\"line\">vda             252:0    0    50G  0 disk </span><br><span class=\"line\">├─vda1          252:1    0     1G  0 part /boot</span><br><span class=\"line\">└─vda2          252:2    0    49G  0 part </span><br><span class=\"line\">  ├─centos-root 253:0    0    44G  0 lvm  /</span><br><span class=\"line\">  └─centos-swap 253:1    0     5G  0 lvm  [SWAP]</span><br><span class=\"line\">vdb             252:16   0   974G  0 disk </span><br><span class=\"line\">└─vdb1          252:17   0 973.2G  0 part</span><br></pre></td></tr></table></figure>\n\n<p>可以看到vdb下多了vdb1，这个用来创建pv</p>\n<h1 id=\"6、创建PV\"><a href=\"#6、创建PV\" class=\"headerlink\" title=\"6、创建PV\"></a>6、创建PV</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pvcreate -v /dev/vdb1</span><br></pre></td></tr></table></figure>\n\n<p><strong>案例：</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# pvcreate -v /dev/vdb1</span><br><span class=\"line\">    Wiping internal VG cache</span><br><span class=\"line\">    Wiping cache of LVM-capable devices</span><br><span class=\"line\">    Wiping signatures on new PV /dev/vdb1.</span><br><span class=\"line\">    Set up physical volume for &quot;/dev/vdb1&quot; with 2041015592 available sectors.</span><br><span class=\"line\">    Zeroing start of device /dev/vdb1.</span><br><span class=\"line\">    Writing physical volume data to disk &quot;/dev/vdb1&quot;.</span><br><span class=\"line\">  Physical volume &quot;/dev/vdb1&quot; successfully created.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意\"></a>注意</h3><p>PV创建好之后，到这一步可以选择扩展或者新建挂载点，<strong>扩容的前提条件是扩容挂载点的磁盘格式是LVM格式</strong>，这里先演示新建挂载点然后删除挂载点并扩容</p>\n<h1 id=\"7、新增LVM挂载\"><a href=\"#7、新增LVM挂载\" class=\"headerlink\" title=\"7、新增LVM挂载\"></a>7、新增LVM挂载</h1><h2 id=\"查看PV\"><a href=\"#查看PV\" class=\"headerlink\" title=\"查看PV\"></a>查看PV</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# pvdisplay</span><br><span class=\"line\">  --- Physical volume ---</span><br><span class=\"line\">  PV Name               /dev/vda2</span><br><span class=\"line\">  VG Name               centos</span><br><span class=\"line\">  PV Size               &lt;49.00 GiB / not usable 3.00 MiB</span><br><span class=\"line\">  Allocatable           yes (but full)</span><br><span class=\"line\">  PE Size               4.00 MiB</span><br><span class=\"line\">  Total PE              12543</span><br><span class=\"line\">  Free PE               0</span><br><span class=\"line\">  Allocated PE          12543</span><br><span class=\"line\">  PV UUID               CCUeq0-ZnG9-iUY8-dPOj-fVOa-XC10-ooGyle</span><br><span class=\"line\">   </span><br><span class=\"line\">  &quot;/dev/vdb1&quot; is a new physical volume of &quot;973.23 GiB&quot;</span><br><span class=\"line\">  --- NEW Physical volume ---</span><br><span class=\"line\">  PV Name               /dev/vdb1</span><br><span class=\"line\">  VG Name               </span><br><span class=\"line\">  PV Size               973.23 GiB</span><br><span class=\"line\">  Allocatable           NO</span><br><span class=\"line\">  PE Size               0   </span><br><span class=\"line\">  Total PE              0</span><br><span class=\"line\">  Free PE               0</span><br><span class=\"line\">  Allocated PE          0</span><br><span class=\"line\">  PV UUID               vUoC7C-MIP2-iwXr-0SWu-c2Wz-yb6o-qFrfo1</span><br></pre></td></tr></table></figure>\n\n<p>注意看 VG Name，前面的是系统安装时选择LVM格式的，后面的还没有创建，所以 VG Name 为空</p>\n<h2 id=\"新建VG\"><a href=\"#新建VG\" class=\"headerlink\" title=\"新建VG\"></a>新建VG</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# vgcreate -s 4M vg01 /dev/vdb1  </span><br><span class=\"line\">  Volume group &quot;vg01&quot; successfully created</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"查看VG\"><a href=\"#查看VG\" class=\"headerlink\" title=\"查看VG\"></a>查看VG</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# vgdisplay  </span><br><span class=\"line\">  --- Volume group ---  </span><br><span class=\"line\">  VG Name               vg01  </span><br><span class=\"line\">  System ID               </span><br><span class=\"line\">  Format                lvm2  </span><br><span class=\"line\">  Metadata Areas        1  </span><br><span class=\"line\">  Metadata Sequence No  1  </span><br><span class=\"line\">  VG Access             read/write  </span><br><span class=\"line\">  VG Status             resizable  </span><br><span class=\"line\">  MAX LV                0  </span><br><span class=\"line\">  Cur LV                0  </span><br><span class=\"line\">  Open LV               0  </span><br><span class=\"line\">  Max PV                0  </span><br><span class=\"line\">  Cur PV                1  </span><br><span class=\"line\">  Act PV                1  </span><br><span class=\"line\">  VG Size               973.23 GiB  </span><br><span class=\"line\">  PE Size               4.00 MiB  </span><br><span class=\"line\">  Total PE              249147  </span><br><span class=\"line\">  Alloc PE / Size       0 / 0     </span><br><span class=\"line\">  Free  PE / Size       249147 / 973.23 GiB  </span><br><span class=\"line\">  VG UUID               hb8zoy-kKjU-VXD5-EjCN-8hS2-MOzf-lq3O5j  </span><br><span class=\"line\">     </span><br><span class=\"line\">  --- Volume group ---  </span><br><span class=\"line\">  VG Name               centos  </span><br><span class=\"line\">  System ID               </span><br><span class=\"line\">  Format                lvm2  </span><br><span class=\"line\">  Metadata Areas        1  </span><br><span class=\"line\">  Metadata Sequence No  3  </span><br><span class=\"line\">  VG Access             read/write  </span><br><span class=\"line\">  VG Status             resizable  </span><br><span class=\"line\">  MAX LV                0  </span><br><span class=\"line\">  Cur LV                2  </span><br><span class=\"line\">  Open LV               2  </span><br><span class=\"line\">  Max PV                0  </span><br><span class=\"line\">  Cur PV                1  </span><br><span class=\"line\">  Act PV                1  </span><br><span class=\"line\">  VG Size               &lt;49.00 GiB  </span><br><span class=\"line\">  PE Size               4.00 MiB  </span><br><span class=\"line\">  Total PE              12543  </span><br><span class=\"line\">  Alloc PE / Size       12543 / &lt;49.00 GiB  </span><br><span class=\"line\">  Free  PE / Size       0 / 0     </span><br><span class=\"line\">  VG UUID               kSwsMj-4FKB-zwFq-7MBq-EfOD-rccg-HC59x9</span><br></pre></td></tr></table></figure>\n\n<p>可以看到 vg01 为新建的VG</p>\n<h2 id=\"新建LV\"><a href=\"#新建LV\" class=\"headerlink\" title=\"新建LV\"></a>新建LV</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lvcreate  -l 100%FREE -n lv01 vg01  </span><br><span class=\"line\">  Logical volume &quot;lv01&quot; created</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"格式化LV\"><a href=\"#格式化LV\" class=\"headerlink\" title=\"格式化LV\"></a>格式化LV</h2><p>格式化文件系统类型有xfs，ext4，这里测试使用ext4格式，<strong>默认centos7下使用xfs格式，centos6为ext4格式</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# mkfs.ext4 /dev/vg01/lv01  </span><br><span class=\"line\">mke2fs 1.42.9 (28-Dec-2013)  </span><br><span class=\"line\">Filesystem label=  </span><br><span class=\"line\">OS type: Linux  </span><br><span class=\"line\">Block size=4096 (log=2)  </span><br><span class=\"line\">Fragment size=4096 (log=2)  </span><br><span class=\"line\">Stride=0 blocks, Stripe width=0 blocks  </span><br><span class=\"line\">63782912 inodes, 255126528 blocks  </span><br><span class=\"line\">12756326 blocks (5.00%) reserved for the super user  </span><br><span class=\"line\">First data block=0  </span><br><span class=\"line\">Maximum filesystem blocks=2403336192  </span><br><span class=\"line\">7786 block groups  </span><br><span class=\"line\">32768 blocks per group, 32768 fragments per group  </span><br><span class=\"line\">8192 inodes per group  </span><br><span class=\"line\">Superblock backups stored on blocks:   </span><br><span class=\"line\">        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,   </span><br><span class=\"line\">        4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968,   </span><br><span class=\"line\">        102400000, 214990848  </span><br><span class=\"line\">  </span><br><span class=\"line\">Allocating group tables: done                              </span><br><span class=\"line\">Writing inode tables: done                              </span><br><span class=\"line\">Creating journal (32768 blocks): done  </span><br><span class=\"line\">Writing superblocks and filesystem accounting information: done</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"新建挂载点并挂载\"><a href=\"#新建挂载点并挂载\" class=\"headerlink\" title=\"新建挂载点并挂载\"></a>新建挂载点并挂载</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /app  </span><br><span class=\"line\">mount /dev/vg01/lv01 /app</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"查看新增挂载后的块分区\"><a href=\"#查看新增挂载后的块分区\" class=\"headerlink\" title=\"查看新增挂载后的块分区\"></a>查看新增挂载后的块分区</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lsblk   </span><br><span class=\"line\">NAME            MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT  </span><br><span class=\"line\">vda             252:0    0    50G  0 disk   </span><br><span class=\"line\">├─vda1          252:1    0     1G  0 part /boot  </span><br><span class=\"line\">└─vda2          252:2    0    49G  0 part   </span><br><span class=\"line\">  ├─centos-root 253:0    0    44G  0 lvm  /  </span><br><span class=\"line\">  └─centos-swap 253:1    0     5G  0 lvm  [SWAP]  </span><br><span class=\"line\">vdb             252:16   0   974G  0 disk   </span><br><span class=\"line\">└─vdb1          252:17   0 973.2G  0 part   </span><br><span class=\"line\">  └─vg01-lv01   253:2    0 973.2G  0 lvm  /app</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>可以看到新增磁盘以LVM格式挂载在 <code>/app</code> 下</p>\n<h2 id=\"永久写入挂载点\"><a href=\"#永久写入挂载点\" class=\"headerlink\" title=\"永久写入挂载点\"></a>永久写入挂载点</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">blkid  </span><br><span class=\"line\">​  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;UUID=&lt;UUID&gt; /app ext4 defaults 0 0&quot;</span> &gt;&gt; /etc/fstab</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">[root@docker-server ~]# blkid  </span><br><span class=\"line\">/dev/sda1: SEC_TYPE=&quot;msdos&quot; UUID=&quot;F312-EB5D&quot; TYPE=&quot;vfat&quot; PARTLABEL=&quot;EFI System Partition&quot; PARTUUID=&quot;7526c319-8c70-4fa9-ad1a-7a9a906c0f7c&quot;  </span><br><span class=\"line\">/dev/sda2: UUID=&quot;a169778d-bcee-41d3-899e-aa68e670eb54&quot; TYPE=&quot;xfs&quot; PARTUUID=&quot;b9de11c9-a9a8-46c7-8484-a3f0450f648f&quot;  </span><br><span class=\"line\">/dev/sda3: UUID=&quot;4WIoYK-aQng-dGMv-YYjq-RXaj-XKMV-o0RYCL&quot; TYPE=&quot;LVM2_member&quot; PARTUUID=&quot;b0ebc437-996e-4a3c-b6d3-cf5692413688&quot;  </span><br><span class=\"line\">/dev/sdb1: UUID=&quot;PHHm7S-6haw-EeGN-2xRl-Cxna-3C9N-4QlPIy&quot; TYPE=&quot;LVM2_member&quot; PARTLABEL=&quot;primary&quot; PARTUUID=&quot;68320f1b-25b0-4070-8a22-79af2af7aa69&quot;  </span><br><span class=\"line\">/dev/mapper/centos-root: UUID=&quot;375718d4-698b-4709-b721-2c652a87c118&quot; TYPE=&quot;xfs&quot;  </span><br><span class=\"line\">/dev/mapper/centos-swap: UUID=&quot;d7e852bb-0ef8-4545-a3cb-4fb12b8fb9ff&quot; TYPE=&quot;swap&quot;  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">lvm</span>  </span><br><span class=\"line\">/dev/mapper/vg01-lv01: UUID=&quot;37bbfff9-76da-4515-a9e5-b8820ea523e5&quot; TYPE=&quot;ext4&quot;   </span><br><span class=\"line\">/dev/mapper/centos-home: UUID=&quot;d3f5743c-588a-4bc1-bb6a-51775db4713e&quot; TYPE=&quot;xfs&quot;  </span><br><span class=\"line\">[root@docker-server ~]# cat /etc/fstab  </span><br><span class=\"line\">​  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">/etc/fstab</span>  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Created by anaconda on Wed Jul  3 21:16:34 2024</span>  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Accessible filesystems, by reference, are maintained under <span class=\"string\">&#x27;/dev/disk&#x27;</span></span>  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) <span class=\"keyword\">for</span> more info</span>  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\"> </span></span><br><span class=\"line\">/dev/mapper/centos-root /                       xfs     defaults        0 0  </span><br><span class=\"line\">UUID=a169778d-bcee-41d3-899e-aa68e670eb54 /boot                   xfs     defaults        0 0  </span><br><span class=\"line\">UUID=F312-EB5D          /boot/efi               vfat    umask=0077,shortname=winnt 0 0  </span><br><span class=\"line\">/dev/mapper/centos-home /home                   xfs     defaults        0 0  </span><br><span class=\"line\">/dev/mapper/centos-swap swap                    swap    defaults        0 0  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">写入</span>  </span><br><span class=\"line\">UUID=37bbfff9-76da-4515-a9e5-b8820ea523e5 /app ext4 defaults 0 0  </span><br><span class=\"line\">​</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"8、删除LVM挂载点\"><a href=\"#8、删除LVM挂载点\" class=\"headerlink\" title=\"8、删除LVM挂载点\"></a>8、删除LVM挂载点</h1><h2 id=\"删除挂载点\"><a href=\"#删除挂载点\" class=\"headerlink\" title=\"删除挂载点\"></a>删除挂载点</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# umount -v /dev/vg01/lv01  </span><br><span class=\"line\">umount: /app (/dev/mapper/vg01-lv01) unmounted</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"查看块设备\"><a href=\"#查看块设备\" class=\"headerlink\" title=\"查看块设备\"></a>查看块设备</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lsblk   </span><br><span class=\"line\">NAME            MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT  </span><br><span class=\"line\">vda             252:0    0    50G  0 disk   </span><br><span class=\"line\">├─vda1          252:1    0     1G  0 part /boot  </span><br><span class=\"line\">└─vda2          252:2    0    49G  0 part   </span><br><span class=\"line\">  ├─centos-root 253:0    0    44G  0 lvm  /  </span><br><span class=\"line\">  └─centos-swap 253:1    0     5G  0 lvm  [SWAP]  </span><br><span class=\"line\">vdb             252:16   0   974G  0 disk   </span><br><span class=\"line\">└─vdb1          252:17   0 973.2G  0 part   </span><br><span class=\"line\">  └─vg01-lv01   253:2    0 973.2G  0 lvm</span><br></pre></td></tr></table></figure>\n\n<p>可以看到 <code>/app</code> 挂载点删除了，删除 &#x2F;app 目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -rf /app</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"删除LV\"><a href=\"#删除LV\" class=\"headerlink\" title=\"删除LV\"></a>删除LV</h2><p>参数为 LV Path</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lvremove /dev/vg01/lv01  </span><br><span class=\"line\">Do you really want to remove active logical volume vg01/lv01? [y/n]: y  </span><br><span class=\"line\">  Logical volume &quot;lv01&quot; successfully removed</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"删除VG\"><a href=\"#删除VG\" class=\"headerlink\" title=\"删除VG\"></a>删除VG</h2><p>参数为 VG Name</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# vgremove vg01  </span><br><span class=\"line\">  Volume group &quot;vg01&quot; successfully removed</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"扩容VG\"><a href=\"#扩容VG\" class=\"headerlink\" title=\"扩容VG\"></a>扩容VG</h2><p>参数为 VG Name 和 PV Name</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">[root@vm ~]# vgextend centos /dev/vdb1  </span><br><span class=\"line\">  Volume group &quot;centos&quot; successfully extended</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>此时 PV <code>/dev/vdb1</code> 全部扩展到 VG centos下</p>\n<h2 id=\"查看LV\"><a href=\"#查看LV\" class=\"headerlink\" title=\"查看LV\"></a>查看LV</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lvdisplay   </span><br><span class=\"line\">  --- Logical volume ---  </span><br><span class=\"line\">  LV Path                /dev/centos/swap  </span><br><span class=\"line\">  LV Name                swap  </span><br><span class=\"line\">  VG Name                centos  </span><br><span class=\"line\">  LV UUID                PCx0yU-o9JZ-R92O-lI01-f8EU-DKyM-etst0H  </span><br><span class=\"line\">  LV Write Access        read/write  </span><br><span class=\"line\">  LV Creation host, time localhost.localdomain, 2018-12-24 16:46:31 +0800  </span><br><span class=\"line\">  LV Status              available  </span><br><span class=\"line\"><span class=\"meta prompt_\">  # </span><span class=\"language-bash\">open                 2</span>  </span><br><span class=\"line\">  LV Size                5.00 GiB  </span><br><span class=\"line\">  Current LE             1280  </span><br><span class=\"line\">  Segments               1  </span><br><span class=\"line\">  Allocation             inherit  </span><br><span class=\"line\">  Read ahead sectors     auto  </span><br><span class=\"line\">  - currently set to     8192  </span><br><span class=\"line\">  Block device           253:1  </span><br><span class=\"line\">     </span><br><span class=\"line\">  --- Logical volume ---  </span><br><span class=\"line\">  LV Path                /dev/centos/root  </span><br><span class=\"line\">  LV Name                root  </span><br><span class=\"line\">  VG Name                centos  </span><br><span class=\"line\">  LV UUID                Idf9IO-AxkA-tS1C-FTgN-FsLT-d3Zk-7o1W5E  </span><br><span class=\"line\">  LV Write Access        read/write  </span><br><span class=\"line\">  LV Creation host, time localhost.localdomain, 2018-12-24 16:46:31 +0800  </span><br><span class=\"line\">  LV Status              available  </span><br><span class=\"line\"><span class=\"meta prompt_\">  # </span><span class=\"language-bash\">open                 1</span>  </span><br><span class=\"line\">  LV Size                &lt;44.00 GiB  </span><br><span class=\"line\">  Current LE             11263  </span><br><span class=\"line\">  Segments               1  </span><br><span class=\"line\">  Allocation             inherit  </span><br><span class=\"line\">  Read ahead sectors     auto  </span><br><span class=\"line\">  - currently set to     8192  </span><br><span class=\"line\">  Block device           253:0</span><br></pre></td></tr></table></figure>\n\n<p>通过查看，系统安装时选择的磁盘格式是LVM并且有两个分区，接下来扩展根分区</p>\n<h2 id=\"扩展LV分区\"><a href=\"#扩展LV分区\" class=\"headerlink\" title=\"扩展LV分区\"></a>扩展LV分区</h2><p>参数为 LV Path</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lvextend -l +100%FREE /dev/centos/root  </span><br><span class=\"line\">  Size of logical volume centos/root changed from &lt;44.00 GiB (11263 extents) to &lt;1017.23 GiB (260410 extents).  </span><br><span class=\"line\">  Logical volume centos/root successfully resized</span><br></pre></td></tr></table></figure>\n\n<p>如果发现误操作，需要还原，可以通过以下命令缩小LV分区</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lvreduce -L 1017.2G  /dev/centos/root</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"加载扩容到系统\"><a href=\"#加载扩容到系统\" class=\"headerlink\" title=\"加载扩容到系统\"></a>加载扩容到系统</h2><p>此时查看系统可以看到已经扩容，但没有加载到文件系统</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lsblk   </span><br><span class=\"line\">NAME            MAJ:MIN RM    SIZE RO TYPE MOUNTPOINT  </span><br><span class=\"line\">vda             252:0    0     50G  0 disk   </span><br><span class=\"line\">├─vda1          252:1    0      1G  0 part /boot  </span><br><span class=\"line\">└─vda2          252:2    0     49G  0 part   </span><br><span class=\"line\">  ├─centos-root 253:0    0 1017.2G  0 lvm  /  </span><br><span class=\"line\">  └─centos-swap 253:1    0      5G  0 lvm  [SWAP]  </span><br><span class=\"line\">vdb             252:16   0    974G  0 disk   </span><br><span class=\"line\">└─vdb1          252:17   0  973.2G  0 part   </span><br><span class=\"line\">  └─centos-root 253:0    0 1017.2G  0 lvm  /  </span><br><span class=\"line\">[root@vm ~]# df -h  </span><br><span class=\"line\">Filesystem               Size  Used Avail Use% Mounted on  </span><br><span class=\"line\">/dev/mapper/centos-root   44G  3.7G   41G   9% /  </span><br><span class=\"line\">devtmpfs                 7.8G     0  7.8G   0% /dev  </span><br><span class=\"line\">tmpfs                    7.8G     0  7.8G   0% /dev/shm  </span><br><span class=\"line\">tmpfs                    7.8G  777M  7.0G  10% /run  </span><br><span class=\"line\">tmpfs                    7.8G     0  7.8G   0% /sys/fs/cgroup  </span><br><span class=\"line\">/dev/vda1               1014M  179M  836M  18% /boot  </span><br><span class=\"line\">tmpfs                    1.6G   36K  1.6G   1% /run/user/0  </span><br><span class=\"line\">tmpfs                    1.6G   40K  1.6G   1% /run/user/1001</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>加载扩容到系统</strong> 参数为 LV path，<strong>被扩容的挂载点一定是LVM格式</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# xfs_growfs /dev/centos/root  </span><br><span class=\"line\">meta-data=/dev/mapper/centos-root isize=512    agcount=4, agsize=2883328 blks  </span><br><span class=\"line\">         =                       sectsz=512   attr=2, projid32bit=1  </span><br><span class=\"line\">         =                       crc=1        finobt=0 spinodes=0  </span><br><span class=\"line\">data     =                       bsize=4096   blocks=11533312, imaxpct=25  </span><br><span class=\"line\">         =                       sunit=0      swidth=0 blks  </span><br><span class=\"line\">naming   =version 2              bsize=4096   ascii-ci=0 ftype=1  </span><br><span class=\"line\">log      =internal               bsize=4096   blocks=5631, version=2  </span><br><span class=\"line\">         =                       sectsz=512   sunit=0 blks, lazy-count=1  </span><br><span class=\"line\">realtime =none                   extsz=4096   blocks=0, rtextents=0  </span><br><span class=\"line\">data blocks changed from 11533312 to 266659840</span><br></pre></td></tr></table></figure>\n\n<p>说明：若使用ext4文件格式（centos6），是使用resize2fs命令来生效 <strong>查看磁盘</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# df -h  </span><br><span class=\"line\">Filesystem               Size  Used Avail Use% Mounted on  </span><br><span class=\"line\">/dev/mapper/centos-root 1018G  3.7G 1014G   1% /  </span><br><span class=\"line\">devtmpfs                 7.8G     0  7.8G   0% /dev  </span><br><span class=\"line\">tmpfs                    7.8G     0  7.8G   0% /dev/shm  </span><br><span class=\"line\">tmpfs                    7.8G  777M  7.0G  10% /run  </span><br><span class=\"line\">tmpfs                    7.8G     0  7.8G   0% /sys/fs/cgroup  </span><br><span class=\"line\">/dev/vda1               1014M  179M  836M  18% /boot  </span><br><span class=\"line\">tmpfs                    1.6G   36K  1.6G   1% /run/user/0  </span><br><span class=\"line\">tmpfs                    1.6G   40K  1.6G   1% /run/user/1001</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"情况-2：文件系统是-ext4\"><a href=\"#情况-2：文件系统是-ext4\" class=\"headerlink\" title=\"情况 2：文件系统是 ext4\"></a><strong>情况 2：文件系统是 ext4</strong></h4><p>如果文件系统是 ext4，则需要使用 <code>resize2fs</code> 工具扩展文件系统。</p>\n<p>运行以下命令：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo resize2fs /dev/ubuntu-vg/ubuntu-lv</span><br></pre></td></tr></table></figure>\n\n<p>完成后，再次运行 <code>df -h</code> 检查文件系统的大小是否已更新。</p>\n","cover_type":"img","excerpt":"","more":"<blockquote>\n<p>说明：此操作在centos7下进行，如果是centos6发行版，需要注意格式化LV的文件系统类型（centos7.0开始默认文件系统是xfs，centos6是ext4）、最后一步写入系统的类型</p>\n</blockquote>\n<h1 id=\"1、查看当前磁盘\"><a href=\"#1、查看当前磁盘\" class=\"headerlink\" title=\"1、查看当前磁盘\"></a>1、查看当前磁盘</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# df -Th                                                     </span><br><span class=\"line\"></span><br><span class=\"line\">Filesystem              Type      Size  Used Avail Use% Mounted on</span><br><span class=\"line\">/dev/mapper/centos-root xfs        44G  3.7G   41G   9% /</span><br><span class=\"line\">devtmpfs                devtmpfs  7.8G     0  7.8G   0% /dev</span><br><span class=\"line\">tmpfs                   tmpfs     7.8G     0  7.8G   0% /dev/shm</span><br><span class=\"line\">tmpfs                   tmpfs     7.8G  777M  7.0G  10% /run</span><br><span class=\"line\">tmpfs                   tmpfs     7.8G     0  7.8G   0% /sys/fs/cgroup</span><br><span class=\"line\">/dev/vda1               xfs      `1014M  179M  836M  18% /boot</span><br><span class=\"line\">tmpfs                   tmpfs     1.6G   36K  1.6G   1% /run/user/0</span><br><span class=\"line\">tmpfs                   tmpfs     1.6G   40K  1.6G   1% /run/user/1001</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"2、查看块分区\"><a href=\"#2、查看块分区\" class=\"headerlink\" title=\"2、查看块分区\"></a>2、查看块分区</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lsblk </span><br><span class=\"line\"></span><br><span class=\"line\">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class=\"line\">vda             252:0    0   50G  0 disk </span><br><span class=\"line\">├─vda1          252:1    0    1G  0 part /boot</span><br><span class=\"line\">└─vda2          252:2    0   49G  0 part </span><br><span class=\"line\">  ├─centos-root 253:0    0   44G  0 lvm  /</span><br><span class=\"line\">  └─centos-swap 253:1    0    5G  0 lvm  [SWAP]</span><br><span class=\"line\">vdb             252:16   0  974G  0 disk</span><br></pre></td></tr></table></figure>\n\n<p>可以看到 <code>/dev/vdb</code> 为新增的磁盘</p>\n<h1 id=\"3、格式化磁盘\"><a href=\"#3、格式化磁盘\" class=\"headerlink\" title=\"3、格式化磁盘\"></a>3、格式化磁盘</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">使用Parted对 vdb硬盘进行分区</span></span><br><span class=\"line\">parted /dev/vdb</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看该硬盘分区情况</span></span><br><span class=\"line\">print</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">转为GPT模式</span></span><br><span class=\"line\">mklabel gpt</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">创建主分区 大小位1045GB</span></span><br><span class=\"line\">mkpart primary 0 1045GB</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">设置1分区为lvm标签</span></span><br><span class=\"line\">set 1 lvm on</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">退出工具</span></span><br><span class=\"line\">quit</span><br></pre></td></tr></table></figure>\n\n<p><strong>案例：</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# parted /dev/vdb</span><br><span class=\"line\"></span><br><span class=\"line\">GNU Parted 3.1</span><br><span class=\"line\">Using /dev/vdb</span><br><span class=\"line\">Welcome to GNU Parted! Type &#x27;help&#x27; to view a list of commands.</span><br><span class=\"line\"></span><br><span class=\"line\">(parted) print</span><br><span class=\"line\"></span><br><span class=\"line\">Error: /dev/vdb: unrecognised disk label</span><br><span class=\"line\">Model: Virtio Block Device (virtblk)                                      </span><br><span class=\"line\">Disk /dev/vdb: 1046GB</span><br><span class=\"line\">Sector size (logical/physical): 512B/512B</span><br><span class=\"line\">Partition Table: unknown</span><br><span class=\"line\">Disk Flags: </span><br><span class=\"line\"></span><br><span class=\"line\">(parted) mklabel gpt    </span><br><span class=\"line\"></span><br><span class=\"line\">(parted) mkpart primary 0 1045GB</span><br><span class=\"line\"></span><br><span class=\"line\">Warning: The resulting partition is not properly aligned for best performance.</span><br><span class=\"line\">Ignore/Cancel? i    </span><br><span class=\"line\"></span><br><span class=\"line\">(parted) print   </span><br><span class=\"line\"></span><br><span class=\"line\">Model: Virtio Block Device (virtblk)</span><br><span class=\"line\">Disk /dev/vdb: 1046GB</span><br><span class=\"line\">Sector size (logical/physical): 512B/512B</span><br><span class=\"line\">Partition Table: gpt</span><br><span class=\"line\">Disk Flags: </span><br><span class=\"line\"></span><br><span class=\"line\">Number  Start   End     Size    File system  Name     Flags</span><br><span class=\"line\"> 1      17.4kB  1045GB  1045GB               primary</span><br><span class=\"line\"></span><br><span class=\"line\">(parted) set 1 lvm on    </span><br><span class=\"line\"></span><br><span class=\"line\">(parted) print</span><br><span class=\"line\"></span><br><span class=\"line\">Model: Virtio Block Device (virtblk)</span><br><span class=\"line\">Disk /dev/vdb: 1046GB</span><br><span class=\"line\">Sector size (logical/physical): 512B/512B</span><br><span class=\"line\">Partition Table: gpt</span><br><span class=\"line\">Disk Flags: </span><br><span class=\"line\"></span><br><span class=\"line\">Number  Start   End     Size    File system  Name     Flags</span><br><span class=\"line\"> 1      17.4kB  1045GB  1045GB               primary  lvm</span><br><span class=\"line\"></span><br><span class=\"line\">(parted) quit   </span><br><span class=\"line\"></span><br><span class=\"line\">Information: You may need to update /etc/fstab</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>以上 (parted) 开头的代表输入的命令，具体功能可以通过 help 查看</p>\n<h1 id=\"4、重读分区表\"><a href=\"#4、重读分区表\" class=\"headerlink\" title=\"4、重读分区表\"></a>4、重读分区表</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">partprobe /dev/vdb</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"5、重新查看块分区\"><a href=\"#5、重新查看块分区\" class=\"headerlink\" title=\"5、重新查看块分区\"></a>5、重新查看块分区</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lsblk </span><br><span class=\"line\">NAME            MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</span><br><span class=\"line\">vda             252:0    0    50G  0 disk </span><br><span class=\"line\">├─vda1          252:1    0     1G  0 part /boot</span><br><span class=\"line\">└─vda2          252:2    0    49G  0 part </span><br><span class=\"line\">  ├─centos-root 253:0    0    44G  0 lvm  /</span><br><span class=\"line\">  └─centos-swap 253:1    0     5G  0 lvm  [SWAP]</span><br><span class=\"line\">vdb             252:16   0   974G  0 disk </span><br><span class=\"line\">└─vdb1          252:17   0 973.2G  0 part</span><br></pre></td></tr></table></figure>\n\n<p>可以看到vdb下多了vdb1，这个用来创建pv</p>\n<h1 id=\"6、创建PV\"><a href=\"#6、创建PV\" class=\"headerlink\" title=\"6、创建PV\"></a>6、创建PV</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pvcreate -v /dev/vdb1</span><br></pre></td></tr></table></figure>\n\n<p><strong>案例：</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# pvcreate -v /dev/vdb1</span><br><span class=\"line\">    Wiping internal VG cache</span><br><span class=\"line\">    Wiping cache of LVM-capable devices</span><br><span class=\"line\">    Wiping signatures on new PV /dev/vdb1.</span><br><span class=\"line\">    Set up physical volume for &quot;/dev/vdb1&quot; with 2041015592 available sectors.</span><br><span class=\"line\">    Zeroing start of device /dev/vdb1.</span><br><span class=\"line\">    Writing physical volume data to disk &quot;/dev/vdb1&quot;.</span><br><span class=\"line\">  Physical volume &quot;/dev/vdb1&quot; successfully created.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意\"></a>注意</h3><p>PV创建好之后，到这一步可以选择扩展或者新建挂载点，<strong>扩容的前提条件是扩容挂载点的磁盘格式是LVM格式</strong>，这里先演示新建挂载点然后删除挂载点并扩容</p>\n<h1 id=\"7、新增LVM挂载\"><a href=\"#7、新增LVM挂载\" class=\"headerlink\" title=\"7、新增LVM挂载\"></a>7、新增LVM挂载</h1><h2 id=\"查看PV\"><a href=\"#查看PV\" class=\"headerlink\" title=\"查看PV\"></a>查看PV</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# pvdisplay</span><br><span class=\"line\">  --- Physical volume ---</span><br><span class=\"line\">  PV Name               /dev/vda2</span><br><span class=\"line\">  VG Name               centos</span><br><span class=\"line\">  PV Size               &lt;49.00 GiB / not usable 3.00 MiB</span><br><span class=\"line\">  Allocatable           yes (but full)</span><br><span class=\"line\">  PE Size               4.00 MiB</span><br><span class=\"line\">  Total PE              12543</span><br><span class=\"line\">  Free PE               0</span><br><span class=\"line\">  Allocated PE          12543</span><br><span class=\"line\">  PV UUID               CCUeq0-ZnG9-iUY8-dPOj-fVOa-XC10-ooGyle</span><br><span class=\"line\">   </span><br><span class=\"line\">  &quot;/dev/vdb1&quot; is a new physical volume of &quot;973.23 GiB&quot;</span><br><span class=\"line\">  --- NEW Physical volume ---</span><br><span class=\"line\">  PV Name               /dev/vdb1</span><br><span class=\"line\">  VG Name               </span><br><span class=\"line\">  PV Size               973.23 GiB</span><br><span class=\"line\">  Allocatable           NO</span><br><span class=\"line\">  PE Size               0   </span><br><span class=\"line\">  Total PE              0</span><br><span class=\"line\">  Free PE               0</span><br><span class=\"line\">  Allocated PE          0</span><br><span class=\"line\">  PV UUID               vUoC7C-MIP2-iwXr-0SWu-c2Wz-yb6o-qFrfo1</span><br></pre></td></tr></table></figure>\n\n<p>注意看 VG Name，前面的是系统安装时选择LVM格式的，后面的还没有创建，所以 VG Name 为空</p>\n<h2 id=\"新建VG\"><a href=\"#新建VG\" class=\"headerlink\" title=\"新建VG\"></a>新建VG</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# vgcreate -s 4M vg01 /dev/vdb1  </span><br><span class=\"line\">  Volume group &quot;vg01&quot; successfully created</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"查看VG\"><a href=\"#查看VG\" class=\"headerlink\" title=\"查看VG\"></a>查看VG</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# vgdisplay  </span><br><span class=\"line\">  --- Volume group ---  </span><br><span class=\"line\">  VG Name               vg01  </span><br><span class=\"line\">  System ID               </span><br><span class=\"line\">  Format                lvm2  </span><br><span class=\"line\">  Metadata Areas        1  </span><br><span class=\"line\">  Metadata Sequence No  1  </span><br><span class=\"line\">  VG Access             read/write  </span><br><span class=\"line\">  VG Status             resizable  </span><br><span class=\"line\">  MAX LV                0  </span><br><span class=\"line\">  Cur LV                0  </span><br><span class=\"line\">  Open LV               0  </span><br><span class=\"line\">  Max PV                0  </span><br><span class=\"line\">  Cur PV                1  </span><br><span class=\"line\">  Act PV                1  </span><br><span class=\"line\">  VG Size               973.23 GiB  </span><br><span class=\"line\">  PE Size               4.00 MiB  </span><br><span class=\"line\">  Total PE              249147  </span><br><span class=\"line\">  Alloc PE / Size       0 / 0     </span><br><span class=\"line\">  Free  PE / Size       249147 / 973.23 GiB  </span><br><span class=\"line\">  VG UUID               hb8zoy-kKjU-VXD5-EjCN-8hS2-MOzf-lq3O5j  </span><br><span class=\"line\">     </span><br><span class=\"line\">  --- Volume group ---  </span><br><span class=\"line\">  VG Name               centos  </span><br><span class=\"line\">  System ID               </span><br><span class=\"line\">  Format                lvm2  </span><br><span class=\"line\">  Metadata Areas        1  </span><br><span class=\"line\">  Metadata Sequence No  3  </span><br><span class=\"line\">  VG Access             read/write  </span><br><span class=\"line\">  VG Status             resizable  </span><br><span class=\"line\">  MAX LV                0  </span><br><span class=\"line\">  Cur LV                2  </span><br><span class=\"line\">  Open LV               2  </span><br><span class=\"line\">  Max PV                0  </span><br><span class=\"line\">  Cur PV                1  </span><br><span class=\"line\">  Act PV                1  </span><br><span class=\"line\">  VG Size               &lt;49.00 GiB  </span><br><span class=\"line\">  PE Size               4.00 MiB  </span><br><span class=\"line\">  Total PE              12543  </span><br><span class=\"line\">  Alloc PE / Size       12543 / &lt;49.00 GiB  </span><br><span class=\"line\">  Free  PE / Size       0 / 0     </span><br><span class=\"line\">  VG UUID               kSwsMj-4FKB-zwFq-7MBq-EfOD-rccg-HC59x9</span><br></pre></td></tr></table></figure>\n\n<p>可以看到 vg01 为新建的VG</p>\n<h2 id=\"新建LV\"><a href=\"#新建LV\" class=\"headerlink\" title=\"新建LV\"></a>新建LV</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lvcreate  -l 100%FREE -n lv01 vg01  </span><br><span class=\"line\">  Logical volume &quot;lv01&quot; created</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"格式化LV\"><a href=\"#格式化LV\" class=\"headerlink\" title=\"格式化LV\"></a>格式化LV</h2><p>格式化文件系统类型有xfs，ext4，这里测试使用ext4格式，<strong>默认centos7下使用xfs格式，centos6为ext4格式</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# mkfs.ext4 /dev/vg01/lv01  </span><br><span class=\"line\">mke2fs 1.42.9 (28-Dec-2013)  </span><br><span class=\"line\">Filesystem label=  </span><br><span class=\"line\">OS type: Linux  </span><br><span class=\"line\">Block size=4096 (log=2)  </span><br><span class=\"line\">Fragment size=4096 (log=2)  </span><br><span class=\"line\">Stride=0 blocks, Stripe width=0 blocks  </span><br><span class=\"line\">63782912 inodes, 255126528 blocks  </span><br><span class=\"line\">12756326 blocks (5.00%) reserved for the super user  </span><br><span class=\"line\">First data block=0  </span><br><span class=\"line\">Maximum filesystem blocks=2403336192  </span><br><span class=\"line\">7786 block groups  </span><br><span class=\"line\">32768 blocks per group, 32768 fragments per group  </span><br><span class=\"line\">8192 inodes per group  </span><br><span class=\"line\">Superblock backups stored on blocks:   </span><br><span class=\"line\">        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,   </span><br><span class=\"line\">        4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968,   </span><br><span class=\"line\">        102400000, 214990848  </span><br><span class=\"line\">  </span><br><span class=\"line\">Allocating group tables: done                              </span><br><span class=\"line\">Writing inode tables: done                              </span><br><span class=\"line\">Creating journal (32768 blocks): done  </span><br><span class=\"line\">Writing superblocks and filesystem accounting information: done</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"新建挂载点并挂载\"><a href=\"#新建挂载点并挂载\" class=\"headerlink\" title=\"新建挂载点并挂载\"></a>新建挂载点并挂载</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /app  </span><br><span class=\"line\">mount /dev/vg01/lv01 /app</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"查看新增挂载后的块分区\"><a href=\"#查看新增挂载后的块分区\" class=\"headerlink\" title=\"查看新增挂载后的块分区\"></a>查看新增挂载后的块分区</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lsblk   </span><br><span class=\"line\">NAME            MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT  </span><br><span class=\"line\">vda             252:0    0    50G  0 disk   </span><br><span class=\"line\">├─vda1          252:1    0     1G  0 part /boot  </span><br><span class=\"line\">└─vda2          252:2    0    49G  0 part   </span><br><span class=\"line\">  ├─centos-root 253:0    0    44G  0 lvm  /  </span><br><span class=\"line\">  └─centos-swap 253:1    0     5G  0 lvm  [SWAP]  </span><br><span class=\"line\">vdb             252:16   0   974G  0 disk   </span><br><span class=\"line\">└─vdb1          252:17   0 973.2G  0 part   </span><br><span class=\"line\">  └─vg01-lv01   253:2    0 973.2G  0 lvm  /app</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>可以看到新增磁盘以LVM格式挂载在 <code>/app</code> 下</p>\n<h2 id=\"永久写入挂载点\"><a href=\"#永久写入挂载点\" class=\"headerlink\" title=\"永久写入挂载点\"></a>永久写入挂载点</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">blkid  </span><br><span class=\"line\">​  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;UUID=&lt;UUID&gt; /app ext4 defaults 0 0&quot;</span> &gt;&gt; /etc/fstab</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">[root@docker-server ~]# blkid  </span><br><span class=\"line\">/dev/sda1: SEC_TYPE=&quot;msdos&quot; UUID=&quot;F312-EB5D&quot; TYPE=&quot;vfat&quot; PARTLABEL=&quot;EFI System Partition&quot; PARTUUID=&quot;7526c319-8c70-4fa9-ad1a-7a9a906c0f7c&quot;  </span><br><span class=\"line\">/dev/sda2: UUID=&quot;a169778d-bcee-41d3-899e-aa68e670eb54&quot; TYPE=&quot;xfs&quot; PARTUUID=&quot;b9de11c9-a9a8-46c7-8484-a3f0450f648f&quot;  </span><br><span class=\"line\">/dev/sda3: UUID=&quot;4WIoYK-aQng-dGMv-YYjq-RXaj-XKMV-o0RYCL&quot; TYPE=&quot;LVM2_member&quot; PARTUUID=&quot;b0ebc437-996e-4a3c-b6d3-cf5692413688&quot;  </span><br><span class=\"line\">/dev/sdb1: UUID=&quot;PHHm7S-6haw-EeGN-2xRl-Cxna-3C9N-4QlPIy&quot; TYPE=&quot;LVM2_member&quot; PARTLABEL=&quot;primary&quot; PARTUUID=&quot;68320f1b-25b0-4070-8a22-79af2af7aa69&quot;  </span><br><span class=\"line\">/dev/mapper/centos-root: UUID=&quot;375718d4-698b-4709-b721-2c652a87c118&quot; TYPE=&quot;xfs&quot;  </span><br><span class=\"line\">/dev/mapper/centos-swap: UUID=&quot;d7e852bb-0ef8-4545-a3cb-4fb12b8fb9ff&quot; TYPE=&quot;swap&quot;  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">lvm</span>  </span><br><span class=\"line\">/dev/mapper/vg01-lv01: UUID=&quot;37bbfff9-76da-4515-a9e5-b8820ea523e5&quot; TYPE=&quot;ext4&quot;   </span><br><span class=\"line\">/dev/mapper/centos-home: UUID=&quot;d3f5743c-588a-4bc1-bb6a-51775db4713e&quot; TYPE=&quot;xfs&quot;  </span><br><span class=\"line\">[root@docker-server ~]# cat /etc/fstab  </span><br><span class=\"line\">​  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">/etc/fstab</span>  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Created by anaconda on Wed Jul  3 21:16:34 2024</span>  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Accessible filesystems, by reference, are maintained under <span class=\"string\">&#x27;/dev/disk&#x27;</span></span>  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) <span class=\"keyword\">for</span> more info</span>  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\"> </span></span><br><span class=\"line\">/dev/mapper/centos-root /                       xfs     defaults        0 0  </span><br><span class=\"line\">UUID=a169778d-bcee-41d3-899e-aa68e670eb54 /boot                   xfs     defaults        0 0  </span><br><span class=\"line\">UUID=F312-EB5D          /boot/efi               vfat    umask=0077,shortname=winnt 0 0  </span><br><span class=\"line\">/dev/mapper/centos-home /home                   xfs     defaults        0 0  </span><br><span class=\"line\">/dev/mapper/centos-swap swap                    swap    defaults        0 0  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">写入</span>  </span><br><span class=\"line\">UUID=37bbfff9-76da-4515-a9e5-b8820ea523e5 /app ext4 defaults 0 0  </span><br><span class=\"line\">​</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"8、删除LVM挂载点\"><a href=\"#8、删除LVM挂载点\" class=\"headerlink\" title=\"8、删除LVM挂载点\"></a>8、删除LVM挂载点</h1><h2 id=\"删除挂载点\"><a href=\"#删除挂载点\" class=\"headerlink\" title=\"删除挂载点\"></a>删除挂载点</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# umount -v /dev/vg01/lv01  </span><br><span class=\"line\">umount: /app (/dev/mapper/vg01-lv01) unmounted</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"查看块设备\"><a href=\"#查看块设备\" class=\"headerlink\" title=\"查看块设备\"></a>查看块设备</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lsblk   </span><br><span class=\"line\">NAME            MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT  </span><br><span class=\"line\">vda             252:0    0    50G  0 disk   </span><br><span class=\"line\">├─vda1          252:1    0     1G  0 part /boot  </span><br><span class=\"line\">└─vda2          252:2    0    49G  0 part   </span><br><span class=\"line\">  ├─centos-root 253:0    0    44G  0 lvm  /  </span><br><span class=\"line\">  └─centos-swap 253:1    0     5G  0 lvm  [SWAP]  </span><br><span class=\"line\">vdb             252:16   0   974G  0 disk   </span><br><span class=\"line\">└─vdb1          252:17   0 973.2G  0 part   </span><br><span class=\"line\">  └─vg01-lv01   253:2    0 973.2G  0 lvm</span><br></pre></td></tr></table></figure>\n\n<p>可以看到 <code>/app</code> 挂载点删除了，删除 &#x2F;app 目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -rf /app</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"删除LV\"><a href=\"#删除LV\" class=\"headerlink\" title=\"删除LV\"></a>删除LV</h2><p>参数为 LV Path</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lvremove /dev/vg01/lv01  </span><br><span class=\"line\">Do you really want to remove active logical volume vg01/lv01? [y/n]: y  </span><br><span class=\"line\">  Logical volume &quot;lv01&quot; successfully removed</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"删除VG\"><a href=\"#删除VG\" class=\"headerlink\" title=\"删除VG\"></a>删除VG</h2><p>参数为 VG Name</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# vgremove vg01  </span><br><span class=\"line\">  Volume group &quot;vg01&quot; successfully removed</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"扩容VG\"><a href=\"#扩容VG\" class=\"headerlink\" title=\"扩容VG\"></a>扩容VG</h2><p>参数为 VG Name 和 PV Name</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">[root@vm ~]# vgextend centos /dev/vdb1  </span><br><span class=\"line\">  Volume group &quot;centos&quot; successfully extended</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>此时 PV <code>/dev/vdb1</code> 全部扩展到 VG centos下</p>\n<h2 id=\"查看LV\"><a href=\"#查看LV\" class=\"headerlink\" title=\"查看LV\"></a>查看LV</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lvdisplay   </span><br><span class=\"line\">  --- Logical volume ---  </span><br><span class=\"line\">  LV Path                /dev/centos/swap  </span><br><span class=\"line\">  LV Name                swap  </span><br><span class=\"line\">  VG Name                centos  </span><br><span class=\"line\">  LV UUID                PCx0yU-o9JZ-R92O-lI01-f8EU-DKyM-etst0H  </span><br><span class=\"line\">  LV Write Access        read/write  </span><br><span class=\"line\">  LV Creation host, time localhost.localdomain, 2018-12-24 16:46:31 +0800  </span><br><span class=\"line\">  LV Status              available  </span><br><span class=\"line\"><span class=\"meta prompt_\">  # </span><span class=\"language-bash\">open                 2</span>  </span><br><span class=\"line\">  LV Size                5.00 GiB  </span><br><span class=\"line\">  Current LE             1280  </span><br><span class=\"line\">  Segments               1  </span><br><span class=\"line\">  Allocation             inherit  </span><br><span class=\"line\">  Read ahead sectors     auto  </span><br><span class=\"line\">  - currently set to     8192  </span><br><span class=\"line\">  Block device           253:1  </span><br><span class=\"line\">     </span><br><span class=\"line\">  --- Logical volume ---  </span><br><span class=\"line\">  LV Path                /dev/centos/root  </span><br><span class=\"line\">  LV Name                root  </span><br><span class=\"line\">  VG Name                centos  </span><br><span class=\"line\">  LV UUID                Idf9IO-AxkA-tS1C-FTgN-FsLT-d3Zk-7o1W5E  </span><br><span class=\"line\">  LV Write Access        read/write  </span><br><span class=\"line\">  LV Creation host, time localhost.localdomain, 2018-12-24 16:46:31 +0800  </span><br><span class=\"line\">  LV Status              available  </span><br><span class=\"line\"><span class=\"meta prompt_\">  # </span><span class=\"language-bash\">open                 1</span>  </span><br><span class=\"line\">  LV Size                &lt;44.00 GiB  </span><br><span class=\"line\">  Current LE             11263  </span><br><span class=\"line\">  Segments               1  </span><br><span class=\"line\">  Allocation             inherit  </span><br><span class=\"line\">  Read ahead sectors     auto  </span><br><span class=\"line\">  - currently set to     8192  </span><br><span class=\"line\">  Block device           253:0</span><br></pre></td></tr></table></figure>\n\n<p>通过查看，系统安装时选择的磁盘格式是LVM并且有两个分区，接下来扩展根分区</p>\n<h2 id=\"扩展LV分区\"><a href=\"#扩展LV分区\" class=\"headerlink\" title=\"扩展LV分区\"></a>扩展LV分区</h2><p>参数为 LV Path</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lvextend -l +100%FREE /dev/centos/root  </span><br><span class=\"line\">  Size of logical volume centos/root changed from &lt;44.00 GiB (11263 extents) to &lt;1017.23 GiB (260410 extents).  </span><br><span class=\"line\">  Logical volume centos/root successfully resized</span><br></pre></td></tr></table></figure>\n\n<p>如果发现误操作，需要还原，可以通过以下命令缩小LV分区</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lvreduce -L 1017.2G  /dev/centos/root</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"加载扩容到系统\"><a href=\"#加载扩容到系统\" class=\"headerlink\" title=\"加载扩容到系统\"></a>加载扩容到系统</h2><p>此时查看系统可以看到已经扩容，但没有加载到文件系统</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# lsblk   </span><br><span class=\"line\">NAME            MAJ:MIN RM    SIZE RO TYPE MOUNTPOINT  </span><br><span class=\"line\">vda             252:0    0     50G  0 disk   </span><br><span class=\"line\">├─vda1          252:1    0      1G  0 part /boot  </span><br><span class=\"line\">└─vda2          252:2    0     49G  0 part   </span><br><span class=\"line\">  ├─centos-root 253:0    0 1017.2G  0 lvm  /  </span><br><span class=\"line\">  └─centos-swap 253:1    0      5G  0 lvm  [SWAP]  </span><br><span class=\"line\">vdb             252:16   0    974G  0 disk   </span><br><span class=\"line\">└─vdb1          252:17   0  973.2G  0 part   </span><br><span class=\"line\">  └─centos-root 253:0    0 1017.2G  0 lvm  /  </span><br><span class=\"line\">[root@vm ~]# df -h  </span><br><span class=\"line\">Filesystem               Size  Used Avail Use% Mounted on  </span><br><span class=\"line\">/dev/mapper/centos-root   44G  3.7G   41G   9% /  </span><br><span class=\"line\">devtmpfs                 7.8G     0  7.8G   0% /dev  </span><br><span class=\"line\">tmpfs                    7.8G     0  7.8G   0% /dev/shm  </span><br><span class=\"line\">tmpfs                    7.8G  777M  7.0G  10% /run  </span><br><span class=\"line\">tmpfs                    7.8G     0  7.8G   0% /sys/fs/cgroup  </span><br><span class=\"line\">/dev/vda1               1014M  179M  836M  18% /boot  </span><br><span class=\"line\">tmpfs                    1.6G   36K  1.6G   1% /run/user/0  </span><br><span class=\"line\">tmpfs                    1.6G   40K  1.6G   1% /run/user/1001</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>加载扩容到系统</strong> 参数为 LV path，<strong>被扩容的挂载点一定是LVM格式</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# xfs_growfs /dev/centos/root  </span><br><span class=\"line\">meta-data=/dev/mapper/centos-root isize=512    agcount=4, agsize=2883328 blks  </span><br><span class=\"line\">         =                       sectsz=512   attr=2, projid32bit=1  </span><br><span class=\"line\">         =                       crc=1        finobt=0 spinodes=0  </span><br><span class=\"line\">data     =                       bsize=4096   blocks=11533312, imaxpct=25  </span><br><span class=\"line\">         =                       sunit=0      swidth=0 blks  </span><br><span class=\"line\">naming   =version 2              bsize=4096   ascii-ci=0 ftype=1  </span><br><span class=\"line\">log      =internal               bsize=4096   blocks=5631, version=2  </span><br><span class=\"line\">         =                       sectsz=512   sunit=0 blks, lazy-count=1  </span><br><span class=\"line\">realtime =none                   extsz=4096   blocks=0, rtextents=0  </span><br><span class=\"line\">data blocks changed from 11533312 to 266659840</span><br></pre></td></tr></table></figure>\n\n<p>说明：若使用ext4文件格式（centos6），是使用resize2fs命令来生效 <strong>查看磁盘</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@vm ~]# df -h  </span><br><span class=\"line\">Filesystem               Size  Used Avail Use% Mounted on  </span><br><span class=\"line\">/dev/mapper/centos-root 1018G  3.7G 1014G   1% /  </span><br><span class=\"line\">devtmpfs                 7.8G     0  7.8G   0% /dev  </span><br><span class=\"line\">tmpfs                    7.8G     0  7.8G   0% /dev/shm  </span><br><span class=\"line\">tmpfs                    7.8G  777M  7.0G  10% /run  </span><br><span class=\"line\">tmpfs                    7.8G     0  7.8G   0% /sys/fs/cgroup  </span><br><span class=\"line\">/dev/vda1               1014M  179M  836M  18% /boot  </span><br><span class=\"line\">tmpfs                    1.6G   36K  1.6G   1% /run/user/0  </span><br><span class=\"line\">tmpfs                    1.6G   40K  1.6G   1% /run/user/1001</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"情况-2：文件系统是-ext4\"><a href=\"#情况-2：文件系统是-ext4\" class=\"headerlink\" title=\"情况 2：文件系统是 ext4\"></a><strong>情况 2：文件系统是 ext4</strong></h4><p>如果文件系统是 ext4，则需要使用 <code>resize2fs</code> 工具扩展文件系统。</p>\n<p>运行以下命令：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo resize2fs /dev/ubuntu-vg/ubuntu-lv</span><br></pre></td></tr></table></figure>\n\n<p>完成后，再次运行 <code>df -h</code> 检查文件系统的大小是否已更新。</p>\n"},{"title":"有关于时间的问题","abbrlink":"1984","date":"2025-01-01T03:55:00.000Z","_content":"\n## 日期时间格式字符串\n\n我们常见的为：\n\nyyyy-MM-dd HH:mm:ss\n\n* “yyyy”：表示四位数的年份，例如：2022。\n* “MM”：表示两位数的月份，从01到12。\n* “dd”：表示两位数的日期，从01到31。\n* “HH”：表示24小时制的小时数，从00到23。\n* “mm”：表示分钟数，从00到59。\n* “ss”：表示秒数，从00到59。\n\n> 在日期时间格式字符串中，使用大写的 “YYYY” 表示四位数的年份。这与小写的 “yyyy” 一样，表示年份的部分。两者的区别在于，“YYYY” 是基于ISO week-based year，而 “yyyy” 是基于标准的公历年份。在大多数情况下，使用 “yyyy” 是更常见和更推荐的方式来表示年份。\n>\n> 为了避免与 “MM”（表示月份）混淆而采用的。因此，要表示分钟数，请使用小写的 “mm”。\n>\n> 日期时间格式字符串中，使用小写的 “dd” 表示两位数的日期，范围从01到31。这是表示月份中的日期部分。请注意，与大写的 “DD” 不同，“dd” 表示的是实际的日期，而 “DD” 表示的是一年中的第几天。因此，在日期时间格式字符串中，使用小写的 “dd” 表示日期是常见和推荐的方式。\n>\n> 在日期时间格式字符串中，使用大写的 “SS” 表示两位数的毫秒数。这是表示时间中的毫秒部分。 然而，需要注意的是，大多数常见的日期时间库和格式化方法通常使用小写的 “ss” 表示秒数，而不是毫秒数。 因此，在一般情况下，使用小写的 “ss” 表示秒数是更常见和推荐的方式。 如果你需要表示毫秒数，可以使用小写的 “sss” 表示三位数的毫秒数。\n\n另外 大写的HH 为24小时制的小时 小写的hh为12小时制的小时 千万不要搞混了！！\n\n## Vue前端\n\n* {y}-{m}-{d} {h}:{i}:{s}\n* {y}-{m}-{d} {h}:{i}:{s} {a}\n* {y}/{m}/{d}\n\n有这个 就dddd了\n","source":"_posts/开发/前端/有关于时间的问题.md","raw":"---\ntitle: 有关于时间的问题\ncategories:\n  - 前端\ntags:\n  - vue\nabbrlink: '1984'\ndate: 2025-01-01 11:55:00\n---\n\n## 日期时间格式字符串\n\n我们常见的为：\n\nyyyy-MM-dd HH:mm:ss\n\n* “yyyy”：表示四位数的年份，例如：2022。\n* “MM”：表示两位数的月份，从01到12。\n* “dd”：表示两位数的日期，从01到31。\n* “HH”：表示24小时制的小时数，从00到23。\n* “mm”：表示分钟数，从00到59。\n* “ss”：表示秒数，从00到59。\n\n> 在日期时间格式字符串中，使用大写的 “YYYY” 表示四位数的年份。这与小写的 “yyyy” 一样，表示年份的部分。两者的区别在于，“YYYY” 是基于ISO week-based year，而 “yyyy” 是基于标准的公历年份。在大多数情况下，使用 “yyyy” 是更常见和更推荐的方式来表示年份。\n>\n> 为了避免与 “MM”（表示月份）混淆而采用的。因此，要表示分钟数，请使用小写的 “mm”。\n>\n> 日期时间格式字符串中，使用小写的 “dd” 表示两位数的日期，范围从01到31。这是表示月份中的日期部分。请注意，与大写的 “DD” 不同，“dd” 表示的是实际的日期，而 “DD” 表示的是一年中的第几天。因此，在日期时间格式字符串中，使用小写的 “dd” 表示日期是常见和推荐的方式。\n>\n> 在日期时间格式字符串中，使用大写的 “SS” 表示两位数的毫秒数。这是表示时间中的毫秒部分。 然而，需要注意的是，大多数常见的日期时间库和格式化方法通常使用小写的 “ss” 表示秒数，而不是毫秒数。 因此，在一般情况下，使用小写的 “ss” 表示秒数是更常见和推荐的方式。 如果你需要表示毫秒数，可以使用小写的 “sss” 表示三位数的毫秒数。\n\n另外 大写的HH 为24小时制的小时 小写的hh为12小时制的小时 千万不要搞混了！！\n\n## Vue前端\n\n* {y}-{m}-{d} {h}:{i}:{s}\n* {y}-{m}-{d} {h}:{i}:{s} {a}\n* {y}/{m}/{d}\n\n有这个 就dddd了\n","slug":"开发/前端/有关于时间的问题","published":1,"updated":"2025-06-02T07:28:43.406Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86w9000qzcqbb6sc68ch","content":"<h2 id=\"日期时间格式字符串\"><a href=\"#日期时间格式字符串\" class=\"headerlink\" title=\"日期时间格式字符串\"></a>日期时间格式字符串</h2><p>我们常见的为：</p>\n<p>yyyy-MM-dd HH:mm:ss</p>\n<ul>\n<li>“yyyy”：表示四位数的年份，例如：2022。</li>\n<li>“MM”：表示两位数的月份，从01到12。</li>\n<li>“dd”：表示两位数的日期，从01到31。</li>\n<li>“HH”：表示24小时制的小时数，从00到23。</li>\n<li>“mm”：表示分钟数，从00到59。</li>\n<li>“ss”：表示秒数，从00到59。</li>\n</ul>\n<blockquote>\n<p>在日期时间格式字符串中，使用大写的 “YYYY” 表示四位数的年份。这与小写的 “yyyy” 一样，表示年份的部分。两者的区别在于，“YYYY” 是基于ISO week-based year，而 “yyyy” 是基于标准的公历年份。在大多数情况下，使用 “yyyy” 是更常见和更推荐的方式来表示年份。</p>\n<p>为了避免与 “MM”（表示月份）混淆而采用的。因此，要表示分钟数，请使用小写的 “mm”。</p>\n<p>日期时间格式字符串中，使用小写的 “dd” 表示两位数的日期，范围从01到31。这是表示月份中的日期部分。请注意，与大写的 “DD” 不同，“dd” 表示的是实际的日期，而 “DD” 表示的是一年中的第几天。因此，在日期时间格式字符串中，使用小写的 “dd” 表示日期是常见和推荐的方式。</p>\n<p>在日期时间格式字符串中，使用大写的 “SS” 表示两位数的毫秒数。这是表示时间中的毫秒部分。 然而，需要注意的是，大多数常见的日期时间库和格式化方法通常使用小写的 “ss” 表示秒数，而不是毫秒数。 因此，在一般情况下，使用小写的 “ss” 表示秒数是更常见和推荐的方式。 如果你需要表示毫秒数，可以使用小写的 “sss” 表示三位数的毫秒数。</p>\n</blockquote>\n<p>另外 大写的HH 为24小时制的小时 小写的hh为12小时制的小时 千万不要搞混了！！</p>\n<h2 id=\"Vue前端\"><a href=\"#Vue前端\" class=\"headerlink\" title=\"Vue前端\"></a>Vue前端</h2><ul>\n<li>{y}-{m}-{d} {h}:{i}:{s}</li>\n<li>{y}-{m}-{d} {h}:{i}:{s} {a}</li>\n<li>{y}&#x2F;{m}&#x2F;{d}</li>\n</ul>\n<p>有这个 就dddd了</p>\n","cover":"https://t.alcy.cc/pc?_r_=84339e70-e7c7-b2b3-cc7d-8a16d8e23315","cover_type":"img","excerpt":"","more":"<h2 id=\"日期时间格式字符串\"><a href=\"#日期时间格式字符串\" class=\"headerlink\" title=\"日期时间格式字符串\"></a>日期时间格式字符串</h2><p>我们常见的为：</p>\n<p>yyyy-MM-dd HH:mm:ss</p>\n<ul>\n<li>“yyyy”：表示四位数的年份，例如：2022。</li>\n<li>“MM”：表示两位数的月份，从01到12。</li>\n<li>“dd”：表示两位数的日期，从01到31。</li>\n<li>“HH”：表示24小时制的小时数，从00到23。</li>\n<li>“mm”：表示分钟数，从00到59。</li>\n<li>“ss”：表示秒数，从00到59。</li>\n</ul>\n<blockquote>\n<p>在日期时间格式字符串中，使用大写的 “YYYY” 表示四位数的年份。这与小写的 “yyyy” 一样，表示年份的部分。两者的区别在于，“YYYY” 是基于ISO week-based year，而 “yyyy” 是基于标准的公历年份。在大多数情况下，使用 “yyyy” 是更常见和更推荐的方式来表示年份。</p>\n<p>为了避免与 “MM”（表示月份）混淆而采用的。因此，要表示分钟数，请使用小写的 “mm”。</p>\n<p>日期时间格式字符串中，使用小写的 “dd” 表示两位数的日期，范围从01到31。这是表示月份中的日期部分。请注意，与大写的 “DD” 不同，“dd” 表示的是实际的日期，而 “DD” 表示的是一年中的第几天。因此，在日期时间格式字符串中，使用小写的 “dd” 表示日期是常见和推荐的方式。</p>\n<p>在日期时间格式字符串中，使用大写的 “SS” 表示两位数的毫秒数。这是表示时间中的毫秒部分。 然而，需要注意的是，大多数常见的日期时间库和格式化方法通常使用小写的 “ss” 表示秒数，而不是毫秒数。 因此，在一般情况下，使用小写的 “ss” 表示秒数是更常见和推荐的方式。 如果你需要表示毫秒数，可以使用小写的 “sss” 表示三位数的毫秒数。</p>\n</blockquote>\n<p>另外 大写的HH 为24小时制的小时 小写的hh为12小时制的小时 千万不要搞混了！！</p>\n<h2 id=\"Vue前端\"><a href=\"#Vue前端\" class=\"headerlink\" title=\"Vue前端\"></a>Vue前端</h2><ul>\n<li>{y}-{m}-{d} {h}:{i}:{s}</li>\n<li>{y}-{m}-{d} {h}:{i}:{s} {a}</li>\n<li>{y}&#x2F;{m}&#x2F;{d}</li>\n</ul>\n<p>有这个 就dddd了</p>\n"},{"title":"Cenots 安装 Docker","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/e6f8966c0d08372281a024e086afb580.png","main_color":"#2789EB","abbrlink":"984c","date":"2024-10-14T16:01:00.000Z","_content":"\n\n> 安装前必读\n> 在安装 Docker 之前，先说一下配置，我这里是Centos7\n> Linux 内核：官方建议 3.10 以上，3.8以上貌似也可。\n\n注意：本文的命令使用的是 root 用户登录执行，不是 root 的话所有命令前面要加 sudo\n\n## 1. 查看当前的内核版本 \n\n```shell\nuname -r\n```\n\n![查看当前的内核版本](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072005073.png)\n\n我这里是3.10 ，满足条件。\n\n## 2. 使用 root 权限更新 yum 包\n\n**生产环境中此步操作需慎重，看自己情况，学习的话随便搞**\n\n```shell\nyum -y update\n```\n\n> yum -y update：升级所有包同时也升级软件和系统内核；\n>\n> yum -y upgrade：只升级所有包，不升级软件和系统内核\n\n## 3.卸载旧版本\n\n```shell\nyum remove docker  docker-common docker-selinux docker-engine\n```\n\n## 4.安装需要的软件包\n\n**yum-util 提供yum-config-manager功能，另两个是devicemapper驱动依赖**\n\n```shell\nyum install -y yum-utils device-mapper-persistent-data lvm2\n```\n\n## 5.设置 yum 源\n\n设置一个yum源，下面两个都可用\n\n```shell\n# 中央仓库\nyum-config-manager --add-repo http://download.docker.com/linux/centos/docker-ce.repo\n\n# 阿里仓库 推荐\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n```\n\n## 6. 选择docker版本并安装\n\n### 查看可用版本\n\n```shell\nyum list docker-ce --showduplicates | sort -r\n```\n\n![查看可用版本](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072005280.png)\n\n### 安装Docker\n\n```shell\nyum -y install docker-ce\n```\n\n**安装指定版本**\n\n~~~shell\nsudo yum -y install docker-ce-17.12.1.ce\n~~~\n\n\n\n出现下图说明安装成功\n\n![出现下图说明安装成功](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006405.png)\n\n## 7. 启动 Docker 并设置开机自启\n\n```shell\nsystemctl start docker\nsystemctl enable docker\n```\n\n### 常用Docker命令\n\n```shell\n# 重启Docker服务\nsystemctl restart docker\n\n# 开启Docker服务\nsystemctl start docker\n\n# 停止Docker服务\nsystemctl stop docker\n\n# Docker服务开机自启\nsystemctl enable docker\n```\n\n## 8. Docker换源\n\n### 创建文件\n\n```shell\nvim /etc/docker/daemon.json\n```\n\n### 添加镜像地址，写入下面内容\n\n```json\n{\n    \"registry-mirrors\": [\n        \"https://hub-mirror.c.163.com/\",\n        \"https://docker.mirrors.ustc.edu.cn/\"\n    ]\n}\n```\n\n### 重启docker以及daemon\n\n```shell\nsystemctl daemon-reload\nsystemctl restart docker\n```\n\n> **其他源介绍：**\n>\n> 科大镜像：https://docker.mirrors.ustc.edu.cn\n> 网易：https://hub-mirror.c.163.com\n> 七牛云加速器：https://reg-mirror.qiniu.com\n> Docker中国区官方镜像：https://registry.docker-cn.com\n> 阿里云：https://阿里云镜像服务id.mirror.aliyuncs.com\n>\n> 阿里云Docker加速服务 https://cr.console.aliyun.com\n\n\n\n\n\n## 9. 一键安装docker（指定版本）\n\n~~~shell\nsudo yum install -y yum-utils \\\n  device-mapper-persistent-data \\\n  lvm2\n  \nsudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\nsudo yum makecache fast\n\nsudo yum -y install docker-ce-17.12.1.ce\n\n\n\n sudo chmod +x /usr/local/bin/docker-compose\n~~~\n\n\n\n## 10、修改docker文件夹位置\n\n原文件位置：`/var/lib/docker/`\n\n更改到：`/app/docker`\n\n~~~shell\nmkdir /etc/docker\nvim /etc/docker/daemon.json\n\n{\n  \"data-root\": \"/app/docker\"\n}\n~~~\n\n","source":"_posts/服务器/Centos/Cenots安装Docker.md","raw":"---\ntitle: Cenots 安装 Docker\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/e6f8966c0d08372281a024e086afb580.png\nmain_color: '#2789EB'\ntags:\n  - Docker\n  - Centos\n  - 食用教程\nabbrlink: 984c\ndate: 2024-10-15 00:01:00\n---\n\n\n> 安装前必读\n> 在安装 Docker 之前，先说一下配置，我这里是Centos7\n> Linux 内核：官方建议 3.10 以上，3.8以上貌似也可。\n\n注意：本文的命令使用的是 root 用户登录执行，不是 root 的话所有命令前面要加 sudo\n\n## 1. 查看当前的内核版本 \n\n```shell\nuname -r\n```\n\n![查看当前的内核版本](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072005073.png)\n\n我这里是3.10 ，满足条件。\n\n## 2. 使用 root 权限更新 yum 包\n\n**生产环境中此步操作需慎重，看自己情况，学习的话随便搞**\n\n```shell\nyum -y update\n```\n\n> yum -y update：升级所有包同时也升级软件和系统内核；\n>\n> yum -y upgrade：只升级所有包，不升级软件和系统内核\n\n## 3.卸载旧版本\n\n```shell\nyum remove docker  docker-common docker-selinux docker-engine\n```\n\n## 4.安装需要的软件包\n\n**yum-util 提供yum-config-manager功能，另两个是devicemapper驱动依赖**\n\n```shell\nyum install -y yum-utils device-mapper-persistent-data lvm2\n```\n\n## 5.设置 yum 源\n\n设置一个yum源，下面两个都可用\n\n```shell\n# 中央仓库\nyum-config-manager --add-repo http://download.docker.com/linux/centos/docker-ce.repo\n\n# 阿里仓库 推荐\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n```\n\n## 6. 选择docker版本并安装\n\n### 查看可用版本\n\n```shell\nyum list docker-ce --showduplicates | sort -r\n```\n\n![查看可用版本](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072005280.png)\n\n### 安装Docker\n\n```shell\nyum -y install docker-ce\n```\n\n**安装指定版本**\n\n~~~shell\nsudo yum -y install docker-ce-17.12.1.ce\n~~~\n\n\n\n出现下图说明安装成功\n\n![出现下图说明安装成功](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006405.png)\n\n## 7. 启动 Docker 并设置开机自启\n\n```shell\nsystemctl start docker\nsystemctl enable docker\n```\n\n### 常用Docker命令\n\n```shell\n# 重启Docker服务\nsystemctl restart docker\n\n# 开启Docker服务\nsystemctl start docker\n\n# 停止Docker服务\nsystemctl stop docker\n\n# Docker服务开机自启\nsystemctl enable docker\n```\n\n## 8. Docker换源\n\n### 创建文件\n\n```shell\nvim /etc/docker/daemon.json\n```\n\n### 添加镜像地址，写入下面内容\n\n```json\n{\n    \"registry-mirrors\": [\n        \"https://hub-mirror.c.163.com/\",\n        \"https://docker.mirrors.ustc.edu.cn/\"\n    ]\n}\n```\n\n### 重启docker以及daemon\n\n```shell\nsystemctl daemon-reload\nsystemctl restart docker\n```\n\n> **其他源介绍：**\n>\n> 科大镜像：https://docker.mirrors.ustc.edu.cn\n> 网易：https://hub-mirror.c.163.com\n> 七牛云加速器：https://reg-mirror.qiniu.com\n> Docker中国区官方镜像：https://registry.docker-cn.com\n> 阿里云：https://阿里云镜像服务id.mirror.aliyuncs.com\n>\n> 阿里云Docker加速服务 https://cr.console.aliyun.com\n\n\n\n\n\n## 9. 一键安装docker（指定版本）\n\n~~~shell\nsudo yum install -y yum-utils \\\n  device-mapper-persistent-data \\\n  lvm2\n  \nsudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\nsudo yum makecache fast\n\nsudo yum -y install docker-ce-17.12.1.ce\n\n\n\n sudo chmod +x /usr/local/bin/docker-compose\n~~~\n\n\n\n## 10、修改docker文件夹位置\n\n原文件位置：`/var/lib/docker/`\n\n更改到：`/app/docker`\n\n~~~shell\nmkdir /etc/docker\nvim /etc/docker/daemon.json\n\n{\n  \"data-root\": \"/app/docker\"\n}\n~~~\n\n","slug":"服务器/Centos/Cenots安装Docker","published":1,"updated":"2025-06-02T07:24:17.734Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86w9000tzcqb8z1456da","content":"<blockquote>\n<p>安装前必读<br>在安装 Docker 之前，先说一下配置，我这里是Centos7<br>Linux 内核：官方建议 3.10 以上，3.8以上貌似也可。</p>\n</blockquote>\n<p>注意：本文的命令使用的是 root 用户登录执行，不是 root 的话所有命令前面要加 sudo</p>\n<h2 id=\"1-查看当前的内核版本\"><a href=\"#1-查看当前的内核版本\" class=\"headerlink\" title=\"1. 查看当前的内核版本\"></a>1. 查看当前的内核版本</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">uname -r</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072005073.png\" alt=\"查看当前的内核版本\"></p>\n<p>我这里是3.10 ，满足条件。</p>\n<h2 id=\"2-使用-root-权限更新-yum-包\"><a href=\"#2-使用-root-权限更新-yum-包\" class=\"headerlink\" title=\"2. 使用 root 权限更新 yum 包\"></a>2. 使用 root 权限更新 yum 包</h2><p><strong>生产环境中此步操作需慎重，看自己情况，学习的话随便搞</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y update</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>yum -y update：升级所有包同时也升级软件和系统内核；</p>\n<p>yum -y upgrade：只升级所有包，不升级软件和系统内核</p>\n</blockquote>\n<h2 id=\"3-卸载旧版本\"><a href=\"#3-卸载旧版本\" class=\"headerlink\" title=\"3.卸载旧版本\"></a>3.卸载旧版本</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum remove docker  docker-common docker-selinux docker-engine</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-安装需要的软件包\"><a href=\"#4-安装需要的软件包\" class=\"headerlink\" title=\"4.安装需要的软件包\"></a>4.安装需要的软件包</h2><p><strong>yum-util 提供yum-config-manager功能，另两个是devicemapper驱动依赖</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-设置-yum-源\"><a href=\"#5-设置-yum-源\" class=\"headerlink\" title=\"5.设置 yum 源\"></a>5.设置 yum 源</h2><p>设置一个yum源，下面两个都可用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">中央仓库</span></span><br><span class=\"line\">yum-config-manager --add-repo http://download.docker.com/linux/centos/docker-ce.repo</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">阿里仓库 推荐</span></span><br><span class=\"line\">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-选择docker版本并安装\"><a href=\"#6-选择docker版本并安装\" class=\"headerlink\" title=\"6. 选择docker版本并安装\"></a>6. 选择docker版本并安装</h2><h3 id=\"查看可用版本\"><a href=\"#查看可用版本\" class=\"headerlink\" title=\"查看可用版本\"></a>查看可用版本</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum list docker-ce --showduplicates | sort -r</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072005280.png\" alt=\"查看可用版本\"></p>\n<h3 id=\"安装Docker\"><a href=\"#安装Docker\" class=\"headerlink\" title=\"安装Docker\"></a>安装Docker</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install docker-ce</span><br></pre></td></tr></table></figure>\n\n<p><strong>安装指定版本</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum -y install docker-ce-17.12.1.ce</span><br></pre></td></tr></table></figure>\n\n\n\n<p>出现下图说明安装成功</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006405.png\" alt=\"出现下图说明安装成功\"></p>\n<h2 id=\"7-启动-Docker-并设置开机自启\"><a href=\"#7-启动-Docker-并设置开机自启\" class=\"headerlink\" title=\"7. 启动 Docker 并设置开机自启\"></a>7. 启动 Docker 并设置开机自启</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start docker</span><br><span class=\"line\">systemctl enable docker</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"常用Docker命令\"><a href=\"#常用Docker命令\" class=\"headerlink\" title=\"常用Docker命令\"></a>常用Docker命令</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重启Docker服务</span></span><br><span class=\"line\">systemctl restart docker</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">开启Docker服务</span></span><br><span class=\"line\">systemctl start docker</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">停止Docker服务</span></span><br><span class=\"line\">systemctl stop docker</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Docker服务开机自启</span></span><br><span class=\"line\">systemctl enable docker</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-Docker换源\"><a href=\"#8-Docker换源\" class=\"headerlink\" title=\"8. Docker换源\"></a>8. Docker换源</h2><h3 id=\"创建文件\"><a href=\"#创建文件\" class=\"headerlink\" title=\"创建文件\"></a>创建文件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加镜像地址，写入下面内容\"><a href=\"#添加镜像地址，写入下面内容\" class=\"headerlink\" title=\"添加镜像地址，写入下面内容\"></a>添加镜像地址，写入下面内容</h3><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;registry-mirrors&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"string\">&quot;https://hub-mirror.c.163.com/&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"string\">&quot;https://docker.mirrors.ustc.edu.cn/&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"重启docker以及daemon\"><a href=\"#重启docker以及daemon\" class=\"headerlink\" title=\"重启docker以及daemon\"></a>重启docker以及daemon</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl restart docker</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>其他源介绍：</strong></p>\n<p>科大镜像：<a href=\"https://docker.mirrors.ustc.edu.cn/\">https://docker.mirrors.ustc.edu.cn</a><br>网易：<a href=\"https://hub-mirror.c.163.com/\">https://hub-mirror.c.163.com</a><br>七牛云加速器：<a href=\"https://reg-mirror.qiniu.com/\">https://reg-mirror.qiniu.com</a><br>Docker中国区官方镜像：<a href=\"https://registry.docker-cn.com/\">https://registry.docker-cn.com</a><br>阿里云：https:&#x2F;&#x2F;阿里云镜像服务id.mirror.aliyuncs.com</p>\n<p>阿里云Docker加速服务 <a href=\"https://cr.console.aliyun.com/\">https://cr.console.aliyun.com</a></p>\n</blockquote>\n<h2 id=\"9-一键安装docker（指定版本）\"><a href=\"#9-一键安装docker（指定版本）\" class=\"headerlink\" title=\"9. 一键安装docker（指定版本）\"></a>9. 一键安装docker（指定版本）</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum install -y yum-utils \\</span><br><span class=\"line\">  device-mapper-persistent-data \\</span><br><span class=\"line\">  lvm2</span><br><span class=\"line\">  </span><br><span class=\"line\">sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class=\"line\">sudo yum makecache fast</span><br><span class=\"line\"></span><br><span class=\"line\">sudo yum -y install docker-ce-17.12.1.ce</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> sudo chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"10、修改docker文件夹位置\"><a href=\"#10、修改docker文件夹位置\" class=\"headerlink\" title=\"10、修改docker文件夹位置\"></a>10、修改docker文件夹位置</h2><p>原文件位置：<code>/var/lib/docker/</code></p>\n<p>更改到：<code>/app/docker</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /etc/docker</span><br><span class=\"line\">vim /etc/docker/daemon.json</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;data-root&quot;: &quot;/app/docker&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","cover_type":"img","excerpt":"","more":"<blockquote>\n<p>安装前必读<br>在安装 Docker 之前，先说一下配置，我这里是Centos7<br>Linux 内核：官方建议 3.10 以上，3.8以上貌似也可。</p>\n</blockquote>\n<p>注意：本文的命令使用的是 root 用户登录执行，不是 root 的话所有命令前面要加 sudo</p>\n<h2 id=\"1-查看当前的内核版本\"><a href=\"#1-查看当前的内核版本\" class=\"headerlink\" title=\"1. 查看当前的内核版本\"></a>1. 查看当前的内核版本</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">uname -r</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072005073.png\" alt=\"查看当前的内核版本\"></p>\n<p>我这里是3.10 ，满足条件。</p>\n<h2 id=\"2-使用-root-权限更新-yum-包\"><a href=\"#2-使用-root-权限更新-yum-包\" class=\"headerlink\" title=\"2. 使用 root 权限更新 yum 包\"></a>2. 使用 root 权限更新 yum 包</h2><p><strong>生产环境中此步操作需慎重，看自己情况，学习的话随便搞</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y update</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>yum -y update：升级所有包同时也升级软件和系统内核；</p>\n<p>yum -y upgrade：只升级所有包，不升级软件和系统内核</p>\n</blockquote>\n<h2 id=\"3-卸载旧版本\"><a href=\"#3-卸载旧版本\" class=\"headerlink\" title=\"3.卸载旧版本\"></a>3.卸载旧版本</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum remove docker  docker-common docker-selinux docker-engine</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-安装需要的软件包\"><a href=\"#4-安装需要的软件包\" class=\"headerlink\" title=\"4.安装需要的软件包\"></a>4.安装需要的软件包</h2><p><strong>yum-util 提供yum-config-manager功能，另两个是devicemapper驱动依赖</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-设置-yum-源\"><a href=\"#5-设置-yum-源\" class=\"headerlink\" title=\"5.设置 yum 源\"></a>5.设置 yum 源</h2><p>设置一个yum源，下面两个都可用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">中央仓库</span></span><br><span class=\"line\">yum-config-manager --add-repo http://download.docker.com/linux/centos/docker-ce.repo</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">阿里仓库 推荐</span></span><br><span class=\"line\">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-选择docker版本并安装\"><a href=\"#6-选择docker版本并安装\" class=\"headerlink\" title=\"6. 选择docker版本并安装\"></a>6. 选择docker版本并安装</h2><h3 id=\"查看可用版本\"><a href=\"#查看可用版本\" class=\"headerlink\" title=\"查看可用版本\"></a>查看可用版本</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum list docker-ce --showduplicates | sort -r</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072005280.png\" alt=\"查看可用版本\"></p>\n<h3 id=\"安装Docker\"><a href=\"#安装Docker\" class=\"headerlink\" title=\"安装Docker\"></a>安装Docker</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install docker-ce</span><br></pre></td></tr></table></figure>\n\n<p><strong>安装指定版本</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum -y install docker-ce-17.12.1.ce</span><br></pre></td></tr></table></figure>\n\n\n\n<p>出现下图说明安装成功</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006405.png\" alt=\"出现下图说明安装成功\"></p>\n<h2 id=\"7-启动-Docker-并设置开机自启\"><a href=\"#7-启动-Docker-并设置开机自启\" class=\"headerlink\" title=\"7. 启动 Docker 并设置开机自启\"></a>7. 启动 Docker 并设置开机自启</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start docker</span><br><span class=\"line\">systemctl enable docker</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"常用Docker命令\"><a href=\"#常用Docker命令\" class=\"headerlink\" title=\"常用Docker命令\"></a>常用Docker命令</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重启Docker服务</span></span><br><span class=\"line\">systemctl restart docker</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">开启Docker服务</span></span><br><span class=\"line\">systemctl start docker</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">停止Docker服务</span></span><br><span class=\"line\">systemctl stop docker</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Docker服务开机自启</span></span><br><span class=\"line\">systemctl enable docker</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-Docker换源\"><a href=\"#8-Docker换源\" class=\"headerlink\" title=\"8. Docker换源\"></a>8. Docker换源</h2><h3 id=\"创建文件\"><a href=\"#创建文件\" class=\"headerlink\" title=\"创建文件\"></a>创建文件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加镜像地址，写入下面内容\"><a href=\"#添加镜像地址，写入下面内容\" class=\"headerlink\" title=\"添加镜像地址，写入下面内容\"></a>添加镜像地址，写入下面内容</h3><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;registry-mirrors&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"string\">&quot;https://hub-mirror.c.163.com/&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"string\">&quot;https://docker.mirrors.ustc.edu.cn/&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"重启docker以及daemon\"><a href=\"#重启docker以及daemon\" class=\"headerlink\" title=\"重启docker以及daemon\"></a>重启docker以及daemon</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl restart docker</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>其他源介绍：</strong></p>\n<p>科大镜像：<a href=\"https://docker.mirrors.ustc.edu.cn/\">https://docker.mirrors.ustc.edu.cn</a><br>网易：<a href=\"https://hub-mirror.c.163.com/\">https://hub-mirror.c.163.com</a><br>七牛云加速器：<a href=\"https://reg-mirror.qiniu.com/\">https://reg-mirror.qiniu.com</a><br>Docker中国区官方镜像：<a href=\"https://registry.docker-cn.com/\">https://registry.docker-cn.com</a><br>阿里云：https:&#x2F;&#x2F;阿里云镜像服务id.mirror.aliyuncs.com</p>\n<p>阿里云Docker加速服务 <a href=\"https://cr.console.aliyun.com/\">https://cr.console.aliyun.com</a></p>\n</blockquote>\n<h2 id=\"9-一键安装docker（指定版本）\"><a href=\"#9-一键安装docker（指定版本）\" class=\"headerlink\" title=\"9. 一键安装docker（指定版本）\"></a>9. 一键安装docker（指定版本）</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum install -y yum-utils \\</span><br><span class=\"line\">  device-mapper-persistent-data \\</span><br><span class=\"line\">  lvm2</span><br><span class=\"line\">  </span><br><span class=\"line\">sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class=\"line\">sudo yum makecache fast</span><br><span class=\"line\"></span><br><span class=\"line\">sudo yum -y install docker-ce-17.12.1.ce</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> sudo chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"10、修改docker文件夹位置\"><a href=\"#10、修改docker文件夹位置\" class=\"headerlink\" title=\"10、修改docker文件夹位置\"></a>10、修改docker文件夹位置</h2><p>原文件位置：<code>/var/lib/docker/</code></p>\n<p>更改到：<code>/app/docker</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /etc/docker</span><br><span class=\"line\">vim /etc/docker/daemon.json</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;data-root&quot;: &quot;/app/docker&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n"},{"title":"Centos 安装 JDK","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/dd72c2573b0edb7b9d5072f1a59cf7ea.png","main_color":"#2365C4","abbrlink":"5a47","date":"2022-03-14T16:05:00.000Z","_content":"\n# 下载Java\n\n## 1. 首先确认安装了wget和vim\n\n## 2. 创建一个数据文件夹 并进入\n\n```\nmkdir /data #在根目录创建一个data文件夹\ncd /data #进入data文件夹\n```\n\n![image-20220413104452324](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007887.png)\n\n## 3. 下载java\n\n```\nwget https://repo.huaweicloud.com/java/jdk/8u201-b09/jdk-8u201-linux-x64.tar.gz\n```\n\n==如果出现 -bash: wget: 未找到命令 请执行指令安装==\n\n```\nyum -y install wget\n```\n\n下载成功\n\n![image-20220413104646266](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007875.png)\n\n## 4. 解压下载的文件夹\n\n```\ntar -zxvf jdk-8u201-linux-x64.tar.gz\n```\n\n解压完成\n\n![image-20220413104732709](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007467.png)\n\n## 5. 重命名并移动到/usr/local/jdk1.8文件夹去\n\n```\nmv jdk1.8.0_201 /usr/local/jdk1.8/\n```\n\n![image-20220413104815979](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007452.png)\n\n![image-20220413104836723](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007184.png)\n\n# 配置环境\n\n## 1. 进入到系统环境配置\n\n```\nvim /etc/profile\n```\n\n![image-20220413105029582](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007444.png)\n\n到最下面 按i插入\n\n```\n# Java1.8\nexport JAVA_HOME=/usr/local/jdk1.8\nexport PATH=$JAVA_HOME/bin:$PATH\nexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\n```\n\n![image-20220413105124776](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007696.png)\n\n按ESC键 :wq保存并退出\n\n## 2. 刷新配置\n\n```\nsource /etc/profile\n```\n\n![image-20220413105223203](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007171.png)\n\n## 3. 验证java版本信息\n\n```\njava -version\n```\n\n![image-20220413105256816](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007453.png)\n\n**至此 java安装成功**\n","source":"_posts/服务器/Centos/Centos安装JDK.md","raw":"---\ntitle: Centos 安装 JDK\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/dd72c2573b0edb7b9d5072f1a59cf7ea.png\nmain_color: '#2365C4'\ntags:\n  - Java\n  - Centos\n  - 食用教程\nabbrlink: 5a47\ndate: 2022-03-15 00:05:00\n---\n\n# 下载Java\n\n## 1. 首先确认安装了wget和vim\n\n## 2. 创建一个数据文件夹 并进入\n\n```\nmkdir /data #在根目录创建一个data文件夹\ncd /data #进入data文件夹\n```\n\n![image-20220413104452324](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007887.png)\n\n## 3. 下载java\n\n```\nwget https://repo.huaweicloud.com/java/jdk/8u201-b09/jdk-8u201-linux-x64.tar.gz\n```\n\n==如果出现 -bash: wget: 未找到命令 请执行指令安装==\n\n```\nyum -y install wget\n```\n\n下载成功\n\n![image-20220413104646266](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007875.png)\n\n## 4. 解压下载的文件夹\n\n```\ntar -zxvf jdk-8u201-linux-x64.tar.gz\n```\n\n解压完成\n\n![image-20220413104732709](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007467.png)\n\n## 5. 重命名并移动到/usr/local/jdk1.8文件夹去\n\n```\nmv jdk1.8.0_201 /usr/local/jdk1.8/\n```\n\n![image-20220413104815979](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007452.png)\n\n![image-20220413104836723](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007184.png)\n\n# 配置环境\n\n## 1. 进入到系统环境配置\n\n```\nvim /etc/profile\n```\n\n![image-20220413105029582](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007444.png)\n\n到最下面 按i插入\n\n```\n# Java1.8\nexport JAVA_HOME=/usr/local/jdk1.8\nexport PATH=$JAVA_HOME/bin:$PATH\nexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\n```\n\n![image-20220413105124776](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007696.png)\n\n按ESC键 :wq保存并退出\n\n## 2. 刷新配置\n\n```\nsource /etc/profile\n```\n\n![image-20220413105223203](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007171.png)\n\n## 3. 验证java版本信息\n\n```\njava -version\n```\n\n![image-20220413105256816](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007453.png)\n\n**至此 java安装成功**\n","slug":"服务器/Centos/Centos安装JDK","published":1,"updated":"2025-06-02T07:24:23.488Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wa000yzcqb9npnchgi","content":"<h1 id=\"下载Java\"><a href=\"#下载Java\" class=\"headerlink\" title=\"下载Java\"></a>下载Java</h1><h2 id=\"1-首先确认安装了wget和vim\"><a href=\"#1-首先确认安装了wget和vim\" class=\"headerlink\" title=\"1. 首先确认安装了wget和vim\"></a>1. 首先确认安装了wget和vim</h2><h2 id=\"2-创建一个数据文件夹-并进入\"><a href=\"#2-创建一个数据文件夹-并进入\" class=\"headerlink\" title=\"2. 创建一个数据文件夹 并进入\"></a>2. 创建一个数据文件夹 并进入</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /data #在根目录创建一个data文件夹</span><br><span class=\"line\">cd /data #进入data文件夹</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007887.png\" alt=\"image-20220413104452324\"></p>\n<h2 id=\"3-下载java\"><a href=\"#3-下载java\" class=\"headerlink\" title=\"3. 下载java\"></a>3. 下载java</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://repo.huaweicloud.com/java/jdk/8u201-b09/jdk-8u201-linux-x64.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p>&#x3D;&#x3D;如果出现 -bash: wget: 未找到命令 请执行指令安装&#x3D;&#x3D;</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install wget</span><br></pre></td></tr></table></figure>\n\n<p>下载成功</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007875.png\" alt=\"image-20220413104646266\"></p>\n<h2 id=\"4-解压下载的文件夹\"><a href=\"#4-解压下载的文件夹\" class=\"headerlink\" title=\"4. 解压下载的文件夹\"></a>4. 解压下载的文件夹</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf jdk-8u201-linux-x64.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p>解压完成</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007467.png\" alt=\"image-20220413104732709\"></p>\n<h2 id=\"5-重命名并移动到-usr-local-jdk1-8文件夹去\"><a href=\"#5-重命名并移动到-usr-local-jdk1-8文件夹去\" class=\"headerlink\" title=\"5. 重命名并移动到&#x2F;usr&#x2F;local&#x2F;jdk1.8文件夹去\"></a>5. 重命名并移动到&#x2F;usr&#x2F;local&#x2F;jdk1.8文件夹去</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv jdk1.8.0_201 /usr/local/jdk1.8/</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007452.png\" alt=\"image-20220413104815979\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007184.png\" alt=\"image-20220413104836723\"></p>\n<h1 id=\"配置环境\"><a href=\"#配置环境\" class=\"headerlink\" title=\"配置环境\"></a>配置环境</h1><h2 id=\"1-进入到系统环境配置\"><a href=\"#1-进入到系统环境配置\" class=\"headerlink\" title=\"1. 进入到系统环境配置\"></a>1. 进入到系统环境配置</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/profile</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007444.png\" alt=\"image-20220413105029582\"></p>\n<p>到最下面 按i插入</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Java1.8</span><br><span class=\"line\">export JAVA_HOME=/usr/local/jdk1.8</span><br><span class=\"line\">export PATH=$JAVA_HOME/bin:$PATH</span><br><span class=\"line\">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007696.png\" alt=\"image-20220413105124776\"></p>\n<p>按ESC键 :wq保存并退出</p>\n<h2 id=\"2-刷新配置\"><a href=\"#2-刷新配置\" class=\"headerlink\" title=\"2. 刷新配置\"></a>2. 刷新配置</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007171.png\" alt=\"image-20220413105223203\"></p>\n<h2 id=\"3-验证java版本信息\"><a href=\"#3-验证java版本信息\" class=\"headerlink\" title=\"3. 验证java版本信息\"></a>3. 验证java版本信息</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -version</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007453.png\" alt=\"image-20220413105256816\"></p>\n<p><strong>至此 java安装成功</strong></p>\n","cover_type":"img","excerpt":"","more":"<h1 id=\"下载Java\"><a href=\"#下载Java\" class=\"headerlink\" title=\"下载Java\"></a>下载Java</h1><h2 id=\"1-首先确认安装了wget和vim\"><a href=\"#1-首先确认安装了wget和vim\" class=\"headerlink\" title=\"1. 首先确认安装了wget和vim\"></a>1. 首先确认安装了wget和vim</h2><h2 id=\"2-创建一个数据文件夹-并进入\"><a href=\"#2-创建一个数据文件夹-并进入\" class=\"headerlink\" title=\"2. 创建一个数据文件夹 并进入\"></a>2. 创建一个数据文件夹 并进入</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /data #在根目录创建一个data文件夹</span><br><span class=\"line\">cd /data #进入data文件夹</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007887.png\" alt=\"image-20220413104452324\"></p>\n<h2 id=\"3-下载java\"><a href=\"#3-下载java\" class=\"headerlink\" title=\"3. 下载java\"></a>3. 下载java</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://repo.huaweicloud.com/java/jdk/8u201-b09/jdk-8u201-linux-x64.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p>&#x3D;&#x3D;如果出现 -bash: wget: 未找到命令 请执行指令安装&#x3D;&#x3D;</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install wget</span><br></pre></td></tr></table></figure>\n\n<p>下载成功</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007875.png\" alt=\"image-20220413104646266\"></p>\n<h2 id=\"4-解压下载的文件夹\"><a href=\"#4-解压下载的文件夹\" class=\"headerlink\" title=\"4. 解压下载的文件夹\"></a>4. 解压下载的文件夹</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf jdk-8u201-linux-x64.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p>解压完成</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007467.png\" alt=\"image-20220413104732709\"></p>\n<h2 id=\"5-重命名并移动到-usr-local-jdk1-8文件夹去\"><a href=\"#5-重命名并移动到-usr-local-jdk1-8文件夹去\" class=\"headerlink\" title=\"5. 重命名并移动到&#x2F;usr&#x2F;local&#x2F;jdk1.8文件夹去\"></a>5. 重命名并移动到&#x2F;usr&#x2F;local&#x2F;jdk1.8文件夹去</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv jdk1.8.0_201 /usr/local/jdk1.8/</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007452.png\" alt=\"image-20220413104815979\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007184.png\" alt=\"image-20220413104836723\"></p>\n<h1 id=\"配置环境\"><a href=\"#配置环境\" class=\"headerlink\" title=\"配置环境\"></a>配置环境</h1><h2 id=\"1-进入到系统环境配置\"><a href=\"#1-进入到系统环境配置\" class=\"headerlink\" title=\"1. 进入到系统环境配置\"></a>1. 进入到系统环境配置</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/profile</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007444.png\" alt=\"image-20220413105029582\"></p>\n<p>到最下面 按i插入</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Java1.8</span><br><span class=\"line\">export JAVA_HOME=/usr/local/jdk1.8</span><br><span class=\"line\">export PATH=$JAVA_HOME/bin:$PATH</span><br><span class=\"line\">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007696.png\" alt=\"image-20220413105124776\"></p>\n<p>按ESC键 :wq保存并退出</p>\n<h2 id=\"2-刷新配置\"><a href=\"#2-刷新配置\" class=\"headerlink\" title=\"2. 刷新配置\"></a>2. 刷新配置</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007171.png\" alt=\"image-20220413105223203\"></p>\n<h2 id=\"3-验证java版本信息\"><a href=\"#3-验证java版本信息\" class=\"headerlink\" title=\"3. 验证java版本信息\"></a>3. 验证java版本信息</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -version</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007453.png\" alt=\"image-20220413105256816\"></p>\n<p><strong>至此 java安装成功</strong></p>\n"},{"title":"Centos 安装 Kafka","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/76f9062f5c3fc5d8d9faa4daa195f1f9.png","main_color":"#95A1B0","abbrlink":"d6fb","date":"2023-10-20T16:06:00.000Z","_content":"\n## 下载Kafka \n\n地址：https://kafka.apache.org/downloads\n\n![image-20240118232846133](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007581.png)\n\n## Kafka安装\n\n因为选择下载的是 .zip 文件，直接跳过安装，一步到位。\n\n选择在任一磁盘创建空文件夹（不要使用中文路径），解压之后把文件夹内容剪切进去（本人选择 D:\\env-java\\路径下，即完成安装）。\n\nlinux解压命令 `tar -zxvf kafka_2.13-xxx.tgz`，linux环境下指令是在\\kafka_2.13-3.5.1\\bin目录。\n\nwindows直接解压即可，windows环境下指令是在kafka_2.13-3.5.1\\bin\\windows目录。\n\n注意：不同系统指令所在的目录不同。\n\n执行命令当前目录D:\\env-java\\kafka_2.13-3.5.1\n\n### 修改 kafka-server 和zookeeper配置\n\n进入到目录：`kafka_2.13-3.5.1/config/server.properties`以及 `kafka_2.13-3.5.1/config/zookeeper.properties`\n\n- linux系统:\n\n  ```properties\n  broker.id=1\n  log.dir=/opt/kafka/logs\n  ```\n- windows系统:\n\n  ```properties\n  broker.id=1\n  log.dirs=/env-java/kafka_2.13-3.5.1/kafka-logs\n  # /：表示当前的根路径，即D盘。没有就会创建对应的文件夹。\n  ```\n\n## 启动 Kafka任务\n\n### 启动ZooKeeper\n\n1. linux系统:\n\n```shell\nbin/zookeeper-server-start.sh -daemon config/zookeeper.properties\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\zookeeper-server-start.bat config\\zookeeper.properties\n```\n\n### 启动kafka\n\n1. linux系统:\n\n```shell\nbin/kafka-server-start.sh config/server.properties\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\kafka-server-start.bat config\\server.properties\n```\n\n## 后台启动命令\n\n```shell\n# 1\ncd /opt/kafka\nnohup bin/kafka-server-start.sh config/server.properties 2>&1 &\n\n# 2\ncd /opt/kafka\nbin/kafka-server-start.sh -daemon config/server.properties\n```\n\n## Kafka的使用\n\n### 创建主题\n\n1. linux系统:\n\n```shell\nbin/kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic test\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\kafka-topics.bat --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic test\n```\n\n### 删除主题\n\n1. linux系统:\n\n```shell\nbin/kafka-topics.sh --delete --bootstrap-server localhost:9092 --topic test\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\kafka-topics.bat --delete --bootstrap-server localhost:9092 --topic test\n```\n\n### 查看Topic 列表\n\n1. linux系统:\n\n```shell\nbin/kafka-topics.sh --list --bootstrap-server localhost:9092\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\kafka-topics.bat --list --bootstrap-server localhost:9092\n```\n\n### 启动 Producer\n\n1. linux系统:\n\n```shell\nbin/kafka-console-producer.sh --broker-list localhost:9092 --topic test\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\kafka-console-producer.bat --broker-list localhost:9092 --topic test\n```\n\n### 启动 Consumer\n\n1. linux系统:\n\n```shell\nbin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-beginning\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic test --from-beginning\n```\n\n### 查看Topic 相关信息（test）\n\n1. linux系统:\n\n```shell\nbin/kafka-topics.sh --describe --bootstrap-server localhost:9092 --topic test\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\kafka-topics.bat --describe --bootstrap-server localhost:9092 --topic test\n```\n\n### 删除Topic 数据（test）\n\n1. linux系统:\n\n```shell\nbin\\windows\\kafka-delete-records.sh--bootstrap-server localhost:9092 --offset-json-file \\delete_script.json\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\kafka-delete-records.bat --bootstrap-server localhost:9092 --offset-json-file d:\\delete_script.json\n```\n\n**delete_script.json文件内容为**\n\n```shell\n{\n    \"partitions\": [\n        {\n            \"topic\": \"test\",\n            \"partition\": 0,\n            \"offset\": -1\n        }\n    ]\n}\n```\n","source":"_posts/服务器/Centos/Centos安装Kafka.md","raw":"---\ntitle: Centos 安装 Kafka\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/76f9062f5c3fc5d8d9faa4daa195f1f9.png\nmain_color: '#95A1B0'\ntags:\n  - Kafka\n  - Centos\n  - 食用教程\nabbrlink: d6fb\ndate: 2023-10-21 00:06:00\n---\n\n## 下载Kafka \n\n地址：https://kafka.apache.org/downloads\n\n![image-20240118232846133](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007581.png)\n\n## Kafka安装\n\n因为选择下载的是 .zip 文件，直接跳过安装，一步到位。\n\n选择在任一磁盘创建空文件夹（不要使用中文路径），解压之后把文件夹内容剪切进去（本人选择 D:\\env-java\\路径下，即完成安装）。\n\nlinux解压命令 `tar -zxvf kafka_2.13-xxx.tgz`，linux环境下指令是在\\kafka_2.13-3.5.1\\bin目录。\n\nwindows直接解压即可，windows环境下指令是在kafka_2.13-3.5.1\\bin\\windows目录。\n\n注意：不同系统指令所在的目录不同。\n\n执行命令当前目录D:\\env-java\\kafka_2.13-3.5.1\n\n### 修改 kafka-server 和zookeeper配置\n\n进入到目录：`kafka_2.13-3.5.1/config/server.properties`以及 `kafka_2.13-3.5.1/config/zookeeper.properties`\n\n- linux系统:\n\n  ```properties\n  broker.id=1\n  log.dir=/opt/kafka/logs\n  ```\n- windows系统:\n\n  ```properties\n  broker.id=1\n  log.dirs=/env-java/kafka_2.13-3.5.1/kafka-logs\n  # /：表示当前的根路径，即D盘。没有就会创建对应的文件夹。\n  ```\n\n## 启动 Kafka任务\n\n### 启动ZooKeeper\n\n1. linux系统:\n\n```shell\nbin/zookeeper-server-start.sh -daemon config/zookeeper.properties\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\zookeeper-server-start.bat config\\zookeeper.properties\n```\n\n### 启动kafka\n\n1. linux系统:\n\n```shell\nbin/kafka-server-start.sh config/server.properties\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\kafka-server-start.bat config\\server.properties\n```\n\n## 后台启动命令\n\n```shell\n# 1\ncd /opt/kafka\nnohup bin/kafka-server-start.sh config/server.properties 2>&1 &\n\n# 2\ncd /opt/kafka\nbin/kafka-server-start.sh -daemon config/server.properties\n```\n\n## Kafka的使用\n\n### 创建主题\n\n1. linux系统:\n\n```shell\nbin/kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic test\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\kafka-topics.bat --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic test\n```\n\n### 删除主题\n\n1. linux系统:\n\n```shell\nbin/kafka-topics.sh --delete --bootstrap-server localhost:9092 --topic test\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\kafka-topics.bat --delete --bootstrap-server localhost:9092 --topic test\n```\n\n### 查看Topic 列表\n\n1. linux系统:\n\n```shell\nbin/kafka-topics.sh --list --bootstrap-server localhost:9092\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\kafka-topics.bat --list --bootstrap-server localhost:9092\n```\n\n### 启动 Producer\n\n1. linux系统:\n\n```shell\nbin/kafka-console-producer.sh --broker-list localhost:9092 --topic test\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\kafka-console-producer.bat --broker-list localhost:9092 --topic test\n```\n\n### 启动 Consumer\n\n1. linux系统:\n\n```shell\nbin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-beginning\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic test --from-beginning\n```\n\n### 查看Topic 相关信息（test）\n\n1. linux系统:\n\n```shell\nbin/kafka-topics.sh --describe --bootstrap-server localhost:9092 --topic test\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\kafka-topics.bat --describe --bootstrap-server localhost:9092 --topic test\n```\n\n### 删除Topic 数据（test）\n\n1. linux系统:\n\n```shell\nbin\\windows\\kafka-delete-records.sh--bootstrap-server localhost:9092 --offset-json-file \\delete_script.json\n```\n\n2. windows系统:\n\n```shell\nbin\\windows\\kafka-delete-records.bat --bootstrap-server localhost:9092 --offset-json-file d:\\delete_script.json\n```\n\n**delete_script.json文件内容为**\n\n```shell\n{\n    \"partitions\": [\n        {\n            \"topic\": \"test\",\n            \"partition\": 0,\n            \"offset\": -1\n        }\n    ]\n}\n```\n","slug":"服务器/Centos/Centos安装Kafka","published":1,"updated":"2025-06-02T07:24:26.137Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wb0011zcqb0k3vd8s5","content":"<h2 id=\"下载Kafka\"><a href=\"#下载Kafka\" class=\"headerlink\" title=\"下载Kafka\"></a>下载Kafka</h2><p>地址：<a href=\"https://kafka.apache.org/downloads\">https://kafka.apache.org/downloads</a></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007581.png\" alt=\"image-20240118232846133\"></p>\n<h2 id=\"Kafka安装\"><a href=\"#Kafka安装\" class=\"headerlink\" title=\"Kafka安装\"></a>Kafka安装</h2><p>因为选择下载的是 .zip 文件，直接跳过安装，一步到位。</p>\n<p>选择在任一磁盘创建空文件夹（不要使用中文路径），解压之后把文件夹内容剪切进去（本人选择 D:\\env-java\\路径下，即完成安装）。</p>\n<p>linux解压命令 <code>tar -zxvf kafka_2.13-xxx.tgz</code>，linux环境下指令是在\\kafka_2.13-3.5.1\\bin目录。</p>\n<p>windows直接解压即可，windows环境下指令是在kafka_2.13-3.5.1\\bin\\windows目录。</p>\n<p>注意：不同系统指令所在的目录不同。</p>\n<p>执行命令当前目录D:\\env-java\\kafka_2.13-3.5.1</p>\n<h3 id=\"修改-kafka-server-和zookeeper配置\"><a href=\"#修改-kafka-server-和zookeeper配置\" class=\"headerlink\" title=\"修改 kafka-server 和zookeeper配置\"></a>修改 kafka-server 和zookeeper配置</h3><p>进入到目录：<code>kafka_2.13-3.5.1/config/server.properties</code>以及 <code>kafka_2.13-3.5.1/config/zookeeper.properties</code></p>\n<ul>\n<li><p>linux系统:</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">broker.id</span>=<span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"attr\">log.dir</span>=<span class=\"string\">/opt/kafka/logs</span></span><br></pre></td></tr></table></figure></li>\n<li><p>windows系统:</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">broker.id</span>=<span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"attr\">log.dirs</span>=<span class=\"string\">/env-java/kafka_2.13-3.5.1/kafka-logs</span></span><br><span class=\"line\"><span class=\"comment\"># /：表示当前的根路径，即D盘。没有就会创建对应的文件夹。</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"启动-Kafka任务\"><a href=\"#启动-Kafka任务\" class=\"headerlink\" title=\"启动 Kafka任务\"></a>启动 Kafka任务</h2><h3 id=\"启动ZooKeeper\"><a href=\"#启动ZooKeeper\" class=\"headerlink\" title=\"启动ZooKeeper\"></a>启动ZooKeeper</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/zookeeper-server-start.sh -daemon config/zookeeper.properties</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\zookeeper-server-start.bat config\\zookeeper.properties</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"启动kafka\"><a href=\"#启动kafka\" class=\"headerlink\" title=\"启动kafka\"></a>启动kafka</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-server-start.sh config/server.properties</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-server-start.bat config\\server.properties</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"后台启动命令\"><a href=\"#后台启动命令\" class=\"headerlink\" title=\"后台启动命令\"></a>后台启动命令</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">1</span></span><br><span class=\"line\">cd /opt/kafka</span><br><span class=\"line\">nohup bin/kafka-server-start.sh config/server.properties 2&gt;&amp;1 &amp;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">2</span></span><br><span class=\"line\">cd /opt/kafka</span><br><span class=\"line\">bin/kafka-server-start.sh -daemon config/server.properties</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Kafka的使用\"><a href=\"#Kafka的使用\" class=\"headerlink\" title=\"Kafka的使用\"></a>Kafka的使用</h2><h3 id=\"创建主题\"><a href=\"#创建主题\" class=\"headerlink\" title=\"创建主题\"></a>创建主题</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic test</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-topics.bat --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic test</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"删除主题\"><a href=\"#删除主题\" class=\"headerlink\" title=\"删除主题\"></a>删除主题</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-topics.sh --delete --bootstrap-server localhost:9092 --topic test</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-topics.bat --delete --bootstrap-server localhost:9092 --topic test</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看Topic-列表\"><a href=\"#查看Topic-列表\" class=\"headerlink\" title=\"查看Topic 列表\"></a>查看Topic 列表</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-topics.sh --list --bootstrap-server localhost:9092</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-topics.bat --list --bootstrap-server localhost:9092</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"启动-Producer\"><a href=\"#启动-Producer\" class=\"headerlink\" title=\"启动 Producer\"></a>启动 Producer</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-console-producer.bat --broker-list localhost:9092 --topic test</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"启动-Consumer\"><a href=\"#启动-Consumer\" class=\"headerlink\" title=\"启动 Consumer\"></a>启动 Consumer</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-beginning</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic test --from-beginning</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看Topic-相关信息（test）\"><a href=\"#查看Topic-相关信息（test）\" class=\"headerlink\" title=\"查看Topic 相关信息（test）\"></a>查看Topic 相关信息（test）</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-topics.sh --describe --bootstrap-server localhost:9092 --topic test</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-topics.bat --describe --bootstrap-server localhost:9092 --topic test</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"删除Topic-数据（test）\"><a href=\"#删除Topic-数据（test）\" class=\"headerlink\" title=\"删除Topic 数据（test）\"></a>删除Topic 数据（test）</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-delete-records.sh--bootstrap-server localhost:9092 --offset-json-file \\delete_script.json</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-delete-records.bat --bootstrap-server localhost:9092 --offset-json-file d:\\delete_script.json</span><br></pre></td></tr></table></figure>\n\n<p><strong>delete_script.json文件内容为</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;partitions&quot;: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            &quot;topic&quot;: &quot;test&quot;,</span><br><span class=\"line\">            &quot;partition&quot;: 0,</span><br><span class=\"line\">            &quot;offset&quot;: -1</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","cover_type":"img","excerpt":"","more":"<h2 id=\"下载Kafka\"><a href=\"#下载Kafka\" class=\"headerlink\" title=\"下载Kafka\"></a>下载Kafka</h2><p>地址：<a href=\"https://kafka.apache.org/downloads\">https://kafka.apache.org/downloads</a></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007581.png\" alt=\"image-20240118232846133\"></p>\n<h2 id=\"Kafka安装\"><a href=\"#Kafka安装\" class=\"headerlink\" title=\"Kafka安装\"></a>Kafka安装</h2><p>因为选择下载的是 .zip 文件，直接跳过安装，一步到位。</p>\n<p>选择在任一磁盘创建空文件夹（不要使用中文路径），解压之后把文件夹内容剪切进去（本人选择 D:\\env-java\\路径下，即完成安装）。</p>\n<p>linux解压命令 <code>tar -zxvf kafka_2.13-xxx.tgz</code>，linux环境下指令是在\\kafka_2.13-3.5.1\\bin目录。</p>\n<p>windows直接解压即可，windows环境下指令是在kafka_2.13-3.5.1\\bin\\windows目录。</p>\n<p>注意：不同系统指令所在的目录不同。</p>\n<p>执行命令当前目录D:\\env-java\\kafka_2.13-3.5.1</p>\n<h3 id=\"修改-kafka-server-和zookeeper配置\"><a href=\"#修改-kafka-server-和zookeeper配置\" class=\"headerlink\" title=\"修改 kafka-server 和zookeeper配置\"></a>修改 kafka-server 和zookeeper配置</h3><p>进入到目录：<code>kafka_2.13-3.5.1/config/server.properties</code>以及 <code>kafka_2.13-3.5.1/config/zookeeper.properties</code></p>\n<ul>\n<li><p>linux系统:</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">broker.id</span>=<span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"attr\">log.dir</span>=<span class=\"string\">/opt/kafka/logs</span></span><br></pre></td></tr></table></figure></li>\n<li><p>windows系统:</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">broker.id</span>=<span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"attr\">log.dirs</span>=<span class=\"string\">/env-java/kafka_2.13-3.5.1/kafka-logs</span></span><br><span class=\"line\"><span class=\"comment\"># /：表示当前的根路径，即D盘。没有就会创建对应的文件夹。</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"启动-Kafka任务\"><a href=\"#启动-Kafka任务\" class=\"headerlink\" title=\"启动 Kafka任务\"></a>启动 Kafka任务</h2><h3 id=\"启动ZooKeeper\"><a href=\"#启动ZooKeeper\" class=\"headerlink\" title=\"启动ZooKeeper\"></a>启动ZooKeeper</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/zookeeper-server-start.sh -daemon config/zookeeper.properties</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\zookeeper-server-start.bat config\\zookeeper.properties</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"启动kafka\"><a href=\"#启动kafka\" class=\"headerlink\" title=\"启动kafka\"></a>启动kafka</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-server-start.sh config/server.properties</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-server-start.bat config\\server.properties</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"后台启动命令\"><a href=\"#后台启动命令\" class=\"headerlink\" title=\"后台启动命令\"></a>后台启动命令</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">1</span></span><br><span class=\"line\">cd /opt/kafka</span><br><span class=\"line\">nohup bin/kafka-server-start.sh config/server.properties 2&gt;&amp;1 &amp;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">2</span></span><br><span class=\"line\">cd /opt/kafka</span><br><span class=\"line\">bin/kafka-server-start.sh -daemon config/server.properties</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Kafka的使用\"><a href=\"#Kafka的使用\" class=\"headerlink\" title=\"Kafka的使用\"></a>Kafka的使用</h2><h3 id=\"创建主题\"><a href=\"#创建主题\" class=\"headerlink\" title=\"创建主题\"></a>创建主题</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic test</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-topics.bat --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic test</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"删除主题\"><a href=\"#删除主题\" class=\"headerlink\" title=\"删除主题\"></a>删除主题</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-topics.sh --delete --bootstrap-server localhost:9092 --topic test</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-topics.bat --delete --bootstrap-server localhost:9092 --topic test</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看Topic-列表\"><a href=\"#查看Topic-列表\" class=\"headerlink\" title=\"查看Topic 列表\"></a>查看Topic 列表</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-topics.sh --list --bootstrap-server localhost:9092</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-topics.bat --list --bootstrap-server localhost:9092</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"启动-Producer\"><a href=\"#启动-Producer\" class=\"headerlink\" title=\"启动 Producer\"></a>启动 Producer</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-console-producer.bat --broker-list localhost:9092 --topic test</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"启动-Consumer\"><a href=\"#启动-Consumer\" class=\"headerlink\" title=\"启动 Consumer\"></a>启动 Consumer</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-beginning</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic test --from-beginning</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看Topic-相关信息（test）\"><a href=\"#查看Topic-相关信息（test）\" class=\"headerlink\" title=\"查看Topic 相关信息（test）\"></a>查看Topic 相关信息（test）</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin/kafka-topics.sh --describe --bootstrap-server localhost:9092 --topic test</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-topics.bat --describe --bootstrap-server localhost:9092 --topic test</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"删除Topic-数据（test）\"><a href=\"#删除Topic-数据（test）\" class=\"headerlink\" title=\"删除Topic 数据（test）\"></a>删除Topic 数据（test）</h3><ol>\n<li>linux系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-delete-records.sh--bootstrap-server localhost:9092 --offset-json-file \\delete_script.json</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>windows系统:</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin\\windows\\kafka-delete-records.bat --bootstrap-server localhost:9092 --offset-json-file d:\\delete_script.json</span><br></pre></td></tr></table></figure>\n\n<p><strong>delete_script.json文件内容为</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;partitions&quot;: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            &quot;topic&quot;: &quot;test&quot;,</span><br><span class=\"line\">            &quot;partition&quot;: 0,</span><br><span class=\"line\">            &quot;offset&quot;: -1</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"Cenots 安装 Docker","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/20fd18c74b08fa0d19f74c7b9b069401.png","main_color":"#F13C6F","abbrlink":"984c","date":"2023-10-20T16:04:00.000Z","_content":"\n# 一、下载Maven\n\n## 1. 下载对应的Maven\n\n```\n这里的版本是 apache-maven-3.8.1-bin.tar.gz\n```\n\n官网下载：https://maven.apache.org/download.cgi\n\n以前版本下载地址：https://archive.apache.org/dist/maven/maven-3/\n\n![image-20220413135540316](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007992.png)\n\n## 2. 进入data目录\n\n```\ncd /data\n```\n\n## 3. 利用wget下载\n\n如果提示这个 就在后面加上**--no-check-certificate**\n\n![image-20220413135730057](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007553.png)\n\n```\nwget https://dlcdn.apache.org/maven/maven-3/3.8.5/binaries/apache-maven-3.8.5-bin.tar.gz --no-check-certificate\n```\n\n## 4. 解压\n\n```\n~~~\ntar -zxvf apache-maven-3.8.5-bin.tar.gz\n~~~\n```\n\n## 5. 重命名到/usr/local/maven文件夹\n\n```\nmv apache-maven-3.8.5 /usr/local/maven/\n```\n\n```\n下载成功\n```\n\n\n![image-20220413135838014](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007259.png)\n\n# 二、配置环境变量\n\n## 1. 进入 /etc/profile\n\n```\nvim /etc/profile\n```\n\n## 2. 编辑\n\n在末尾追加以下信息\n\n```\n# maven\nexport MAVEN_HOME=/usr/local/maven\nexport PATH=.:$PATH:$MAVEN_HOME/bin\n```\n\n## 3. 编译 profile 文件 (全局变量文件)\n\n```\nsource /etc/profile\n```\n\n# 三、修改配置\n\n## 1. 创建本地仓库目录 maven_repository\n\n这里创建在 /usr/local/maven/目录下 (创建在任何位置都可以)\n\n```\nmkdir /usr/local/maven/maven_repository\n```\n\n## 2. 编辑\n\n在文件末尾追加以下信息\n\n```\n# maven\nexport MAVEN_HOME=/usr/local/maven\nexport PATH=.:$PATH:$MAVEN_HOME/bin\n```\n\n## 3. 编译 profile 文件 (全局变量文件)\n\n```\nsource /etc/profile\n```\n\n# 四、验证安装\n\n## 1. 显示Maven版本号\n\n成功显示版本信息，即代表安装完成\n\n```\nmvn -version\n```\n","source":"_posts/服务器/Centos/Centos安装Maven.md","raw":"---\ntitle: Cenots 安装 Docker\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/20fd18c74b08fa0d19f74c7b9b069401.png\nmain_color: '#F13C6F'\ntags:\n  - Maven\n  - Centos\n  - 食用教程\nabbrlink: 984c\ndate: 2023-10-21 00:04:00\n---\n\n# 一、下载Maven\n\n## 1. 下载对应的Maven\n\n```\n这里的版本是 apache-maven-3.8.1-bin.tar.gz\n```\n\n官网下载：https://maven.apache.org/download.cgi\n\n以前版本下载地址：https://archive.apache.org/dist/maven/maven-3/\n\n![image-20220413135540316](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007992.png)\n\n## 2. 进入data目录\n\n```\ncd /data\n```\n\n## 3. 利用wget下载\n\n如果提示这个 就在后面加上**--no-check-certificate**\n\n![image-20220413135730057](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007553.png)\n\n```\nwget https://dlcdn.apache.org/maven/maven-3/3.8.5/binaries/apache-maven-3.8.5-bin.tar.gz --no-check-certificate\n```\n\n## 4. 解压\n\n```\n~~~\ntar -zxvf apache-maven-3.8.5-bin.tar.gz\n~~~\n```\n\n## 5. 重命名到/usr/local/maven文件夹\n\n```\nmv apache-maven-3.8.5 /usr/local/maven/\n```\n\n```\n下载成功\n```\n\n\n![image-20220413135838014](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007259.png)\n\n# 二、配置环境变量\n\n## 1. 进入 /etc/profile\n\n```\nvim /etc/profile\n```\n\n## 2. 编辑\n\n在末尾追加以下信息\n\n```\n# maven\nexport MAVEN_HOME=/usr/local/maven\nexport PATH=.:$PATH:$MAVEN_HOME/bin\n```\n\n## 3. 编译 profile 文件 (全局变量文件)\n\n```\nsource /etc/profile\n```\n\n# 三、修改配置\n\n## 1. 创建本地仓库目录 maven_repository\n\n这里创建在 /usr/local/maven/目录下 (创建在任何位置都可以)\n\n```\nmkdir /usr/local/maven/maven_repository\n```\n\n## 2. 编辑\n\n在文件末尾追加以下信息\n\n```\n# maven\nexport MAVEN_HOME=/usr/local/maven\nexport PATH=.:$PATH:$MAVEN_HOME/bin\n```\n\n## 3. 编译 profile 文件 (全局变量文件)\n\n```\nsource /etc/profile\n```\n\n# 四、验证安装\n\n## 1. 显示Maven版本号\n\n成功显示版本信息，即代表安装完成\n\n```\nmvn -version\n```\n","slug":"服务器/Centos/Centos安装Maven","published":1,"updated":"2025-06-02T07:24:28.162Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wb0016zcqbg3d9c3sa","content":"<h1 id=\"一、下载Maven\"><a href=\"#一、下载Maven\" class=\"headerlink\" title=\"一、下载Maven\"></a>一、下载Maven</h1><h2 id=\"1-下载对应的Maven\"><a href=\"#1-下载对应的Maven\" class=\"headerlink\" title=\"1. 下载对应的Maven\"></a>1. 下载对应的Maven</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">这里的版本是 apache-maven-3.8.1-bin.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p>官网下载：<a href=\"https://maven.apache.org/download.cgi\">https://maven.apache.org/download.cgi</a></p>\n<p>以前版本下载地址：<a href=\"https://archive.apache.org/dist/maven/maven-3/\">https://archive.apache.org/dist/maven/maven-3/</a></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007992.png\" alt=\"image-20220413135540316\"></p>\n<h2 id=\"2-进入data目录\"><a href=\"#2-进入data目录\" class=\"headerlink\" title=\"2. 进入data目录\"></a>2. 进入data目录</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /data</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-利用wget下载\"><a href=\"#3-利用wget下载\" class=\"headerlink\" title=\"3. 利用wget下载\"></a>3. 利用wget下载</h2><p>如果提示这个 就在后面加上**–no-check-certificate**</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007553.png\" alt=\"image-20220413135730057\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://dlcdn.apache.org/maven/maven-3/3.8.5/binaries/apache-maven-3.8.5-bin.tar.gz --no-check-certificate</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-解压\"><a href=\"#4-解压\" class=\"headerlink\" title=\"4. 解压\"></a>4. 解压</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~~~</span><br><span class=\"line\">tar -zxvf apache-maven-3.8.5-bin.tar.gz</span><br><span class=\"line\">~~~</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-重命名到-usr-local-maven文件夹\"><a href=\"#5-重命名到-usr-local-maven文件夹\" class=\"headerlink\" title=\"5. 重命名到&#x2F;usr&#x2F;local&#x2F;maven文件夹\"></a>5. 重命名到&#x2F;usr&#x2F;local&#x2F;maven文件夹</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv apache-maven-3.8.5 /usr/local/maven/</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">下载成功</span><br></pre></td></tr></table></figure>\n\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007259.png\" alt=\"image-20220413135838014\"></p>\n<h1 id=\"二、配置环境变量\"><a href=\"#二、配置环境变量\" class=\"headerlink\" title=\"二、配置环境变量\"></a>二、配置环境变量</h1><h2 id=\"1-进入-etc-profile\"><a href=\"#1-进入-etc-profile\" class=\"headerlink\" title=\"1. 进入 &#x2F;etc&#x2F;profile\"></a>1. 进入 &#x2F;etc&#x2F;profile</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/profile</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-编辑\"><a href=\"#2-编辑\" class=\"headerlink\" title=\"2. 编辑\"></a>2. 编辑</h2><p>在末尾追加以下信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># maven</span><br><span class=\"line\">export MAVEN_HOME=/usr/local/maven</span><br><span class=\"line\">export PATH=.:$PATH:$MAVEN_HOME/bin</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-编译-profile-文件-全局变量文件\"><a href=\"#3-编译-profile-文件-全局变量文件\" class=\"headerlink\" title=\"3. 编译 profile 文件 (全局变量文件)\"></a>3. 编译 profile 文件 (全局变量文件)</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"三、修改配置\"><a href=\"#三、修改配置\" class=\"headerlink\" title=\"三、修改配置\"></a>三、修改配置</h1><h2 id=\"1-创建本地仓库目录-maven-repository\"><a href=\"#1-创建本地仓库目录-maven-repository\" class=\"headerlink\" title=\"1. 创建本地仓库目录 maven_repository\"></a>1. 创建本地仓库目录 maven_repository</h2><p>这里创建在 &#x2F;usr&#x2F;local&#x2F;maven&#x2F;目录下 (创建在任何位置都可以)</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /usr/local/maven/maven_repository</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-编辑-1\"><a href=\"#2-编辑-1\" class=\"headerlink\" title=\"2. 编辑\"></a>2. 编辑</h2><p>在文件末尾追加以下信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># maven</span><br><span class=\"line\">export MAVEN_HOME=/usr/local/maven</span><br><span class=\"line\">export PATH=.:$PATH:$MAVEN_HOME/bin</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-编译-profile-文件-全局变量文件-1\"><a href=\"#3-编译-profile-文件-全局变量文件-1\" class=\"headerlink\" title=\"3. 编译 profile 文件 (全局变量文件)\"></a>3. 编译 profile 文件 (全局变量文件)</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"四、验证安装\"><a href=\"#四、验证安装\" class=\"headerlink\" title=\"四、验证安装\"></a>四、验证安装</h1><h2 id=\"1-显示Maven版本号\"><a href=\"#1-显示Maven版本号\" class=\"headerlink\" title=\"1. 显示Maven版本号\"></a>1. 显示Maven版本号</h2><p>成功显示版本信息，即代表安装完成</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn -version</span><br></pre></td></tr></table></figure>\n","cover_type":"img","excerpt":"","more":"<h1 id=\"一、下载Maven\"><a href=\"#一、下载Maven\" class=\"headerlink\" title=\"一、下载Maven\"></a>一、下载Maven</h1><h2 id=\"1-下载对应的Maven\"><a href=\"#1-下载对应的Maven\" class=\"headerlink\" title=\"1. 下载对应的Maven\"></a>1. 下载对应的Maven</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">这里的版本是 apache-maven-3.8.1-bin.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p>官网下载：<a href=\"https://maven.apache.org/download.cgi\">https://maven.apache.org/download.cgi</a></p>\n<p>以前版本下载地址：<a href=\"https://archive.apache.org/dist/maven/maven-3/\">https://archive.apache.org/dist/maven/maven-3/</a></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007992.png\" alt=\"image-20220413135540316\"></p>\n<h2 id=\"2-进入data目录\"><a href=\"#2-进入data目录\" class=\"headerlink\" title=\"2. 进入data目录\"></a>2. 进入data目录</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /data</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-利用wget下载\"><a href=\"#3-利用wget下载\" class=\"headerlink\" title=\"3. 利用wget下载\"></a>3. 利用wget下载</h2><p>如果提示这个 就在后面加上**–no-check-certificate**</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007553.png\" alt=\"image-20220413135730057\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://dlcdn.apache.org/maven/maven-3/3.8.5/binaries/apache-maven-3.8.5-bin.tar.gz --no-check-certificate</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-解压\"><a href=\"#4-解压\" class=\"headerlink\" title=\"4. 解压\"></a>4. 解压</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~~~</span><br><span class=\"line\">tar -zxvf apache-maven-3.8.5-bin.tar.gz</span><br><span class=\"line\">~~~</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-重命名到-usr-local-maven文件夹\"><a href=\"#5-重命名到-usr-local-maven文件夹\" class=\"headerlink\" title=\"5. 重命名到&#x2F;usr&#x2F;local&#x2F;maven文件夹\"></a>5. 重命名到&#x2F;usr&#x2F;local&#x2F;maven文件夹</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv apache-maven-3.8.5 /usr/local/maven/</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">下载成功</span><br></pre></td></tr></table></figure>\n\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007259.png\" alt=\"image-20220413135838014\"></p>\n<h1 id=\"二、配置环境变量\"><a href=\"#二、配置环境变量\" class=\"headerlink\" title=\"二、配置环境变量\"></a>二、配置环境变量</h1><h2 id=\"1-进入-etc-profile\"><a href=\"#1-进入-etc-profile\" class=\"headerlink\" title=\"1. 进入 &#x2F;etc&#x2F;profile\"></a>1. 进入 &#x2F;etc&#x2F;profile</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/profile</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-编辑\"><a href=\"#2-编辑\" class=\"headerlink\" title=\"2. 编辑\"></a>2. 编辑</h2><p>在末尾追加以下信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># maven</span><br><span class=\"line\">export MAVEN_HOME=/usr/local/maven</span><br><span class=\"line\">export PATH=.:$PATH:$MAVEN_HOME/bin</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-编译-profile-文件-全局变量文件\"><a href=\"#3-编译-profile-文件-全局变量文件\" class=\"headerlink\" title=\"3. 编译 profile 文件 (全局变量文件)\"></a>3. 编译 profile 文件 (全局变量文件)</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"三、修改配置\"><a href=\"#三、修改配置\" class=\"headerlink\" title=\"三、修改配置\"></a>三、修改配置</h1><h2 id=\"1-创建本地仓库目录-maven-repository\"><a href=\"#1-创建本地仓库目录-maven-repository\" class=\"headerlink\" title=\"1. 创建本地仓库目录 maven_repository\"></a>1. 创建本地仓库目录 maven_repository</h2><p>这里创建在 &#x2F;usr&#x2F;local&#x2F;maven&#x2F;目录下 (创建在任何位置都可以)</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /usr/local/maven/maven_repository</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-编辑-1\"><a href=\"#2-编辑-1\" class=\"headerlink\" title=\"2. 编辑\"></a>2. 编辑</h2><p>在文件末尾追加以下信息</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># maven</span><br><span class=\"line\">export MAVEN_HOME=/usr/local/maven</span><br><span class=\"line\">export PATH=.:$PATH:$MAVEN_HOME/bin</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-编译-profile-文件-全局变量文件-1\"><a href=\"#3-编译-profile-文件-全局变量文件-1\" class=\"headerlink\" title=\"3. 编译 profile 文件 (全局变量文件)\"></a>3. 编译 profile 文件 (全局变量文件)</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"四、验证安装\"><a href=\"#四、验证安装\" class=\"headerlink\" title=\"四、验证安装\"></a>四、验证安装</h1><h2 id=\"1-显示Maven版本号\"><a href=\"#1-显示Maven版本号\" class=\"headerlink\" title=\"1. 显示Maven版本号\"></a>1. 显示Maven版本号</h2><p>成功显示版本信息，即代表安装完成</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn -version</span><br></pre></td></tr></table></figure>\n"},{"title":"Centos 安装 MongoDB","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/a7fbeaff157759db56013b324b5f079d.png","main_color":"#39B98F","abbrlink":"e395","date":"2023-10-20T16:07:00.000Z","_content":"\n## 1. 创建仓库 \n\n```shell\nvim /etc/yum.repos.d/mongodb-org-3.4.repo\n```\n\n```shell\n[mongodb-org-3.4]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.4/x86_64/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-3.4.asc\n```\n\n## 2. 安装\n\n```shell\nyum install -y mongodb-org\n```\n\n## 3. 修改配置文件\n\n```shell\nvim /etc/mongod.conf\n```\n\n把bindIP改成 0.0.0.0所有的机器都可以访问\n\n![修改BingdIP](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008609.png)\n\n## 4. 启动MogoDB\n\n```shell\n# 启动\nsystemctl start mongod.service\n# 停止\nsystemctl stop mongod.service \n# 重启\nsystemctl restart mongod.service \n```\n\n## 5. 链接mongodb\n\n```shell\nmongo 127.0.0.1:27017\n```\n\n默认将数据文件存储在 `/var/lib/mongo`目录\n\n默认日志文件在 `/var/log/mongodb`中。\n\n如果要修改,可以在 `/etc/mongod.conf` 配置中指定备用日志和数据文件目录\n\n### 6. mongodb设置密码\n\n**登录mogodb**\n\n```shell\nmongo 127.0.0.1:7316\n\nuse admin\n\ndb.createUser({ user: \"admin\", pwd: \"password\", roles: [{ role: \"root\", db: \"admin\" }] })\n```\n\n**修改配置**\n\n```shell\nvim /etc/mongod.conf\n\nsecurity:\n   authorization: enabled\n```\n\n**重启服务**\n\n```shell\nsystemctl restart mongod\n```\n","source":"_posts/服务器/Centos/Centos安装MongoDB.md","raw":"---\ntitle: Centos 安装 MongoDB\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/a7fbeaff157759db56013b324b5f079d.png\nmain_color: '#39B98F'\ntags:\n  - MongoDB\n  - Centos\n  - 食用教程\nabbrlink: e395\ndate: 2023-10-21 00:07:00\n---\n\n## 1. 创建仓库 \n\n```shell\nvim /etc/yum.repos.d/mongodb-org-3.4.repo\n```\n\n```shell\n[mongodb-org-3.4]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.4/x86_64/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-3.4.asc\n```\n\n## 2. 安装\n\n```shell\nyum install -y mongodb-org\n```\n\n## 3. 修改配置文件\n\n```shell\nvim /etc/mongod.conf\n```\n\n把bindIP改成 0.0.0.0所有的机器都可以访问\n\n![修改BingdIP](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008609.png)\n\n## 4. 启动MogoDB\n\n```shell\n# 启动\nsystemctl start mongod.service\n# 停止\nsystemctl stop mongod.service \n# 重启\nsystemctl restart mongod.service \n```\n\n## 5. 链接mongodb\n\n```shell\nmongo 127.0.0.1:27017\n```\n\n默认将数据文件存储在 `/var/lib/mongo`目录\n\n默认日志文件在 `/var/log/mongodb`中。\n\n如果要修改,可以在 `/etc/mongod.conf` 配置中指定备用日志和数据文件目录\n\n### 6. mongodb设置密码\n\n**登录mogodb**\n\n```shell\nmongo 127.0.0.1:7316\n\nuse admin\n\ndb.createUser({ user: \"admin\", pwd: \"password\", roles: [{ role: \"root\", db: \"admin\" }] })\n```\n\n**修改配置**\n\n```shell\nvim /etc/mongod.conf\n\nsecurity:\n   authorization: enabled\n```\n\n**重启服务**\n\n```shell\nsystemctl restart mongod\n```\n","slug":"服务器/Centos/Centos安装MongoDB","published":1,"updated":"2025-06-02T07:24:35.151Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wc0019zcqb2gyda49o","content":"<h2 id=\"1-创建仓库\"><a href=\"#1-创建仓库\" class=\"headerlink\" title=\"1. 创建仓库\"></a>1. 创建仓库</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/yum.repos.d/mongodb-org-3.4.repo</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mongodb-org-3.4]</span><br><span class=\"line\">name=MongoDB Repository</span><br><span class=\"line\">baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.4/x86_64/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">enabled=1</span><br><span class=\"line\">gpgkey=https://www.mongodb.org/static/pgp/server-3.4.asc</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-安装\"><a href=\"#2-安装\" class=\"headerlink\" title=\"2. 安装\"></a>2. 安装</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y mongodb-org</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-修改配置文件\"><a href=\"#3-修改配置文件\" class=\"headerlink\" title=\"3. 修改配置文件\"></a>3. 修改配置文件</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/mongod.conf</span><br></pre></td></tr></table></figure>\n\n<p>把bindIP改成 0.0.0.0所有的机器都可以访问</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008609.png\" alt=\"修改BingdIP\"></p>\n<h2 id=\"4-启动MogoDB\"><a href=\"#4-启动MogoDB\" class=\"headerlink\" title=\"4. 启动MogoDB\"></a>4. 启动MogoDB</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动</span></span><br><span class=\"line\">systemctl start mongod.service</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">停止</span></span><br><span class=\"line\">systemctl stop mongod.service </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重启</span></span><br><span class=\"line\">systemctl restart mongod.service </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-链接mongodb\"><a href=\"#5-链接mongodb\" class=\"headerlink\" title=\"5. 链接mongodb\"></a>5. 链接mongodb</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mongo 127.0.0.1:27017</span><br></pre></td></tr></table></figure>\n\n<p>默认将数据文件存储在 <code>/var/lib/mongo</code>目录</p>\n<p>默认日志文件在 <code>/var/log/mongodb</code>中。</p>\n<p>如果要修改,可以在 <code>/etc/mongod.conf</code> 配置中指定备用日志和数据文件目录</p>\n<h3 id=\"6-mongodb设置密码\"><a href=\"#6-mongodb设置密码\" class=\"headerlink\" title=\"6. mongodb设置密码\"></a>6. mongodb设置密码</h3><p><strong>登录mogodb</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mongo 127.0.0.1:7316</span><br><span class=\"line\"></span><br><span class=\"line\">use admin</span><br><span class=\"line\"></span><br><span class=\"line\">db.createUser(&#123; user: &quot;admin&quot;, pwd: &quot;password&quot;, roles: [&#123; role: &quot;root&quot;, db: &quot;admin&quot; &#125;] &#125;)</span><br></pre></td></tr></table></figure>\n\n<p><strong>修改配置</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/mongod.conf</span><br><span class=\"line\"></span><br><span class=\"line\">security:</span><br><span class=\"line\">   authorization: enabled</span><br></pre></td></tr></table></figure>\n\n<p><strong>重启服务</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart mongod</span><br></pre></td></tr></table></figure>\n","cover_type":"img","excerpt":"","more":"<h2 id=\"1-创建仓库\"><a href=\"#1-创建仓库\" class=\"headerlink\" title=\"1. 创建仓库\"></a>1. 创建仓库</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/yum.repos.d/mongodb-org-3.4.repo</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mongodb-org-3.4]</span><br><span class=\"line\">name=MongoDB Repository</span><br><span class=\"line\">baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.4/x86_64/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">enabled=1</span><br><span class=\"line\">gpgkey=https://www.mongodb.org/static/pgp/server-3.4.asc</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-安装\"><a href=\"#2-安装\" class=\"headerlink\" title=\"2. 安装\"></a>2. 安装</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y mongodb-org</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-修改配置文件\"><a href=\"#3-修改配置文件\" class=\"headerlink\" title=\"3. 修改配置文件\"></a>3. 修改配置文件</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/mongod.conf</span><br></pre></td></tr></table></figure>\n\n<p>把bindIP改成 0.0.0.0所有的机器都可以访问</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008609.png\" alt=\"修改BingdIP\"></p>\n<h2 id=\"4-启动MogoDB\"><a href=\"#4-启动MogoDB\" class=\"headerlink\" title=\"4. 启动MogoDB\"></a>4. 启动MogoDB</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动</span></span><br><span class=\"line\">systemctl start mongod.service</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">停止</span></span><br><span class=\"line\">systemctl stop mongod.service </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重启</span></span><br><span class=\"line\">systemctl restart mongod.service </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-链接mongodb\"><a href=\"#5-链接mongodb\" class=\"headerlink\" title=\"5. 链接mongodb\"></a>5. 链接mongodb</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mongo 127.0.0.1:27017</span><br></pre></td></tr></table></figure>\n\n<p>默认将数据文件存储在 <code>/var/lib/mongo</code>目录</p>\n<p>默认日志文件在 <code>/var/log/mongodb</code>中。</p>\n<p>如果要修改,可以在 <code>/etc/mongod.conf</code> 配置中指定备用日志和数据文件目录</p>\n<h3 id=\"6-mongodb设置密码\"><a href=\"#6-mongodb设置密码\" class=\"headerlink\" title=\"6. mongodb设置密码\"></a>6. mongodb设置密码</h3><p><strong>登录mogodb</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mongo 127.0.0.1:7316</span><br><span class=\"line\"></span><br><span class=\"line\">use admin</span><br><span class=\"line\"></span><br><span class=\"line\">db.createUser(&#123; user: &quot;admin&quot;, pwd: &quot;password&quot;, roles: [&#123; role: &quot;root&quot;, db: &quot;admin&quot; &#125;] &#125;)</span><br></pre></td></tr></table></figure>\n\n<p><strong>修改配置</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/mongod.conf</span><br><span class=\"line\"></span><br><span class=\"line\">security:</span><br><span class=\"line\">   authorization: enabled</span><br></pre></td></tr></table></figure>\n\n<p><strong>重启服务</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart mongod</span><br></pre></td></tr></table></figure>\n"},{"title":"Centos 安装 MySQL","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/d162f7f8e227d3aab4ade0aaae4ff240.png","main_color":"#00618A","abbrlink":"c5b7","date":"2024-08-14T16:08:00.000Z","_content":"\n# 准备安装包\n\n## 1. 打开mysql的官网\n\n[MySQL :: Download MySQL Community Server](https://downloads.mysql.com/archives/community/)\n\n如下图\n\n## 2. 选择对应的版本\n\nCentOS 是基于红帽的，Select OS Version: 选择 linux 7，如下图\n\n![image-20220413105809011](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008561.png)\n\n## 3. 右键复制链接地址\n\n```\nhttps://downloads.mysql.com/archives/get/p/23/file/mysql-8.0.27-1.el7.x86_64.rpm-bundle.tar\n\n# mysql 5.7 地址\nhttps://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.43-1.el7.x86_64.rpm-bundle.tar\n```\n\n![image-20220413110056904](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008946.png)\n\n## 4. 回到linux\n\n进入/data目录\n\n```\ncd /data\n```\n\n输入wget下载指令\n\n```\nwget https://downloads.mysql.com/archives/get/p/23/file/mysql-8.0.27-1.el7.x86_64.rpm-bundle.tar\n```\n\n正在下载\n\n![image-20220413110332034](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008563.png)\n\n下载完成\n\n![image-20220413110352076](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008176.png)\n\n# 安装MySQL\n\n## 1. 解压压缩包\n\n在我们刚才的mysql安装包目录，运行命令解压，解压结果如下图\n\n```\ntar -xvf mysql-8.0.27-1.el7.x86_64.rpm-bundle.tar\n```\n\n![image-20220413110520221](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008736.png)\n\n## 2. 运行安装命令，依次安装\n\n如下图\n\n```\nrpm -ivh mysql-community-common-8.0.27-1.el7.x86_64.rpm --nodeps --force\nrpm -ivh mysql-community-libs-8.0.27-1.el7.x86_64.rpm --nodeps --force\nrpm -ivh mysql-community-client-8.0.27-1.el7.x86_64.rpm --nodeps --force\nrpm -ivh mysql-community-server-8.0.27-1.el7.x86_64.rpm --nodeps --force\n```\n\n![image-20220413110958642](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008157.png)\n\n## 3. 查看mysqld\n\n安装完成后，运行命令 查看mysqld\n\n如下图\n\n```\nrpm -qa | grep mysql\n```\n\n![image-20220413111040143](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008534.png)\n\n## 4. 初始化mysql，并开启服务\n\n```\nmysqld --initialize;\nchown mysql:mysql /var/lib/mysql -R;\nsystemctl start mysqld.service;\nsystemctl enable mysqld;\n```\n\n## 5.  查找mysql的初始密码\n\n```\ncat /var/log/mysqld.log | grep password\n```\n\n![image-20220413111429178](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008807.png)\n\n## 6. 登陆MySQL\n\n```\nmysql -uroot -p\n```\n\n![image-20220413111533921](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008684.png)\n\n## 7. 修改密码\n\n虽然mysql安装完成，但是随便运行一个命令就会发现mysql强制要求我们改密码\n\n![image-20220413111604454](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008587.png)\n\n**运行命令 这样我们在本机用root用户登陆时的密码就改为了 root**\n\n```\nALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'root';\n```\n\n![image-20220413111638854](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008699.png)\n\n**重新登录，再运行命令就正常了**\n\n![image-20220413111717187](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008172.png)\n\n# ？外部访问不到\n\n端口问题需要开放端口\n\n## 怎么开启一个端口\n\n### 1. 添加\n\n```\nfirewall-cmd --zone=public --add-port=3306/tcp --permanent\n（--permanent永久生效，没有此参数重启后失效 3306是mysql的默认访问端口）\n```\n\n### 2. 添加端口外部访问权限\n\n```\nfirewall-cmd --add-port=3306/tcp\n```\n\n### 3. 重新载入\n\n添加端口后重新载入才能起作用\n\n```\nfirewall-cmd --reload\n```\n\n这些之后，端口是开启成功的，如果没有成功，重启系统试试。\n\n![image-20220413112047662](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008916.png)\n\n# ？MySQL只允许本机访问\n\n虚拟机上安装的mysql，发现用本地电脑的navicat链接不上。通过了解知道了原因，此写了一篇，省的以后自己在碰到。\n\n错误如图。\n\n![image-20220413113315870](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008585.png)\n\n## 1. 登录到mysql中\n\n```\nmysql -u root -p \n```\n\n![image-20220413113438646](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008073.png)\n\n## 2. 选择mysql表\n\n```\nuse mysql;\n```\n\n![image-20220413113446218](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008190.png)\n\n## 3. 查询账号信息\n\n```\nselect host from user where user='root';\n```\n\n![image-20220413113523941](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008391.png)\n\n## 4. 修改帐号不允许从远程登陆\n\n只能在localhost。这个时候只要在localhost的那台电脑，登入[MySQL](http://lib.csdn.net/base/14)后，更改 \"mysql\" 数据库里的 \"user\" 表里的 \"host\" 项，从\"localhost\"改称\"%\"\n\n```\nupdate user set host = '%' where user ='root';\n```\n\n![image-20220413113550750](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008584.png)\n\n## 5. 刷新配置\n\n```\nflush privileges;\n```\n\n![image-20220413113616546](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008111.png)\n\n## 6. 成功修改\n\n![image-20220413113705717](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008770.png)\n","source":"_posts/服务器/Centos/Centos安装MySQL.md","raw":"---\ntitle: Centos 安装 MySQL\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/d162f7f8e227d3aab4ade0aaae4ff240.png\nmain_color: '#00618A'\ntags:\n  - MySQL\n  - Centos\n  - 食用教程\nabbrlink: c5b7\ndate: 2024-08-15 00:08:00\n---\n\n# 准备安装包\n\n## 1. 打开mysql的官网\n\n[MySQL :: Download MySQL Community Server](https://downloads.mysql.com/archives/community/)\n\n如下图\n\n## 2. 选择对应的版本\n\nCentOS 是基于红帽的，Select OS Version: 选择 linux 7，如下图\n\n![image-20220413105809011](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008561.png)\n\n## 3. 右键复制链接地址\n\n```\nhttps://downloads.mysql.com/archives/get/p/23/file/mysql-8.0.27-1.el7.x86_64.rpm-bundle.tar\n\n# mysql 5.7 地址\nhttps://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.43-1.el7.x86_64.rpm-bundle.tar\n```\n\n![image-20220413110056904](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008946.png)\n\n## 4. 回到linux\n\n进入/data目录\n\n```\ncd /data\n```\n\n输入wget下载指令\n\n```\nwget https://downloads.mysql.com/archives/get/p/23/file/mysql-8.0.27-1.el7.x86_64.rpm-bundle.tar\n```\n\n正在下载\n\n![image-20220413110332034](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008563.png)\n\n下载完成\n\n![image-20220413110352076](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008176.png)\n\n# 安装MySQL\n\n## 1. 解压压缩包\n\n在我们刚才的mysql安装包目录，运行命令解压，解压结果如下图\n\n```\ntar -xvf mysql-8.0.27-1.el7.x86_64.rpm-bundle.tar\n```\n\n![image-20220413110520221](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008736.png)\n\n## 2. 运行安装命令，依次安装\n\n如下图\n\n```\nrpm -ivh mysql-community-common-8.0.27-1.el7.x86_64.rpm --nodeps --force\nrpm -ivh mysql-community-libs-8.0.27-1.el7.x86_64.rpm --nodeps --force\nrpm -ivh mysql-community-client-8.0.27-1.el7.x86_64.rpm --nodeps --force\nrpm -ivh mysql-community-server-8.0.27-1.el7.x86_64.rpm --nodeps --force\n```\n\n![image-20220413110958642](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008157.png)\n\n## 3. 查看mysqld\n\n安装完成后，运行命令 查看mysqld\n\n如下图\n\n```\nrpm -qa | grep mysql\n```\n\n![image-20220413111040143](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008534.png)\n\n## 4. 初始化mysql，并开启服务\n\n```\nmysqld --initialize;\nchown mysql:mysql /var/lib/mysql -R;\nsystemctl start mysqld.service;\nsystemctl enable mysqld;\n```\n\n## 5.  查找mysql的初始密码\n\n```\ncat /var/log/mysqld.log | grep password\n```\n\n![image-20220413111429178](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008807.png)\n\n## 6. 登陆MySQL\n\n```\nmysql -uroot -p\n```\n\n![image-20220413111533921](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008684.png)\n\n## 7. 修改密码\n\n虽然mysql安装完成，但是随便运行一个命令就会发现mysql强制要求我们改密码\n\n![image-20220413111604454](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008587.png)\n\n**运行命令 这样我们在本机用root用户登陆时的密码就改为了 root**\n\n```\nALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'root';\n```\n\n![image-20220413111638854](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008699.png)\n\n**重新登录，再运行命令就正常了**\n\n![image-20220413111717187](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008172.png)\n\n# ？外部访问不到\n\n端口问题需要开放端口\n\n## 怎么开启一个端口\n\n### 1. 添加\n\n```\nfirewall-cmd --zone=public --add-port=3306/tcp --permanent\n（--permanent永久生效，没有此参数重启后失效 3306是mysql的默认访问端口）\n```\n\n### 2. 添加端口外部访问权限\n\n```\nfirewall-cmd --add-port=3306/tcp\n```\n\n### 3. 重新载入\n\n添加端口后重新载入才能起作用\n\n```\nfirewall-cmd --reload\n```\n\n这些之后，端口是开启成功的，如果没有成功，重启系统试试。\n\n![image-20220413112047662](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008916.png)\n\n# ？MySQL只允许本机访问\n\n虚拟机上安装的mysql，发现用本地电脑的navicat链接不上。通过了解知道了原因，此写了一篇，省的以后自己在碰到。\n\n错误如图。\n\n![image-20220413113315870](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008585.png)\n\n## 1. 登录到mysql中\n\n```\nmysql -u root -p \n```\n\n![image-20220413113438646](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008073.png)\n\n## 2. 选择mysql表\n\n```\nuse mysql;\n```\n\n![image-20220413113446218](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008190.png)\n\n## 3. 查询账号信息\n\n```\nselect host from user where user='root';\n```\n\n![image-20220413113523941](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008391.png)\n\n## 4. 修改帐号不允许从远程登陆\n\n只能在localhost。这个时候只要在localhost的那台电脑，登入[MySQL](http://lib.csdn.net/base/14)后，更改 \"mysql\" 数据库里的 \"user\" 表里的 \"host\" 项，从\"localhost\"改称\"%\"\n\n```\nupdate user set host = '%' where user ='root';\n```\n\n![image-20220413113550750](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008584.png)\n\n## 5. 刷新配置\n\n```\nflush privileges;\n```\n\n![image-20220413113616546](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008111.png)\n\n## 6. 成功修改\n\n![image-20220413113705717](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008770.png)\n","slug":"服务器/Centos/Centos安装MySQL","published":1,"updated":"2025-06-02T07:24:37.243Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wc001bzcqbgfp3dbsd","content":"<h1 id=\"准备安装包\"><a href=\"#准备安装包\" class=\"headerlink\" title=\"准备安装包\"></a>准备安装包</h1><h2 id=\"1-打开mysql的官网\"><a href=\"#1-打开mysql的官网\" class=\"headerlink\" title=\"1. 打开mysql的官网\"></a>1. 打开mysql的官网</h2><p><a href=\"https://downloads.mysql.com/archives/community/\">MySQL :: Download MySQL Community Server</a></p>\n<p>如下图</p>\n<h2 id=\"2-选择对应的版本\"><a href=\"#2-选择对应的版本\" class=\"headerlink\" title=\"2. 选择对应的版本\"></a>2. 选择对应的版本</h2><p>CentOS 是基于红帽的，Select OS Version: 选择 linux 7，如下图</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008561.png\" alt=\"image-20220413105809011\"></p>\n<h2 id=\"3-右键复制链接地址\"><a href=\"#3-右键复制链接地址\" class=\"headerlink\" title=\"3. 右键复制链接地址\"></a>3. 右键复制链接地址</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://downloads.mysql.com/archives/get/p/23/file/mysql-8.0.27-1.el7.x86_64.rpm-bundle.tar</span><br><span class=\"line\"></span><br><span class=\"line\"># mysql 5.7 地址</span><br><span class=\"line\">https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.43-1.el7.x86_64.rpm-bundle.tar</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008946.png\" alt=\"image-20220413110056904\"></p>\n<h2 id=\"4-回到linux\"><a href=\"#4-回到linux\" class=\"headerlink\" title=\"4. 回到linux\"></a>4. 回到linux</h2><p>进入&#x2F;data目录</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /data</span><br></pre></td></tr></table></figure>\n\n<p>输入wget下载指令</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://downloads.mysql.com/archives/get/p/23/file/mysql-8.0.27-1.el7.x86_64.rpm-bundle.tar</span><br></pre></td></tr></table></figure>\n\n<p>正在下载</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008563.png\" alt=\"image-20220413110332034\"></p>\n<p>下载完成</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008176.png\" alt=\"image-20220413110352076\"></p>\n<h1 id=\"安装MySQL\"><a href=\"#安装MySQL\" class=\"headerlink\" title=\"安装MySQL\"></a>安装MySQL</h1><h2 id=\"1-解压压缩包\"><a href=\"#1-解压压缩包\" class=\"headerlink\" title=\"1. 解压压缩包\"></a>1. 解压压缩包</h2><p>在我们刚才的mysql安装包目录，运行命令解压，解压结果如下图</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -xvf mysql-8.0.27-1.el7.x86_64.rpm-bundle.tar</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008736.png\" alt=\"image-20220413110520221\"></p>\n<h2 id=\"2-运行安装命令，依次安装\"><a href=\"#2-运行安装命令，依次安装\" class=\"headerlink\" title=\"2. 运行安装命令，依次安装\"></a>2. 运行安装命令，依次安装</h2><p>如下图</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh mysql-community-common-8.0.27-1.el7.x86_64.rpm --nodeps --force</span><br><span class=\"line\">rpm -ivh mysql-community-libs-8.0.27-1.el7.x86_64.rpm --nodeps --force</span><br><span class=\"line\">rpm -ivh mysql-community-client-8.0.27-1.el7.x86_64.rpm --nodeps --force</span><br><span class=\"line\">rpm -ivh mysql-community-server-8.0.27-1.el7.x86_64.rpm --nodeps --force</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008157.png\" alt=\"image-20220413110958642\"></p>\n<h2 id=\"3-查看mysqld\"><a href=\"#3-查看mysqld\" class=\"headerlink\" title=\"3. 查看mysqld\"></a>3. 查看mysqld</h2><p>安装完成后，运行命令 查看mysqld</p>\n<p>如下图</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -qa | grep mysql</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008534.png\" alt=\"image-20220413111040143\"></p>\n<h2 id=\"4-初始化mysql，并开启服务\"><a href=\"#4-初始化mysql，并开启服务\" class=\"headerlink\" title=\"4. 初始化mysql，并开启服务\"></a>4. 初始化mysql，并开启服务</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqld --initialize;</span><br><span class=\"line\">chown mysql:mysql /var/lib/mysql -R;</span><br><span class=\"line\">systemctl start mysqld.service;</span><br><span class=\"line\">systemctl enable mysqld;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-查找mysql的初始密码\"><a href=\"#5-查找mysql的初始密码\" class=\"headerlink\" title=\"5.  查找mysql的初始密码\"></a>5.  查找mysql的初始密码</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /var/log/mysqld.log | grep password</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008807.png\" alt=\"image-20220413111429178\"></p>\n<h2 id=\"6-登陆MySQL\"><a href=\"#6-登陆MySQL\" class=\"headerlink\" title=\"6. 登陆MySQL\"></a>6. 登陆MySQL</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -uroot -p</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008684.png\" alt=\"image-20220413111533921\"></p>\n<h2 id=\"7-修改密码\"><a href=\"#7-修改密码\" class=\"headerlink\" title=\"7. 修改密码\"></a>7. 修改密码</h2><p>虽然mysql安装完成，但是随便运行一个命令就会发现mysql强制要求我们改密码</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008587.png\" alt=\"image-20220413111604454\"></p>\n<p><strong>运行命令 这样我们在本机用root用户登陆时的密码就改为了 root</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;root&#x27;;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008699.png\" alt=\"image-20220413111638854\"></p>\n<p><strong>重新登录，再运行命令就正常了</strong></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008172.png\" alt=\"image-20220413111717187\"></p>\n<h1 id=\"？外部访问不到\"><a href=\"#？外部访问不到\" class=\"headerlink\" title=\"？外部访问不到\"></a>？外部访问不到</h1><p>端口问题需要开放端口</p>\n<h2 id=\"怎么开启一个端口\"><a href=\"#怎么开启一个端口\" class=\"headerlink\" title=\"怎么开启一个端口\"></a>怎么开启一个端口</h2><h3 id=\"1-添加\"><a href=\"#1-添加\" class=\"headerlink\" title=\"1. 添加\"></a>1. 添加</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class=\"line\">（--permanent永久生效，没有此参数重启后失效 3306是mysql的默认访问端口）</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-添加端口外部访问权限\"><a href=\"#2-添加端口外部访问权限\" class=\"headerlink\" title=\"2. 添加端口外部访问权限\"></a>2. 添加端口外部访问权限</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --add-port=3306/tcp</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-重新载入\"><a href=\"#3-重新载入\" class=\"headerlink\" title=\"3. 重新载入\"></a>3. 重新载入</h3><p>添加端口后重新载入才能起作用</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n\n<p>这些之后，端口是开启成功的，如果没有成功，重启系统试试。</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008916.png\" alt=\"image-20220413112047662\"></p>\n<h1 id=\"？MySQL只允许本机访问\"><a href=\"#？MySQL只允许本机访问\" class=\"headerlink\" title=\"？MySQL只允许本机访问\"></a>？MySQL只允许本机访问</h1><p>虚拟机上安装的mysql，发现用本地电脑的navicat链接不上。通过了解知道了原因，此写了一篇，省的以后自己在碰到。</p>\n<p>错误如图。</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008585.png\" alt=\"image-20220413113315870\"></p>\n<h2 id=\"1-登录到mysql中\"><a href=\"#1-登录到mysql中\" class=\"headerlink\" title=\"1. 登录到mysql中\"></a>1. 登录到mysql中</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -u root -p </span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008073.png\" alt=\"image-20220413113438646\"></p>\n<h2 id=\"2-选择mysql表\"><a href=\"#2-选择mysql表\" class=\"headerlink\" title=\"2. 选择mysql表\"></a>2. 选择mysql表</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use mysql;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008190.png\" alt=\"image-20220413113446218\"></p>\n<h2 id=\"3-查询账号信息\"><a href=\"#3-查询账号信息\" class=\"headerlink\" title=\"3. 查询账号信息\"></a>3. 查询账号信息</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select host from user where user=&#x27;root&#x27;;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008391.png\" alt=\"image-20220413113523941\"></p>\n<h2 id=\"4-修改帐号不允许从远程登陆\"><a href=\"#4-修改帐号不允许从远程登陆\" class=\"headerlink\" title=\"4. 修改帐号不允许从远程登陆\"></a>4. 修改帐号不允许从远程登陆</h2><p>只能在localhost。这个时候只要在localhost的那台电脑，登入<a href=\"http://lib.csdn.net/base/14\">MySQL</a>后，更改 “mysql” 数据库里的 “user” 表里的 “host” 项，从”localhost”改称”%”</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">update user set host = &#x27;%&#x27; where user =&#x27;root&#x27;;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008584.png\" alt=\"image-20220413113550750\"></p>\n<h2 id=\"5-刷新配置\"><a href=\"#5-刷新配置\" class=\"headerlink\" title=\"5. 刷新配置\"></a>5. 刷新配置</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008111.png\" alt=\"image-20220413113616546\"></p>\n<h2 id=\"6-成功修改\"><a href=\"#6-成功修改\" class=\"headerlink\" title=\"6. 成功修改\"></a>6. 成功修改</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008770.png\" alt=\"image-20220413113705717\"></p>\n","cover_type":"img","excerpt":"","more":"<h1 id=\"准备安装包\"><a href=\"#准备安装包\" class=\"headerlink\" title=\"准备安装包\"></a>准备安装包</h1><h2 id=\"1-打开mysql的官网\"><a href=\"#1-打开mysql的官网\" class=\"headerlink\" title=\"1. 打开mysql的官网\"></a>1. 打开mysql的官网</h2><p><a href=\"https://downloads.mysql.com/archives/community/\">MySQL :: Download MySQL Community Server</a></p>\n<p>如下图</p>\n<h2 id=\"2-选择对应的版本\"><a href=\"#2-选择对应的版本\" class=\"headerlink\" title=\"2. 选择对应的版本\"></a>2. 选择对应的版本</h2><p>CentOS 是基于红帽的，Select OS Version: 选择 linux 7，如下图</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008561.png\" alt=\"image-20220413105809011\"></p>\n<h2 id=\"3-右键复制链接地址\"><a href=\"#3-右键复制链接地址\" class=\"headerlink\" title=\"3. 右键复制链接地址\"></a>3. 右键复制链接地址</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://downloads.mysql.com/archives/get/p/23/file/mysql-8.0.27-1.el7.x86_64.rpm-bundle.tar</span><br><span class=\"line\"></span><br><span class=\"line\"># mysql 5.7 地址</span><br><span class=\"line\">https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.43-1.el7.x86_64.rpm-bundle.tar</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008946.png\" alt=\"image-20220413110056904\"></p>\n<h2 id=\"4-回到linux\"><a href=\"#4-回到linux\" class=\"headerlink\" title=\"4. 回到linux\"></a>4. 回到linux</h2><p>进入&#x2F;data目录</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /data</span><br></pre></td></tr></table></figure>\n\n<p>输入wget下载指令</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://downloads.mysql.com/archives/get/p/23/file/mysql-8.0.27-1.el7.x86_64.rpm-bundle.tar</span><br></pre></td></tr></table></figure>\n\n<p>正在下载</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008563.png\" alt=\"image-20220413110332034\"></p>\n<p>下载完成</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008176.png\" alt=\"image-20220413110352076\"></p>\n<h1 id=\"安装MySQL\"><a href=\"#安装MySQL\" class=\"headerlink\" title=\"安装MySQL\"></a>安装MySQL</h1><h2 id=\"1-解压压缩包\"><a href=\"#1-解压压缩包\" class=\"headerlink\" title=\"1. 解压压缩包\"></a>1. 解压压缩包</h2><p>在我们刚才的mysql安装包目录，运行命令解压，解压结果如下图</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -xvf mysql-8.0.27-1.el7.x86_64.rpm-bundle.tar</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008736.png\" alt=\"image-20220413110520221\"></p>\n<h2 id=\"2-运行安装命令，依次安装\"><a href=\"#2-运行安装命令，依次安装\" class=\"headerlink\" title=\"2. 运行安装命令，依次安装\"></a>2. 运行安装命令，依次安装</h2><p>如下图</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh mysql-community-common-8.0.27-1.el7.x86_64.rpm --nodeps --force</span><br><span class=\"line\">rpm -ivh mysql-community-libs-8.0.27-1.el7.x86_64.rpm --nodeps --force</span><br><span class=\"line\">rpm -ivh mysql-community-client-8.0.27-1.el7.x86_64.rpm --nodeps --force</span><br><span class=\"line\">rpm -ivh mysql-community-server-8.0.27-1.el7.x86_64.rpm --nodeps --force</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008157.png\" alt=\"image-20220413110958642\"></p>\n<h2 id=\"3-查看mysqld\"><a href=\"#3-查看mysqld\" class=\"headerlink\" title=\"3. 查看mysqld\"></a>3. 查看mysqld</h2><p>安装完成后，运行命令 查看mysqld</p>\n<p>如下图</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -qa | grep mysql</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008534.png\" alt=\"image-20220413111040143\"></p>\n<h2 id=\"4-初始化mysql，并开启服务\"><a href=\"#4-初始化mysql，并开启服务\" class=\"headerlink\" title=\"4. 初始化mysql，并开启服务\"></a>4. 初始化mysql，并开启服务</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqld --initialize;</span><br><span class=\"line\">chown mysql:mysql /var/lib/mysql -R;</span><br><span class=\"line\">systemctl start mysqld.service;</span><br><span class=\"line\">systemctl enable mysqld;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-查找mysql的初始密码\"><a href=\"#5-查找mysql的初始密码\" class=\"headerlink\" title=\"5.  查找mysql的初始密码\"></a>5.  查找mysql的初始密码</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /var/log/mysqld.log | grep password</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008807.png\" alt=\"image-20220413111429178\"></p>\n<h2 id=\"6-登陆MySQL\"><a href=\"#6-登陆MySQL\" class=\"headerlink\" title=\"6. 登陆MySQL\"></a>6. 登陆MySQL</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -uroot -p</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008684.png\" alt=\"image-20220413111533921\"></p>\n<h2 id=\"7-修改密码\"><a href=\"#7-修改密码\" class=\"headerlink\" title=\"7. 修改密码\"></a>7. 修改密码</h2><p>虽然mysql安装完成，但是随便运行一个命令就会发现mysql强制要求我们改密码</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008587.png\" alt=\"image-20220413111604454\"></p>\n<p><strong>运行命令 这样我们在本机用root用户登陆时的密码就改为了 root</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;root&#x27;;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008699.png\" alt=\"image-20220413111638854\"></p>\n<p><strong>重新登录，再运行命令就正常了</strong></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008172.png\" alt=\"image-20220413111717187\"></p>\n<h1 id=\"？外部访问不到\"><a href=\"#？外部访问不到\" class=\"headerlink\" title=\"？外部访问不到\"></a>？外部访问不到</h1><p>端口问题需要开放端口</p>\n<h2 id=\"怎么开启一个端口\"><a href=\"#怎么开启一个端口\" class=\"headerlink\" title=\"怎么开启一个端口\"></a>怎么开启一个端口</h2><h3 id=\"1-添加\"><a href=\"#1-添加\" class=\"headerlink\" title=\"1. 添加\"></a>1. 添加</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class=\"line\">（--permanent永久生效，没有此参数重启后失效 3306是mysql的默认访问端口）</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-添加端口外部访问权限\"><a href=\"#2-添加端口外部访问权限\" class=\"headerlink\" title=\"2. 添加端口外部访问权限\"></a>2. 添加端口外部访问权限</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --add-port=3306/tcp</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-重新载入\"><a href=\"#3-重新载入\" class=\"headerlink\" title=\"3. 重新载入\"></a>3. 重新载入</h3><p>添加端口后重新载入才能起作用</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n\n<p>这些之后，端口是开启成功的，如果没有成功，重启系统试试。</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008916.png\" alt=\"image-20220413112047662\"></p>\n<h1 id=\"？MySQL只允许本机访问\"><a href=\"#？MySQL只允许本机访问\" class=\"headerlink\" title=\"？MySQL只允许本机访问\"></a>？MySQL只允许本机访问</h1><p>虚拟机上安装的mysql，发现用本地电脑的navicat链接不上。通过了解知道了原因，此写了一篇，省的以后自己在碰到。</p>\n<p>错误如图。</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008585.png\" alt=\"image-20220413113315870\"></p>\n<h2 id=\"1-登录到mysql中\"><a href=\"#1-登录到mysql中\" class=\"headerlink\" title=\"1. 登录到mysql中\"></a>1. 登录到mysql中</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -u root -p </span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008073.png\" alt=\"image-20220413113438646\"></p>\n<h2 id=\"2-选择mysql表\"><a href=\"#2-选择mysql表\" class=\"headerlink\" title=\"2. 选择mysql表\"></a>2. 选择mysql表</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use mysql;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008190.png\" alt=\"image-20220413113446218\"></p>\n<h2 id=\"3-查询账号信息\"><a href=\"#3-查询账号信息\" class=\"headerlink\" title=\"3. 查询账号信息\"></a>3. 查询账号信息</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select host from user where user=&#x27;root&#x27;;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008391.png\" alt=\"image-20220413113523941\"></p>\n<h2 id=\"4-修改帐号不允许从远程登陆\"><a href=\"#4-修改帐号不允许从远程登陆\" class=\"headerlink\" title=\"4. 修改帐号不允许从远程登陆\"></a>4. 修改帐号不允许从远程登陆</h2><p>只能在localhost。这个时候只要在localhost的那台电脑，登入<a href=\"http://lib.csdn.net/base/14\">MySQL</a>后，更改 “mysql” 数据库里的 “user” 表里的 “host” 项，从”localhost”改称”%”</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">update user set host = &#x27;%&#x27; where user =&#x27;root&#x27;;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008584.png\" alt=\"image-20220413113550750\"></p>\n<h2 id=\"5-刷新配置\"><a href=\"#5-刷新配置\" class=\"headerlink\" title=\"5. 刷新配置\"></a>5. 刷新配置</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008111.png\" alt=\"image-20220413113616546\"></p>\n<h2 id=\"6-成功修改\"><a href=\"#6-成功修改\" class=\"headerlink\" title=\"6. 成功修改\"></a>6. 成功修改</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008770.png\" alt=\"image-20220413113705717\"></p>\n"},{"title":"Centos 搭建 maven 私服 Nexus","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/c74ecef2cc97f72fb56454140b2432a8.png","main_color":"#B9ECCB","abbrlink":"9d28","date":"2024-10-28T16:16:00.000Z","_content":"\n> Nexus 是用来搭建 Maven 私服的，可以说是最好的免费工具了，它的官网上是这样说的：“世界上第一个也是唯一的免费使用的仓库解决方案”。目前的最新版本是 OSS 3.x。提供了针对 Windows、Unix、OS X 三种系统的版本。\n\n这里只简单说明 Linux 下的安装方式，如果是下载的最新版本，它对系统内存和 jdk 版本是有要求的，要求内存大于`4G`，jdk 最低是`1.8`版本。\n\n# 1. 安装Nexus\n\n> 安装目录 /opt/Nexus\n\n## 解压\n\n~~~shell\ntar -zxvf nexus-version-unix.tar.gz\n~~~\n\n1. 进入 `nexus-version/bin/` 目录，执行命令`./nexus start`\n2. 访问 默认的 8081 端口即可\n\n**没错，就是这么简单。**\n\n通常情况下，以上三步就可以完成安装，如果有问题，并且提示“ NOT RECOMMENDED TO RUN AS ROOT ”，可以通过修改 `/bin/nexus` 文件，在其中加入 `RUN_AS_USER=root` ，然后重新启动即可。\n\n# 2. 初识Nexus\n\n> **proxy**：这是代理方式，它是用来代理中央仓库的，例如我们依赖的包在本地仓库没有，就会到私服获取，私服没有的话，会到中央仓库先把包下载到这里，然后再下载到本地仓库；\n>\n> **hosted**：指的是我们公司或团队内部的包，并且 hosted 类型的仓库会分为 releases 和 snapshots 两个，前者是正式版，后者一般是开发测试版；\n>\n> **group**：它的目的就是把多个仓库组合起来，然后我们项目中只需要配置上这个类型的仓库地址，就可以把它里面组合的几个仓库都关联上。\n\n## 在项目中使用\n\n### 获取依赖包\n\n如果是普通项目成员，不需要向私服发布包的，只需要在 pom 文件中加入以下配置即可。\n\n```xml\n<repositories>\n      <repository>\n            <id>maven-public</id>\n            <name>maven-public</name>\n            <url>http://nexus.local:32768/repository/maven-public/</url>\n            <snapshots>\n               <enabled>true</enabled>\n            </snapshots>\n       </repository>\n</repositories>\n```\n\n其中 id 要和你的仓库名称一致，url 就是私服的仓库地址，就是 type 为 group 的那个，它组合了一个 proxy 类型的和两个 hosted 类型的仓库。设置 snapshots 的 enabled 为ture，表示允许下载 snapshots 版本的包。\n\n### 发布(deploy)包\n\n1. 如果需要向仓库中发布包的，首先需要对仓库有权限才可以，没有权限的用户是没办法发布的。\n\n打开 maven 的配置文件 `setting.xml` ，找到 `servers` 节点,然后在其中添加一个 `server` 节点。\n\n用户名和密码也可以是管理员账号，或者管理员新创建的账号，制药对仓库有添加权限即可。\n\n```xml\n<server>\n            <id>nexus-releases</id>\n            <username>admin</username>\n            <password>admin123</password>\n        </server>\n\n        <server>\n            <id>nexus-snapshots</id>\n            <username>admin</username>\n            <password>admin123</password>\n        </server>\n```\n\n请注意上面的 id，一会儿在 pom 文件中还会用到。\n\n2. 然后需要在 pom 文件中配置下面的内容：\n\n```xml\n<distributionManagement>\n        <repository>\n            <id>nexus-releases</id>\n            <name>maven-releases</name>\n            <url>http://nexus.local:8081/repository/maven-releases/</url>\n        </repository>\n        <snapshotRepository>\n            <id>nexus-snapshots</id>\n            <name>maven-snapshots</name>\n            <url>http://nexus.local:8081/repository/maven-snapshots/</url>\n        </snapshotRepository>\n</distributionManagement>\n```\n\n我们看到其中配置了一个 repository ，另外还有一个 snapshotRepository，上面表示的是 releases 版。同样注意 id 要和 setting.xml 里 server 下的 id 一致，不然会出现权限问题。url 分别指定 maven-releases 和 maven-snapshots 的地址。\n\n只要在项目中配置 1.0-SNAPSHOT 这样，带有 SNAPSHOT 的就会到 snapshots 仓库，如果不加 SNAPSHOT 就会到 releases 仓库。\n\n还有要注意的是，你要发布的包不应该是上级，也就是不能有 parent 依赖。否则在获取依赖的时候会有问题。\n\n3. 最后执行 mvn clean deploy 命令，即可发布包到私服仓库中。\n\n通过以上配置和操作，就可以完成包的发布过程。\n\n\n\n参考文章 知乎[Maven 私服搭建指南](https://zhuanlan.zhihu.com/p/148636979)\n","source":"_posts/服务器/Centos/Centos安装maven私服Nexus.md","raw":"---\ntitle: Centos 搭建 maven 私服 Nexus\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/c74ecef2cc97f72fb56454140b2432a8.png\nmain_color: '#B9ECCB'\ntags:\n  - Maven\n  - Nexus\n  - Centos\n  - 食用教程\nabbrlink: 9d28\ndate: 2024-10-29 00:16:00\n---\n\n> Nexus 是用来搭建 Maven 私服的，可以说是最好的免费工具了，它的官网上是这样说的：“世界上第一个也是唯一的免费使用的仓库解决方案”。目前的最新版本是 OSS 3.x。提供了针对 Windows、Unix、OS X 三种系统的版本。\n\n这里只简单说明 Linux 下的安装方式，如果是下载的最新版本，它对系统内存和 jdk 版本是有要求的，要求内存大于`4G`，jdk 最低是`1.8`版本。\n\n# 1. 安装Nexus\n\n> 安装目录 /opt/Nexus\n\n## 解压\n\n~~~shell\ntar -zxvf nexus-version-unix.tar.gz\n~~~\n\n1. 进入 `nexus-version/bin/` 目录，执行命令`./nexus start`\n2. 访问 默认的 8081 端口即可\n\n**没错，就是这么简单。**\n\n通常情况下，以上三步就可以完成安装，如果有问题，并且提示“ NOT RECOMMENDED TO RUN AS ROOT ”，可以通过修改 `/bin/nexus` 文件，在其中加入 `RUN_AS_USER=root` ，然后重新启动即可。\n\n# 2. 初识Nexus\n\n> **proxy**：这是代理方式，它是用来代理中央仓库的，例如我们依赖的包在本地仓库没有，就会到私服获取，私服没有的话，会到中央仓库先把包下载到这里，然后再下载到本地仓库；\n>\n> **hosted**：指的是我们公司或团队内部的包，并且 hosted 类型的仓库会分为 releases 和 snapshots 两个，前者是正式版，后者一般是开发测试版；\n>\n> **group**：它的目的就是把多个仓库组合起来，然后我们项目中只需要配置上这个类型的仓库地址，就可以把它里面组合的几个仓库都关联上。\n\n## 在项目中使用\n\n### 获取依赖包\n\n如果是普通项目成员，不需要向私服发布包的，只需要在 pom 文件中加入以下配置即可。\n\n```xml\n<repositories>\n      <repository>\n            <id>maven-public</id>\n            <name>maven-public</name>\n            <url>http://nexus.local:32768/repository/maven-public/</url>\n            <snapshots>\n               <enabled>true</enabled>\n            </snapshots>\n       </repository>\n</repositories>\n```\n\n其中 id 要和你的仓库名称一致，url 就是私服的仓库地址，就是 type 为 group 的那个，它组合了一个 proxy 类型的和两个 hosted 类型的仓库。设置 snapshots 的 enabled 为ture，表示允许下载 snapshots 版本的包。\n\n### 发布(deploy)包\n\n1. 如果需要向仓库中发布包的，首先需要对仓库有权限才可以，没有权限的用户是没办法发布的。\n\n打开 maven 的配置文件 `setting.xml` ，找到 `servers` 节点,然后在其中添加一个 `server` 节点。\n\n用户名和密码也可以是管理员账号，或者管理员新创建的账号，制药对仓库有添加权限即可。\n\n```xml\n<server>\n            <id>nexus-releases</id>\n            <username>admin</username>\n            <password>admin123</password>\n        </server>\n\n        <server>\n            <id>nexus-snapshots</id>\n            <username>admin</username>\n            <password>admin123</password>\n        </server>\n```\n\n请注意上面的 id，一会儿在 pom 文件中还会用到。\n\n2. 然后需要在 pom 文件中配置下面的内容：\n\n```xml\n<distributionManagement>\n        <repository>\n            <id>nexus-releases</id>\n            <name>maven-releases</name>\n            <url>http://nexus.local:8081/repository/maven-releases/</url>\n        </repository>\n        <snapshotRepository>\n            <id>nexus-snapshots</id>\n            <name>maven-snapshots</name>\n            <url>http://nexus.local:8081/repository/maven-snapshots/</url>\n        </snapshotRepository>\n</distributionManagement>\n```\n\n我们看到其中配置了一个 repository ，另外还有一个 snapshotRepository，上面表示的是 releases 版。同样注意 id 要和 setting.xml 里 server 下的 id 一致，不然会出现权限问题。url 分别指定 maven-releases 和 maven-snapshots 的地址。\n\n只要在项目中配置 1.0-SNAPSHOT 这样，带有 SNAPSHOT 的就会到 snapshots 仓库，如果不加 SNAPSHOT 就会到 releases 仓库。\n\n还有要注意的是，你要发布的包不应该是上级，也就是不能有 parent 依赖。否则在获取依赖的时候会有问题。\n\n3. 最后执行 mvn clean deploy 命令，即可发布包到私服仓库中。\n\n通过以上配置和操作，就可以完成包的发布过程。\n\n\n\n参考文章 知乎[Maven 私服搭建指南](https://zhuanlan.zhihu.com/p/148636979)\n","slug":"服务器/Centos/Centos安装maven私服Nexus","published":1,"updated":"2025-06-02T07:24:31.132Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wd001ezcqbfwkma7to","content":"<blockquote>\n<p>Nexus 是用来搭建 Maven 私服的，可以说是最好的免费工具了，它的官网上是这样说的：“世界上第一个也是唯一的免费使用的仓库解决方案”。目前的最新版本是 OSS 3.x。提供了针对 Windows、Unix、OS X 三种系统的版本。</p>\n</blockquote>\n<p>这里只简单说明 Linux 下的安装方式，如果是下载的最新版本，它对系统内存和 jdk 版本是有要求的，要求内存大于<code>4G</code>，jdk 最低是<code>1.8</code>版本。</p>\n<h1 id=\"1-安装Nexus\"><a href=\"#1-安装Nexus\" class=\"headerlink\" title=\"1. 安装Nexus\"></a>1. 安装Nexus</h1><blockquote>\n<p>安装目录 &#x2F;opt&#x2F;Nexus</p>\n</blockquote>\n<h2 id=\"解压\"><a href=\"#解压\" class=\"headerlink\" title=\"解压\"></a>解压</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf nexus-version-unix.tar.gz</span><br></pre></td></tr></table></figure>\n\n<ol>\n<li>进入 <code>nexus-version/bin/</code> 目录，执行命令<code>./nexus start</code></li>\n<li>访问 默认的 8081 端口即可</li>\n</ol>\n<p><strong>没错，就是这么简单。</strong></p>\n<p>通常情况下，以上三步就可以完成安装，如果有问题，并且提示“ NOT RECOMMENDED TO RUN AS ROOT ”，可以通过修改 <code>/bin/nexus</code> 文件，在其中加入 <code>RUN_AS_USER=root</code> ，然后重新启动即可。</p>\n<h1 id=\"2-初识Nexus\"><a href=\"#2-初识Nexus\" class=\"headerlink\" title=\"2. 初识Nexus\"></a>2. 初识Nexus</h1><blockquote>\n<p><strong>proxy</strong>：这是代理方式，它是用来代理中央仓库的，例如我们依赖的包在本地仓库没有，就会到私服获取，私服没有的话，会到中央仓库先把包下载到这里，然后再下载到本地仓库；</p>\n<p><strong>hosted</strong>：指的是我们公司或团队内部的包，并且 hosted 类型的仓库会分为 releases 和 snapshots 两个，前者是正式版，后者一般是开发测试版；</p>\n<p><strong>group</strong>：它的目的就是把多个仓库组合起来，然后我们项目中只需要配置上这个类型的仓库地址，就可以把它里面组合的几个仓库都关联上。</p>\n</blockquote>\n<h2 id=\"在项目中使用\"><a href=\"#在项目中使用\" class=\"headerlink\" title=\"在项目中使用\"></a>在项目中使用</h2><h3 id=\"获取依赖包\"><a href=\"#获取依赖包\" class=\"headerlink\" title=\"获取依赖包\"></a>获取依赖包</h3><p>如果是普通项目成员，不需要向私服发布包的，只需要在 pom 文件中加入以下配置即可。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">repositories</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>maven-public<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>maven-public<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://nexus.local:32768/repository/maven-public/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">repositories</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>其中 id 要和你的仓库名称一致，url 就是私服的仓库地址，就是 type 为 group 的那个，它组合了一个 proxy 类型的和两个 hosted 类型的仓库。设置 snapshots 的 enabled 为ture，表示允许下载 snapshots 版本的包。</p>\n<h3 id=\"发布-deploy-包\"><a href=\"#发布-deploy-包\" class=\"headerlink\" title=\"发布(deploy)包\"></a>发布(deploy)包</h3><ol>\n<li>如果需要向仓库中发布包的，首先需要对仓库有权限才可以，没有权限的用户是没办法发布的。</li>\n</ol>\n<p>打开 maven 的配置文件 <code>setting.xml</code> ，找到 <code>servers</code> 节点,然后在其中添加一个 <code>server</code> 节点。</p>\n<p>用户名和密码也可以是管理员账号，或者管理员新创建的账号，制药对仓库有添加权限即可。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>nexus-releases<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">username</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">username</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">password</span>&gt;</span>admin123<span class=\"tag\">&lt;/<span class=\"name\">password</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>nexus-snapshots<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">username</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">username</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">password</span>&gt;</span>admin123<span class=\"tag\">&lt;/<span class=\"name\">password</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>请注意上面的 id，一会儿在 pom 文件中还会用到。</p>\n<ol start=\"2\">\n<li>然后需要在 pom 文件中配置下面的内容：</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">distributionManagement</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>nexus-releases<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>maven-releases<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://nexus.local:8081/repository/maven-releases/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">snapshotRepository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>nexus-snapshots<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>maven-snapshots<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://nexus.local:8081/repository/maven-snapshots/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">snapshotRepository</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>我们看到其中配置了一个 repository ，另外还有一个 snapshotRepository，上面表示的是 releases 版。同样注意 id 要和 setting.xml 里 server 下的 id 一致，不然会出现权限问题。url 分别指定 maven-releases 和 maven-snapshots 的地址。</p>\n<p>只要在项目中配置 1.0-SNAPSHOT 这样，带有 SNAPSHOT 的就会到 snapshots 仓库，如果不加 SNAPSHOT 就会到 releases 仓库。</p>\n<p>还有要注意的是，你要发布的包不应该是上级，也就是不能有 parent 依赖。否则在获取依赖的时候会有问题。</p>\n<ol start=\"3\">\n<li>最后执行 mvn clean deploy 命令，即可发布包到私服仓库中。</li>\n</ol>\n<p>通过以上配置和操作，就可以完成包的发布过程。</p>\n<p>参考文章 知乎<a href=\"https://zhuanlan.zhihu.com/p/148636979\">Maven 私服搭建指南</a></p>\n","cover_type":"img","excerpt":"","more":"<blockquote>\n<p>Nexus 是用来搭建 Maven 私服的，可以说是最好的免费工具了，它的官网上是这样说的：“世界上第一个也是唯一的免费使用的仓库解决方案”。目前的最新版本是 OSS 3.x。提供了针对 Windows、Unix、OS X 三种系统的版本。</p>\n</blockquote>\n<p>这里只简单说明 Linux 下的安装方式，如果是下载的最新版本，它对系统内存和 jdk 版本是有要求的，要求内存大于<code>4G</code>，jdk 最低是<code>1.8</code>版本。</p>\n<h1 id=\"1-安装Nexus\"><a href=\"#1-安装Nexus\" class=\"headerlink\" title=\"1. 安装Nexus\"></a>1. 安装Nexus</h1><blockquote>\n<p>安装目录 &#x2F;opt&#x2F;Nexus</p>\n</blockquote>\n<h2 id=\"解压\"><a href=\"#解压\" class=\"headerlink\" title=\"解压\"></a>解压</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf nexus-version-unix.tar.gz</span><br></pre></td></tr></table></figure>\n\n<ol>\n<li>进入 <code>nexus-version/bin/</code> 目录，执行命令<code>./nexus start</code></li>\n<li>访问 默认的 8081 端口即可</li>\n</ol>\n<p><strong>没错，就是这么简单。</strong></p>\n<p>通常情况下，以上三步就可以完成安装，如果有问题，并且提示“ NOT RECOMMENDED TO RUN AS ROOT ”，可以通过修改 <code>/bin/nexus</code> 文件，在其中加入 <code>RUN_AS_USER=root</code> ，然后重新启动即可。</p>\n<h1 id=\"2-初识Nexus\"><a href=\"#2-初识Nexus\" class=\"headerlink\" title=\"2. 初识Nexus\"></a>2. 初识Nexus</h1><blockquote>\n<p><strong>proxy</strong>：这是代理方式，它是用来代理中央仓库的，例如我们依赖的包在本地仓库没有，就会到私服获取，私服没有的话，会到中央仓库先把包下载到这里，然后再下载到本地仓库；</p>\n<p><strong>hosted</strong>：指的是我们公司或团队内部的包，并且 hosted 类型的仓库会分为 releases 和 snapshots 两个，前者是正式版，后者一般是开发测试版；</p>\n<p><strong>group</strong>：它的目的就是把多个仓库组合起来，然后我们项目中只需要配置上这个类型的仓库地址，就可以把它里面组合的几个仓库都关联上。</p>\n</blockquote>\n<h2 id=\"在项目中使用\"><a href=\"#在项目中使用\" class=\"headerlink\" title=\"在项目中使用\"></a>在项目中使用</h2><h3 id=\"获取依赖包\"><a href=\"#获取依赖包\" class=\"headerlink\" title=\"获取依赖包\"></a>获取依赖包</h3><p>如果是普通项目成员，不需要向私服发布包的，只需要在 pom 文件中加入以下配置即可。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">repositories</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>maven-public<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>maven-public<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://nexus.local:32768/repository/maven-public/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">repositories</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>其中 id 要和你的仓库名称一致，url 就是私服的仓库地址，就是 type 为 group 的那个，它组合了一个 proxy 类型的和两个 hosted 类型的仓库。设置 snapshots 的 enabled 为ture，表示允许下载 snapshots 版本的包。</p>\n<h3 id=\"发布-deploy-包\"><a href=\"#发布-deploy-包\" class=\"headerlink\" title=\"发布(deploy)包\"></a>发布(deploy)包</h3><ol>\n<li>如果需要向仓库中发布包的，首先需要对仓库有权限才可以，没有权限的用户是没办法发布的。</li>\n</ol>\n<p>打开 maven 的配置文件 <code>setting.xml</code> ，找到 <code>servers</code> 节点,然后在其中添加一个 <code>server</code> 节点。</p>\n<p>用户名和密码也可以是管理员账号，或者管理员新创建的账号，制药对仓库有添加权限即可。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>nexus-releases<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">username</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">username</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">password</span>&gt;</span>admin123<span class=\"tag\">&lt;/<span class=\"name\">password</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>nexus-snapshots<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">username</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">username</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">password</span>&gt;</span>admin123<span class=\"tag\">&lt;/<span class=\"name\">password</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>请注意上面的 id，一会儿在 pom 文件中还会用到。</p>\n<ol start=\"2\">\n<li>然后需要在 pom 文件中配置下面的内容：</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">distributionManagement</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>nexus-releases<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>maven-releases<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://nexus.local:8081/repository/maven-releases/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">snapshotRepository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>nexus-snapshots<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>maven-snapshots<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://nexus.local:8081/repository/maven-snapshots/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">snapshotRepository</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>我们看到其中配置了一个 repository ，另外还有一个 snapshotRepository，上面表示的是 releases 版。同样注意 id 要和 setting.xml 里 server 下的 id 一致，不然会出现权限问题。url 分别指定 maven-releases 和 maven-snapshots 的地址。</p>\n<p>只要在项目中配置 1.0-SNAPSHOT 这样，带有 SNAPSHOT 的就会到 snapshots 仓库，如果不加 SNAPSHOT 就会到 releases 仓库。</p>\n<p>还有要注意的是，你要发布的包不应该是上级，也就是不能有 parent 依赖。否则在获取依赖的时候会有问题。</p>\n<ol start=\"3\">\n<li>最后执行 mvn clean deploy 命令，即可发布包到私服仓库中。</li>\n</ol>\n<p>通过以上配置和操作，就可以完成包的发布过程。</p>\n<p>参考文章 知乎<a href=\"https://zhuanlan.zhihu.com/p/148636979\">Maven 私服搭建指南</a></p>\n"},{"title":"Centos 安装 Minio","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/4ddd54a3a9b3ceef8e08ef4d4f24be84.png","main_color":"#BC3B5F","abbrlink":"d070","date":"2024-10-02T16:17:00.000Z","_content":"\n# 1. 准备安装目录和文件\n\n> 安装目录：/opt/minio\n\n1. 创建目录\n\n   ~~~shell\n   mkdir -p /opt/minio\n   ~~~\n\n2. 下载文件\n\n   ~~~shell\n   wget https://dl.min.io/server/minio/release/linux-amd64/minio\n   ~~~\n\n   \n\n# 2. 安装\n\n## 赋权\n\n~~~shell\n#提权\nchmod +x minio\n~~~\n\n## 设置用户名，密码（临时）\n\n~~~shell\n#旧版使用 MINIO_ACCESS_KEY MINIO_SECRET_KEY，\n#新版 配置用户名密码\nexport MINIO_ROOT_USER=minioadmin\nexport MINIO_ROOT_PASSWORD=yourpassword\n\n#查看环境变量\necho $MINIO_ROOT_USER\necho $MINIO_ROOT_PASSWORD\n~~~\n\n## 创建存储目录及日志文件\n\n~~~shell\n#创建存储目录\nmkdir -p  /opt/minio/data\n#进入\ncd /opt/minio\n#创建日志文件\ntouch minio.log\n~~~\n\n# 3. 后台启动\n\n## 进入执行文件目录\n\n~~~shell\nnohup /home/minio/minio server --address :9800 --console-address :9889 /home/minio/data >/home/minio/minio.log 2>&1 &\n~~~\n\n~~~shell\n #备注：\n\nnohup：后台启动  \n./minio server：启动命令   \n--address :9800：指定API端口   \n--console-address :9889：指定控制台端口  \n/opt/minio/data：指定存储目录  \n>/opt/minio/minio.log 2>&1 ：控制台日志重定向到/opt/minio/minio.log文件中  \n&：后台运行\n~~~\n\n# 4. 注册成服务\n\n~~~shell\n#切换文件目录\ncd /opt/minio/\n#创建目录\nmkdir conf\n#创建配置文件\nvim  conf/minio.conf\n~~~\n\n## 编辑文件minio.conf\n\n~~~shell\n#数据存放目录\nMINIO_VOLUMES=\"/opt/minio/data\"\n#端口号设置\nMINIO_OPTS=\"--console-address :9000 --address :9001\"\n#MINIO_ROOT_USER=\"minioadmin\"\n#MINIO_ROOT_PASSWORD=\"minioadmin\"\n#用户名\nMINIO_ROOT_USER=\"minio\"\n#密码\nMINIO_ROOT_PASSWORD=\"minioAa123\"\n~~~\n\n## 创建服务minio.service\n\n~~~shell\nvim /usr/lib/systemd/system/minio.service \n\n\n\n#minio配置文件\n\n[Unit]\nDescription=MinIO\nDocumentation=https://docs.min.io\nWants=network-online.target\nAfter=network-online.target\n\n#minio文件具体位置\nAssertFileIsExecutable=/opt/minio/minio\n\n[Service]\nWorkingDirectory=/opt/minio/data\n\nUser=root\nGroup=root\n\n#创建的配置文件 minio.conf\nEnvironmentFile=/opt/minio/conf/minio.conf\n#ExecStartPre=/bin/bash -c \"[ -n \\\"${MINIO_VOLUMES}\\\" ] || echo \\\"Variable MINIO_VOLUMES not set in /usr/local/minio/conf/minio.conf\\\"\"\nExecStart=/opt/minio/minio server --console-address :9000 --address :9001\n\n#$MINIO_OPTS $MINIO_VOLUMES\n\n# Let systemd restart this service always\nRestart=always\n\n# Specifies the maximum file descriptor number that can be opened by this process\nLimitNOFILE=65536\n\n# Disable timeout logic and wait until process is stopped\nTimeoutStopSec=infinity\nSendSIGKILL=no\n\n[Install]\nWantedBy=multi-user.target\n~~~\n\n## 启动服务\n\n~~~shell\n#将服务设置为每次开机启动\nsystemctl enable minio.service\n#重新加载某个服务的配置文件，如果新安装了一个服务，归属于 systemctl 管理，要是新服务的服务程序配置文件生效，需重新加载\nsystemctl daemon-reload\n#启动服务\nsystemctl start minio\n#停止服务\nsystemctl stop minio\n#重启服务\nsystemctl restrat minio\n#查看服务状态\nsystemctl status minio.service\n~~~\n\n","source":"_posts/服务器/Centos/Centos安装Minio.md","raw":"---\ntitle: Centos 安装 Minio\ncategories:\n   - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/4ddd54a3a9b3ceef8e08ef4d4f24be84.png\nmain_color: '#BC3B5F'\ntags:\n  - Minio\n  - Centos\n  - 食用教程\nabbrlink: d070\ndate: 2024-10-03 00:17:00\n---\n\n# 1. 准备安装目录和文件\n\n> 安装目录：/opt/minio\n\n1. 创建目录\n\n   ~~~shell\n   mkdir -p /opt/minio\n   ~~~\n\n2. 下载文件\n\n   ~~~shell\n   wget https://dl.min.io/server/minio/release/linux-amd64/minio\n   ~~~\n\n   \n\n# 2. 安装\n\n## 赋权\n\n~~~shell\n#提权\nchmod +x minio\n~~~\n\n## 设置用户名，密码（临时）\n\n~~~shell\n#旧版使用 MINIO_ACCESS_KEY MINIO_SECRET_KEY，\n#新版 配置用户名密码\nexport MINIO_ROOT_USER=minioadmin\nexport MINIO_ROOT_PASSWORD=yourpassword\n\n#查看环境变量\necho $MINIO_ROOT_USER\necho $MINIO_ROOT_PASSWORD\n~~~\n\n## 创建存储目录及日志文件\n\n~~~shell\n#创建存储目录\nmkdir -p  /opt/minio/data\n#进入\ncd /opt/minio\n#创建日志文件\ntouch minio.log\n~~~\n\n# 3. 后台启动\n\n## 进入执行文件目录\n\n~~~shell\nnohup /home/minio/minio server --address :9800 --console-address :9889 /home/minio/data >/home/minio/minio.log 2>&1 &\n~~~\n\n~~~shell\n #备注：\n\nnohup：后台启动  \n./minio server：启动命令   \n--address :9800：指定API端口   \n--console-address :9889：指定控制台端口  \n/opt/minio/data：指定存储目录  \n>/opt/minio/minio.log 2>&1 ：控制台日志重定向到/opt/minio/minio.log文件中  \n&：后台运行\n~~~\n\n# 4. 注册成服务\n\n~~~shell\n#切换文件目录\ncd /opt/minio/\n#创建目录\nmkdir conf\n#创建配置文件\nvim  conf/minio.conf\n~~~\n\n## 编辑文件minio.conf\n\n~~~shell\n#数据存放目录\nMINIO_VOLUMES=\"/opt/minio/data\"\n#端口号设置\nMINIO_OPTS=\"--console-address :9000 --address :9001\"\n#MINIO_ROOT_USER=\"minioadmin\"\n#MINIO_ROOT_PASSWORD=\"minioadmin\"\n#用户名\nMINIO_ROOT_USER=\"minio\"\n#密码\nMINIO_ROOT_PASSWORD=\"minioAa123\"\n~~~\n\n## 创建服务minio.service\n\n~~~shell\nvim /usr/lib/systemd/system/minio.service \n\n\n\n#minio配置文件\n\n[Unit]\nDescription=MinIO\nDocumentation=https://docs.min.io\nWants=network-online.target\nAfter=network-online.target\n\n#minio文件具体位置\nAssertFileIsExecutable=/opt/minio/minio\n\n[Service]\nWorkingDirectory=/opt/minio/data\n\nUser=root\nGroup=root\n\n#创建的配置文件 minio.conf\nEnvironmentFile=/opt/minio/conf/minio.conf\n#ExecStartPre=/bin/bash -c \"[ -n \\\"${MINIO_VOLUMES}\\\" ] || echo \\\"Variable MINIO_VOLUMES not set in /usr/local/minio/conf/minio.conf\\\"\"\nExecStart=/opt/minio/minio server --console-address :9000 --address :9001\n\n#$MINIO_OPTS $MINIO_VOLUMES\n\n# Let systemd restart this service always\nRestart=always\n\n# Specifies the maximum file descriptor number that can be opened by this process\nLimitNOFILE=65536\n\n# Disable timeout logic and wait until process is stopped\nTimeoutStopSec=infinity\nSendSIGKILL=no\n\n[Install]\nWantedBy=multi-user.target\n~~~\n\n## 启动服务\n\n~~~shell\n#将服务设置为每次开机启动\nsystemctl enable minio.service\n#重新加载某个服务的配置文件，如果新安装了一个服务，归属于 systemctl 管理，要是新服务的服务程序配置文件生效，需重新加载\nsystemctl daemon-reload\n#启动服务\nsystemctl start minio\n#停止服务\nsystemctl stop minio\n#重启服务\nsystemctl restrat minio\n#查看服务状态\nsystemctl status minio.service\n~~~\n\n","slug":"服务器/Centos/Centos安装Minio","published":1,"updated":"2025-06-02T07:24:33.021Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86we001fzcqbciox86dg","content":"<h1 id=\"1-准备安装目录和文件\"><a href=\"#1-准备安装目录和文件\" class=\"headerlink\" title=\"1. 准备安装目录和文件\"></a>1. 准备安装目录和文件</h1><blockquote>\n<p>安装目录：&#x2F;opt&#x2F;minio</p>\n</blockquote>\n<ol>\n<li><p>创建目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /opt/minio</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>下载文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://dl.min.io/server/minio/release/linux-amd64/minio</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h1 id=\"2-安装\"><a href=\"#2-安装\" class=\"headerlink\" title=\"2. 安装\"></a>2. 安装</h1><h2 id=\"赋权\"><a href=\"#赋权\" class=\"headerlink\" title=\"赋权\"></a>赋权</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">提权</span></span><br><span class=\"line\">chmod +x minio</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"设置用户名，密码（临时）\"><a href=\"#设置用户名，密码（临时）\" class=\"headerlink\" title=\"设置用户名，密码（临时）\"></a>设置用户名，密码（临时）</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">旧版使用 MINIO_ACCESS_KEY MINIO_SECRET_KEY，</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">新版 配置用户名密码</span></span><br><span class=\"line\">export MINIO_ROOT_USER=minioadmin</span><br><span class=\"line\">export MINIO_ROOT_PASSWORD=yourpassword</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">查看环境变量</span></span><br><span class=\"line\">echo $MINIO_ROOT_USER</span><br><span class=\"line\">echo $MINIO_ROOT_PASSWORD</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"创建存储目录及日志文件\"><a href=\"#创建存储目录及日志文件\" class=\"headerlink\" title=\"创建存储目录及日志文件\"></a>创建存储目录及日志文件</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">创建存储目录</span></span><br><span class=\"line\">mkdir -p  /opt/minio/data</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">进入</span></span><br><span class=\"line\">cd /opt/minio</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">创建日志文件</span></span><br><span class=\"line\">touch minio.log</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"3-后台启动\"><a href=\"#3-后台启动\" class=\"headerlink\" title=\"3. 后台启动\"></a>3. 后台启动</h1><h2 id=\"进入执行文件目录\"><a href=\"#进入执行文件目录\" class=\"headerlink\" title=\"进入执行文件目录\"></a>进入执行文件目录</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nohup /home/minio/minio server --address :9800 --console-address :9889 /home/minio/data &gt;/home/minio/minio.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"> #</span><span class=\"language-bash\">备注：</span></span><br><span class=\"line\"></span><br><span class=\"line\">nohup：后台启动  </span><br><span class=\"line\">./minio server：启动命令   </span><br><span class=\"line\">--address :9800：指定API端口   </span><br><span class=\"line\">--console-address :9889：指定控制台端口  </span><br><span class=\"line\">/opt/minio/data：指定存储目录  </span><br><span class=\"line\"><span class=\"meta prompt_\">&gt;</span><span class=\"language-bash\">/opt/minio/minio.log 2&gt;&amp;1 ：控制台日志重定向到/opt/minio/minio.log文件中</span>  </span><br><span class=\"line\">&amp;：后台运行</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"4-注册成服务\"><a href=\"#4-注册成服务\" class=\"headerlink\" title=\"4. 注册成服务\"></a>4. 注册成服务</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">切换文件目录</span></span><br><span class=\"line\">cd /opt/minio/</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">创建目录</span></span><br><span class=\"line\">mkdir conf</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">创建配置文件</span></span><br><span class=\"line\">vim  conf/minio.conf</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"编辑文件minio-conf\"><a href=\"#编辑文件minio-conf\" class=\"headerlink\" title=\"编辑文件minio.conf\"></a>编辑文件minio.conf</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">数据存放目录</span></span><br><span class=\"line\">MINIO_VOLUMES=&quot;/opt/minio/data&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">端口号设置</span></span><br><span class=\"line\">MINIO_OPTS=&quot;--console-address :9000 --address :9001&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">MINIO_ROOT_USER=<span class=\"string\">&quot;minioadmin&quot;</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">MINIO_ROOT_PASSWORD=<span class=\"string\">&quot;minioadmin&quot;</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">用户名</span></span><br><span class=\"line\">MINIO_ROOT_USER=&quot;minio&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">密码</span></span><br><span class=\"line\">MINIO_ROOT_PASSWORD=&quot;minioAa123&quot;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"创建服务minio-service\"><a href=\"#创建服务minio-service\" class=\"headerlink\" title=\"创建服务minio.service\"></a>创建服务minio.service</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /usr/lib/systemd/system/minio.service </span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">minio配置文件</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=MinIO</span><br><span class=\"line\">Documentation=https://docs.min.io</span><br><span class=\"line\">Wants=network-online.target</span><br><span class=\"line\">After=network-online.target</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">minio文件具体位置</span></span><br><span class=\"line\">AssertFileIsExecutable=/opt/minio/minio</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">WorkingDirectory=/opt/minio/data</span><br><span class=\"line\"></span><br><span class=\"line\">User=root</span><br><span class=\"line\">Group=root</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">创建的配置文件 minio.conf</span></span><br><span class=\"line\">EnvironmentFile=/opt/minio/conf/minio.conf</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">ExecStartPre=/bin/bash -c <span class=\"string\">&quot;[ -n \\&quot;<span class=\"variable\">$&#123;MINIO_VOLUMES&#125;</span>\\&quot; ] || echo \\&quot;Variable MINIO_VOLUMES not set in /usr/local/minio/conf/minio.conf\\&quot;&quot;</span></span></span><br><span class=\"line\">ExecStart=/opt/minio/minio server --console-address :9000 --address :9001</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"variable\">$MINIO_OPTS</span> <span class=\"variable\">$MINIO_VOLUMES</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Let systemd restart this service always</span></span><br><span class=\"line\">Restart=always</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Specifies the maximum file descriptor number that can be opened by this process</span></span><br><span class=\"line\">LimitNOFILE=65536</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Disable <span class=\"built_in\">timeout</span> logic and <span class=\"built_in\">wait</span> <span class=\"keyword\">until</span> process is stopped</span></span><br><span class=\"line\">TimeoutStopSec=infinity</span><br><span class=\"line\">SendSIGKILL=no</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"启动服务\"><a href=\"#启动服务\" class=\"headerlink\" title=\"启动服务\"></a>启动服务</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">将服务设置为每次开机启动</span></span><br><span class=\"line\">systemctl enable minio.service</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">重新加载某个服务的配置文件，如果新安装了一个服务，归属于 systemctl 管理，要是新服务的服务程序配置文件生效，需重新加载</span></span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">启动服务</span></span><br><span class=\"line\">systemctl start minio</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">停止服务</span></span><br><span class=\"line\">systemctl stop minio</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">重启服务</span></span><br><span class=\"line\">systemctl restrat minio</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">查看服务状态</span></span><br><span class=\"line\">systemctl status minio.service</span><br></pre></td></tr></table></figure>\n\n","cover_type":"img","excerpt":"","more":"<h1 id=\"1-准备安装目录和文件\"><a href=\"#1-准备安装目录和文件\" class=\"headerlink\" title=\"1. 准备安装目录和文件\"></a>1. 准备安装目录和文件</h1><blockquote>\n<p>安装目录：&#x2F;opt&#x2F;minio</p>\n</blockquote>\n<ol>\n<li><p>创建目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /opt/minio</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>下载文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://dl.min.io/server/minio/release/linux-amd64/minio</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h1 id=\"2-安装\"><a href=\"#2-安装\" class=\"headerlink\" title=\"2. 安装\"></a>2. 安装</h1><h2 id=\"赋权\"><a href=\"#赋权\" class=\"headerlink\" title=\"赋权\"></a>赋权</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">提权</span></span><br><span class=\"line\">chmod +x minio</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"设置用户名，密码（临时）\"><a href=\"#设置用户名，密码（临时）\" class=\"headerlink\" title=\"设置用户名，密码（临时）\"></a>设置用户名，密码（临时）</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">旧版使用 MINIO_ACCESS_KEY MINIO_SECRET_KEY，</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">新版 配置用户名密码</span></span><br><span class=\"line\">export MINIO_ROOT_USER=minioadmin</span><br><span class=\"line\">export MINIO_ROOT_PASSWORD=yourpassword</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">查看环境变量</span></span><br><span class=\"line\">echo $MINIO_ROOT_USER</span><br><span class=\"line\">echo $MINIO_ROOT_PASSWORD</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"创建存储目录及日志文件\"><a href=\"#创建存储目录及日志文件\" class=\"headerlink\" title=\"创建存储目录及日志文件\"></a>创建存储目录及日志文件</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">创建存储目录</span></span><br><span class=\"line\">mkdir -p  /opt/minio/data</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">进入</span></span><br><span class=\"line\">cd /opt/minio</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">创建日志文件</span></span><br><span class=\"line\">touch minio.log</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"3-后台启动\"><a href=\"#3-后台启动\" class=\"headerlink\" title=\"3. 后台启动\"></a>3. 后台启动</h1><h2 id=\"进入执行文件目录\"><a href=\"#进入执行文件目录\" class=\"headerlink\" title=\"进入执行文件目录\"></a>进入执行文件目录</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nohup /home/minio/minio server --address :9800 --console-address :9889 /home/minio/data &gt;/home/minio/minio.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"> #</span><span class=\"language-bash\">备注：</span></span><br><span class=\"line\"></span><br><span class=\"line\">nohup：后台启动  </span><br><span class=\"line\">./minio server：启动命令   </span><br><span class=\"line\">--address :9800：指定API端口   </span><br><span class=\"line\">--console-address :9889：指定控制台端口  </span><br><span class=\"line\">/opt/minio/data：指定存储目录  </span><br><span class=\"line\"><span class=\"meta prompt_\">&gt;</span><span class=\"language-bash\">/opt/minio/minio.log 2&gt;&amp;1 ：控制台日志重定向到/opt/minio/minio.log文件中</span>  </span><br><span class=\"line\">&amp;：后台运行</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"4-注册成服务\"><a href=\"#4-注册成服务\" class=\"headerlink\" title=\"4. 注册成服务\"></a>4. 注册成服务</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">切换文件目录</span></span><br><span class=\"line\">cd /opt/minio/</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">创建目录</span></span><br><span class=\"line\">mkdir conf</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">创建配置文件</span></span><br><span class=\"line\">vim  conf/minio.conf</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"编辑文件minio-conf\"><a href=\"#编辑文件minio-conf\" class=\"headerlink\" title=\"编辑文件minio.conf\"></a>编辑文件minio.conf</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">数据存放目录</span></span><br><span class=\"line\">MINIO_VOLUMES=&quot;/opt/minio/data&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">端口号设置</span></span><br><span class=\"line\">MINIO_OPTS=&quot;--console-address :9000 --address :9001&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">MINIO_ROOT_USER=<span class=\"string\">&quot;minioadmin&quot;</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">MINIO_ROOT_PASSWORD=<span class=\"string\">&quot;minioadmin&quot;</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">用户名</span></span><br><span class=\"line\">MINIO_ROOT_USER=&quot;minio&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">密码</span></span><br><span class=\"line\">MINIO_ROOT_PASSWORD=&quot;minioAa123&quot;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"创建服务minio-service\"><a href=\"#创建服务minio-service\" class=\"headerlink\" title=\"创建服务minio.service\"></a>创建服务minio.service</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /usr/lib/systemd/system/minio.service </span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">minio配置文件</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=MinIO</span><br><span class=\"line\">Documentation=https://docs.min.io</span><br><span class=\"line\">Wants=network-online.target</span><br><span class=\"line\">After=network-online.target</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">minio文件具体位置</span></span><br><span class=\"line\">AssertFileIsExecutable=/opt/minio/minio</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">WorkingDirectory=/opt/minio/data</span><br><span class=\"line\"></span><br><span class=\"line\">User=root</span><br><span class=\"line\">Group=root</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">创建的配置文件 minio.conf</span></span><br><span class=\"line\">EnvironmentFile=/opt/minio/conf/minio.conf</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">ExecStartPre=/bin/bash -c <span class=\"string\">&quot;[ -n \\&quot;<span class=\"variable\">$&#123;MINIO_VOLUMES&#125;</span>\\&quot; ] || echo \\&quot;Variable MINIO_VOLUMES not set in /usr/local/minio/conf/minio.conf\\&quot;&quot;</span></span></span><br><span class=\"line\">ExecStart=/opt/minio/minio server --console-address :9000 --address :9001</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"variable\">$MINIO_OPTS</span> <span class=\"variable\">$MINIO_VOLUMES</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Let systemd restart this service always</span></span><br><span class=\"line\">Restart=always</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Specifies the maximum file descriptor number that can be opened by this process</span></span><br><span class=\"line\">LimitNOFILE=65536</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Disable <span class=\"built_in\">timeout</span> logic and <span class=\"built_in\">wait</span> <span class=\"keyword\">until</span> process is stopped</span></span><br><span class=\"line\">TimeoutStopSec=infinity</span><br><span class=\"line\">SendSIGKILL=no</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"启动服务\"><a href=\"#启动服务\" class=\"headerlink\" title=\"启动服务\"></a>启动服务</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">将服务设置为每次开机启动</span></span><br><span class=\"line\">systemctl enable minio.service</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">重新加载某个服务的配置文件，如果新安装了一个服务，归属于 systemctl 管理，要是新服务的服务程序配置文件生效，需重新加载</span></span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">启动服务</span></span><br><span class=\"line\">systemctl start minio</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">停止服务</span></span><br><span class=\"line\">systemctl stop minio</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">重启服务</span></span><br><span class=\"line\">systemctl restrat minio</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">查看服务状态</span></span><br><span class=\"line\">systemctl status minio.service</span><br></pre></td></tr></table></figure>\n\n"},{"title":"Centos 安装 Nginx","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/7e313846627cc3037fd39f0dcd506c42.png","main_color":"#269539","abbrlink":"c7c5","date":"2024-10-14T16:18:00.000Z","_content":"# 安装Nginx\n\n# 安装Nginx\n\n配置nginx源\n\n```shell\n# 执行如下命令\nrpm -ivh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\n```\n\n执行以下命令开始安装\n\n```shell\nyum install -y nginx\n\n# 启动nginx\nsystemctl start nginx\n# nginx开机自启动\nsystemctl enable nginx\n```\n\n# Nginx配置文件\n\n## 一般配置\n\n```config\n\nserver {\n    listen       7000;\n    server_name  localhost;\n\n\tlocation / {\n        root   /opt/hf-gps/html; # 路径\n        index  index.html index.htm;\n        try_files $uri $uri/ /index.html;\n        index index.html;\n    }\n\n\t# 反向代理\n    location /api {\n       proxy_set_header Host $http_host;\n       proxy_set_header X-Real-IP $remote_addr;\n       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n       proxy_pass http://127.0.0.1:60000;\n    }\n}\n\n```\n\n## SSL配置\n\n```config\n\nserver {\n\t\n\tlisten 10003 ;\n    server_name  js.wxlxhf.com;\n    listen 10004 ssl;\n    \n    ssl_certificate    /opt/cert/js.wxlxhf.com.pem;\n    ssl_certificate_key    /opt/cert/js.wxlxhf.com.key;\n    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;\n    ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;\n    ssl_prefer_server_ciphers on;\n    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 10m;\n    add_header Strict-Transport-Security \"max-age=31536000\";\n    error_page 497  https://$host$request_uri;    \n\n    # 管理-路由\n    location / {\n        root   /opt/hf-gps/html;\n        index  index.html index.htm;\n        try_files $uri $uri/ /index.html;\n        index index.html;\n    }\n    # 后台地址\n    location /prod-api/ {\n       proxy_set_header Host $http_host;\n       proxy_set_header X-Real-IP $remote_addr;\n       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n       proxy_pass  http://127.0.0.1:7001/ ;\n    }\n   \n}\n\n```\n\n## 转发服务\n\n### 添加stream模块\n\n查看是否添加该模块\n\n```javascript\nnginx -V\n```\n\n搜索是否包含`--with-stream`,如果包含则已添加过此模块。\n\n如果没有需要编译添加\n\n```javascript\n./configure  --prefix=/etc/nginx --with-stream\nmake && make install\n```\n\n注意\n\n> `--prefix=/etc/nginx` 是nginx的执行文件位置，根据自己的服务器的实际情况配置。\n\n### 转发TCP(Mysql)配置\n\n假如Nginx的公网IP为`110.119.120.121`,Mysql所在的同一个内网的内网IP为`192.168.1.20`\n\n~~~ini\n#stream配置\nstream {\n    server {\n       listen 13306; \n       proxy_connect_timeout 1s;\n       proxy_timeout 3s;\n       proxy_pass 192.168.1.20:3306;    \n    }\n}\n\nhttp {\n}\n~~~\n\n这样我们就能通过`110.119.120.121:13306`访问到Mysql服务了。\n\n注意\n\n> 1. stream配置项和http同级。\n> 2. 不支持不同域名转发不同Mysql的功能。\n\n这样做的好处\n\n- 避免数据库服务器直接暴漏在公网\n- 方便数据库秒级切换\n\n### UDP负载均衡\n\n下面就是UDP负载均衡的示例\n\n```ini\n#user  nobody;\nworker_processes  1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\n\nevents {\n    worker_connections  1024;\n}\n\nstream {\n    upstream dns {\n       server 192.168.111.99:10086;\n       server 192.168.111.100:10086;\n    }\n\n    server {\n        listen 192.168.111.98:10086 udp;\n        proxy_responses 1;\n        proxy_timeout 20s;\n        proxy_bind $server_addr:$remote_port;\n        proxy_pass dns;\n    }\n}\n```\n","source":"_posts/服务器/Centos/Centos安装nginx.md","raw":"---\ntitle: Centos 安装 Nginx\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/7e313846627cc3037fd39f0dcd506c42.png\nmain_color: '#269539'\ntags:\n  - Nginx\n  - Centos\n  - 食用教程\nabbrlink: c7c5\ndate: 2024-10-15 00:18:00\n---\n# 安装Nginx\n\n# 安装Nginx\n\n配置nginx源\n\n```shell\n# 执行如下命令\nrpm -ivh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\n```\n\n执行以下命令开始安装\n\n```shell\nyum install -y nginx\n\n# 启动nginx\nsystemctl start nginx\n# nginx开机自启动\nsystemctl enable nginx\n```\n\n# Nginx配置文件\n\n## 一般配置\n\n```config\n\nserver {\n    listen       7000;\n    server_name  localhost;\n\n\tlocation / {\n        root   /opt/hf-gps/html; # 路径\n        index  index.html index.htm;\n        try_files $uri $uri/ /index.html;\n        index index.html;\n    }\n\n\t# 反向代理\n    location /api {\n       proxy_set_header Host $http_host;\n       proxy_set_header X-Real-IP $remote_addr;\n       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n       proxy_pass http://127.0.0.1:60000;\n    }\n}\n\n```\n\n## SSL配置\n\n```config\n\nserver {\n\t\n\tlisten 10003 ;\n    server_name  js.wxlxhf.com;\n    listen 10004 ssl;\n    \n    ssl_certificate    /opt/cert/js.wxlxhf.com.pem;\n    ssl_certificate_key    /opt/cert/js.wxlxhf.com.key;\n    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;\n    ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;\n    ssl_prefer_server_ciphers on;\n    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 10m;\n    add_header Strict-Transport-Security \"max-age=31536000\";\n    error_page 497  https://$host$request_uri;    \n\n    # 管理-路由\n    location / {\n        root   /opt/hf-gps/html;\n        index  index.html index.htm;\n        try_files $uri $uri/ /index.html;\n        index index.html;\n    }\n    # 后台地址\n    location /prod-api/ {\n       proxy_set_header Host $http_host;\n       proxy_set_header X-Real-IP $remote_addr;\n       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n       proxy_pass  http://127.0.0.1:7001/ ;\n    }\n   \n}\n\n```\n\n## 转发服务\n\n### 添加stream模块\n\n查看是否添加该模块\n\n```javascript\nnginx -V\n```\n\n搜索是否包含`--with-stream`,如果包含则已添加过此模块。\n\n如果没有需要编译添加\n\n```javascript\n./configure  --prefix=/etc/nginx --with-stream\nmake && make install\n```\n\n注意\n\n> `--prefix=/etc/nginx` 是nginx的执行文件位置，根据自己的服务器的实际情况配置。\n\n### 转发TCP(Mysql)配置\n\n假如Nginx的公网IP为`110.119.120.121`,Mysql所在的同一个内网的内网IP为`192.168.1.20`\n\n~~~ini\n#stream配置\nstream {\n    server {\n       listen 13306; \n       proxy_connect_timeout 1s;\n       proxy_timeout 3s;\n       proxy_pass 192.168.1.20:3306;    \n    }\n}\n\nhttp {\n}\n~~~\n\n这样我们就能通过`110.119.120.121:13306`访问到Mysql服务了。\n\n注意\n\n> 1. stream配置项和http同级。\n> 2. 不支持不同域名转发不同Mysql的功能。\n\n这样做的好处\n\n- 避免数据库服务器直接暴漏在公网\n- 方便数据库秒级切换\n\n### UDP负载均衡\n\n下面就是UDP负载均衡的示例\n\n```ini\n#user  nobody;\nworker_processes  1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\n\nevents {\n    worker_connections  1024;\n}\n\nstream {\n    upstream dns {\n       server 192.168.111.99:10086;\n       server 192.168.111.100:10086;\n    }\n\n    server {\n        listen 192.168.111.98:10086 udp;\n        proxy_responses 1;\n        proxy_timeout 20s;\n        proxy_bind $server_addr:$remote_port;\n        proxy_pass dns;\n    }\n}\n```\n","slug":"服务器/Centos/Centos安装nginx","published":1,"updated":"2025-06-02T07:24:39.496Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wf001jzcqb4jbtc74g","content":"<h1 id=\"安装Nginx\"><a href=\"#安装Nginx\" class=\"headerlink\" title=\"安装Nginx\"></a>安装Nginx</h1><h1 id=\"安装Nginx-1\"><a href=\"#安装Nginx-1\" class=\"headerlink\" title=\"安装Nginx\"></a>安装Nginx</h1><p>配置nginx源</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">执行如下命令</span></span><br><span class=\"line\">rpm -ivh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</span><br></pre></td></tr></table></figure>\n\n<p>执行以下命令开始安装</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y nginx</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动nginx</span></span><br><span class=\"line\">systemctl start nginx</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">nginx开机自启动</span></span><br><span class=\"line\">systemctl enable nginx</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Nginx配置文件\"><a href=\"#Nginx配置文件\" class=\"headerlink\" title=\"Nginx配置文件\"></a>Nginx配置文件</h1><h2 id=\"一般配置\"><a href=\"#一般配置\" class=\"headerlink\" title=\"一般配置\"></a>一般配置</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen       7000;</span><br><span class=\"line\">    server_name  localhost;</span><br><span class=\"line\"></span><br><span class=\"line\">\tlocation / &#123;</span><br><span class=\"line\">        root   /opt/hf-gps/html; # 路径</span><br><span class=\"line\">        index  index.html index.htm;</span><br><span class=\"line\">        try_files $uri $uri/ /index.html;</span><br><span class=\"line\">        index index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t# 反向代理</span><br><span class=\"line\">    location /api &#123;</span><br><span class=\"line\">       proxy_set_header Host $http_host;</span><br><span class=\"line\">       proxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">       proxy_pass http://127.0.0.1:60000;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SSL配置\"><a href=\"#SSL配置\" class=\"headerlink\" title=\"SSL配置\"></a>SSL配置</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tlisten 10003 ;</span><br><span class=\"line\">    server_name  js.wxlxhf.com;</span><br><span class=\"line\">    listen 10004 ssl;</span><br><span class=\"line\">    </span><br><span class=\"line\">    ssl_certificate    /opt/cert/js.wxlxhf.com.pem;</span><br><span class=\"line\">    ssl_certificate_key    /opt/cert/js.wxlxhf.com.key;</span><br><span class=\"line\">    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class=\"line\">    ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span><br><span class=\"line\">    ssl_prefer_server_ciphers on;</span><br><span class=\"line\">    ssl_session_cache shared:SSL:10m;</span><br><span class=\"line\">    ssl_session_timeout 10m;</span><br><span class=\"line\">    add_header Strict-Transport-Security &quot;max-age=31536000&quot;;</span><br><span class=\"line\">    error_page 497  https://$host$request_uri;    </span><br><span class=\"line\"></span><br><span class=\"line\">    # 管理-路由</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        root   /opt/hf-gps/html;</span><br><span class=\"line\">        index  index.html index.htm;</span><br><span class=\"line\">        try_files $uri $uri/ /index.html;</span><br><span class=\"line\">        index index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    # 后台地址</span><br><span class=\"line\">    location /prod-api/ &#123;</span><br><span class=\"line\">       proxy_set_header Host $http_host;</span><br><span class=\"line\">       proxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">       proxy_pass  http://127.0.0.1:7001/ ;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"转发服务\"><a href=\"#转发服务\" class=\"headerlink\" title=\"转发服务\"></a>转发服务</h2><h3 id=\"添加stream模块\"><a href=\"#添加stream模块\" class=\"headerlink\" title=\"添加stream模块\"></a>添加stream模块</h3><p>查看是否添加该模块</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx -V</span><br></pre></td></tr></table></figure>\n\n<p>搜索是否包含<code>--with-stream</code>,如果包含则已添加过此模块。</p>\n<p>如果没有需要编译添加</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure  --prefix=<span class=\"regexp\">/etc/</span>nginx --<span class=\"keyword\">with</span>-stream</span><br><span class=\"line\">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>\n\n<p>注意</p>\n<blockquote>\n<p><code>--prefix=/etc/nginx</code> 是nginx的执行文件位置，根据自己的服务器的实际情况配置。</p>\n</blockquote>\n<h3 id=\"转发TCP-Mysql-配置\"><a href=\"#转发TCP-Mysql-配置\" class=\"headerlink\" title=\"转发TCP(Mysql)配置\"></a>转发TCP(Mysql)配置</h3><p>假如Nginx的公网IP为<code>110.119.120.121</code>,Mysql所在的同一个内网的内网IP为<code>192.168.1.20</code></p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#stream配置</span></span><br><span class=\"line\">stream &#123;</span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">       listen 13306<span class=\"comment\">; </span></span><br><span class=\"line\">       proxy_connect_timeout 1s<span class=\"comment\">;</span></span><br><span class=\"line\">       proxy_timeout 3s<span class=\"comment\">;</span></span><br><span class=\"line\">       proxy_pass 192.168.1.20:3306<span class=\"comment\">;    </span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">http &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这样我们就能通过<code>110.119.120.121:13306</code>访问到Mysql服务了。</p>\n<p>注意</p>\n<blockquote>\n<ol>\n<li>stream配置项和http同级。</li>\n<li>不支持不同域名转发不同Mysql的功能。</li>\n</ol>\n</blockquote>\n<p>这样做的好处</p>\n<ul>\n<li>避免数据库服务器直接暴漏在公网</li>\n<li>方便数据库秒级切换</li>\n</ul>\n<h3 id=\"UDP负载均衡\"><a href=\"#UDP负载均衡\" class=\"headerlink\" title=\"UDP负载均衡\"></a>UDP负载均衡</h3><p>下面就是UDP负载均衡的示例</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#user  nobody;</span></span><br><span class=\"line\">worker_processes  1<span class=\"comment\">;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#error_log  logs/error.log;</span></span><br><span class=\"line\"><span class=\"comment\">#error_log  logs/error.log  notice;</span></span><br><span class=\"line\"><span class=\"comment\">#error_log  logs/error.log  info;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#pid        logs/nginx.pid;</span></span><br><span class=\"line\"></span><br><span class=\"line\">events &#123;</span><br><span class=\"line\">    worker_connections  1024<span class=\"comment\">;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">stream &#123;</span><br><span class=\"line\">    upstream dns &#123;</span><br><span class=\"line\">       server 192.168.111.99:10086<span class=\"comment\">;</span></span><br><span class=\"line\">       server 192.168.111.100:10086<span class=\"comment\">;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen 192.168.111.98:10086 udp<span class=\"comment\">;</span></span><br><span class=\"line\">        proxy_responses 1<span class=\"comment\">;</span></span><br><span class=\"line\">        proxy_timeout 20s<span class=\"comment\">;</span></span><br><span class=\"line\">        proxy_bind $server_addr:$remote_port<span class=\"comment\">;</span></span><br><span class=\"line\">        proxy_pass dns<span class=\"comment\">;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","cover_type":"img","excerpt":"","more":"<h1 id=\"安装Nginx\"><a href=\"#安装Nginx\" class=\"headerlink\" title=\"安装Nginx\"></a>安装Nginx</h1><h1 id=\"安装Nginx-1\"><a href=\"#安装Nginx-1\" class=\"headerlink\" title=\"安装Nginx\"></a>安装Nginx</h1><p>配置nginx源</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">执行如下命令</span></span><br><span class=\"line\">rpm -ivh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</span><br></pre></td></tr></table></figure>\n\n<p>执行以下命令开始安装</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y nginx</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动nginx</span></span><br><span class=\"line\">systemctl start nginx</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">nginx开机自启动</span></span><br><span class=\"line\">systemctl enable nginx</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Nginx配置文件\"><a href=\"#Nginx配置文件\" class=\"headerlink\" title=\"Nginx配置文件\"></a>Nginx配置文件</h1><h2 id=\"一般配置\"><a href=\"#一般配置\" class=\"headerlink\" title=\"一般配置\"></a>一般配置</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen       7000;</span><br><span class=\"line\">    server_name  localhost;</span><br><span class=\"line\"></span><br><span class=\"line\">\tlocation / &#123;</span><br><span class=\"line\">        root   /opt/hf-gps/html; # 路径</span><br><span class=\"line\">        index  index.html index.htm;</span><br><span class=\"line\">        try_files $uri $uri/ /index.html;</span><br><span class=\"line\">        index index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t# 反向代理</span><br><span class=\"line\">    location /api &#123;</span><br><span class=\"line\">       proxy_set_header Host $http_host;</span><br><span class=\"line\">       proxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">       proxy_pass http://127.0.0.1:60000;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SSL配置\"><a href=\"#SSL配置\" class=\"headerlink\" title=\"SSL配置\"></a>SSL配置</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tlisten 10003 ;</span><br><span class=\"line\">    server_name  js.wxlxhf.com;</span><br><span class=\"line\">    listen 10004 ssl;</span><br><span class=\"line\">    </span><br><span class=\"line\">    ssl_certificate    /opt/cert/js.wxlxhf.com.pem;</span><br><span class=\"line\">    ssl_certificate_key    /opt/cert/js.wxlxhf.com.key;</span><br><span class=\"line\">    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class=\"line\">    ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span><br><span class=\"line\">    ssl_prefer_server_ciphers on;</span><br><span class=\"line\">    ssl_session_cache shared:SSL:10m;</span><br><span class=\"line\">    ssl_session_timeout 10m;</span><br><span class=\"line\">    add_header Strict-Transport-Security &quot;max-age=31536000&quot;;</span><br><span class=\"line\">    error_page 497  https://$host$request_uri;    </span><br><span class=\"line\"></span><br><span class=\"line\">    # 管理-路由</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        root   /opt/hf-gps/html;</span><br><span class=\"line\">        index  index.html index.htm;</span><br><span class=\"line\">        try_files $uri $uri/ /index.html;</span><br><span class=\"line\">        index index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    # 后台地址</span><br><span class=\"line\">    location /prod-api/ &#123;</span><br><span class=\"line\">       proxy_set_header Host $http_host;</span><br><span class=\"line\">       proxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">       proxy_pass  http://127.0.0.1:7001/ ;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"转发服务\"><a href=\"#转发服务\" class=\"headerlink\" title=\"转发服务\"></a>转发服务</h2><h3 id=\"添加stream模块\"><a href=\"#添加stream模块\" class=\"headerlink\" title=\"添加stream模块\"></a>添加stream模块</h3><p>查看是否添加该模块</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx -V</span><br></pre></td></tr></table></figure>\n\n<p>搜索是否包含<code>--with-stream</code>,如果包含则已添加过此模块。</p>\n<p>如果没有需要编译添加</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure  --prefix=<span class=\"regexp\">/etc/</span>nginx --<span class=\"keyword\">with</span>-stream</span><br><span class=\"line\">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>\n\n<p>注意</p>\n<blockquote>\n<p><code>--prefix=/etc/nginx</code> 是nginx的执行文件位置，根据自己的服务器的实际情况配置。</p>\n</blockquote>\n<h3 id=\"转发TCP-Mysql-配置\"><a href=\"#转发TCP-Mysql-配置\" class=\"headerlink\" title=\"转发TCP(Mysql)配置\"></a>转发TCP(Mysql)配置</h3><p>假如Nginx的公网IP为<code>110.119.120.121</code>,Mysql所在的同一个内网的内网IP为<code>192.168.1.20</code></p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#stream配置</span></span><br><span class=\"line\">stream &#123;</span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">       listen 13306<span class=\"comment\">; </span></span><br><span class=\"line\">       proxy_connect_timeout 1s<span class=\"comment\">;</span></span><br><span class=\"line\">       proxy_timeout 3s<span class=\"comment\">;</span></span><br><span class=\"line\">       proxy_pass 192.168.1.20:3306<span class=\"comment\">;    </span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">http &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这样我们就能通过<code>110.119.120.121:13306</code>访问到Mysql服务了。</p>\n<p>注意</p>\n<blockquote>\n<ol>\n<li>stream配置项和http同级。</li>\n<li>不支持不同域名转发不同Mysql的功能。</li>\n</ol>\n</blockquote>\n<p>这样做的好处</p>\n<ul>\n<li>避免数据库服务器直接暴漏在公网</li>\n<li>方便数据库秒级切换</li>\n</ul>\n<h3 id=\"UDP负载均衡\"><a href=\"#UDP负载均衡\" class=\"headerlink\" title=\"UDP负载均衡\"></a>UDP负载均衡</h3><p>下面就是UDP负载均衡的示例</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#user  nobody;</span></span><br><span class=\"line\">worker_processes  1<span class=\"comment\">;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#error_log  logs/error.log;</span></span><br><span class=\"line\"><span class=\"comment\">#error_log  logs/error.log  notice;</span></span><br><span class=\"line\"><span class=\"comment\">#error_log  logs/error.log  info;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#pid        logs/nginx.pid;</span></span><br><span class=\"line\"></span><br><span class=\"line\">events &#123;</span><br><span class=\"line\">    worker_connections  1024<span class=\"comment\">;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">stream &#123;</span><br><span class=\"line\">    upstream dns &#123;</span><br><span class=\"line\">       server 192.168.111.99:10086<span class=\"comment\">;</span></span><br><span class=\"line\">       server 192.168.111.100:10086<span class=\"comment\">;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen 192.168.111.98:10086 udp<span class=\"comment\">;</span></span><br><span class=\"line\">        proxy_responses 1<span class=\"comment\">;</span></span><br><span class=\"line\">        proxy_timeout 20s<span class=\"comment\">;</span></span><br><span class=\"line\">        proxy_bind $server_addr:$remote_port<span class=\"comment\">;</span></span><br><span class=\"line\">        proxy_pass dns<span class=\"comment\">;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"Centos 安装 Redis","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/080ee82692de805283a33e3e1e1db7b4.png","main_color":"#A42122","abbrlink":"89c7","date":"2023-10-14T16:09:00.000Z","_content":"\n# 一、下载并解压Redis\n\n## 1. 切换到/data目录\n\n```\ncd /data\n```\n\n## 2. 执行下面的命令下载redis：\n\n```\nwget https://download.redis.io/releases/redis-6.2.6.tar.gz\n```\n\n![image-20220413114109560](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008772.png)\n\n## 3. 解压redis：\n\n```\ntar xzf redis-6.2.6.tar.gz\n```\n\n![image-20220413114133942](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008280.png)\n\n## 4. 移动redis目录，一般都会将redis目录放置到 /usr/local/redis目录：\n\n```\nmv redis-6.2.6 /usr/local/redis\n```\n\n# 二、编译并安装redis\n\n## 1. 进入redis安装目录，执行make命令编译redis：\n\n```\ncd /usr/local/redis\nmake\n```\n\n等待make命令执行完成即可\n\n==如果执行make命令报错==：cc 未找到命令，原因是虚拟机系统中缺少gcc，执行下面命令安装gcc：\n\n![image-20220413114309585](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008882.png)\n\n```\nyum -y install gcc automake autoconf libtool make\n```\n\n如果执行make命令报错：致命错误:jemalloc/jemalloc.h: 没有那个文件或目录，则需要在make指定分配器为libc。执行下面命令即可正常编译：\n\n![image-20220413114421767](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009687.png)\n\n```\nmake MALLOC=libc\n```\n\nmake命令执行完，redis就编译完成了。\n\n![image-20220413114806660](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009006.png)\n\n## 2. 执行下面命令安装redis，并指定安装目录\n\n```\nmake install PREFIX=/usr/local/redis\n```\n\n![image-20220413114915652](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009217.png)\n\n至此，redis即安装成功。\n\n# 三、启动Redis\n\n## 1. 进入redis安装目录，执行下面命令启动redis服务\n\n```\n./bin/redis-server redis.conf\n```\n\n\n此时，可以看到redis服务被成功启动：\n\n![image-20220413115051561](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009483.png)\n\n但这种启动方式不能退出控制台，如果退出，那么redis服务也会停止。\n\n==Ctrl+C 停止运行==\n\n## 2. 修改redis密码\n\n进入到redis目录中\n\n```\ncd /usr/local/redis\n```\n\n修改**redis.conf**文件\n\n```\nvim redis.conf\n```\n\n找到第901行\n\n![image-20220413120210330](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009058.png)\n\n把前面的#去掉 后面改成root\n\n![image-20220413120236518](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009003.png)\n\n**i** 键插入 修改   :**wq** 保存并退出   **:q!**强行退出\n\n## 3. 外部访问redis\n\n进入到redis目录中\n\n   ~~~\n   cd /usr/local/redis\n   ~~~\n\n   修改**redis.conf**文件\n\n   ~~~\n   vim redis.conf\n   ~~~\n\n找到第75行\n\n![image-20220413115537944](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072010828.png)\n\n改成这个\n\n![image-20220413121539670](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011397.png)\n\n==**i** 键插入 修改   :**wq** 保存并退出   **:q!**强行退出==\n\n开放端口\n\n~~~\nfirewall-cmd --zone=public --add-port=6379/tcp --permanent\nfirewall-cmd --add-port=6379/tcp\nfirewall-cmd --reload\n~~~\n\n\n\n\n![image-20220413121605754](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009035.png)\n\n\n## 4. Redis以后台方式运行\n\n进入到redis目录中\n\n```\ncd /usr/local/redis\n```\n\n修改**redis.conf**文件\n\n```\nvim redis.conf\n```\n\n找到第257行\n\n![image-20220413120019384](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009137.png)\n\nno改成yes\n\n![image-20220413120035867](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009247.png)\n\n**i** 键插入 修改   :**wq** 保存并退出   **:q!**强行退出\n\n## 5. 通过下面命令查看redis进程，可以发现redis服务已经被启动了：\n\n```\nps -ef | grep redis\n```\n\n![image-20220413142112828](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009180.png)\n\n## 6. 通过redis-cli测试redis是否可用，在redis安装目录执行下面命令：\n\n```\n./bin/redis-cli\n```\n\n![image-20220413121640174](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009617.png)\n\n致辞 redis安装完成\n\n# 四、开机自启动\n\n通过编辑脚本来实现开机自启。\n\n## 1. 首先，新建一个系统服务文件：\n\n```\nvim /etc/systemd/system/redis.service\n```\n\n![image-20220413141401537](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009024.png)\n\n内容如下：\n\n```\n[Unit]\nDescription=redis-server\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/redis.conf\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n```\n\n## 2. 然后重载系统服务：\n\n```\nsystemctl daemon-reload\n```\n\n## 3. 然后我们可以使用下面的命令对Redis进行一系列操作：\n\n```\n# 启动\nsystemctl start redis\n# 停止\nsystemctl stop redis\n# 重启\nsystemctl restart redis\n# 查看状态\nsystemctl status redis\n```\n\n![image-20220413142412155](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009401.png)\n\n## 4. 执行下面的命令，可以让redis开机自启：\n\n```\nsystemctl enable redis\n```\n\n![image-20220413142444684](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009817.png)\n\n## 5. 开机后执行下面命令可以看到Redis开机自启\n\n```\nps -ef | grep redis\n```\n\n![image-20220413142518407](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009165.png)\n\n**总结**：这个方法适合有需要使用Redis频率高的场景，如果对系统性能有要求则不适用，因为后台运行需要消耗部分内存。\n","source":"_posts/服务器/Centos/Centos安装Redis.md","raw":"---\ntitle: Centos 安装 Redis\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/080ee82692de805283a33e3e1e1db7b4.png\nmain_color: '#A42122'\ntags:\n  - Redis\n  - Centos\n  - 食用教程\nabbrlink: 89c7\ndate: 2023-10-15 00:09:00\n---\n\n# 一、下载并解压Redis\n\n## 1. 切换到/data目录\n\n```\ncd /data\n```\n\n## 2. 执行下面的命令下载redis：\n\n```\nwget https://download.redis.io/releases/redis-6.2.6.tar.gz\n```\n\n![image-20220413114109560](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008772.png)\n\n## 3. 解压redis：\n\n```\ntar xzf redis-6.2.6.tar.gz\n```\n\n![image-20220413114133942](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008280.png)\n\n## 4. 移动redis目录，一般都会将redis目录放置到 /usr/local/redis目录：\n\n```\nmv redis-6.2.6 /usr/local/redis\n```\n\n# 二、编译并安装redis\n\n## 1. 进入redis安装目录，执行make命令编译redis：\n\n```\ncd /usr/local/redis\nmake\n```\n\n等待make命令执行完成即可\n\n==如果执行make命令报错==：cc 未找到命令，原因是虚拟机系统中缺少gcc，执行下面命令安装gcc：\n\n![image-20220413114309585](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008882.png)\n\n```\nyum -y install gcc automake autoconf libtool make\n```\n\n如果执行make命令报错：致命错误:jemalloc/jemalloc.h: 没有那个文件或目录，则需要在make指定分配器为libc。执行下面命令即可正常编译：\n\n![image-20220413114421767](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009687.png)\n\n```\nmake MALLOC=libc\n```\n\nmake命令执行完，redis就编译完成了。\n\n![image-20220413114806660](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009006.png)\n\n## 2. 执行下面命令安装redis，并指定安装目录\n\n```\nmake install PREFIX=/usr/local/redis\n```\n\n![image-20220413114915652](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009217.png)\n\n至此，redis即安装成功。\n\n# 三、启动Redis\n\n## 1. 进入redis安装目录，执行下面命令启动redis服务\n\n```\n./bin/redis-server redis.conf\n```\n\n\n此时，可以看到redis服务被成功启动：\n\n![image-20220413115051561](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009483.png)\n\n但这种启动方式不能退出控制台，如果退出，那么redis服务也会停止。\n\n==Ctrl+C 停止运行==\n\n## 2. 修改redis密码\n\n进入到redis目录中\n\n```\ncd /usr/local/redis\n```\n\n修改**redis.conf**文件\n\n```\nvim redis.conf\n```\n\n找到第901行\n\n![image-20220413120210330](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009058.png)\n\n把前面的#去掉 后面改成root\n\n![image-20220413120236518](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009003.png)\n\n**i** 键插入 修改   :**wq** 保存并退出   **:q!**强行退出\n\n## 3. 外部访问redis\n\n进入到redis目录中\n\n   ~~~\n   cd /usr/local/redis\n   ~~~\n\n   修改**redis.conf**文件\n\n   ~~~\n   vim redis.conf\n   ~~~\n\n找到第75行\n\n![image-20220413115537944](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072010828.png)\n\n改成这个\n\n![image-20220413121539670](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011397.png)\n\n==**i** 键插入 修改   :**wq** 保存并退出   **:q!**强行退出==\n\n开放端口\n\n~~~\nfirewall-cmd --zone=public --add-port=6379/tcp --permanent\nfirewall-cmd --add-port=6379/tcp\nfirewall-cmd --reload\n~~~\n\n\n\n\n![image-20220413121605754](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009035.png)\n\n\n## 4. Redis以后台方式运行\n\n进入到redis目录中\n\n```\ncd /usr/local/redis\n```\n\n修改**redis.conf**文件\n\n```\nvim redis.conf\n```\n\n找到第257行\n\n![image-20220413120019384](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009137.png)\n\nno改成yes\n\n![image-20220413120035867](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009247.png)\n\n**i** 键插入 修改   :**wq** 保存并退出   **:q!**强行退出\n\n## 5. 通过下面命令查看redis进程，可以发现redis服务已经被启动了：\n\n```\nps -ef | grep redis\n```\n\n![image-20220413142112828](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009180.png)\n\n## 6. 通过redis-cli测试redis是否可用，在redis安装目录执行下面命令：\n\n```\n./bin/redis-cli\n```\n\n![image-20220413121640174](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009617.png)\n\n致辞 redis安装完成\n\n# 四、开机自启动\n\n通过编辑脚本来实现开机自启。\n\n## 1. 首先，新建一个系统服务文件：\n\n```\nvim /etc/systemd/system/redis.service\n```\n\n![image-20220413141401537](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009024.png)\n\n内容如下：\n\n```\n[Unit]\nDescription=redis-server\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/redis.conf\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n```\n\n## 2. 然后重载系统服务：\n\n```\nsystemctl daemon-reload\n```\n\n## 3. 然后我们可以使用下面的命令对Redis进行一系列操作：\n\n```\n# 启动\nsystemctl start redis\n# 停止\nsystemctl stop redis\n# 重启\nsystemctl restart redis\n# 查看状态\nsystemctl status redis\n```\n\n![image-20220413142412155](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009401.png)\n\n## 4. 执行下面的命令，可以让redis开机自启：\n\n```\nsystemctl enable redis\n```\n\n![image-20220413142444684](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009817.png)\n\n## 5. 开机后执行下面命令可以看到Redis开机自启\n\n```\nps -ef | grep redis\n```\n\n![image-20220413142518407](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009165.png)\n\n**总结**：这个方法适合有需要使用Redis频率高的场景，如果对系统性能有要求则不适用，因为后台运行需要消耗部分内存。\n","slug":"服务器/Centos/Centos安装Redis","published":1,"updated":"2025-06-02T07:24:41.546Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wg001mzcqb18qu0dw1","content":"<h1 id=\"一、下载并解压Redis\"><a href=\"#一、下载并解压Redis\" class=\"headerlink\" title=\"一、下载并解压Redis\"></a>一、下载并解压Redis</h1><h2 id=\"1-切换到-data目录\"><a href=\"#1-切换到-data目录\" class=\"headerlink\" title=\"1. 切换到&#x2F;data目录\"></a>1. 切换到&#x2F;data目录</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /data</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-执行下面的命令下载redis：\"><a href=\"#2-执行下面的命令下载redis：\" class=\"headerlink\" title=\"2. 执行下面的命令下载redis：\"></a>2. 执行下面的命令下载redis：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://download.redis.io/releases/redis-6.2.6.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008772.png\" alt=\"image-20220413114109560\"></p>\n<h2 id=\"3-解压redis：\"><a href=\"#3-解压redis：\" class=\"headerlink\" title=\"3. 解压redis：\"></a>3. 解压redis：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xzf redis-6.2.6.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008280.png\" alt=\"image-20220413114133942\"></p>\n<h2 id=\"4-移动redis目录，一般都会将redis目录放置到-usr-local-redis目录：\"><a href=\"#4-移动redis目录，一般都会将redis目录放置到-usr-local-redis目录：\" class=\"headerlink\" title=\"4. 移动redis目录，一般都会将redis目录放置到 &#x2F;usr&#x2F;local&#x2F;redis目录：\"></a>4. 移动redis目录，一般都会将redis目录放置到 &#x2F;usr&#x2F;local&#x2F;redis目录：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv redis-6.2.6 /usr/local/redis</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"二、编译并安装redis\"><a href=\"#二、编译并安装redis\" class=\"headerlink\" title=\"二、编译并安装redis\"></a>二、编译并安装redis</h1><h2 id=\"1-进入redis安装目录，执行make命令编译redis：\"><a href=\"#1-进入redis安装目录，执行make命令编译redis：\" class=\"headerlink\" title=\"1. 进入redis安装目录，执行make命令编译redis：\"></a>1. 进入redis安装目录，执行make命令编译redis：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local/redis</span><br><span class=\"line\">make</span><br></pre></td></tr></table></figure>\n\n<p>等待make命令执行完成即可</p>\n<p>&#x3D;&#x3D;如果执行make命令报错&#x3D;&#x3D;：cc 未找到命令，原因是虚拟机系统中缺少gcc，执行下面命令安装gcc：</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008882.png\" alt=\"image-20220413114309585\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install gcc automake autoconf libtool make</span><br></pre></td></tr></table></figure>\n\n<p>如果执行make命令报错：致命错误:jemalloc&#x2F;jemalloc.h: 没有那个文件或目录，则需要在make指定分配器为libc。执行下面命令即可正常编译：</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009687.png\" alt=\"image-20220413114421767\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make MALLOC=libc</span><br></pre></td></tr></table></figure>\n\n<p>make命令执行完，redis就编译完成了。</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009006.png\" alt=\"image-20220413114806660\"></p>\n<h2 id=\"2-执行下面命令安装redis，并指定安装目录\"><a href=\"#2-执行下面命令安装redis，并指定安装目录\" class=\"headerlink\" title=\"2. 执行下面命令安装redis，并指定安装目录\"></a>2. 执行下面命令安装redis，并指定安装目录</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make install PREFIX=/usr/local/redis</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009217.png\" alt=\"image-20220413114915652\"></p>\n<p>至此，redis即安装成功。</p>\n<h1 id=\"三、启动Redis\"><a href=\"#三、启动Redis\" class=\"headerlink\" title=\"三、启动Redis\"></a>三、启动Redis</h1><h2 id=\"1-进入redis安装目录，执行下面命令启动redis服务\"><a href=\"#1-进入redis安装目录，执行下面命令启动redis服务\" class=\"headerlink\" title=\"1. 进入redis安装目录，执行下面命令启动redis服务\"></a>1. 进入redis安装目录，执行下面命令启动redis服务</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./bin/redis-server redis.conf</span><br></pre></td></tr></table></figure>\n\n\n<p>此时，可以看到redis服务被成功启动：</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009483.png\" alt=\"image-20220413115051561\"></p>\n<p>但这种启动方式不能退出控制台，如果退出，那么redis服务也会停止。</p>\n<p>&#x3D;&#x3D;Ctrl+C 停止运行&#x3D;&#x3D;</p>\n<h2 id=\"2-修改redis密码\"><a href=\"#2-修改redis密码\" class=\"headerlink\" title=\"2. 修改redis密码\"></a>2. 修改redis密码</h2><p>进入到redis目录中</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local/redis</span><br></pre></td></tr></table></figure>\n\n<p>修改<strong>redis.conf</strong>文件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim redis.conf</span><br></pre></td></tr></table></figure>\n\n<p>找到第901行</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009058.png\" alt=\"image-20220413120210330\"></p>\n<p>把前面的#去掉 后面改成root</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009003.png\" alt=\"image-20220413120236518\"></p>\n<p><strong>i</strong> 键插入 修改   :<strong>wq</strong> 保存并退出   **:q!**强行退出</p>\n<h2 id=\"3-外部访问redis\"><a href=\"#3-外部访问redis\" class=\"headerlink\" title=\"3. 外部访问redis\"></a>3. 外部访问redis</h2><p>进入到redis目录中</p>\n   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local/redis</span><br></pre></td></tr></table></figure>\n\n<p>   修改<strong>redis.conf</strong>文件</p>\n   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim redis.conf</span><br></pre></td></tr></table></figure>\n\n<p>找到第75行</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072010828.png\" alt=\"image-20220413115537944\"></p>\n<p>改成这个</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011397.png\" alt=\"image-20220413121539670\"></p>\n<p>&#x3D;&#x3D;<strong>i</strong> 键插入 修改   :<strong>wq</strong> 保存并退出   **:q!**强行退出&#x3D;&#x3D;</p>\n<p>开放端口</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --add-port=6379/tcp --permanent</span><br><span class=\"line\">firewall-cmd --add-port=6379/tcp</span><br><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n\n\n\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009035.png\" alt=\"image-20220413121605754\"></p>\n<h2 id=\"4-Redis以后台方式运行\"><a href=\"#4-Redis以后台方式运行\" class=\"headerlink\" title=\"4. Redis以后台方式运行\"></a>4. Redis以后台方式运行</h2><p>进入到redis目录中</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local/redis</span><br></pre></td></tr></table></figure>\n\n<p>修改<strong>redis.conf</strong>文件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim redis.conf</span><br></pre></td></tr></table></figure>\n\n<p>找到第257行</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009137.png\" alt=\"image-20220413120019384\"></p>\n<p>no改成yes</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009247.png\" alt=\"image-20220413120035867\"></p>\n<p><strong>i</strong> 键插入 修改   :<strong>wq</strong> 保存并退出   **:q!**强行退出</p>\n<h2 id=\"5-通过下面命令查看redis进程，可以发现redis服务已经被启动了：\"><a href=\"#5-通过下面命令查看redis进程，可以发现redis服务已经被启动了：\" class=\"headerlink\" title=\"5. 通过下面命令查看redis进程，可以发现redis服务已经被启动了：\"></a>5. 通过下面命令查看redis进程，可以发现redis服务已经被启动了：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -ef | grep redis</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009180.png\" alt=\"image-20220413142112828\"></p>\n<h2 id=\"6-通过redis-cli测试redis是否可用，在redis安装目录执行下面命令：\"><a href=\"#6-通过redis-cli测试redis是否可用，在redis安装目录执行下面命令：\" class=\"headerlink\" title=\"6. 通过redis-cli测试redis是否可用，在redis安装目录执行下面命令：\"></a>6. 通过redis-cli测试redis是否可用，在redis安装目录执行下面命令：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./bin/redis-cli</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009617.png\" alt=\"image-20220413121640174\"></p>\n<p>致辞 redis安装完成</p>\n<h1 id=\"四、开机自启动\"><a href=\"#四、开机自启动\" class=\"headerlink\" title=\"四、开机自启动\"></a>四、开机自启动</h1><p>通过编辑脚本来实现开机自启。</p>\n<h2 id=\"1-首先，新建一个系统服务文件：\"><a href=\"#1-首先，新建一个系统服务文件：\" class=\"headerlink\" title=\"1. 首先，新建一个系统服务文件：\"></a>1. 首先，新建一个系统服务文件：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/systemd/system/redis.service</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009024.png\" alt=\"image-20220413141401537\"></p>\n<p>内容如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=redis-server</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=forking</span><br><span class=\"line\">ExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/redis.conf</span><br><span class=\"line\">PrivateTmp=true</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-然后重载系统服务：\"><a href=\"#2-然后重载系统服务：\" class=\"headerlink\" title=\"2. 然后重载系统服务：\"></a>2. 然后重载系统服务：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-然后我们可以使用下面的命令对Redis进行一系列操作：\"><a href=\"#3-然后我们可以使用下面的命令对Redis进行一系列操作：\" class=\"headerlink\" title=\"3. 然后我们可以使用下面的命令对Redis进行一系列操作：\"></a>3. 然后我们可以使用下面的命令对Redis进行一系列操作：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 启动</span><br><span class=\"line\">systemctl start redis</span><br><span class=\"line\"># 停止</span><br><span class=\"line\">systemctl stop redis</span><br><span class=\"line\"># 重启</span><br><span class=\"line\">systemctl restart redis</span><br><span class=\"line\"># 查看状态</span><br><span class=\"line\">systemctl status redis</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009401.png\" alt=\"image-20220413142412155\"></p>\n<h2 id=\"4-执行下面的命令，可以让redis开机自启：\"><a href=\"#4-执行下面的命令，可以让redis开机自启：\" class=\"headerlink\" title=\"4. 执行下面的命令，可以让redis开机自启：\"></a>4. 执行下面的命令，可以让redis开机自启：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable redis</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009817.png\" alt=\"image-20220413142444684\"></p>\n<h2 id=\"5-开机后执行下面命令可以看到Redis开机自启\"><a href=\"#5-开机后执行下面命令可以看到Redis开机自启\" class=\"headerlink\" title=\"5. 开机后执行下面命令可以看到Redis开机自启\"></a>5. 开机后执行下面命令可以看到Redis开机自启</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -ef | grep redis</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009165.png\" alt=\"image-20220413142518407\"></p>\n<p><strong>总结</strong>：这个方法适合有需要使用Redis频率高的场景，如果对系统性能有要求则不适用，因为后台运行需要消耗部分内存。</p>\n","cover_type":"img","excerpt":"","more":"<h1 id=\"一、下载并解压Redis\"><a href=\"#一、下载并解压Redis\" class=\"headerlink\" title=\"一、下载并解压Redis\"></a>一、下载并解压Redis</h1><h2 id=\"1-切换到-data目录\"><a href=\"#1-切换到-data目录\" class=\"headerlink\" title=\"1. 切换到&#x2F;data目录\"></a>1. 切换到&#x2F;data目录</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /data</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-执行下面的命令下载redis：\"><a href=\"#2-执行下面的命令下载redis：\" class=\"headerlink\" title=\"2. 执行下面的命令下载redis：\"></a>2. 执行下面的命令下载redis：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://download.redis.io/releases/redis-6.2.6.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008772.png\" alt=\"image-20220413114109560\"></p>\n<h2 id=\"3-解压redis：\"><a href=\"#3-解压redis：\" class=\"headerlink\" title=\"3. 解压redis：\"></a>3. 解压redis：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xzf redis-6.2.6.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008280.png\" alt=\"image-20220413114133942\"></p>\n<h2 id=\"4-移动redis目录，一般都会将redis目录放置到-usr-local-redis目录：\"><a href=\"#4-移动redis目录，一般都会将redis目录放置到-usr-local-redis目录：\" class=\"headerlink\" title=\"4. 移动redis目录，一般都会将redis目录放置到 &#x2F;usr&#x2F;local&#x2F;redis目录：\"></a>4. 移动redis目录，一般都会将redis目录放置到 &#x2F;usr&#x2F;local&#x2F;redis目录：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv redis-6.2.6 /usr/local/redis</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"二、编译并安装redis\"><a href=\"#二、编译并安装redis\" class=\"headerlink\" title=\"二、编译并安装redis\"></a>二、编译并安装redis</h1><h2 id=\"1-进入redis安装目录，执行make命令编译redis：\"><a href=\"#1-进入redis安装目录，执行make命令编译redis：\" class=\"headerlink\" title=\"1. 进入redis安装目录，执行make命令编译redis：\"></a>1. 进入redis安装目录，执行make命令编译redis：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local/redis</span><br><span class=\"line\">make</span><br></pre></td></tr></table></figure>\n\n<p>等待make命令执行完成即可</p>\n<p>&#x3D;&#x3D;如果执行make命令报错&#x3D;&#x3D;：cc 未找到命令，原因是虚拟机系统中缺少gcc，执行下面命令安装gcc：</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072008882.png\" alt=\"image-20220413114309585\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install gcc automake autoconf libtool make</span><br></pre></td></tr></table></figure>\n\n<p>如果执行make命令报错：致命错误:jemalloc&#x2F;jemalloc.h: 没有那个文件或目录，则需要在make指定分配器为libc。执行下面命令即可正常编译：</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009687.png\" alt=\"image-20220413114421767\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make MALLOC=libc</span><br></pre></td></tr></table></figure>\n\n<p>make命令执行完，redis就编译完成了。</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009006.png\" alt=\"image-20220413114806660\"></p>\n<h2 id=\"2-执行下面命令安装redis，并指定安装目录\"><a href=\"#2-执行下面命令安装redis，并指定安装目录\" class=\"headerlink\" title=\"2. 执行下面命令安装redis，并指定安装目录\"></a>2. 执行下面命令安装redis，并指定安装目录</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make install PREFIX=/usr/local/redis</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009217.png\" alt=\"image-20220413114915652\"></p>\n<p>至此，redis即安装成功。</p>\n<h1 id=\"三、启动Redis\"><a href=\"#三、启动Redis\" class=\"headerlink\" title=\"三、启动Redis\"></a>三、启动Redis</h1><h2 id=\"1-进入redis安装目录，执行下面命令启动redis服务\"><a href=\"#1-进入redis安装目录，执行下面命令启动redis服务\" class=\"headerlink\" title=\"1. 进入redis安装目录，执行下面命令启动redis服务\"></a>1. 进入redis安装目录，执行下面命令启动redis服务</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./bin/redis-server redis.conf</span><br></pre></td></tr></table></figure>\n\n\n<p>此时，可以看到redis服务被成功启动：</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009483.png\" alt=\"image-20220413115051561\"></p>\n<p>但这种启动方式不能退出控制台，如果退出，那么redis服务也会停止。</p>\n<p>&#x3D;&#x3D;Ctrl+C 停止运行&#x3D;&#x3D;</p>\n<h2 id=\"2-修改redis密码\"><a href=\"#2-修改redis密码\" class=\"headerlink\" title=\"2. 修改redis密码\"></a>2. 修改redis密码</h2><p>进入到redis目录中</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local/redis</span><br></pre></td></tr></table></figure>\n\n<p>修改<strong>redis.conf</strong>文件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim redis.conf</span><br></pre></td></tr></table></figure>\n\n<p>找到第901行</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009058.png\" alt=\"image-20220413120210330\"></p>\n<p>把前面的#去掉 后面改成root</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009003.png\" alt=\"image-20220413120236518\"></p>\n<p><strong>i</strong> 键插入 修改   :<strong>wq</strong> 保存并退出   **:q!**强行退出</p>\n<h2 id=\"3-外部访问redis\"><a href=\"#3-外部访问redis\" class=\"headerlink\" title=\"3. 外部访问redis\"></a>3. 外部访问redis</h2><p>进入到redis目录中</p>\n   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local/redis</span><br></pre></td></tr></table></figure>\n\n<p>   修改<strong>redis.conf</strong>文件</p>\n   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim redis.conf</span><br></pre></td></tr></table></figure>\n\n<p>找到第75行</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072010828.png\" alt=\"image-20220413115537944\"></p>\n<p>改成这个</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011397.png\" alt=\"image-20220413121539670\"></p>\n<p>&#x3D;&#x3D;<strong>i</strong> 键插入 修改   :<strong>wq</strong> 保存并退出   **:q!**强行退出&#x3D;&#x3D;</p>\n<p>开放端口</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --add-port=6379/tcp --permanent</span><br><span class=\"line\">firewall-cmd --add-port=6379/tcp</span><br><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n\n\n\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009035.png\" alt=\"image-20220413121605754\"></p>\n<h2 id=\"4-Redis以后台方式运行\"><a href=\"#4-Redis以后台方式运行\" class=\"headerlink\" title=\"4. Redis以后台方式运行\"></a>4. Redis以后台方式运行</h2><p>进入到redis目录中</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /usr/local/redis</span><br></pre></td></tr></table></figure>\n\n<p>修改<strong>redis.conf</strong>文件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim redis.conf</span><br></pre></td></tr></table></figure>\n\n<p>找到第257行</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009137.png\" alt=\"image-20220413120019384\"></p>\n<p>no改成yes</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009247.png\" alt=\"image-20220413120035867\"></p>\n<p><strong>i</strong> 键插入 修改   :<strong>wq</strong> 保存并退出   **:q!**强行退出</p>\n<h2 id=\"5-通过下面命令查看redis进程，可以发现redis服务已经被启动了：\"><a href=\"#5-通过下面命令查看redis进程，可以发现redis服务已经被启动了：\" class=\"headerlink\" title=\"5. 通过下面命令查看redis进程，可以发现redis服务已经被启动了：\"></a>5. 通过下面命令查看redis进程，可以发现redis服务已经被启动了：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -ef | grep redis</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009180.png\" alt=\"image-20220413142112828\"></p>\n<h2 id=\"6-通过redis-cli测试redis是否可用，在redis安装目录执行下面命令：\"><a href=\"#6-通过redis-cli测试redis是否可用，在redis安装目录执行下面命令：\" class=\"headerlink\" title=\"6. 通过redis-cli测试redis是否可用，在redis安装目录执行下面命令：\"></a>6. 通过redis-cli测试redis是否可用，在redis安装目录执行下面命令：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./bin/redis-cli</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009617.png\" alt=\"image-20220413121640174\"></p>\n<p>致辞 redis安装完成</p>\n<h1 id=\"四、开机自启动\"><a href=\"#四、开机自启动\" class=\"headerlink\" title=\"四、开机自启动\"></a>四、开机自启动</h1><p>通过编辑脚本来实现开机自启。</p>\n<h2 id=\"1-首先，新建一个系统服务文件：\"><a href=\"#1-首先，新建一个系统服务文件：\" class=\"headerlink\" title=\"1. 首先，新建一个系统服务文件：\"></a>1. 首先，新建一个系统服务文件：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/systemd/system/redis.service</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009024.png\" alt=\"image-20220413141401537\"></p>\n<p>内容如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=redis-server</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=forking</span><br><span class=\"line\">ExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/redis.conf</span><br><span class=\"line\">PrivateTmp=true</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-然后重载系统服务：\"><a href=\"#2-然后重载系统服务：\" class=\"headerlink\" title=\"2. 然后重载系统服务：\"></a>2. 然后重载系统服务：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-然后我们可以使用下面的命令对Redis进行一系列操作：\"><a href=\"#3-然后我们可以使用下面的命令对Redis进行一系列操作：\" class=\"headerlink\" title=\"3. 然后我们可以使用下面的命令对Redis进行一系列操作：\"></a>3. 然后我们可以使用下面的命令对Redis进行一系列操作：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 启动</span><br><span class=\"line\">systemctl start redis</span><br><span class=\"line\"># 停止</span><br><span class=\"line\">systemctl stop redis</span><br><span class=\"line\"># 重启</span><br><span class=\"line\">systemctl restart redis</span><br><span class=\"line\"># 查看状态</span><br><span class=\"line\">systemctl status redis</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009401.png\" alt=\"image-20220413142412155\"></p>\n<h2 id=\"4-执行下面的命令，可以让redis开机自启：\"><a href=\"#4-执行下面的命令，可以让redis开机自启：\" class=\"headerlink\" title=\"4. 执行下面的命令，可以让redis开机自启：\"></a>4. 执行下面的命令，可以让redis开机自启：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable redis</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009817.png\" alt=\"image-20220413142444684\"></p>\n<h2 id=\"5-开机后执行下面命令可以看到Redis开机自启\"><a href=\"#5-开机后执行下面命令可以看到Redis开机自启\" class=\"headerlink\" title=\"5. 开机后执行下面命令可以看到Redis开机自启\"></a>5. 开机后执行下面命令可以看到Redis开机自启</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -ef | grep redis</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072009165.png\" alt=\"image-20220413142518407\"></p>\n<p><strong>总结</strong>：这个方法适合有需要使用Redis频率高的场景，如果对系统性能有要求则不适用，因为后台运行需要消耗部分内存。</p>\n"},{"title":"Centos 安装 Vim","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/911392c5945b0a14219a6fad7f2114f6.png","main_color":"#179A33","abbrlink":"161a","date":"2022-08-14T16:10:00.000Z","_content":"\n如果出现以下问题 可以安装vim编辑器\n\n![image-20220413102714836](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011894.png)\n\n1. 根据你的Linux版本，输入对应的如下命令，我这里是centos系统，故而输入 **yum -y install vim\\***\n\n   - ubuntu 系统输入命令：\n\n     ```\n     sudo apt-get install vim-gtk\n     ```\n   - centos 系统输入命令：\n\n     ```\n     yum -y install vim*\n     ```\n2. 输入后等待安装完成，即可自动完成安装。\n\n   ![image-20220413103243568](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011015.png)\n\n![image-20220413103254206](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011479.png)\n","source":"_posts/服务器/Centos/Centos安装vim编辑器.md","raw":"---\ntitle: Centos 安装 Vim\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/911392c5945b0a14219a6fad7f2114f6.png\nmain_color: '#179A33'\ntags:\n  - Vim\n  - Centos\n  - 食用教程\nabbrlink: 161a\ndate: 2022-08-15 00:10:00\n---\n\n如果出现以下问题 可以安装vim编辑器\n\n![image-20220413102714836](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011894.png)\n\n1. 根据你的Linux版本，输入对应的如下命令，我这里是centos系统，故而输入 **yum -y install vim\\***\n\n   - ubuntu 系统输入命令：\n\n     ```\n     sudo apt-get install vim-gtk\n     ```\n   - centos 系统输入命令：\n\n     ```\n     yum -y install vim*\n     ```\n2. 输入后等待安装完成，即可自动完成安装。\n\n   ![image-20220413103243568](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011015.png)\n\n![image-20220413103254206](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011479.png)\n","slug":"服务器/Centos/Centos安装vim编辑器","published":1,"updated":"2025-06-02T07:24:43.964Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wg001rzcqb0o1n6nz8","content":"<p>如果出现以下问题 可以安装vim编辑器</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011894.png\" alt=\"image-20220413102714836\"></p>\n<ol>\n<li><p>根据你的Linux版本，输入对应的如下命令，我这里是centos系统，故而输入 <strong>yum -y install vim*</strong></p>\n<ul>\n<li><p>ubuntu 系统输入命令：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install vim-gtk</span><br></pre></td></tr></table></figure></li>\n<li><p>centos 系统输入命令：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install vim*</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>输入后等待安装完成，即可自动完成安装。</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011015.png\" alt=\"image-20220413103243568\"></p>\n</li>\n</ol>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011479.png\" alt=\"image-20220413103254206\"></p>\n","cover_type":"img","excerpt":"","more":"<p>如果出现以下问题 可以安装vim编辑器</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011894.png\" alt=\"image-20220413102714836\"></p>\n<ol>\n<li><p>根据你的Linux版本，输入对应的如下命令，我这里是centos系统，故而输入 <strong>yum -y install vim*</strong></p>\n<ul>\n<li><p>ubuntu 系统输入命令：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install vim-gtk</span><br></pre></td></tr></table></figure></li>\n<li><p>centos 系统输入命令：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install vim*</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>输入后等待安装完成，即可自动完成安装。</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011015.png\" alt=\"image-20220413103243568\"></p>\n</li>\n</ol>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011479.png\" alt=\"image-20220413103254206\"></p>\n"},{"title":"Centos 指令大全","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/3c4e96f7f3de3c1948edcaf5c8a35e8a.png","main_color":"#D6D5D1","abbrlink":"e3de","date":"2025-05-31T16:19:00.000Z","_content":"\n# 修改主机名\n\n~~~shell\n# 查看主机名\nhostname\n# 修改主机名\nhostnamectl set-hostname 主机名\n~~~\n\n# 配置免密登录\n\n1. 在A客户端上生成公钥和私钥\n\n   ~~~shell\n    ssh-keygen -t rsa\n   ~~~\n\n2. 拷贝及配置方案\n\n   ~~~shell\n   ssh-copy-id -i ~/.ssh/id_rsa.pub 'root@要拷贝到的机器ip'\n   ~~~\n\n   \n\n# scp传输文件\n\n## 1、从服务器上下载文件\n\n格式：scp 用户名@服务器地址:要下载的文件路径 保存文件的文件夹路径\n\n例如：把 192.168.0.101 上的 /data/test.txt 的文件下载到 /home（本地目录）\n\n~~~shell\nscp root@192.168.0.101:/data/test.txt /home\n~~~\n\n## 2、上传本地文件到服务器\n\n格式：scp 要上传的文件路径 用户名@服务器地址:服务器保存路径\n\n例如：把本机 /home/test.txt 文件上传到 192.168.0.101 这台服务器上的 /data/ 目录中\n\n~~~shell\nscp /home/test.txt root@192.168.0.101:/data/\n~~~\n\n## 3、从服务器下载整个目录\n\n格式：scp -r 用户名@服务器地址:要下载的服务器目录 保存下载的目录\n\n例如：把 192.168.0.101 上的 /data 目录下载到 /home（本地目录）\n\n~~~shell\nscp -r root@192.168.0.101:/data  /home/\n~~~\n\n## 4、上传目录到服务器\n\n格式：scp -r 要上传的目录 用户名@服务器地址:服务器的保存目录\n\n例如：把 /home 目录上传到服务器的 /data/ 目录\n\n~~~shell\nscp -r /home root@192.168.0.101:/data/\n~~~\n\n# 安装RPM包\n\n~~~shell\n# 安装rpm工具包\nrpm -ivh *.rpm --nodeps --force\n\n\n\n# 卸载\nrpm -e firefox\n~~~\n\n## 赋权\n\n~~~shell\nchmod -R 777 \n\n\nchmod -R 777 /usr/local/mysql/*\n~~~\n\n\n\n# 安装\n\n~~~\nyum -y install  epel-release\n~~~\n\n# centos 查看端口占用\n\n~~~shell\nyum -y install lsof\n\nlsof -i tcp:80\n~~~\n\n## 停用防火墙\n\n~~~shell\nsystemctl stop firewalld.service\nsystemctl disable firewalld.service\n~~~\n","source":"_posts/服务器/Centos/Centos指令大全.md","raw":"---\ntitle: Centos 指令大全\ncategories:\n   - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/3c4e96f7f3de3c1948edcaf5c8a35e8a.png\nmain_color: '#D6D5D1'\ntags:\n  - 命令\n  - Centos\nabbrlink: e3de\ndate: 2025-06-01 00:19:00\n---\n\n# 修改主机名\n\n~~~shell\n# 查看主机名\nhostname\n# 修改主机名\nhostnamectl set-hostname 主机名\n~~~\n\n# 配置免密登录\n\n1. 在A客户端上生成公钥和私钥\n\n   ~~~shell\n    ssh-keygen -t rsa\n   ~~~\n\n2. 拷贝及配置方案\n\n   ~~~shell\n   ssh-copy-id -i ~/.ssh/id_rsa.pub 'root@要拷贝到的机器ip'\n   ~~~\n\n   \n\n# scp传输文件\n\n## 1、从服务器上下载文件\n\n格式：scp 用户名@服务器地址:要下载的文件路径 保存文件的文件夹路径\n\n例如：把 192.168.0.101 上的 /data/test.txt 的文件下载到 /home（本地目录）\n\n~~~shell\nscp root@192.168.0.101:/data/test.txt /home\n~~~\n\n## 2、上传本地文件到服务器\n\n格式：scp 要上传的文件路径 用户名@服务器地址:服务器保存路径\n\n例如：把本机 /home/test.txt 文件上传到 192.168.0.101 这台服务器上的 /data/ 目录中\n\n~~~shell\nscp /home/test.txt root@192.168.0.101:/data/\n~~~\n\n## 3、从服务器下载整个目录\n\n格式：scp -r 用户名@服务器地址:要下载的服务器目录 保存下载的目录\n\n例如：把 192.168.0.101 上的 /data 目录下载到 /home（本地目录）\n\n~~~shell\nscp -r root@192.168.0.101:/data  /home/\n~~~\n\n## 4、上传目录到服务器\n\n格式：scp -r 要上传的目录 用户名@服务器地址:服务器的保存目录\n\n例如：把 /home 目录上传到服务器的 /data/ 目录\n\n~~~shell\nscp -r /home root@192.168.0.101:/data/\n~~~\n\n# 安装RPM包\n\n~~~shell\n# 安装rpm工具包\nrpm -ivh *.rpm --nodeps --force\n\n\n\n# 卸载\nrpm -e firefox\n~~~\n\n## 赋权\n\n~~~shell\nchmod -R 777 \n\n\nchmod -R 777 /usr/local/mysql/*\n~~~\n\n\n\n# 安装\n\n~~~\nyum -y install  epel-release\n~~~\n\n# centos 查看端口占用\n\n~~~shell\nyum -y install lsof\n\nlsof -i tcp:80\n~~~\n\n## 停用防火墙\n\n~~~shell\nsystemctl stop firewalld.service\nsystemctl disable firewalld.service\n~~~\n","slug":"服务器/Centos/Centos指令大全","published":1,"updated":"2025-06-02T07:24:52.575Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wh001uzcqb5uwuc1q4","content":"<h1 id=\"修改主机名\"><a href=\"#修改主机名\" class=\"headerlink\" title=\"修改主机名\"></a>修改主机名</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看主机名</span></span><br><span class=\"line\">hostname</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">修改主机名</span></span><br><span class=\"line\">hostnamectl set-hostname 主机名</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"配置免密登录\"><a href=\"#配置免密登录\" class=\"headerlink\" title=\"配置免密登录\"></a>配置免密登录</h1><ol>\n<li><p>在A客户端上生成公钥和私钥</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>拷贝及配置方案</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-copy-id -i ~/.ssh/id_rsa.pub &#x27;root@要拷贝到的机器ip&#x27;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h1 id=\"scp传输文件\"><a href=\"#scp传输文件\" class=\"headerlink\" title=\"scp传输文件\"></a>scp传输文件</h1><h2 id=\"1、从服务器上下载文件\"><a href=\"#1、从服务器上下载文件\" class=\"headerlink\" title=\"1、从服务器上下载文件\"></a>1、从服务器上下载文件</h2><p>格式：scp 用户名@服务器地址:要下载的文件路径 保存文件的文件夹路径</p>\n<p>例如：把 192.168.0.101 上的 &#x2F;data&#x2F;test.txt 的文件下载到 &#x2F;home（本地目录）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp root@192.168.0.101:/data/test.txt /home</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2、上传本地文件到服务器\"><a href=\"#2、上传本地文件到服务器\" class=\"headerlink\" title=\"2、上传本地文件到服务器\"></a>2、上传本地文件到服务器</h2><p>格式：scp 要上传的文件路径 用户名@服务器地址:服务器保存路径</p>\n<p>例如：把本机 &#x2F;home&#x2F;test.txt 文件上传到 192.168.0.101 这台服务器上的 &#x2F;data&#x2F; 目录中</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp /home/test.txt root@192.168.0.101:/data/</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3、从服务器下载整个目录\"><a href=\"#3、从服务器下载整个目录\" class=\"headerlink\" title=\"3、从服务器下载整个目录\"></a>3、从服务器下载整个目录</h2><p>格式：scp -r 用户名@服务器地址:要下载的服务器目录 保存下载的目录</p>\n<p>例如：把 192.168.0.101 上的 &#x2F;data 目录下载到 &#x2F;home（本地目录）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp -r root@192.168.0.101:/data  /home/</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4、上传目录到服务器\"><a href=\"#4、上传目录到服务器\" class=\"headerlink\" title=\"4、上传目录到服务器\"></a>4、上传目录到服务器</h2><p>格式：scp -r 要上传的目录 用户名@服务器地址:服务器的保存目录</p>\n<p>例如：把 &#x2F;home 目录上传到服务器的 &#x2F;data&#x2F; 目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp -r /home root@192.168.0.101:/data/</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"安装RPM包\"><a href=\"#安装RPM包\" class=\"headerlink\" title=\"安装RPM包\"></a>安装RPM包</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装rpm工具包</span></span><br><span class=\"line\">rpm -ivh *.rpm --nodeps --force</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">卸载</span></span><br><span class=\"line\">rpm -e firefox</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"赋权\"><a href=\"#赋权\" class=\"headerlink\" title=\"赋权\"></a>赋权</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod -R 777 </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">chmod -R 777 /usr/local/mysql/*</span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install  epel-release</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"centos-查看端口占用\"><a href=\"#centos-查看端口占用\" class=\"headerlink\" title=\"centos 查看端口占用\"></a>centos 查看端口占用</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install lsof</span><br><span class=\"line\"></span><br><span class=\"line\">lsof -i tcp:80</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"停用防火墙\"><a href=\"#停用防火墙\" class=\"headerlink\" title=\"停用防火墙\"></a>停用防火墙</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\">systemctl disable firewalld.service</span><br></pre></td></tr></table></figure>\n","cover_type":"img","excerpt":"","more":"<h1 id=\"修改主机名\"><a href=\"#修改主机名\" class=\"headerlink\" title=\"修改主机名\"></a>修改主机名</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看主机名</span></span><br><span class=\"line\">hostname</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">修改主机名</span></span><br><span class=\"line\">hostnamectl set-hostname 主机名</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"配置免密登录\"><a href=\"#配置免密登录\" class=\"headerlink\" title=\"配置免密登录\"></a>配置免密登录</h1><ol>\n<li><p>在A客户端上生成公钥和私钥</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>拷贝及配置方案</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-copy-id -i ~/.ssh/id_rsa.pub &#x27;root@要拷贝到的机器ip&#x27;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h1 id=\"scp传输文件\"><a href=\"#scp传输文件\" class=\"headerlink\" title=\"scp传输文件\"></a>scp传输文件</h1><h2 id=\"1、从服务器上下载文件\"><a href=\"#1、从服务器上下载文件\" class=\"headerlink\" title=\"1、从服务器上下载文件\"></a>1、从服务器上下载文件</h2><p>格式：scp 用户名@服务器地址:要下载的文件路径 保存文件的文件夹路径</p>\n<p>例如：把 192.168.0.101 上的 &#x2F;data&#x2F;test.txt 的文件下载到 &#x2F;home（本地目录）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp root@192.168.0.101:/data/test.txt /home</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2、上传本地文件到服务器\"><a href=\"#2、上传本地文件到服务器\" class=\"headerlink\" title=\"2、上传本地文件到服务器\"></a>2、上传本地文件到服务器</h2><p>格式：scp 要上传的文件路径 用户名@服务器地址:服务器保存路径</p>\n<p>例如：把本机 &#x2F;home&#x2F;test.txt 文件上传到 192.168.0.101 这台服务器上的 &#x2F;data&#x2F; 目录中</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp /home/test.txt root@192.168.0.101:/data/</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3、从服务器下载整个目录\"><a href=\"#3、从服务器下载整个目录\" class=\"headerlink\" title=\"3、从服务器下载整个目录\"></a>3、从服务器下载整个目录</h2><p>格式：scp -r 用户名@服务器地址:要下载的服务器目录 保存下载的目录</p>\n<p>例如：把 192.168.0.101 上的 &#x2F;data 目录下载到 &#x2F;home（本地目录）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp -r root@192.168.0.101:/data  /home/</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4、上传目录到服务器\"><a href=\"#4、上传目录到服务器\" class=\"headerlink\" title=\"4、上传目录到服务器\"></a>4、上传目录到服务器</h2><p>格式：scp -r 要上传的目录 用户名@服务器地址:服务器的保存目录</p>\n<p>例如：把 &#x2F;home 目录上传到服务器的 &#x2F;data&#x2F; 目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp -r /home root@192.168.0.101:/data/</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"安装RPM包\"><a href=\"#安装RPM包\" class=\"headerlink\" title=\"安装RPM包\"></a>安装RPM包</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装rpm工具包</span></span><br><span class=\"line\">rpm -ivh *.rpm --nodeps --force</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">卸载</span></span><br><span class=\"line\">rpm -e firefox</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"赋权\"><a href=\"#赋权\" class=\"headerlink\" title=\"赋权\"></a>赋权</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod -R 777 </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">chmod -R 777 /usr/local/mysql/*</span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install  epel-release</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"centos-查看端口占用\"><a href=\"#centos-查看端口占用\" class=\"headerlink\" title=\"centos 查看端口占用\"></a>centos 查看端口占用</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install lsof</span><br><span class=\"line\"></span><br><span class=\"line\">lsof -i tcp:80</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"停用防火墙\"><a href=\"#停用防火墙\" class=\"headerlink\" title=\"停用防火墙\"></a>停用防火墙</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\">systemctl disable firewalld.service</span><br></pre></td></tr></table></figure>\n"},{"title":"Centos 安装代理服务器 Squid","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/26e1ba9fe402cdaf0765e85b85b06659.png","main_color":"#FF7A24","abbrlink":"a25e","date":"2024-10-08T16:03:00.000Z","_content":"\n\n\n# 代理squid\n\n在有外网服务器上\n\n~~~shell\nyum install -y squid\nsystemctl start squid\n\n~~~\n\n\n\n在无外网服务器上\n\n~~~shell\n\nexport http_proxy=http://192.168.0.217:3128\nexport https_proxy=http://192.168.0.217:3128\n\nexport no_proxy=\"127.0.0.1, localhost, 192.168.1.85，192.168.1.241,192.168.1.63,192.168.1.58,192.168.1.93,192.168.1.116,192.168.1.250,192.168.1.171,192.168.1.139\"\n\n127.0.0.1 | localhost | 192.168.1.85 | 192.168.1.241 | 192.168.1.63 | 192.168.1.58 | 192.168.1.93 | 192.168.1.116 | 192.168.1.250 | 192.168.1.171 | 192.168.1.139\n\nsource /etc/profile\necho $http_proxy\n\n\n-Dhttp.proxyHost=192.168.1.63 -Dhttp.proxyPort=3128 -Dhttps.proxyHost=192.168.1.63 -Dhttps.proxyPort=3128\n\n\n\nexport http_proxy=http://192.168.0.217:3128\nexport https_proxy=http://192.168.0.217:3128\nexport no_proxy=\"127.0.0.1, localhost, 192.168.0.217,192.168.0.196\"\n~~~\n\n","source":"_posts/服务器/Centos/Centos安装代理服务器Squid.md","raw":"---\ntitle: Centos 安装代理服务器 Squid\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/26e1ba9fe402cdaf0765e85b85b06659.png\nmain_color: '#FF7A24'\ntags:\n  - Squid\n  - Centos\n  - 食用教程\nabbrlink: a25e\ndate: 2024-10-09 00:03:00\n---\n\n\n\n# 代理squid\n\n在有外网服务器上\n\n~~~shell\nyum install -y squid\nsystemctl start squid\n\n~~~\n\n\n\n在无外网服务器上\n\n~~~shell\n\nexport http_proxy=http://192.168.0.217:3128\nexport https_proxy=http://192.168.0.217:3128\n\nexport no_proxy=\"127.0.0.1, localhost, 192.168.1.85，192.168.1.241,192.168.1.63,192.168.1.58,192.168.1.93,192.168.1.116,192.168.1.250,192.168.1.171,192.168.1.139\"\n\n127.0.0.1 | localhost | 192.168.1.85 | 192.168.1.241 | 192.168.1.63 | 192.168.1.58 | 192.168.1.93 | 192.168.1.116 | 192.168.1.250 | 192.168.1.171 | 192.168.1.139\n\nsource /etc/profile\necho $http_proxy\n\n\n-Dhttp.proxyHost=192.168.1.63 -Dhttp.proxyPort=3128 -Dhttps.proxyHost=192.168.1.63 -Dhttps.proxyPort=3128\n\n\n\nexport http_proxy=http://192.168.0.217:3128\nexport https_proxy=http://192.168.0.217:3128\nexport no_proxy=\"127.0.0.1, localhost, 192.168.0.217,192.168.0.196\"\n~~~\n\n","slug":"服务器/Centos/Centos安装代理服务器Squid","published":1,"updated":"2025-06-02T07:24:48.258Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wi001yzcqbg3cxbun2","content":"<h1 id=\"代理squid\"><a href=\"#代理squid\" class=\"headerlink\" title=\"代理squid\"></a>代理squid</h1><p>在有外网服务器上</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y squid</span><br><span class=\"line\">systemctl start squid</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p>在无外网服务器上</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">export http_proxy=http://192.168.0.217:3128</span><br><span class=\"line\">export https_proxy=http://192.168.0.217:3128</span><br><span class=\"line\"></span><br><span class=\"line\">export no_proxy=&quot;127.0.0.1, localhost, 192.168.1.85，192.168.1.241,192.168.1.63,192.168.1.58,192.168.1.93,192.168.1.116,192.168.1.250,192.168.1.171,192.168.1.139&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">127.0.0.1 | localhost | 192.168.1.85 | 192.168.1.241 | 192.168.1.63 | 192.168.1.58 | 192.168.1.93 | 192.168.1.116 | 192.168.1.250 | 192.168.1.171 | 192.168.1.139</span><br><span class=\"line\"></span><br><span class=\"line\">source /etc/profile</span><br><span class=\"line\">echo $http_proxy</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">-Dhttp.proxyHost=192.168.1.63 -Dhttp.proxyPort=3128 -Dhttps.proxyHost=192.168.1.63 -Dhttps.proxyPort=3128</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">export http_proxy=http://192.168.0.217:3128</span><br><span class=\"line\">export https_proxy=http://192.168.0.217:3128</span><br><span class=\"line\">export no_proxy=&quot;127.0.0.1, localhost, 192.168.0.217,192.168.0.196&quot;</span><br></pre></td></tr></table></figure>\n\n","cover_type":"img","excerpt":"","more":"<h1 id=\"代理squid\"><a href=\"#代理squid\" class=\"headerlink\" title=\"代理squid\"></a>代理squid</h1><p>在有外网服务器上</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y squid</span><br><span class=\"line\">systemctl start squid</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p>在无外网服务器上</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">export http_proxy=http://192.168.0.217:3128</span><br><span class=\"line\">export https_proxy=http://192.168.0.217:3128</span><br><span class=\"line\"></span><br><span class=\"line\">export no_proxy=&quot;127.0.0.1, localhost, 192.168.1.85，192.168.1.241,192.168.1.63,192.168.1.58,192.168.1.93,192.168.1.116,192.168.1.250,192.168.1.171,192.168.1.139&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">127.0.0.1 | localhost | 192.168.1.85 | 192.168.1.241 | 192.168.1.63 | 192.168.1.58 | 192.168.1.93 | 192.168.1.116 | 192.168.1.250 | 192.168.1.171 | 192.168.1.139</span><br><span class=\"line\"></span><br><span class=\"line\">source /etc/profile</span><br><span class=\"line\">echo $http_proxy</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">-Dhttp.proxyHost=192.168.1.63 -Dhttp.proxyPort=3128 -Dhttps.proxyHost=192.168.1.63 -Dhttps.proxyPort=3128</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">export http_proxy=http://192.168.0.217:3128</span><br><span class=\"line\">export https_proxy=http://192.168.0.217:3128</span><br><span class=\"line\">export no_proxy=&quot;127.0.0.1, localhost, 192.168.0.217,192.168.0.196&quot;</span><br></pre></td></tr></table></figure>\n\n"},{"title":"Centos 安装 Wget","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/4f0236edf1a2782c1434cbba171a2fff.png","main_color":"#303030","abbrlink":"13f0","date":"2022-08-14T16:11:00.000Z","_content":"\n# Centos安装wget\n\n提示-bash: wget: 未找到命令 就需要安装wget\n\n1. 输入 指令进行安装\n\n   ~~~\n   yum install wget\n   ~~~\n\n2. 等待安装\n\n   ![image-20220413103602833](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011204.png)\n\n3. 出现以下界面输入y回车就行\n\n   ~~~\n   y # 回车\n   ~~~\n\n   \n\n4. 安装成功\n\n   ![image-20220413103646715](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011968.png)\n","source":"_posts/服务器/Centos/Centos安装wget.md","raw":"---\ntitle: Centos 安装 Wget\ncategories:\n   - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/4f0236edf1a2782c1434cbba171a2fff.png\nmain_color: '#303030'\ntags:\n  - Wget\n  - Centos\n  - 食用教程\nabbrlink: 13f0\ndate: 2022-08-15 00:11:00\n---\n\n# Centos安装wget\n\n提示-bash: wget: 未找到命令 就需要安装wget\n\n1. 输入 指令进行安装\n\n   ~~~\n   yum install wget\n   ~~~\n\n2. 等待安装\n\n   ![image-20220413103602833](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011204.png)\n\n3. 出现以下界面输入y回车就行\n\n   ~~~\n   y # 回车\n   ~~~\n\n   \n\n4. 安装成功\n\n   ![image-20220413103646715](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011968.png)\n","slug":"服务器/Centos/Centos安装wget","published":1,"updated":"2025-06-02T07:24:46.094Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wj0021zcqb8oxret8l","content":"<h1 id=\"Centos安装wget\"><a href=\"#Centos安装wget\" class=\"headerlink\" title=\"Centos安装wget\"></a>Centos安装wget</h1><p>提示-bash: wget: 未找到命令 就需要安装wget</p>\n<ol>\n<li><p>输入 指令进行安装</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install wget</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>等待安装</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011204.png\" alt=\"image-20220413103602833\"></p>\n</li>\n<li><p>出现以下界面输入y回车就行</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">y # 回车</span><br></pre></td></tr></table></figure>\n\n\n</li>\n<li><p>安装成功</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011968.png\" alt=\"image-20220413103646715\"></p>\n</li>\n</ol>\n","cover_type":"img","excerpt":"","more":"<h1 id=\"Centos安装wget\"><a href=\"#Centos安装wget\" class=\"headerlink\" title=\"Centos安装wget\"></a>Centos安装wget</h1><p>提示-bash: wget: 未找到命令 就需要安装wget</p>\n<ol>\n<li><p>输入 指令进行安装</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install wget</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>等待安装</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011204.png\" alt=\"image-20220413103602833\"></p>\n</li>\n<li><p>出现以下界面输入y回车就行</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">y # 回车</span><br></pre></td></tr></table></figure>\n\n\n</li>\n<li><p>安装成功</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011968.png\" alt=\"image-20220413103646715\"></p>\n</li>\n</ol>\n"},{"title":"Centos 文件服务器的搭建 Samba","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/4cdc7b8e2cc87d23528c26f89c77cede.png","main_color":"#D6D5D1","abbrlink":"d647","date":"2022-12-18T16:20:00.000Z","_content":"\n\n\n# Linux文件服务器的搭建\n\n## 1. 关闭SELinux, 防火墙\n\n   ~~~\n   setenforce 0\n   getenforce\n   vim /etc/sysconfig/selinux #SELINUX=enforcing 改成 SELINUX=disable\n   systemctl stop firewalld.service\n   systemctl disable firewalld.service\n   ~~~\n\n   \n\n## 2. 安装软件\n\n   ~~~\n   yum install -y samba samba-client\n   ~~~\n\n   \n\n## 3. 编辑配置文件，共享/var/www/html/目录\n\n~~~\nmv /etc/samba/smb.conf /etc/samba/smb.conf.bak\nvim /etc/samba/smb.conf\n~~~\n\n​\t\t在这里插入\n\n~~~\n [share]\n    comment = It is a test\n    path = /var/www/html\n    browseable = yes\n    writable = yes \n~~~\n\n## 4. 创建共享用户\n\n   ~~~\n    useradd van\n    smbpasswd -a van\n    #输入 密码\n    pdbedit -L #查看共享用户\n   ~~~\n\n   \n\n## 5. 启动服务\n\n   ~~~\n   systemctl start smb # 启动服务\n   systemctl enable smb # 开机自启\n   \n   ss -antp | grep smbd #查看是否运行\n   ~~~\n\n   \n\n## 6. 设置目录的本地权限\n\n   ~~~\n   setfacl -m u:root:rwx /var/www/html\n   \n   setfacl -m u:(用户):rwx /(目录)\n   ~~~\n\n","source":"_posts/服务器/Centos/Centos文件服务器的搭建SMB.md","raw":"---\ntitle: Centos 文件服务器的搭建 Samba\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/4cdc7b8e2cc87d23528c26f89c77cede.png\nmain_color: '#D6D5D1'\ntags:\n  - Samba\n  - Centos\n  - 食用教程\nabbrlink: d647\ndate: 2022-12-19 00:20:00\n---\n\n\n\n# Linux文件服务器的搭建\n\n## 1. 关闭SELinux, 防火墙\n\n   ~~~\n   setenforce 0\n   getenforce\n   vim /etc/sysconfig/selinux #SELINUX=enforcing 改成 SELINUX=disable\n   systemctl stop firewalld.service\n   systemctl disable firewalld.service\n   ~~~\n\n   \n\n## 2. 安装软件\n\n   ~~~\n   yum install -y samba samba-client\n   ~~~\n\n   \n\n## 3. 编辑配置文件，共享/var/www/html/目录\n\n~~~\nmv /etc/samba/smb.conf /etc/samba/smb.conf.bak\nvim /etc/samba/smb.conf\n~~~\n\n​\t\t在这里插入\n\n~~~\n [share]\n    comment = It is a test\n    path = /var/www/html\n    browseable = yes\n    writable = yes \n~~~\n\n## 4. 创建共享用户\n\n   ~~~\n    useradd van\n    smbpasswd -a van\n    #输入 密码\n    pdbedit -L #查看共享用户\n   ~~~\n\n   \n\n## 5. 启动服务\n\n   ~~~\n   systemctl start smb # 启动服务\n   systemctl enable smb # 开机自启\n   \n   ss -antp | grep smbd #查看是否运行\n   ~~~\n\n   \n\n## 6. 设置目录的本地权限\n\n   ~~~\n   setfacl -m u:root:rwx /var/www/html\n   \n   setfacl -m u:(用户):rwx /(目录)\n   ~~~\n\n","slug":"服务器/Centos/Centos文件服务器的搭建SMB","published":1,"updated":"2025-06-02T07:24:55.225Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wk0024zcqb0fts012z","content":"<h1 id=\"Linux文件服务器的搭建\"><a href=\"#Linux文件服务器的搭建\" class=\"headerlink\" title=\"Linux文件服务器的搭建\"></a>Linux文件服务器的搭建</h1><h2 id=\"1-关闭SELinux-防火墙\"><a href=\"#1-关闭SELinux-防火墙\" class=\"headerlink\" title=\"1. 关闭SELinux, 防火墙\"></a>1. 关闭SELinux, 防火墙</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setenforce 0</span><br><span class=\"line\">getenforce</span><br><span class=\"line\">vim /etc/sysconfig/selinux #SELINUX=enforcing 改成 SELINUX=disable</span><br><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\">systemctl disable firewalld.service</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-安装软件\"><a href=\"#2-安装软件\" class=\"headerlink\" title=\"2. 安装软件\"></a>2. 安装软件</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y samba samba-client</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-编辑配置文件，共享-var-www-html-目录\"><a href=\"#3-编辑配置文件，共享-var-www-html-目录\" class=\"headerlink\" title=\"3. 编辑配置文件，共享&#x2F;var&#x2F;www&#x2F;html&#x2F;目录\"></a>3. 编辑配置文件，共享&#x2F;var&#x2F;www&#x2F;html&#x2F;目录</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv /etc/samba/smb.conf /etc/samba/smb.conf.bak</span><br><span class=\"line\">vim /etc/samba/smb.conf</span><br></pre></td></tr></table></figure>\n\n<p>​\t\t在这里插入</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[share]</span><br><span class=\"line\">   comment = It is a test</span><br><span class=\"line\">   path = /var/www/html</span><br><span class=\"line\">   browseable = yes</span><br><span class=\"line\">   writable = yes </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-创建共享用户\"><a href=\"#4-创建共享用户\" class=\"headerlink\" title=\"4. 创建共享用户\"></a>4. 创建共享用户</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useradd van</span><br><span class=\"line\">smbpasswd -a van</span><br><span class=\"line\">#输入 密码</span><br><span class=\"line\">pdbedit -L #查看共享用户</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-启动服务\"><a href=\"#5-启动服务\" class=\"headerlink\" title=\"5. 启动服务\"></a>5. 启动服务</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start smb # 启动服务</span><br><span class=\"line\">systemctl enable smb # 开机自启</span><br><span class=\"line\"></span><br><span class=\"line\">ss -antp | grep smbd #查看是否运行</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-设置目录的本地权限\"><a href=\"#6-设置目录的本地权限\" class=\"headerlink\" title=\"6. 设置目录的本地权限\"></a>6. 设置目录的本地权限</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setfacl -m u:root:rwx /var/www/html</span><br><span class=\"line\"></span><br><span class=\"line\">setfacl -m u:(用户):rwx /(目录)</span><br></pre></td></tr></table></figure>\n\n","cover_type":"img","excerpt":"","more":"<h1 id=\"Linux文件服务器的搭建\"><a href=\"#Linux文件服务器的搭建\" class=\"headerlink\" title=\"Linux文件服务器的搭建\"></a>Linux文件服务器的搭建</h1><h2 id=\"1-关闭SELinux-防火墙\"><a href=\"#1-关闭SELinux-防火墙\" class=\"headerlink\" title=\"1. 关闭SELinux, 防火墙\"></a>1. 关闭SELinux, 防火墙</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setenforce 0</span><br><span class=\"line\">getenforce</span><br><span class=\"line\">vim /etc/sysconfig/selinux #SELINUX=enforcing 改成 SELINUX=disable</span><br><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\">systemctl disable firewalld.service</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-安装软件\"><a href=\"#2-安装软件\" class=\"headerlink\" title=\"2. 安装软件\"></a>2. 安装软件</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y samba samba-client</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-编辑配置文件，共享-var-www-html-目录\"><a href=\"#3-编辑配置文件，共享-var-www-html-目录\" class=\"headerlink\" title=\"3. 编辑配置文件，共享&#x2F;var&#x2F;www&#x2F;html&#x2F;目录\"></a>3. 编辑配置文件，共享&#x2F;var&#x2F;www&#x2F;html&#x2F;目录</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv /etc/samba/smb.conf /etc/samba/smb.conf.bak</span><br><span class=\"line\">vim /etc/samba/smb.conf</span><br></pre></td></tr></table></figure>\n\n<p>​\t\t在这里插入</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[share]</span><br><span class=\"line\">   comment = It is a test</span><br><span class=\"line\">   path = /var/www/html</span><br><span class=\"line\">   browseable = yes</span><br><span class=\"line\">   writable = yes </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-创建共享用户\"><a href=\"#4-创建共享用户\" class=\"headerlink\" title=\"4. 创建共享用户\"></a>4. 创建共享用户</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useradd van</span><br><span class=\"line\">smbpasswd -a van</span><br><span class=\"line\">#输入 密码</span><br><span class=\"line\">pdbedit -L #查看共享用户</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-启动服务\"><a href=\"#5-启动服务\" class=\"headerlink\" title=\"5. 启动服务\"></a>5. 启动服务</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start smb # 启动服务</span><br><span class=\"line\">systemctl enable smb # 开机自启</span><br><span class=\"line\"></span><br><span class=\"line\">ss -antp | grep smbd #查看是否运行</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-设置目录的本地权限\"><a href=\"#6-设置目录的本地权限\" class=\"headerlink\" title=\"6. 设置目录的本地权限\"></a>6. 设置目录的本地权限</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setfacl -m u:root:rwx /var/www/html</span><br><span class=\"line\"></span><br><span class=\"line\">setfacl -m u:(用户):rwx /(目录)</span><br></pre></td></tr></table></figure>\n\n"},{"title":"Centos7 查看是否链接外网 开启外网","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/6f7ae7c4b53225dfee1074d59160671e.png","main_color":"#A7CBFD","abbrlink":"ed95","date":"2022-08-09T16:12:00.000Z","_content":"\n# Linux查看是否链接外网\n\n## 1. 登入 Linux\n\n## 2. ping 百度官网\n\n   ~~~\n   ping www.baidu.com\n   ~~~\n\n## 3. 出现以下界面就代表已连接外网\n\n   ==Ctrl+C停止任何指令 包括Ping==\n\n   ​\t![image-20220413100332915](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011197.png)\n\n## 4. 如果出现这种界面就是没有链接外网\n\n   ![image-20220413100447439](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011242.png)\n\n# CentOS7 开启网络连接\n\n## 1. 打开/etc/sysconfig/network-scripts文件夹。\n\n   ~~~\n   cd /etc/sysconfig/network-scripts\n   ~~~\n\n   ![image-20220413100747819](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011378.png)\n\n## 2. 输入ls命令，查看network-scripts目录下所有文件。\n\n   ~~~\n   ls\n   ~~~\n\n   \n\n   ![image-20220413100702009](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011933.png)\n\n## 3. 输入vi ifcfg-enps33，编辑ifcfg-enps33文件。\n\n   ~~~\n   vi ifcfg-ens33\n   ~~~\n\n   ![image-20220413100929879](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011551.png)\n\n## 4. 按i进入编辑模式\n\n   ![image-20220413101023636](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011167.png)\n\n## 5. 将ONBOOT设置为yes，按ESC键，输入:wq命令，保存文件并退出。\n\n   ![image-20220413101056019](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011572.png)\n\n   ![image-20220413101105796](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011187.png)\n\n## 6. 输入service network restart命令，重启网络。\n\n   ~~~\n   service network restart\n   ~~~\n\n   ![image-20220413101325066](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011924.png)\n\n\n\n# Linux下进行静态IP的设置\n\n## 1.虚拟机的网络模式\n\n###   1.1 桥接模式\n\n​\t\t     桥接模式就是将主机网卡与虚拟机虚拟的网卡利用虚拟网桥进行通信。类似于把物理主机虚拟为一个交换机，相互可以访问而不干扰。在桥接模式下，虚拟机ip地址需要与主机在同一个网段，如果需要联网，则网关与DNS需要与主机网卡一致\n\n##  1.2 NAT（地址转换模式）\n\n​\t\t\t  在NAT模式中，主机网卡直接与虚拟NAT设备相连，利用虚拟的NAT设备以及虚拟DHCP服务器来使虚拟机连接外网。\n\n###  1.3 仅主机模式\n\n​\t\t\t仅主机模式其实就是NAT模式去除了虚拟NAT设备，将虚拟机与外网隔开，使得虚拟机成为一个独立的系统，只与主机相互通讯。\n\n## 2.配置NAT模式\n\n2.1 在虚拟机菜单栏的“编辑”窗口，选择打开虚拟网络编辑器；\n\n​\t![image-20220413101816562](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011438.png)\n\n2.2 选择使用NAT模式，可以设置“NAT设置”和“DHCP设置”；\n\n\n\n​\t![image-20220413101846241](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011023.png)\n\n2.3 点击“NAT设置”，打开如下界面。记住设置的网关IP，在后面配置LinuxIP静态地址时会用到，网关IP地址应与上图中的子网IP地址处于同一网段；\n\n​\t![image-20220413101938954](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011657.png)\n\n2.4 点击“DHCP设置”，打开如下界面，可设置：开始IP地址以及结束IP地址，其中192.60.30.255一般用做广播地址，这方面的知识可参考IP地址的设置；\n\n![image-20220413101951537](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011959.png)\n\n2.5 完成以上设置后，点击“确定”，保存即可。\n\n# 3.Linux系统配置静态IP地址\n\n3.1 使用dhclient命令（dhclient：获取IP地址），也使用ip addr命令（也可使用ifconfig命令，来查看IP地址）；\n\n~~~\nip add\n~~~\n\n​\t![image-20220413102104965](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011133.png)\n3.2修改网关配置信息\n\n## 1. 打开/etc/sysconfig/network-scripts文件夹。\n\n   ~~~\n   cd /etc/sysconfig/network-scripts\n   ~~~\n\n   ![image-20220413100747819](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011843.png)\n\n## 2. 输入ls命令，查看network-scripts目录下所有文件。\n\n   ~~~\n   ls\n   ~~~\n\n   \n\n   ![image-20220413100702009](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011044.png)\n\n## 3. 输入vi ifcfg-enps33，编辑ifcfg-enps33文件。\n\n   ~~~\n   vi ifcfg-ens33\n   ~~~\n\n   ![image-20220413100929879](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011112.png)\n\n## 4. 按i进入编辑模式\n\n   ![image-20220413101023636](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011911.png)\n\n## 5. 修改配置文件\n\n   ![image-20220413102322812](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072012397.png)\n\n   最下面的红框为追加命令：\n\n   ~~~\n   IPADDR=192.168.222.130 # ip地址\n   NETMASK=255.255.255.0 # 固定值 子网掩码\n   GATEWAY=192.168.222.2 # 网关地址\n   DNS1=8.8.8.8\t\t# DNS地址\n   ~~~\n\n3.2 使用：systemctl restart network.service 命令，重启网络服务；\n\t\n\n~~~\nsystemctl restart network.service\n~~~\n\n   \n\n\n3.3 使用ping命令，查看虚拟机是否已经连接到网络；\n\n~~~\nping www.baidu.com\n~~~\n\n​\t![image-20220413100332915](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072012395.png)\n","source":"_posts/服务器/Centos/Centos查看是否链接外网 开启外网.md","raw":"---\ntitle: Centos7 查看是否链接外网 开启外网\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/6f7ae7c4b53225dfee1074d59160671e.png\nmain_color: '#A7CBFD'\ntags:\n  - 网络\n  - Centos\nabbrlink: ed95\ndate: 2022-08-10 00:12:00\n---\n\n# Linux查看是否链接外网\n\n## 1. 登入 Linux\n\n## 2. ping 百度官网\n\n   ~~~\n   ping www.baidu.com\n   ~~~\n\n## 3. 出现以下界面就代表已连接外网\n\n   ==Ctrl+C停止任何指令 包括Ping==\n\n   ​\t![image-20220413100332915](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011197.png)\n\n## 4. 如果出现这种界面就是没有链接外网\n\n   ![image-20220413100447439](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011242.png)\n\n# CentOS7 开启网络连接\n\n## 1. 打开/etc/sysconfig/network-scripts文件夹。\n\n   ~~~\n   cd /etc/sysconfig/network-scripts\n   ~~~\n\n   ![image-20220413100747819](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011378.png)\n\n## 2. 输入ls命令，查看network-scripts目录下所有文件。\n\n   ~~~\n   ls\n   ~~~\n\n   \n\n   ![image-20220413100702009](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011933.png)\n\n## 3. 输入vi ifcfg-enps33，编辑ifcfg-enps33文件。\n\n   ~~~\n   vi ifcfg-ens33\n   ~~~\n\n   ![image-20220413100929879](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011551.png)\n\n## 4. 按i进入编辑模式\n\n   ![image-20220413101023636](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011167.png)\n\n## 5. 将ONBOOT设置为yes，按ESC键，输入:wq命令，保存文件并退出。\n\n   ![image-20220413101056019](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011572.png)\n\n   ![image-20220413101105796](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011187.png)\n\n## 6. 输入service network restart命令，重启网络。\n\n   ~~~\n   service network restart\n   ~~~\n\n   ![image-20220413101325066](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011924.png)\n\n\n\n# Linux下进行静态IP的设置\n\n## 1.虚拟机的网络模式\n\n###   1.1 桥接模式\n\n​\t\t     桥接模式就是将主机网卡与虚拟机虚拟的网卡利用虚拟网桥进行通信。类似于把物理主机虚拟为一个交换机，相互可以访问而不干扰。在桥接模式下，虚拟机ip地址需要与主机在同一个网段，如果需要联网，则网关与DNS需要与主机网卡一致\n\n##  1.2 NAT（地址转换模式）\n\n​\t\t\t  在NAT模式中，主机网卡直接与虚拟NAT设备相连，利用虚拟的NAT设备以及虚拟DHCP服务器来使虚拟机连接外网。\n\n###  1.3 仅主机模式\n\n​\t\t\t仅主机模式其实就是NAT模式去除了虚拟NAT设备，将虚拟机与外网隔开，使得虚拟机成为一个独立的系统，只与主机相互通讯。\n\n## 2.配置NAT模式\n\n2.1 在虚拟机菜单栏的“编辑”窗口，选择打开虚拟网络编辑器；\n\n​\t![image-20220413101816562](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011438.png)\n\n2.2 选择使用NAT模式，可以设置“NAT设置”和“DHCP设置”；\n\n\n\n​\t![image-20220413101846241](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011023.png)\n\n2.3 点击“NAT设置”，打开如下界面。记住设置的网关IP，在后面配置LinuxIP静态地址时会用到，网关IP地址应与上图中的子网IP地址处于同一网段；\n\n​\t![image-20220413101938954](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011657.png)\n\n2.4 点击“DHCP设置”，打开如下界面，可设置：开始IP地址以及结束IP地址，其中192.60.30.255一般用做广播地址，这方面的知识可参考IP地址的设置；\n\n![image-20220413101951537](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011959.png)\n\n2.5 完成以上设置后，点击“确定”，保存即可。\n\n# 3.Linux系统配置静态IP地址\n\n3.1 使用dhclient命令（dhclient：获取IP地址），也使用ip addr命令（也可使用ifconfig命令，来查看IP地址）；\n\n~~~\nip add\n~~~\n\n​\t![image-20220413102104965](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011133.png)\n3.2修改网关配置信息\n\n## 1. 打开/etc/sysconfig/network-scripts文件夹。\n\n   ~~~\n   cd /etc/sysconfig/network-scripts\n   ~~~\n\n   ![image-20220413100747819](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011843.png)\n\n## 2. 输入ls命令，查看network-scripts目录下所有文件。\n\n   ~~~\n   ls\n   ~~~\n\n   \n\n   ![image-20220413100702009](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011044.png)\n\n## 3. 输入vi ifcfg-enps33，编辑ifcfg-enps33文件。\n\n   ~~~\n   vi ifcfg-ens33\n   ~~~\n\n   ![image-20220413100929879](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011112.png)\n\n## 4. 按i进入编辑模式\n\n   ![image-20220413101023636](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011911.png)\n\n## 5. 修改配置文件\n\n   ![image-20220413102322812](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072012397.png)\n\n   最下面的红框为追加命令：\n\n   ~~~\n   IPADDR=192.168.222.130 # ip地址\n   NETMASK=255.255.255.0 # 固定值 子网掩码\n   GATEWAY=192.168.222.2 # 网关地址\n   DNS1=8.8.8.8\t\t# DNS地址\n   ~~~\n\n3.2 使用：systemctl restart network.service 命令，重启网络服务；\n\t\n\n~~~\nsystemctl restart network.service\n~~~\n\n   \n\n\n3.3 使用ping命令，查看虚拟机是否已经连接到网络；\n\n~~~\nping www.baidu.com\n~~~\n\n​\t![image-20220413100332915](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072012395.png)\n","slug":"服务器/Centos/Centos查看是否链接外网 开启外网","published":1,"updated":"2025-06-02T07:25:00.642Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wl0027zcqbf9qx68wm","content":"<h1 id=\"Linux查看是否链接外网\"><a href=\"#Linux查看是否链接外网\" class=\"headerlink\" title=\"Linux查看是否链接外网\"></a>Linux查看是否链接外网</h1><h2 id=\"1-登入-Linux\"><a href=\"#1-登入-Linux\" class=\"headerlink\" title=\"1. 登入 Linux\"></a>1. 登入 Linux</h2><h2 id=\"2-ping-百度官网\"><a href=\"#2-ping-百度官网\" class=\"headerlink\" title=\"2. ping 百度官网\"></a>2. ping 百度官网</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ping www.baidu.com</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-出现以下界面就代表已连接外网\"><a href=\"#3-出现以下界面就代表已连接外网\" class=\"headerlink\" title=\"3. 出现以下界面就代表已连接外网\"></a>3. 出现以下界面就代表已连接外网</h2><p>   &#x3D;&#x3D;Ctrl+C停止任何指令 包括Ping&#x3D;&#x3D;</p>\n<p>   ​\t<img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011197.png\" alt=\"image-20220413100332915\"></p>\n<h2 id=\"4-如果出现这种界面就是没有链接外网\"><a href=\"#4-如果出现这种界面就是没有链接外网\" class=\"headerlink\" title=\"4. 如果出现这种界面就是没有链接外网\"></a>4. 如果出现这种界面就是没有链接外网</h2><p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011242.png\" alt=\"image-20220413100447439\"></p>\n<h1 id=\"CentOS7-开启网络连接\"><a href=\"#CentOS7-开启网络连接\" class=\"headerlink\" title=\"CentOS7 开启网络连接\"></a>CentOS7 开启网络连接</h1><h2 id=\"1-打开-etc-sysconfig-network-scripts文件夹。\"><a href=\"#1-打开-etc-sysconfig-network-scripts文件夹。\" class=\"headerlink\" title=\"1. 打开&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts文件夹。\"></a>1. 打开&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts文件夹。</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /etc/sysconfig/network-scripts</span><br></pre></td></tr></table></figure>\n\n<p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011378.png\" alt=\"image-20220413100747819\"></p>\n<h2 id=\"2-输入ls命令，查看network-scripts目录下所有文件。\"><a href=\"#2-输入ls命令，查看network-scripts目录下所有文件。\" class=\"headerlink\" title=\"2. 输入ls命令，查看network-scripts目录下所有文件。\"></a>2. 输入ls命令，查看network-scripts目录下所有文件。</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ls</span><br></pre></td></tr></table></figure>\n\n<p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011933.png\" alt=\"image-20220413100702009\"></p>\n<h2 id=\"3-输入vi-ifcfg-enps33，编辑ifcfg-enps33文件。\"><a href=\"#3-输入vi-ifcfg-enps33，编辑ifcfg-enps33文件。\" class=\"headerlink\" title=\"3. 输入vi ifcfg-enps33，编辑ifcfg-enps33文件。\"></a>3. 输入vi ifcfg-enps33，编辑ifcfg-enps33文件。</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi ifcfg-ens33</span><br></pre></td></tr></table></figure>\n\n<p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011551.png\" alt=\"image-20220413100929879\"></p>\n<h2 id=\"4-按i进入编辑模式\"><a href=\"#4-按i进入编辑模式\" class=\"headerlink\" title=\"4. 按i进入编辑模式\"></a>4. 按i进入编辑模式</h2><p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011167.png\" alt=\"image-20220413101023636\"></p>\n<h2 id=\"5-将ONBOOT设置为yes，按ESC键，输入-wq命令，保存文件并退出。\"><a href=\"#5-将ONBOOT设置为yes，按ESC键，输入-wq命令，保存文件并退出。\" class=\"headerlink\" title=\"5. 将ONBOOT设置为yes，按ESC键，输入:wq命令，保存文件并退出。\"></a>5. 将ONBOOT设置为yes，按ESC键，输入:wq命令，保存文件并退出。</h2><p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011572.png\" alt=\"image-20220413101056019\"></p>\n<p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011187.png\" alt=\"image-20220413101105796\"></p>\n<h2 id=\"6-输入service-network-restart命令，重启网络。\"><a href=\"#6-输入service-network-restart命令，重启网络。\" class=\"headerlink\" title=\"6. 输入service network restart命令，重启网络。\"></a>6. 输入service network restart命令，重启网络。</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service network restart</span><br></pre></td></tr></table></figure>\n\n<p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011924.png\" alt=\"image-20220413101325066\"></p>\n<h1 id=\"Linux下进行静态IP的设置\"><a href=\"#Linux下进行静态IP的设置\" class=\"headerlink\" title=\"Linux下进行静态IP的设置\"></a>Linux下进行静态IP的设置</h1><h2 id=\"1-虚拟机的网络模式\"><a href=\"#1-虚拟机的网络模式\" class=\"headerlink\" title=\"1.虚拟机的网络模式\"></a>1.虚拟机的网络模式</h2><h3 id=\"1-1-桥接模式\"><a href=\"#1-1-桥接模式\" class=\"headerlink\" title=\"1.1 桥接模式\"></a>1.1 桥接模式</h3><p>​\t\t     桥接模式就是将主机网卡与虚拟机虚拟的网卡利用虚拟网桥进行通信。类似于把物理主机虚拟为一个交换机，相互可以访问而不干扰。在桥接模式下，虚拟机ip地址需要与主机在同一个网段，如果需要联网，则网关与DNS需要与主机网卡一致</p>\n<h2 id=\"1-2-NAT（地址转换模式）\"><a href=\"#1-2-NAT（地址转换模式）\" class=\"headerlink\" title=\"1.2 NAT（地址转换模式）\"></a>1.2 NAT（地址转换模式）</h2><p>​\t\t\t  在NAT模式中，主机网卡直接与虚拟NAT设备相连，利用虚拟的NAT设备以及虚拟DHCP服务器来使虚拟机连接外网。</p>\n<h3 id=\"1-3-仅主机模式\"><a href=\"#1-3-仅主机模式\" class=\"headerlink\" title=\"1.3 仅主机模式\"></a>1.3 仅主机模式</h3><p>​\t\t\t仅主机模式其实就是NAT模式去除了虚拟NAT设备，将虚拟机与外网隔开，使得虚拟机成为一个独立的系统，只与主机相互通讯。</p>\n<h2 id=\"2-配置NAT模式\"><a href=\"#2-配置NAT模式\" class=\"headerlink\" title=\"2.配置NAT模式\"></a>2.配置NAT模式</h2><p>2.1 在虚拟机菜单栏的“编辑”窗口，选择打开虚拟网络编辑器；</p>\n<p>​\t<img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011438.png\" alt=\"image-20220413101816562\"></p>\n<p>2.2 选择使用NAT模式，可以设置“NAT设置”和“DHCP设置”；</p>\n<p>​\t<img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011023.png\" alt=\"image-20220413101846241\"></p>\n<p>2.3 点击“NAT设置”，打开如下界面。记住设置的网关IP，在后面配置LinuxIP静态地址时会用到，网关IP地址应与上图中的子网IP地址处于同一网段；</p>\n<p>​\t<img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011657.png\" alt=\"image-20220413101938954\"></p>\n<p>2.4 点击“DHCP设置”，打开如下界面，可设置：开始IP地址以及结束IP地址，其中192.60.30.255一般用做广播地址，这方面的知识可参考IP地址的设置；</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011959.png\" alt=\"image-20220413101951537\"></p>\n<p>2.5 完成以上设置后，点击“确定”，保存即可。</p>\n<h1 id=\"3-Linux系统配置静态IP地址\"><a href=\"#3-Linux系统配置静态IP地址\" class=\"headerlink\" title=\"3.Linux系统配置静态IP地址\"></a>3.Linux系统配置静态IP地址</h1><p>3.1 使用dhclient命令（dhclient：获取IP地址），也使用ip addr命令（也可使用ifconfig命令，来查看IP地址）；</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ip add</span><br></pre></td></tr></table></figure>\n\n<p>​\t<img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011133.png\" alt=\"image-20220413102104965\"><br>3.2修改网关配置信息</p>\n<h2 id=\"1-打开-etc-sysconfig-network-scripts文件夹。-1\"><a href=\"#1-打开-etc-sysconfig-network-scripts文件夹。-1\" class=\"headerlink\" title=\"1. 打开&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts文件夹。\"></a>1. 打开&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts文件夹。</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /etc/sysconfig/network-scripts</span><br></pre></td></tr></table></figure>\n\n<p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011843.png\" alt=\"image-20220413100747819\"></p>\n<h2 id=\"2-输入ls命令，查看network-scripts目录下所有文件。-1\"><a href=\"#2-输入ls命令，查看network-scripts目录下所有文件。-1\" class=\"headerlink\" title=\"2. 输入ls命令，查看network-scripts目录下所有文件。\"></a>2. 输入ls命令，查看network-scripts目录下所有文件。</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ls</span><br></pre></td></tr></table></figure>\n\n<p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011044.png\" alt=\"image-20220413100702009\"></p>\n<h2 id=\"3-输入vi-ifcfg-enps33，编辑ifcfg-enps33文件。-1\"><a href=\"#3-输入vi-ifcfg-enps33，编辑ifcfg-enps33文件。-1\" class=\"headerlink\" title=\"3. 输入vi ifcfg-enps33，编辑ifcfg-enps33文件。\"></a>3. 输入vi ifcfg-enps33，编辑ifcfg-enps33文件。</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi ifcfg-ens33</span><br></pre></td></tr></table></figure>\n\n<p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011112.png\" alt=\"image-20220413100929879\"></p>\n<h2 id=\"4-按i进入编辑模式-1\"><a href=\"#4-按i进入编辑模式-1\" class=\"headerlink\" title=\"4. 按i进入编辑模式\"></a>4. 按i进入编辑模式</h2><p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011911.png\" alt=\"image-20220413101023636\"></p>\n<h2 id=\"5-修改配置文件\"><a href=\"#5-修改配置文件\" class=\"headerlink\" title=\"5. 修改配置文件\"></a>5. 修改配置文件</h2><p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072012397.png\" alt=\"image-20220413102322812\"></p>\n<p>   最下面的红框为追加命令：</p>\n   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">IPADDR=192.168.222.130 # ip地址</span><br><span class=\"line\">NETMASK=255.255.255.0 # 固定值 子网掩码</span><br><span class=\"line\">GATEWAY=192.168.222.2 # 网关地址</span><br><span class=\"line\">DNS1=8.8.8.8\t\t# DNS地址</span><br></pre></td></tr></table></figure>\n\n<p>3.2 使用：systemctl restart network.service 命令，重启网络服务；</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart network.service</span><br></pre></td></tr></table></figure>\n\n<p>3.3 使用ping命令，查看虚拟机是否已经连接到网络；</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ping www.baidu.com</span><br></pre></td></tr></table></figure>\n\n<p>​\t<img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072012395.png\" alt=\"image-20220413100332915\"></p>\n","cover_type":"img","excerpt":"","more":"<h1 id=\"Linux查看是否链接外网\"><a href=\"#Linux查看是否链接外网\" class=\"headerlink\" title=\"Linux查看是否链接外网\"></a>Linux查看是否链接外网</h1><h2 id=\"1-登入-Linux\"><a href=\"#1-登入-Linux\" class=\"headerlink\" title=\"1. 登入 Linux\"></a>1. 登入 Linux</h2><h2 id=\"2-ping-百度官网\"><a href=\"#2-ping-百度官网\" class=\"headerlink\" title=\"2. ping 百度官网\"></a>2. ping 百度官网</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ping www.baidu.com</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-出现以下界面就代表已连接外网\"><a href=\"#3-出现以下界面就代表已连接外网\" class=\"headerlink\" title=\"3. 出现以下界面就代表已连接外网\"></a>3. 出现以下界面就代表已连接外网</h2><p>   &#x3D;&#x3D;Ctrl+C停止任何指令 包括Ping&#x3D;&#x3D;</p>\n<p>   ​\t<img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011197.png\" alt=\"image-20220413100332915\"></p>\n<h2 id=\"4-如果出现这种界面就是没有链接外网\"><a href=\"#4-如果出现这种界面就是没有链接外网\" class=\"headerlink\" title=\"4. 如果出现这种界面就是没有链接外网\"></a>4. 如果出现这种界面就是没有链接外网</h2><p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011242.png\" alt=\"image-20220413100447439\"></p>\n<h1 id=\"CentOS7-开启网络连接\"><a href=\"#CentOS7-开启网络连接\" class=\"headerlink\" title=\"CentOS7 开启网络连接\"></a>CentOS7 开启网络连接</h1><h2 id=\"1-打开-etc-sysconfig-network-scripts文件夹。\"><a href=\"#1-打开-etc-sysconfig-network-scripts文件夹。\" class=\"headerlink\" title=\"1. 打开&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts文件夹。\"></a>1. 打开&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts文件夹。</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /etc/sysconfig/network-scripts</span><br></pre></td></tr></table></figure>\n\n<p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011378.png\" alt=\"image-20220413100747819\"></p>\n<h2 id=\"2-输入ls命令，查看network-scripts目录下所有文件。\"><a href=\"#2-输入ls命令，查看network-scripts目录下所有文件。\" class=\"headerlink\" title=\"2. 输入ls命令，查看network-scripts目录下所有文件。\"></a>2. 输入ls命令，查看network-scripts目录下所有文件。</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ls</span><br></pre></td></tr></table></figure>\n\n<p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011933.png\" alt=\"image-20220413100702009\"></p>\n<h2 id=\"3-输入vi-ifcfg-enps33，编辑ifcfg-enps33文件。\"><a href=\"#3-输入vi-ifcfg-enps33，编辑ifcfg-enps33文件。\" class=\"headerlink\" title=\"3. 输入vi ifcfg-enps33，编辑ifcfg-enps33文件。\"></a>3. 输入vi ifcfg-enps33，编辑ifcfg-enps33文件。</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi ifcfg-ens33</span><br></pre></td></tr></table></figure>\n\n<p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011551.png\" alt=\"image-20220413100929879\"></p>\n<h2 id=\"4-按i进入编辑模式\"><a href=\"#4-按i进入编辑模式\" class=\"headerlink\" title=\"4. 按i进入编辑模式\"></a>4. 按i进入编辑模式</h2><p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011167.png\" alt=\"image-20220413101023636\"></p>\n<h2 id=\"5-将ONBOOT设置为yes，按ESC键，输入-wq命令，保存文件并退出。\"><a href=\"#5-将ONBOOT设置为yes，按ESC键，输入-wq命令，保存文件并退出。\" class=\"headerlink\" title=\"5. 将ONBOOT设置为yes，按ESC键，输入:wq命令，保存文件并退出。\"></a>5. 将ONBOOT设置为yes，按ESC键，输入:wq命令，保存文件并退出。</h2><p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011572.png\" alt=\"image-20220413101056019\"></p>\n<p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011187.png\" alt=\"image-20220413101105796\"></p>\n<h2 id=\"6-输入service-network-restart命令，重启网络。\"><a href=\"#6-输入service-network-restart命令，重启网络。\" class=\"headerlink\" title=\"6. 输入service network restart命令，重启网络。\"></a>6. 输入service network restart命令，重启网络。</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service network restart</span><br></pre></td></tr></table></figure>\n\n<p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011924.png\" alt=\"image-20220413101325066\"></p>\n<h1 id=\"Linux下进行静态IP的设置\"><a href=\"#Linux下进行静态IP的设置\" class=\"headerlink\" title=\"Linux下进行静态IP的设置\"></a>Linux下进行静态IP的设置</h1><h2 id=\"1-虚拟机的网络模式\"><a href=\"#1-虚拟机的网络模式\" class=\"headerlink\" title=\"1.虚拟机的网络模式\"></a>1.虚拟机的网络模式</h2><h3 id=\"1-1-桥接模式\"><a href=\"#1-1-桥接模式\" class=\"headerlink\" title=\"1.1 桥接模式\"></a>1.1 桥接模式</h3><p>​\t\t     桥接模式就是将主机网卡与虚拟机虚拟的网卡利用虚拟网桥进行通信。类似于把物理主机虚拟为一个交换机，相互可以访问而不干扰。在桥接模式下，虚拟机ip地址需要与主机在同一个网段，如果需要联网，则网关与DNS需要与主机网卡一致</p>\n<h2 id=\"1-2-NAT（地址转换模式）\"><a href=\"#1-2-NAT（地址转换模式）\" class=\"headerlink\" title=\"1.2 NAT（地址转换模式）\"></a>1.2 NAT（地址转换模式）</h2><p>​\t\t\t  在NAT模式中，主机网卡直接与虚拟NAT设备相连，利用虚拟的NAT设备以及虚拟DHCP服务器来使虚拟机连接外网。</p>\n<h3 id=\"1-3-仅主机模式\"><a href=\"#1-3-仅主机模式\" class=\"headerlink\" title=\"1.3 仅主机模式\"></a>1.3 仅主机模式</h3><p>​\t\t\t仅主机模式其实就是NAT模式去除了虚拟NAT设备，将虚拟机与外网隔开，使得虚拟机成为一个独立的系统，只与主机相互通讯。</p>\n<h2 id=\"2-配置NAT模式\"><a href=\"#2-配置NAT模式\" class=\"headerlink\" title=\"2.配置NAT模式\"></a>2.配置NAT模式</h2><p>2.1 在虚拟机菜单栏的“编辑”窗口，选择打开虚拟网络编辑器；</p>\n<p>​\t<img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011438.png\" alt=\"image-20220413101816562\"></p>\n<p>2.2 选择使用NAT模式，可以设置“NAT设置”和“DHCP设置”；</p>\n<p>​\t<img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011023.png\" alt=\"image-20220413101846241\"></p>\n<p>2.3 点击“NAT设置”，打开如下界面。记住设置的网关IP，在后面配置LinuxIP静态地址时会用到，网关IP地址应与上图中的子网IP地址处于同一网段；</p>\n<p>​\t<img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011657.png\" alt=\"image-20220413101938954\"></p>\n<p>2.4 点击“DHCP设置”，打开如下界面，可设置：开始IP地址以及结束IP地址，其中192.60.30.255一般用做广播地址，这方面的知识可参考IP地址的设置；</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011959.png\" alt=\"image-20220413101951537\"></p>\n<p>2.5 完成以上设置后，点击“确定”，保存即可。</p>\n<h1 id=\"3-Linux系统配置静态IP地址\"><a href=\"#3-Linux系统配置静态IP地址\" class=\"headerlink\" title=\"3.Linux系统配置静态IP地址\"></a>3.Linux系统配置静态IP地址</h1><p>3.1 使用dhclient命令（dhclient：获取IP地址），也使用ip addr命令（也可使用ifconfig命令，来查看IP地址）；</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ip add</span><br></pre></td></tr></table></figure>\n\n<p>​\t<img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011133.png\" alt=\"image-20220413102104965\"><br>3.2修改网关配置信息</p>\n<h2 id=\"1-打开-etc-sysconfig-network-scripts文件夹。-1\"><a href=\"#1-打开-etc-sysconfig-network-scripts文件夹。-1\" class=\"headerlink\" title=\"1. 打开&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts文件夹。\"></a>1. 打开&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts文件夹。</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /etc/sysconfig/network-scripts</span><br></pre></td></tr></table></figure>\n\n<p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011843.png\" alt=\"image-20220413100747819\"></p>\n<h2 id=\"2-输入ls命令，查看network-scripts目录下所有文件。-1\"><a href=\"#2-输入ls命令，查看network-scripts目录下所有文件。-1\" class=\"headerlink\" title=\"2. 输入ls命令，查看network-scripts目录下所有文件。\"></a>2. 输入ls命令，查看network-scripts目录下所有文件。</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ls</span><br></pre></td></tr></table></figure>\n\n<p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011044.png\" alt=\"image-20220413100702009\"></p>\n<h2 id=\"3-输入vi-ifcfg-enps33，编辑ifcfg-enps33文件。-1\"><a href=\"#3-输入vi-ifcfg-enps33，编辑ifcfg-enps33文件。-1\" class=\"headerlink\" title=\"3. 输入vi ifcfg-enps33，编辑ifcfg-enps33文件。\"></a>3. 输入vi ifcfg-enps33，编辑ifcfg-enps33文件。</h2>   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi ifcfg-ens33</span><br></pre></td></tr></table></figure>\n\n<p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011112.png\" alt=\"image-20220413100929879\"></p>\n<h2 id=\"4-按i进入编辑模式-1\"><a href=\"#4-按i进入编辑模式-1\" class=\"headerlink\" title=\"4. 按i进入编辑模式\"></a>4. 按i进入编辑模式</h2><p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072011911.png\" alt=\"image-20220413101023636\"></p>\n<h2 id=\"5-修改配置文件\"><a href=\"#5-修改配置文件\" class=\"headerlink\" title=\"5. 修改配置文件\"></a>5. 修改配置文件</h2><p>   <img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072012397.png\" alt=\"image-20220413102322812\"></p>\n<p>   最下面的红框为追加命令：</p>\n   <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">IPADDR=192.168.222.130 # ip地址</span><br><span class=\"line\">NETMASK=255.255.255.0 # 固定值 子网掩码</span><br><span class=\"line\">GATEWAY=192.168.222.2 # 网关地址</span><br><span class=\"line\">DNS1=8.8.8.8\t\t# DNS地址</span><br></pre></td></tr></table></figure>\n\n<p>3.2 使用：systemctl restart network.service 命令，重启网络服务；</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart network.service</span><br></pre></td></tr></table></figure>\n\n<p>3.3 使用ping命令，查看虚拟机是否已经连接到网络；</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ping www.baidu.com</span><br></pre></td></tr></table></figure>\n\n<p>​\t<img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072012395.png\" alt=\"image-20220413100332915\"></p>\n"},{"title":"Centos 日志文件定期删除脚本","abbrlink":"7343","date":"2025-02-18T05:44:35.000Z","_content":"\n## 前言\n\n在Linux系统的日常运维中，日志文件的不断累积会逐渐消耗宝贵的存储资源，甚至影响系统性能。面对日益增长的日志数据，定期清理已成为保障系统健康运行不可或缺的一环。本文将介绍如何高效地管理和定期清除Linux系统中的日志文件，确保您的服务器既能保持最佳性能，又能充分利用存储资源。\n\n同时，需要确保清理日志的周期，不能清除近期的日志，以免造成无法追溯日志的情况。\n\n## 正文\n\n下面是一个Shell脚本\n\n```shell\n#! /bin/bash\n\n#find：linux的查找命令，用户查找指定条件的文件；\n#/opt/soft/log/：想要进行清理的任意目录；\n#-mtime：标准语句写法；\n#+3：查找3天前的文件，这里用数字代表天数；\n#\"*.log\"：希望查找的数据类型，\"*.jpg\"表示查找扩展名为jpg的所有文件，\"*\"表示查找所有文件，这个可以灵活运用，举一反三；\n#-exec：固定写法；\n#rm -rf：强制删除文件，包括目录；\n# {} \\; ：固定写法，一对大括号+空格+\\+;\n\necho \"del file start.....\"\n\nfind /usr/local/huanfa-log/* -mtime +7 -path \"*.log\"  -exec rm -rf {} +  2>&1\n\necho \"del file end\"\n```\n\n## 定期运行脚本\n\n使用crontab\n\n```shell\ncrontab -e\n\n# 每天的23:00（晚上11点）运行位于/app/clear-logfile.sh的脚本\n0 23 * * * /app/clear-logfile.sh\n\ncrontab -l\n\n# 赋于运行权限\nsudo chmod +x /app/clear-logfile.sh\n```\n","source":"_posts/服务器/Centos/Centos日志文件定期删除脚本.md","raw":"---\ntitle: Centos 日志文件定期删除脚本\ncategories:\n  - 服务器\ntags:\n  - Centos\n  - SH脚本\n  - 食用教程\nabbrlink: '7343'\ndate: 2025-02-18 13:44:35\n---\n\n## 前言\n\n在Linux系统的日常运维中，日志文件的不断累积会逐渐消耗宝贵的存储资源，甚至影响系统性能。面对日益增长的日志数据，定期清理已成为保障系统健康运行不可或缺的一环。本文将介绍如何高效地管理和定期清除Linux系统中的日志文件，确保您的服务器既能保持最佳性能，又能充分利用存储资源。\n\n同时，需要确保清理日志的周期，不能清除近期的日志，以免造成无法追溯日志的情况。\n\n## 正文\n\n下面是一个Shell脚本\n\n```shell\n#! /bin/bash\n\n#find：linux的查找命令，用户查找指定条件的文件；\n#/opt/soft/log/：想要进行清理的任意目录；\n#-mtime：标准语句写法；\n#+3：查找3天前的文件，这里用数字代表天数；\n#\"*.log\"：希望查找的数据类型，\"*.jpg\"表示查找扩展名为jpg的所有文件，\"*\"表示查找所有文件，这个可以灵活运用，举一反三；\n#-exec：固定写法；\n#rm -rf：强制删除文件，包括目录；\n# {} \\; ：固定写法，一对大括号+空格+\\+;\n\necho \"del file start.....\"\n\nfind /usr/local/huanfa-log/* -mtime +7 -path \"*.log\"  -exec rm -rf {} +  2>&1\n\necho \"del file end\"\n```\n\n## 定期运行脚本\n\n使用crontab\n\n```shell\ncrontab -e\n\n# 每天的23:00（晚上11点）运行位于/app/clear-logfile.sh的脚本\n0 23 * * * /app/clear-logfile.sh\n\ncrontab -l\n\n# 赋于运行权限\nsudo chmod +x /app/clear-logfile.sh\n```\n","slug":"服务器/Centos/Centos日志文件定期删除脚本","published":1,"updated":"2025-06-02T07:24:58.332Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wl0029zcqb93s1da2m","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在Linux系统的日常运维中，日志文件的不断累积会逐渐消耗宝贵的存储资源，甚至影响系统性能。面对日益增长的日志数据，定期清理已成为保障系统健康运行不可或缺的一环。本文将介绍如何高效地管理和定期清除Linux系统中的日志文件，确保您的服务器既能保持最佳性能，又能充分利用存储资源。</p>\n<p>同时，需要确保清理日志的周期，不能清除近期的日志，以免造成无法追溯日志的情况。</p>\n<h2 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h2><p>下面是一个Shell脚本</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">! /bin/bash</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">find：linux的查找命令，用户查找指定条件的文件；</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">/opt/soft/log/：想要进行清理的任意目录；</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">-mtime：标准语句写法；</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">+3：查找3天前的文件，这里用数字代表天数；</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"string\">&quot;*.log&quot;</span>：希望查找的数据类型，<span class=\"string\">&quot;*.jpg&quot;</span>表示查找扩展名为jpg的所有文件，<span class=\"string\">&quot;*&quot;</span>表示查找所有文件，这个可以灵活运用，举一反三；</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">-<span class=\"built_in\">exec</span>：固定写法；</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"built_in\">rm</span> -rf：强制删除文件，包括目录；</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">&#123;&#125; \\; ：固定写法，一对大括号+空格+\\+;</span></span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;del file start.....&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">find /usr/local/huanfa-log/* -mtime +7 -path &quot;*.log&quot;  -exec rm -rf &#123;&#125; +  2&gt;&amp;1</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;del file end&quot;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"定期运行脚本\"><a href=\"#定期运行脚本\" class=\"headerlink\" title=\"定期运行脚本\"></a>定期运行脚本</h2><p>使用crontab</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -e</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">每天的23:00（晚上11点）运行位于/app/clear-logfile.sh的脚本</span></span><br><span class=\"line\">0 23 * * * /app/clear-logfile.sh</span><br><span class=\"line\"></span><br><span class=\"line\">crontab -l</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">赋于运行权限</span></span><br><span class=\"line\">sudo chmod +x /app/clear-logfile.sh</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=dd9e5c1f-60f4-7a77-8c25-d7c22a155e49","cover_type":"img","excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在Linux系统的日常运维中，日志文件的不断累积会逐渐消耗宝贵的存储资源，甚至影响系统性能。面对日益增长的日志数据，定期清理已成为保障系统健康运行不可或缺的一环。本文将介绍如何高效地管理和定期清除Linux系统中的日志文件，确保您的服务器既能保持最佳性能，又能充分利用存储资源。</p>\n<p>同时，需要确保清理日志的周期，不能清除近期的日志，以免造成无法追溯日志的情况。</p>\n<h2 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h2><p>下面是一个Shell脚本</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">! /bin/bash</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">find：linux的查找命令，用户查找指定条件的文件；</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">/opt/soft/log/：想要进行清理的任意目录；</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">-mtime：标准语句写法；</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">+3：查找3天前的文件，这里用数字代表天数；</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"string\">&quot;*.log&quot;</span>：希望查找的数据类型，<span class=\"string\">&quot;*.jpg&quot;</span>表示查找扩展名为jpg的所有文件，<span class=\"string\">&quot;*&quot;</span>表示查找所有文件，这个可以灵活运用，举一反三；</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">-<span class=\"built_in\">exec</span>：固定写法；</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"built_in\">rm</span> -rf：强制删除文件，包括目录；</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">&#123;&#125; \\; ：固定写法，一对大括号+空格+\\+;</span></span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;del file start.....&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">find /usr/local/huanfa-log/* -mtime +7 -path &quot;*.log&quot;  -exec rm -rf &#123;&#125; +  2&gt;&amp;1</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;del file end&quot;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"定期运行脚本\"><a href=\"#定期运行脚本\" class=\"headerlink\" title=\"定期运行脚本\"></a>定期运行脚本</h2><p>使用crontab</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -e</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">每天的23:00（晚上11点）运行位于/app/clear-logfile.sh的脚本</span></span><br><span class=\"line\">0 23 * * * /app/clear-logfile.sh</span><br><span class=\"line\"></span><br><span class=\"line\">crontab -l</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">赋于运行权限</span></span><br><span class=\"line\">sudo chmod +x /app/clear-logfile.sh</span><br></pre></td></tr></table></figure>\n"},{"title":"Centos 添加端口访问","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/6f7ae7c4b53225dfee1074d59160671e.png","main_color":"#A7CBFD","abbrlink":"ebcd","date":"2022-08-09T16:13:00.000Z","_content":"\n# Centos7添加端口访问\n\n虚拟机新开了5005端口，系统内部是显示开了的，但是外部不能访问端口。\n\n## 1. 怎么开启一个端口\n\n   添加\n\n   ```shell\n   firewall-cmd --zone=public --add-port=5005/tcp --permanent\n   （--permanent永久生效，没有此参数重启后失效）\n   ```\n\n   添加端口外部访问权限（这样外部才能访问）\n\n   ```shell\n   firewall-cmd --add-port=5005/tcp\n   ```\n\n   重新载入，添加端口后重新载入才能起作用\n\n   ```shell\n   firewall-cmd --reload\n   ```\n\n   这些之后，端口是开启成功的，如果没有成功，重启系统试试。\n\n## 2. 查看端口\n\n   ```shell\n   firewall-cmd --zone=public --query-port=80/tcp\n   ```\n\n   \n\n## 3. 删除端口\n\n   ```shell\n   firewall-cmd --zone=public --remove-port=80/tcp --permanent\n   ```\n\n   \n\n## 4. 查看firewall是否运行,下面两个命令都可以\n\n   ```shell\n   systemctl status firewalld\n   \n   firewall-cmd --state\n   ```\n\n   \n\n## 5. 查看当前开了哪些端口\n\n   其实一个服务对应一个端口，每个服务对应/usr/lib/firewalld/services下面一个xml文件。\n\n## 6. 查看开启了哪些服务\n\n   ```shell\n   firewall-cmd --list-services\n   ```\n\n## 7. 查看开启了哪些端口\n\n   ```shell\n   firewall-cmd --list-ports\n   ```\n\n## 8. 查看还有哪些服务可以打开\n\n   ```shell\n   firewall-cmd --get-services\n   ```\n\n## 9. 查看所有打开的端口：\n\n   ```shell\n   firewall-cmd --zone=public --list-ports\n   ```\n\n## 10.更新防火墙规则：\n\n   ```shell\n   firewall-cmd --reload\n   ```\n\n## 11. 添加端口外部访问权限\n\n    ```shell\n    firewall-cmd --add-port=6379/tcp\n    ```\n\n\n​    \n","source":"_posts/服务器/Centos/Centos添加端口访问.md","raw":"---\ntitle: Centos 添加端口访问\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/6f7ae7c4b53225dfee1074d59160671e.png\nmain_color: '#A7CBFD'\ntags:\n  - 网络\n  - Centos\nabbrlink: ebcd\ndate: 2022-08-10 00:13:00\n---\n\n# Centos7添加端口访问\n\n虚拟机新开了5005端口，系统内部是显示开了的，但是外部不能访问端口。\n\n## 1. 怎么开启一个端口\n\n   添加\n\n   ```shell\n   firewall-cmd --zone=public --add-port=5005/tcp --permanent\n   （--permanent永久生效，没有此参数重启后失效）\n   ```\n\n   添加端口外部访问权限（这样外部才能访问）\n\n   ```shell\n   firewall-cmd --add-port=5005/tcp\n   ```\n\n   重新载入，添加端口后重新载入才能起作用\n\n   ```shell\n   firewall-cmd --reload\n   ```\n\n   这些之后，端口是开启成功的，如果没有成功，重启系统试试。\n\n## 2. 查看端口\n\n   ```shell\n   firewall-cmd --zone=public --query-port=80/tcp\n   ```\n\n   \n\n## 3. 删除端口\n\n   ```shell\n   firewall-cmd --zone=public --remove-port=80/tcp --permanent\n   ```\n\n   \n\n## 4. 查看firewall是否运行,下面两个命令都可以\n\n   ```shell\n   systemctl status firewalld\n   \n   firewall-cmd --state\n   ```\n\n   \n\n## 5. 查看当前开了哪些端口\n\n   其实一个服务对应一个端口，每个服务对应/usr/lib/firewalld/services下面一个xml文件。\n\n## 6. 查看开启了哪些服务\n\n   ```shell\n   firewall-cmd --list-services\n   ```\n\n## 7. 查看开启了哪些端口\n\n   ```shell\n   firewall-cmd --list-ports\n   ```\n\n## 8. 查看还有哪些服务可以打开\n\n   ```shell\n   firewall-cmd --get-services\n   ```\n\n## 9. 查看所有打开的端口：\n\n   ```shell\n   firewall-cmd --zone=public --list-ports\n   ```\n\n## 10.更新防火墙规则：\n\n   ```shell\n   firewall-cmd --reload\n   ```\n\n## 11. 添加端口外部访问权限\n\n    ```shell\n    firewall-cmd --add-port=6379/tcp\n    ```\n\n\n​    \n","slug":"服务器/Centos/Centos添加端口访问","published":1,"updated":"2025-06-02T07:25:02.782Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wm002dzcqb63f53h7m","content":"<h1 id=\"Centos7添加端口访问\"><a href=\"#Centos7添加端口访问\" class=\"headerlink\" title=\"Centos7添加端口访问\"></a>Centos7添加端口访问</h1><p>虚拟机新开了5005端口，系统内部是显示开了的，但是外部不能访问端口。</p>\n<h2 id=\"1-怎么开启一个端口\"><a href=\"#1-怎么开启一个端口\" class=\"headerlink\" title=\"1. 怎么开启一个端口\"></a>1. 怎么开启一个端口</h2><p>   添加</p>\n   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --add-port=5005/tcp --permanent</span><br><span class=\"line\">（--permanent永久生效，没有此参数重启后失效）</span><br></pre></td></tr></table></figure>\n\n<p>   添加端口外部访问权限（这样外部才能访问）</p>\n   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --add-port=5005/tcp</span><br></pre></td></tr></table></figure>\n\n<p>   重新载入，添加端口后重新载入才能起作用</p>\n   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n\n<p>   这些之后，端口是开启成功的，如果没有成功，重启系统试试。</p>\n<h2 id=\"2-查看端口\"><a href=\"#2-查看端口\" class=\"headerlink\" title=\"2. 查看端口\"></a>2. 查看端口</h2>   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --query-port=80/tcp</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-删除端口\"><a href=\"#3-删除端口\" class=\"headerlink\" title=\"3. 删除端口\"></a>3. 删除端口</h2>   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --remove-port=80/tcp --permanent</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-查看firewall是否运行-下面两个命令都可以\"><a href=\"#4-查看firewall是否运行-下面两个命令都可以\" class=\"headerlink\" title=\"4. 查看firewall是否运行,下面两个命令都可以\"></a>4. 查看firewall是否运行,下面两个命令都可以</h2>   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status firewalld</span><br><span class=\"line\"></span><br><span class=\"line\">firewall-cmd --state</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-查看当前开了哪些端口\"><a href=\"#5-查看当前开了哪些端口\" class=\"headerlink\" title=\"5. 查看当前开了哪些端口\"></a>5. 查看当前开了哪些端口</h2><p>   其实一个服务对应一个端口，每个服务对应&#x2F;usr&#x2F;lib&#x2F;firewalld&#x2F;services下面一个xml文件。</p>\n<h2 id=\"6-查看开启了哪些服务\"><a href=\"#6-查看开启了哪些服务\" class=\"headerlink\" title=\"6. 查看开启了哪些服务\"></a>6. 查看开启了哪些服务</h2>   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --list-services</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7-查看开启了哪些端口\"><a href=\"#7-查看开启了哪些端口\" class=\"headerlink\" title=\"7. 查看开启了哪些端口\"></a>7. 查看开启了哪些端口</h2>   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --list-ports</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-查看还有哪些服务可以打开\"><a href=\"#8-查看还有哪些服务可以打开\" class=\"headerlink\" title=\"8. 查看还有哪些服务可以打开\"></a>8. 查看还有哪些服务可以打开</h2>   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --get-services</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"9-查看所有打开的端口：\"><a href=\"#9-查看所有打开的端口：\" class=\"headerlink\" title=\"9. 查看所有打开的端口：\"></a>9. 查看所有打开的端口：</h2>   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --list-ports</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"10-更新防火墙规则：\"><a href=\"#10-更新防火墙规则：\" class=\"headerlink\" title=\"10.更新防火墙规则：\"></a>10.更新防火墙规则：</h2>   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"11-添加端口外部访问权限\"><a href=\"#11-添加端口外部访问权限\" class=\"headerlink\" title=\"11. 添加端口外部访问权限\"></a>11. 添加端口外部访问权限</h2><pre><code><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --add-port=6379/tcp</span><br></pre></td></tr></table></figure>\n</code></pre>\n<p>​    </p>\n","cover_type":"img","excerpt":"","more":"<h1 id=\"Centos7添加端口访问\"><a href=\"#Centos7添加端口访问\" class=\"headerlink\" title=\"Centos7添加端口访问\"></a>Centos7添加端口访问</h1><p>虚拟机新开了5005端口，系统内部是显示开了的，但是外部不能访问端口。</p>\n<h2 id=\"1-怎么开启一个端口\"><a href=\"#1-怎么开启一个端口\" class=\"headerlink\" title=\"1. 怎么开启一个端口\"></a>1. 怎么开启一个端口</h2><p>   添加</p>\n   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --add-port=5005/tcp --permanent</span><br><span class=\"line\">（--permanent永久生效，没有此参数重启后失效）</span><br></pre></td></tr></table></figure>\n\n<p>   添加端口外部访问权限（这样外部才能访问）</p>\n   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --add-port=5005/tcp</span><br></pre></td></tr></table></figure>\n\n<p>   重新载入，添加端口后重新载入才能起作用</p>\n   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n\n<p>   这些之后，端口是开启成功的，如果没有成功，重启系统试试。</p>\n<h2 id=\"2-查看端口\"><a href=\"#2-查看端口\" class=\"headerlink\" title=\"2. 查看端口\"></a>2. 查看端口</h2>   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --query-port=80/tcp</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-删除端口\"><a href=\"#3-删除端口\" class=\"headerlink\" title=\"3. 删除端口\"></a>3. 删除端口</h2>   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --remove-port=80/tcp --permanent</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-查看firewall是否运行-下面两个命令都可以\"><a href=\"#4-查看firewall是否运行-下面两个命令都可以\" class=\"headerlink\" title=\"4. 查看firewall是否运行,下面两个命令都可以\"></a>4. 查看firewall是否运行,下面两个命令都可以</h2>   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status firewalld</span><br><span class=\"line\"></span><br><span class=\"line\">firewall-cmd --state</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-查看当前开了哪些端口\"><a href=\"#5-查看当前开了哪些端口\" class=\"headerlink\" title=\"5. 查看当前开了哪些端口\"></a>5. 查看当前开了哪些端口</h2><p>   其实一个服务对应一个端口，每个服务对应&#x2F;usr&#x2F;lib&#x2F;firewalld&#x2F;services下面一个xml文件。</p>\n<h2 id=\"6-查看开启了哪些服务\"><a href=\"#6-查看开启了哪些服务\" class=\"headerlink\" title=\"6. 查看开启了哪些服务\"></a>6. 查看开启了哪些服务</h2>   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --list-services</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7-查看开启了哪些端口\"><a href=\"#7-查看开启了哪些端口\" class=\"headerlink\" title=\"7. 查看开启了哪些端口\"></a>7. 查看开启了哪些端口</h2>   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --list-ports</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-查看还有哪些服务可以打开\"><a href=\"#8-查看还有哪些服务可以打开\" class=\"headerlink\" title=\"8. 查看还有哪些服务可以打开\"></a>8. 查看还有哪些服务可以打开</h2>   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --get-services</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"9-查看所有打开的端口：\"><a href=\"#9-查看所有打开的端口：\" class=\"headerlink\" title=\"9. 查看所有打开的端口：\"></a>9. 查看所有打开的端口：</h2>   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --list-ports</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"10-更新防火墙规则：\"><a href=\"#10-更新防火墙规则：\" class=\"headerlink\" title=\"10.更新防火墙规则：\"></a>10.更新防火墙规则：</h2>   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"11-添加端口外部访问权限\"><a href=\"#11-添加端口外部访问权限\" class=\"headerlink\" title=\"11. 添加端口外部访问权限\"></a>11. 添加端口外部访问权限</h2><pre><code><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --add-port=6379/tcp</span><br></pre></td></tr></table></figure>\n</code></pre>\n<p>​    </p>\n"},{"title":"Centos 离线部署 Redis","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/080ee82692de805283a33e3e1e1db7b4.png","main_color":"#A42122","abbrlink":"bb70","date":"2024-10-14T16:21:00.000Z","_content":"\nLinux 系统如何离线部署 Redis（下载、安装、配置、启动、连接）\n\n# 1、下载安装包和编译所需的 rpm 工具包\n\n​    网上有许多下载资源的途径，这里我直接分享了一下我事先上传到网盘的资源，以供伙伴们下载，节省时间：\n\n# 2、上传至服务器\n\n进入rpm目录，安装rpm工具包\n\n~~~shell\n# 进入rpm目录\ncd rpm目录路径\n \n# 安装rpm工具包\nrpm -ivh *.rpm --nodeps --force\n~~~\n\n# 3、随后就正常安装Redis\n\n[Centos7 安装Redis](/p/20240715000900.html)\n","source":"_posts/服务器/Centos/Centos离线部署Redis.md","raw":"---\ntitle: Centos 离线部署 Redis\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/080ee82692de805283a33e3e1e1db7b4.png\nmain_color: '#A42122'\ntags:\n  - Kafka\n  - Centos\n  - 食用教程\nabbrlink: bb70\ndate: 2024-10-15 00:21:00\n---\n\nLinux 系统如何离线部署 Redis（下载、安装、配置、启动、连接）\n\n# 1、下载安装包和编译所需的 rpm 工具包\n\n​    网上有许多下载资源的途径，这里我直接分享了一下我事先上传到网盘的资源，以供伙伴们下载，节省时间：\n\n# 2、上传至服务器\n\n进入rpm目录，安装rpm工具包\n\n~~~shell\n# 进入rpm目录\ncd rpm目录路径\n \n# 安装rpm工具包\nrpm -ivh *.rpm --nodeps --force\n~~~\n\n# 3、随后就正常安装Redis\n\n[Centos7 安装Redis](/p/20240715000900.html)\n","slug":"服务器/Centos/Centos离线部署Redis","published":1,"updated":"2025-06-02T07:25:05.225Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wm002gzcqb93ct9xj0","content":"<p>Linux 系统如何离线部署 Redis（下载、安装、配置、启动、连接）</p>\n<h1 id=\"1、下载安装包和编译所需的-rpm-工具包\"><a href=\"#1、下载安装包和编译所需的-rpm-工具包\" class=\"headerlink\" title=\"1、下载安装包和编译所需的 rpm 工具包\"></a>1、下载安装包和编译所需的 rpm 工具包</h1><p>​    网上有许多下载资源的途径，这里我直接分享了一下我事先上传到网盘的资源，以供伙伴们下载，节省时间：</p>\n<h1 id=\"2、上传至服务器\"><a href=\"#2、上传至服务器\" class=\"headerlink\" title=\"2、上传至服务器\"></a>2、上传至服务器</h1><p>进入rpm目录，安装rpm工具包</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">进入rpm目录</span></span><br><span class=\"line\">cd rpm目录路径</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装rpm工具包</span></span><br><span class=\"line\">rpm -ivh *.rpm --nodeps --force</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"3、随后就正常安装Redis\"><a href=\"#3、随后就正常安装Redis\" class=\"headerlink\" title=\"3、随后就正常安装Redis\"></a>3、随后就正常安装Redis</h1><p><a href=\"/p/20240715000900.html\">Centos7 安装Redis</a></p>\n","cover_type":"img","excerpt":"","more":"<p>Linux 系统如何离线部署 Redis（下载、安装、配置、启动、连接）</p>\n<h1 id=\"1、下载安装包和编译所需的-rpm-工具包\"><a href=\"#1、下载安装包和编译所需的-rpm-工具包\" class=\"headerlink\" title=\"1、下载安装包和编译所需的 rpm 工具包\"></a>1、下载安装包和编译所需的 rpm 工具包</h1><p>​    网上有许多下载资源的途径，这里我直接分享了一下我事先上传到网盘的资源，以供伙伴们下载，节省时间：</p>\n<h1 id=\"2、上传至服务器\"><a href=\"#2、上传至服务器\" class=\"headerlink\" title=\"2、上传至服务器\"></a>2、上传至服务器</h1><p>进入rpm目录，安装rpm工具包</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">进入rpm目录</span></span><br><span class=\"line\">cd rpm目录路径</span><br><span class=\"line\"><span class=\"meta prompt_\"> </span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装rpm工具包</span></span><br><span class=\"line\">rpm -ivh *.rpm --nodeps --force</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"3、随后就正常安装Redis\"><a href=\"#3、随后就正常安装Redis\" class=\"headerlink\" title=\"3、随后就正常安装Redis\"></a>3、随后就正常安装Redis</h1><p><a href=\"/p/20240715000900.html\">Centos7 安装Redis</a></p>\n"},{"title":"Centos 系统优化","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/f1e2c59c7ab44ca8e0f571118122e40f.png","main_color":"#24AF7A","abbrlink":"8018","date":"2025-02-28T16:14:00.000Z","_content":"\n> 食用前提 这是博主七零八落捡的一些 不知道有没有用 总之照着做就好了\n> PS：此操作建议在安装完成之后立刻进行，适合纯净环境的服务器，请勿在正在运行生产环境的服务器上进行操作！！！\n\n# 换源\n\n> CentOS默认的yum源有时候不是国内镜像，导致yum在线安装及更新速度不是很理想，这时候需要将yum源设置为国内镜像站点（网易or阿里云等）。\n\n```shell\n# 备份yum源\nmv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup\n\n#下载国内yum源配置文件\n# 阿里源（推荐）：\nwget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\n# 网易源：\nwget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo\n\n# 清理yum缓存，并生成新的缓存\nyum clean all\nyum makecache\n\n# 更新源\nyum update\n```\n\n由于有些机器wget也没有下载，所以这里准备了阿里云的源，可直接使用\n\n```shell\nvi /etc/yum.repos.d/CentOS-Base.repo\n```\n\n```repo\n\n# CentOS-Base.repo\n#\n# The mirror system uses the connecting IP address of the client and the\n# update status of each mirror to pick mirrors that are updated to and\n# geographically close to the client.  You should use this for CentOS updates\n# unless you are manually picking other mirrors.\n#\n# If the mirrorlist= does not work for you, as a fall back you can try the \n# remarked out baseurl= line instead.\n#\n#\n \n[base]\nname=CentOS-$releasever - Base - mirrors.aliyun.com\nfailovermethod=priority\nbaseurl=http://mirrors.aliyun.com/centos/$releasever/os/$basearch/\n        http://mirrors.aliyuncs.com/centos/$releasever/os/$basearch/\n        http://mirrors.cloud.aliyuncs.com/centos/$releasever/os/$basearch/\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7\n \n#released updates \n[updates]\nname=CentOS-$releasever - Updates - mirrors.aliyun.com\nfailovermethod=priority\nbaseurl=http://mirrors.aliyun.com/centos/$releasever/updates/$basearch/\n        http://mirrors.aliyuncs.com/centos/$releasever/updates/$basearch/\n        http://mirrors.cloud.aliyuncs.com/centos/$releasever/updates/$basearch/\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7\n \n#additional packages that may be useful\n[extras]\nname=CentOS-$releasever - Extras - mirrors.aliyun.com\nfailovermethod=priority\nbaseurl=http://mirrors.aliyun.com/centos/$releasever/extras/$basearch/\n        http://mirrors.aliyuncs.com/centos/$releasever/extras/$basearch/\n        http://mirrors.cloud.aliyuncs.com/centos/$releasever/extras/$basearch/\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7\n \n#additional packages that extend functionality of existing packages\n[centosplus]\nname=CentOS-$releasever - Plus - mirrors.aliyun.com\nfailovermethod=priority\nbaseurl=http://mirrors.aliyun.com/centos/$releasever/centosplus/$basearch/\n        http://mirrors.aliyuncs.com/centos/$releasever/centosplus/$basearch/\n        http://mirrors.cloud.aliyuncs.com/centos/$releasever/centosplus/$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7\n \n#contrib - packages by Centos Users\n[contrib]\nname=CentOS-$releasever - Contrib - mirrors.aliyun.com\nfailovermethod=priority\nbaseurl=http://mirrors.aliyun.com/centos/$releasever/contrib/$basearch/\n        http://mirrors.aliyuncs.com/centos/$releasever/contrib/$basearch/\n        http://mirrors.cloud.aliyuncs.com/centos/$releasever/contrib/$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7\n\n```\n\n# 跳过图形化界面的用户添加\n\n在CentOS上，图形化登录（如GNOME）通常要求您创建一个用户来登录。如果您不想创建新用户并希望直接使用现有用户登录，可以进行以下设置\n\n```shell\n# 编辑GDM配置文件\nsudo vim /etc/gdm/custom.conf\n\n## 在文件中找到 [daemon] 部分，并添加以下行：\nAutomaticLoginEnable=True AutomaticLogin=<您的用户名>\n例如：\nAutomaticLogin=root\n\n# 删除引导 并重启图形化环境\nyum remove gnome-initial-setup.x86_64\ninit 3\ninit 5\n\n# 重启系统\nreboot\n```\n\n# 安装必要的软件包\n\n在安装CentOS 7后，我们需要安装一些必要的软件包，以便更好地进行系统管理和维护。以下是一些必要的软件包\n\n1. wget：用于下载文件和网页\n2. vim：用于编辑文本文件\n3. net-tools：用于管理网络配置\n4. telnet：用于测试网络连接\n5. lsof：用于查看系统打开的文件\n6. tree：用于查看目录结构\n7. htop：用于更好的查看进程\n\n```shell\nyum -y install  epel-release\nyum -y install wget vim net-tools telnet lsof tree htop\n```\n\n# 配置SELinux\n\nSELinux是CentOS7的安全模块，它可以提高系统的安全性。但是，如果不正确配置，它可能会导致一些问题。以下是一些常见的SELinux配置\n\n```shell\n# 一键关闭\n## 永久关闭\nsed -i 's/enforcing/disabled/' /etc/selinux/config\n\n## 临时关闭\nsetenforce 0\n```\n\n# 关闭swap\n\n```shell\n\n## 临时关闭\nswapoff -a\n\n## 永久关闭\nsed -ri 's/.*swap.*/#&/' /etc/fstab\n\n# 关闭完swap后，一定要重启一下虚拟机！！！\n```\n\n# 时间同步\n\n```shell\n# 安装时间同步工具\nyum install ntpdate -y\n\n# 根据时间同步服务器更新时间\nntpdate time.windows.com\n```\n\n# 一键运行脚本\n\n**包含更新软件源、安装必要软件包、关闭防火墙**\n\n```shell\n\nmv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup\nvi /etc/yum.repos.d/CentOS-Base.repo\nyum clean all\nyum makecache\nyum update -y\nyum -y install  epel-release\nyum -y install wget vim net-tools telnet lsof tree htop\nsystemctl stop firewalld.service\nsystemctl disable firewalld.service\n\n```\n","source":"_posts/服务器/Centos/Centos系统优化.md","raw":"---\ntitle: Centos 系统优化\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/f1e2c59c7ab44ca8e0f571118122e40f.png\nmain_color: '#24AF7A'\ntags:\n  - Centos\nabbrlink: '8018'\ndate: 2025-03-01 00:14:00\n---\n\n> 食用前提 这是博主七零八落捡的一些 不知道有没有用 总之照着做就好了\n> PS：此操作建议在安装完成之后立刻进行，适合纯净环境的服务器，请勿在正在运行生产环境的服务器上进行操作！！！\n\n# 换源\n\n> CentOS默认的yum源有时候不是国内镜像，导致yum在线安装及更新速度不是很理想，这时候需要将yum源设置为国内镜像站点（网易or阿里云等）。\n\n```shell\n# 备份yum源\nmv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup\n\n#下载国内yum源配置文件\n# 阿里源（推荐）：\nwget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\n# 网易源：\nwget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo\n\n# 清理yum缓存，并生成新的缓存\nyum clean all\nyum makecache\n\n# 更新源\nyum update\n```\n\n由于有些机器wget也没有下载，所以这里准备了阿里云的源，可直接使用\n\n```shell\nvi /etc/yum.repos.d/CentOS-Base.repo\n```\n\n```repo\n\n# CentOS-Base.repo\n#\n# The mirror system uses the connecting IP address of the client and the\n# update status of each mirror to pick mirrors that are updated to and\n# geographically close to the client.  You should use this for CentOS updates\n# unless you are manually picking other mirrors.\n#\n# If the mirrorlist= does not work for you, as a fall back you can try the \n# remarked out baseurl= line instead.\n#\n#\n \n[base]\nname=CentOS-$releasever - Base - mirrors.aliyun.com\nfailovermethod=priority\nbaseurl=http://mirrors.aliyun.com/centos/$releasever/os/$basearch/\n        http://mirrors.aliyuncs.com/centos/$releasever/os/$basearch/\n        http://mirrors.cloud.aliyuncs.com/centos/$releasever/os/$basearch/\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7\n \n#released updates \n[updates]\nname=CentOS-$releasever - Updates - mirrors.aliyun.com\nfailovermethod=priority\nbaseurl=http://mirrors.aliyun.com/centos/$releasever/updates/$basearch/\n        http://mirrors.aliyuncs.com/centos/$releasever/updates/$basearch/\n        http://mirrors.cloud.aliyuncs.com/centos/$releasever/updates/$basearch/\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7\n \n#additional packages that may be useful\n[extras]\nname=CentOS-$releasever - Extras - mirrors.aliyun.com\nfailovermethod=priority\nbaseurl=http://mirrors.aliyun.com/centos/$releasever/extras/$basearch/\n        http://mirrors.aliyuncs.com/centos/$releasever/extras/$basearch/\n        http://mirrors.cloud.aliyuncs.com/centos/$releasever/extras/$basearch/\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7\n \n#additional packages that extend functionality of existing packages\n[centosplus]\nname=CentOS-$releasever - Plus - mirrors.aliyun.com\nfailovermethod=priority\nbaseurl=http://mirrors.aliyun.com/centos/$releasever/centosplus/$basearch/\n        http://mirrors.aliyuncs.com/centos/$releasever/centosplus/$basearch/\n        http://mirrors.cloud.aliyuncs.com/centos/$releasever/centosplus/$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7\n \n#contrib - packages by Centos Users\n[contrib]\nname=CentOS-$releasever - Contrib - mirrors.aliyun.com\nfailovermethod=priority\nbaseurl=http://mirrors.aliyun.com/centos/$releasever/contrib/$basearch/\n        http://mirrors.aliyuncs.com/centos/$releasever/contrib/$basearch/\n        http://mirrors.cloud.aliyuncs.com/centos/$releasever/contrib/$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7\n\n```\n\n# 跳过图形化界面的用户添加\n\n在CentOS上，图形化登录（如GNOME）通常要求您创建一个用户来登录。如果您不想创建新用户并希望直接使用现有用户登录，可以进行以下设置\n\n```shell\n# 编辑GDM配置文件\nsudo vim /etc/gdm/custom.conf\n\n## 在文件中找到 [daemon] 部分，并添加以下行：\nAutomaticLoginEnable=True AutomaticLogin=<您的用户名>\n例如：\nAutomaticLogin=root\n\n# 删除引导 并重启图形化环境\nyum remove gnome-initial-setup.x86_64\ninit 3\ninit 5\n\n# 重启系统\nreboot\n```\n\n# 安装必要的软件包\n\n在安装CentOS 7后，我们需要安装一些必要的软件包，以便更好地进行系统管理和维护。以下是一些必要的软件包\n\n1. wget：用于下载文件和网页\n2. vim：用于编辑文本文件\n3. net-tools：用于管理网络配置\n4. telnet：用于测试网络连接\n5. lsof：用于查看系统打开的文件\n6. tree：用于查看目录结构\n7. htop：用于更好的查看进程\n\n```shell\nyum -y install  epel-release\nyum -y install wget vim net-tools telnet lsof tree htop\n```\n\n# 配置SELinux\n\nSELinux是CentOS7的安全模块，它可以提高系统的安全性。但是，如果不正确配置，它可能会导致一些问题。以下是一些常见的SELinux配置\n\n```shell\n# 一键关闭\n## 永久关闭\nsed -i 's/enforcing/disabled/' /etc/selinux/config\n\n## 临时关闭\nsetenforce 0\n```\n\n# 关闭swap\n\n```shell\n\n## 临时关闭\nswapoff -a\n\n## 永久关闭\nsed -ri 's/.*swap.*/#&/' /etc/fstab\n\n# 关闭完swap后，一定要重启一下虚拟机！！！\n```\n\n# 时间同步\n\n```shell\n# 安装时间同步工具\nyum install ntpdate -y\n\n# 根据时间同步服务器更新时间\nntpdate time.windows.com\n```\n\n# 一键运行脚本\n\n**包含更新软件源、安装必要软件包、关闭防火墙**\n\n```shell\n\nmv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup\nvi /etc/yum.repos.d/CentOS-Base.repo\nyum clean all\nyum makecache\nyum update -y\nyum -y install  epel-release\nyum -y install wget vim net-tools telnet lsof tree htop\nsystemctl stop firewalld.service\nsystemctl disable firewalld.service\n\n```\n","slug":"服务器/Centos/Centos系统优化","published":1,"updated":"2025-06-02T07:25:07.680Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wn002jzcqbgw2rgboh","content":"<blockquote>\n<p>食用前提 这是博主七零八落捡的一些 不知道有没有用 总之照着做就好了<br>PS：此操作建议在安装完成之后立刻进行，适合纯净环境的服务器，请勿在正在运行生产环境的服务器上进行操作！！！</p>\n</blockquote>\n<h1 id=\"换源\"><a href=\"#换源\" class=\"headerlink\" title=\"换源\"></a>换源</h1><blockquote>\n<p>CentOS默认的yum源有时候不是国内镜像，导致yum在线安装及更新速度不是很理想，这时候需要将yum源设置为国内镜像站点（网易or阿里云等）。</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">备份yum源</span></span><br><span class=\"line\">mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">下载国内yum源配置文件</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">阿里源（推荐）：</span></span><br><span class=\"line\">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">网易源：</span></span><br><span class=\"line\">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">清理yum缓存，并生成新的缓存</span></span><br><span class=\"line\">yum clean all</span><br><span class=\"line\">yum makecache</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">更新源</span></span><br><span class=\"line\">yum update</span><br></pre></td></tr></table></figure>\n\n<p>由于有些机器wget也没有下载，所以这里准备了阿里云的源，可直接使用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/yum.repos.d/CentOS-Base.repo</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"># CentOS-Base.repo</span><br><span class=\"line\">#</span><br><span class=\"line\"># The mirror system uses the connecting IP address of the client and the</span><br><span class=\"line\"># update status of each mirror to pick mirrors that are updated to and</span><br><span class=\"line\"># geographically close to the client.  You should use this for CentOS updates</span><br><span class=\"line\"># unless you are manually picking other mirrors.</span><br><span class=\"line\">#</span><br><span class=\"line\"># If the mirrorlist= does not work for you, as a fall back you can try the </span><br><span class=\"line\"># remarked out baseurl= line instead.</span><br><span class=\"line\">#</span><br><span class=\"line\">#</span><br><span class=\"line\"> </span><br><span class=\"line\">[base]</span><br><span class=\"line\">name=CentOS-$releasever - Base - mirrors.aliyun.com</span><br><span class=\"line\">failovermethod=priority</span><br><span class=\"line\">baseurl=http://mirrors.aliyun.com/centos/$releasever/os/$basearch/</span><br><span class=\"line\">        http://mirrors.aliyuncs.com/centos/$releasever/os/$basearch/</span><br><span class=\"line\">        http://mirrors.cloud.aliyuncs.com/centos/$releasever/os/$basearch/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"> </span><br><span class=\"line\">#released updates </span><br><span class=\"line\">[updates]</span><br><span class=\"line\">name=CentOS-$releasever - Updates - mirrors.aliyun.com</span><br><span class=\"line\">failovermethod=priority</span><br><span class=\"line\">baseurl=http://mirrors.aliyun.com/centos/$releasever/updates/$basearch/</span><br><span class=\"line\">        http://mirrors.aliyuncs.com/centos/$releasever/updates/$basearch/</span><br><span class=\"line\">        http://mirrors.cloud.aliyuncs.com/centos/$releasever/updates/$basearch/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"> </span><br><span class=\"line\">#additional packages that may be useful</span><br><span class=\"line\">[extras]</span><br><span class=\"line\">name=CentOS-$releasever - Extras - mirrors.aliyun.com</span><br><span class=\"line\">failovermethod=priority</span><br><span class=\"line\">baseurl=http://mirrors.aliyun.com/centos/$releasever/extras/$basearch/</span><br><span class=\"line\">        http://mirrors.aliyuncs.com/centos/$releasever/extras/$basearch/</span><br><span class=\"line\">        http://mirrors.cloud.aliyuncs.com/centos/$releasever/extras/$basearch/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"> </span><br><span class=\"line\">#additional packages that extend functionality of existing packages</span><br><span class=\"line\">[centosplus]</span><br><span class=\"line\">name=CentOS-$releasever - Plus - mirrors.aliyun.com</span><br><span class=\"line\">failovermethod=priority</span><br><span class=\"line\">baseurl=http://mirrors.aliyun.com/centos/$releasever/centosplus/$basearch/</span><br><span class=\"line\">        http://mirrors.aliyuncs.com/centos/$releasever/centosplus/$basearch/</span><br><span class=\"line\">        http://mirrors.cloud.aliyuncs.com/centos/$releasever/centosplus/$basearch/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">enabled=0</span><br><span class=\"line\">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"> </span><br><span class=\"line\">#contrib - packages by Centos Users</span><br><span class=\"line\">[contrib]</span><br><span class=\"line\">name=CentOS-$releasever - Contrib - mirrors.aliyun.com</span><br><span class=\"line\">failovermethod=priority</span><br><span class=\"line\">baseurl=http://mirrors.aliyun.com/centos/$releasever/contrib/$basearch/</span><br><span class=\"line\">        http://mirrors.aliyuncs.com/centos/$releasever/contrib/$basearch/</span><br><span class=\"line\">        http://mirrors.cloud.aliyuncs.com/centos/$releasever/contrib/$basearch/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">enabled=0</span><br><span class=\"line\">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"跳过图形化界面的用户添加\"><a href=\"#跳过图形化界面的用户添加\" class=\"headerlink\" title=\"跳过图形化界面的用户添加\"></a>跳过图形化界面的用户添加</h1><p>在CentOS上，图形化登录（如GNOME）通常要求您创建一个用户来登录。如果您不想创建新用户并希望直接使用现有用户登录，可以进行以下设置</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">编辑GDM配置文件</span></span><br><span class=\"line\">sudo vim /etc/gdm/custom.conf</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 在文件中找到 [daemon] 部分，并添加以下行：</span></span></span><br><span class=\"line\">AutomaticLoginEnable=True AutomaticLogin=&lt;您的用户名&gt;</span><br><span class=\"line\">例如：</span><br><span class=\"line\">AutomaticLogin=root</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">删除引导 并重启图形化环境</span></span><br><span class=\"line\">yum remove gnome-initial-setup.x86_64</span><br><span class=\"line\">init 3</span><br><span class=\"line\">init 5</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重启系统</span></span><br><span class=\"line\">reboot</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"安装必要的软件包\"><a href=\"#安装必要的软件包\" class=\"headerlink\" title=\"安装必要的软件包\"></a>安装必要的软件包</h1><p>在安装CentOS 7后，我们需要安装一些必要的软件包，以便更好地进行系统管理和维护。以下是一些必要的软件包</p>\n<ol>\n<li>wget：用于下载文件和网页</li>\n<li>vim：用于编辑文本文件</li>\n<li>net-tools：用于管理网络配置</li>\n<li>telnet：用于测试网络连接</li>\n<li>lsof：用于查看系统打开的文件</li>\n<li>tree：用于查看目录结构</li>\n<li>htop：用于更好的查看进程</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install  epel-release</span><br><span class=\"line\">yum -y install wget vim net-tools telnet lsof tree htop</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"配置SELinux\"><a href=\"#配置SELinux\" class=\"headerlink\" title=\"配置SELinux\"></a>配置SELinux</h1><p>SELinux是CentOS7的安全模块，它可以提高系统的安全性。但是，如果不正确配置，它可能会导致一些问题。以下是一些常见的SELinux配置</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">一键关闭</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 永久关闭</span></span></span><br><span class=\"line\">sed -i &#x27;s/enforcing/disabled/&#x27; /etc/selinux/config</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 临时关闭</span></span></span><br><span class=\"line\">setenforce 0</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"关闭swap\"><a href=\"#关闭swap\" class=\"headerlink\" title=\"关闭swap\"></a>关闭swap</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 临时关闭</span></span></span><br><span class=\"line\">swapoff -a</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 永久关闭</span></span></span><br><span class=\"line\">sed -ri &#x27;s/.*swap.*/#&amp;/&#x27; /etc/fstab</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">关闭完swap后，一定要重启一下虚拟机！！！</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"时间同步\"><a href=\"#时间同步\" class=\"headerlink\" title=\"时间同步\"></a>时间同步</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装时间同步工具</span></span><br><span class=\"line\">yum install ntpdate -y</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">根据时间同步服务器更新时间</span></span><br><span class=\"line\">ntpdate time.windows.com</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"一键运行脚本\"><a href=\"#一键运行脚本\" class=\"headerlink\" title=\"一键运行脚本\"></a>一键运行脚本</h1><p><strong>包含更新软件源、安装必要软件包、关闭防火墙</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span><br><span class=\"line\">vi /etc/yum.repos.d/CentOS-Base.repo</span><br><span class=\"line\">yum clean all</span><br><span class=\"line\">yum makecache</span><br><span class=\"line\">yum update -y</span><br><span class=\"line\">yum -y install  epel-release</span><br><span class=\"line\">yum -y install wget vim net-tools telnet lsof tree htop</span><br><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\">systemctl disable firewalld.service</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","cover_type":"img","excerpt":"","more":"<blockquote>\n<p>食用前提 这是博主七零八落捡的一些 不知道有没有用 总之照着做就好了<br>PS：此操作建议在安装完成之后立刻进行，适合纯净环境的服务器，请勿在正在运行生产环境的服务器上进行操作！！！</p>\n</blockquote>\n<h1 id=\"换源\"><a href=\"#换源\" class=\"headerlink\" title=\"换源\"></a>换源</h1><blockquote>\n<p>CentOS默认的yum源有时候不是国内镜像，导致yum在线安装及更新速度不是很理想，这时候需要将yum源设置为国内镜像站点（网易or阿里云等）。</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">备份yum源</span></span><br><span class=\"line\">mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">下载国内yum源配置文件</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">阿里源（推荐）：</span></span><br><span class=\"line\">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">网易源：</span></span><br><span class=\"line\">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">清理yum缓存，并生成新的缓存</span></span><br><span class=\"line\">yum clean all</span><br><span class=\"line\">yum makecache</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">更新源</span></span><br><span class=\"line\">yum update</span><br></pre></td></tr></table></figure>\n\n<p>由于有些机器wget也没有下载，所以这里准备了阿里云的源，可直接使用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/yum.repos.d/CentOS-Base.repo</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"># CentOS-Base.repo</span><br><span class=\"line\">#</span><br><span class=\"line\"># The mirror system uses the connecting IP address of the client and the</span><br><span class=\"line\"># update status of each mirror to pick mirrors that are updated to and</span><br><span class=\"line\"># geographically close to the client.  You should use this for CentOS updates</span><br><span class=\"line\"># unless you are manually picking other mirrors.</span><br><span class=\"line\">#</span><br><span class=\"line\"># If the mirrorlist= does not work for you, as a fall back you can try the </span><br><span class=\"line\"># remarked out baseurl= line instead.</span><br><span class=\"line\">#</span><br><span class=\"line\">#</span><br><span class=\"line\"> </span><br><span class=\"line\">[base]</span><br><span class=\"line\">name=CentOS-$releasever - Base - mirrors.aliyun.com</span><br><span class=\"line\">failovermethod=priority</span><br><span class=\"line\">baseurl=http://mirrors.aliyun.com/centos/$releasever/os/$basearch/</span><br><span class=\"line\">        http://mirrors.aliyuncs.com/centos/$releasever/os/$basearch/</span><br><span class=\"line\">        http://mirrors.cloud.aliyuncs.com/centos/$releasever/os/$basearch/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"> </span><br><span class=\"line\">#released updates </span><br><span class=\"line\">[updates]</span><br><span class=\"line\">name=CentOS-$releasever - Updates - mirrors.aliyun.com</span><br><span class=\"line\">failovermethod=priority</span><br><span class=\"line\">baseurl=http://mirrors.aliyun.com/centos/$releasever/updates/$basearch/</span><br><span class=\"line\">        http://mirrors.aliyuncs.com/centos/$releasever/updates/$basearch/</span><br><span class=\"line\">        http://mirrors.cloud.aliyuncs.com/centos/$releasever/updates/$basearch/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"> </span><br><span class=\"line\">#additional packages that may be useful</span><br><span class=\"line\">[extras]</span><br><span class=\"line\">name=CentOS-$releasever - Extras - mirrors.aliyun.com</span><br><span class=\"line\">failovermethod=priority</span><br><span class=\"line\">baseurl=http://mirrors.aliyun.com/centos/$releasever/extras/$basearch/</span><br><span class=\"line\">        http://mirrors.aliyuncs.com/centos/$releasever/extras/$basearch/</span><br><span class=\"line\">        http://mirrors.cloud.aliyuncs.com/centos/$releasever/extras/$basearch/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"> </span><br><span class=\"line\">#additional packages that extend functionality of existing packages</span><br><span class=\"line\">[centosplus]</span><br><span class=\"line\">name=CentOS-$releasever - Plus - mirrors.aliyun.com</span><br><span class=\"line\">failovermethod=priority</span><br><span class=\"line\">baseurl=http://mirrors.aliyun.com/centos/$releasever/centosplus/$basearch/</span><br><span class=\"line\">        http://mirrors.aliyuncs.com/centos/$releasever/centosplus/$basearch/</span><br><span class=\"line\">        http://mirrors.cloud.aliyuncs.com/centos/$releasever/centosplus/$basearch/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">enabled=0</span><br><span class=\"line\">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"> </span><br><span class=\"line\">#contrib - packages by Centos Users</span><br><span class=\"line\">[contrib]</span><br><span class=\"line\">name=CentOS-$releasever - Contrib - mirrors.aliyun.com</span><br><span class=\"line\">failovermethod=priority</span><br><span class=\"line\">baseurl=http://mirrors.aliyun.com/centos/$releasever/contrib/$basearch/</span><br><span class=\"line\">        http://mirrors.aliyuncs.com/centos/$releasever/contrib/$basearch/</span><br><span class=\"line\">        http://mirrors.cloud.aliyuncs.com/centos/$releasever/contrib/$basearch/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">enabled=0</span><br><span class=\"line\">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"跳过图形化界面的用户添加\"><a href=\"#跳过图形化界面的用户添加\" class=\"headerlink\" title=\"跳过图形化界面的用户添加\"></a>跳过图形化界面的用户添加</h1><p>在CentOS上，图形化登录（如GNOME）通常要求您创建一个用户来登录。如果您不想创建新用户并希望直接使用现有用户登录，可以进行以下设置</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">编辑GDM配置文件</span></span><br><span class=\"line\">sudo vim /etc/gdm/custom.conf</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 在文件中找到 [daemon] 部分，并添加以下行：</span></span></span><br><span class=\"line\">AutomaticLoginEnable=True AutomaticLogin=&lt;您的用户名&gt;</span><br><span class=\"line\">例如：</span><br><span class=\"line\">AutomaticLogin=root</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">删除引导 并重启图形化环境</span></span><br><span class=\"line\">yum remove gnome-initial-setup.x86_64</span><br><span class=\"line\">init 3</span><br><span class=\"line\">init 5</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重启系统</span></span><br><span class=\"line\">reboot</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"安装必要的软件包\"><a href=\"#安装必要的软件包\" class=\"headerlink\" title=\"安装必要的软件包\"></a>安装必要的软件包</h1><p>在安装CentOS 7后，我们需要安装一些必要的软件包，以便更好地进行系统管理和维护。以下是一些必要的软件包</p>\n<ol>\n<li>wget：用于下载文件和网页</li>\n<li>vim：用于编辑文本文件</li>\n<li>net-tools：用于管理网络配置</li>\n<li>telnet：用于测试网络连接</li>\n<li>lsof：用于查看系统打开的文件</li>\n<li>tree：用于查看目录结构</li>\n<li>htop：用于更好的查看进程</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install  epel-release</span><br><span class=\"line\">yum -y install wget vim net-tools telnet lsof tree htop</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"配置SELinux\"><a href=\"#配置SELinux\" class=\"headerlink\" title=\"配置SELinux\"></a>配置SELinux</h1><p>SELinux是CentOS7的安全模块，它可以提高系统的安全性。但是，如果不正确配置，它可能会导致一些问题。以下是一些常见的SELinux配置</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">一键关闭</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 永久关闭</span></span></span><br><span class=\"line\">sed -i &#x27;s/enforcing/disabled/&#x27; /etc/selinux/config</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 临时关闭</span></span></span><br><span class=\"line\">setenforce 0</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"关闭swap\"><a href=\"#关闭swap\" class=\"headerlink\" title=\"关闭swap\"></a>关闭swap</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 临时关闭</span></span></span><br><span class=\"line\">swapoff -a</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 永久关闭</span></span></span><br><span class=\"line\">sed -ri &#x27;s/.*swap.*/#&amp;/&#x27; /etc/fstab</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">关闭完swap后，一定要重启一下虚拟机！！！</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"时间同步\"><a href=\"#时间同步\" class=\"headerlink\" title=\"时间同步\"></a>时间同步</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装时间同步工具</span></span><br><span class=\"line\">yum install ntpdate -y</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">根据时间同步服务器更新时间</span></span><br><span class=\"line\">ntpdate time.windows.com</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"一键运行脚本\"><a href=\"#一键运行脚本\" class=\"headerlink\" title=\"一键运行脚本\"></a>一键运行脚本</h1><p><strong>包含更新软件源、安装必要软件包、关闭防火墙</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span><br><span class=\"line\">vi /etc/yum.repos.d/CentOS-Base.repo</span><br><span class=\"line\">yum clean all</span><br><span class=\"line\">yum makecache</span><br><span class=\"line\">yum update -y</span><br><span class=\"line\">yum -y install  epel-release</span><br><span class=\"line\">yum -y install wget vim net-tools telnet lsof tree htop</span><br><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\">systemctl disable firewalld.service</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n"},{"title":"Centos 系统安装","cover":"https://pan.jianglin.cc:8443/d/images/2025/06/01/cb2b31b7c34cc47a9f208a7be9cbd32d.png","main_color":"#E2AECB","abbrlink":"5068","date":"2022-08-09T16:13:00.000Z","_content":"\n下文主要介绍使用Vmware软件安装一个centos7.9的linux虚拟机（非虚拟机安装，安装过程基本相同，这里不做说明）。正常安装好Vmware软件后，就直接按照以下步骤进行。\n\n# 一、 配置虚拟机\n\n## 1. 创建新的虚拟机\n\n![image-20220413084707493](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006968.png)\n\n## 2. 选择“典型”，点击下一步\n\n![image-20220413084746611](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006527.png)\n\n## 3. 选择稍后安装\n\n==（如果选择安装程序光盘映像文件，则会按照最小系统自动安装）==\n\n![image-20220413084827622](src/image-20220413084827622.png)\n\n## 4. 选择Linux操作系统，版本选择Centos7 64位\n\n![image-20220413085149709](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006061.png)\n\n## 5. 设置主机名、虚拟机存放位置\n\n![image-20220413085402406](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006108.png)\n\n## 6. 虚拟磁盘设置，磁盘大小和实际计算机硬盘大小无关系。\n\n==建议选择分为单个文件==\n\n![image-20220413085506300](src/image-20220413085506300.png)\n\n## 7. 点击自定义硬件\n\n![image-20220413085625000](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006728.png)\n![image-20220413085714818](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006349.png)\n![image-20220413085750301](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006392.png)\n![image-20220413085845315](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006753.png)\n![image-20220413090005394](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006249.png)\n\n## 8. 然后点击完成\n\n![image-20220413090045474](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006790.png)\n\n# 二、安装Centos7.9\n\n## 1. 点击开启此虚拟机\n\n![image-20220413090249237](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006102.png)\n\n## 2. 第一行安装 Centos7\n\n![image-20220413090329810](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006301.png)\n\n## 3. 跑码进行GUI界面\n\n![image-20220413090430296](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006646.png)\n\n![image-20220413090436071](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006102.png)\n\n![image-20220413090441255](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006702.png)\n\n![image-20220413090458544](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006428.png)\n\n## 4. 第一个滑到最下面选择中国 点击==继续==\n\n![image-20220413090544721](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006102.png)\n\n## 5. 安装设置\n\n**选择软件里的软件选择**\n\n![image-20220413090646519](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006463.png)\n\n选择最小安装 系统管理工具  点击完成\n\n![image-20220413090728909](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006345.png)\n\n滑到最下面选择系统安装位置\n\n![image-20220413090856082](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006922.png)\n\n选择硬盘 自动配置分区 然后点击完成\n\n![image-20220413090938987](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006523.png)\n\n**点击网络和主机名**\n\n![image-20220413091046294](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006138.png)\n\n编辑主机名\n\n![image-20220413091136964](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007584.png)\n\n点击配置网络\n\n![image-20220413091201116](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007002.png)\n\n==如果使用固定ip==\n\n查看一下以太网的配置 这里 是100.0.0.0 那么一会我们就输入==100.0.0.(大于2的数字)==\n\n![image-20220413091504209](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007437.png)\n\n![image-20220413092306772](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007872.png)\n\n选择IPv4设置 方法是手动 地址新增 输入==100.0.0.(大于2的数字)== 上面的 子网掩码输入上面查到的信息  DNS服务器输入8.8.8.8\n\n![image-20220413092402931](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007306.png)\n\n==自动获取IP地址就不需要设置网络信息了==\n\n点击开启以太网 就可以查看获取到的ip地址\n\n![image-20220413092452335](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007613.png)\n\n![image-20220413092618201](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007974.png)\n\n## 6. 点击开始安装 进行安装\n\n![image-20220413092932475](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007237.png)\n\n## 7. 设置root密码 和创建用户 也可以不创建\n\n![image-20220413093005837](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007041.png)\n\n![image-20220413093100278](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007439.png)\n\n## 8. 安装完成\n\n![image-20220413093207805](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007128.png)\n","source":"_posts/服务器/Centos/Centos系统安装.md","raw":"---\ntitle: Centos 系统安装\ncategories:\n  - 服务器\ncover: >-\n  https://pan.jianglin.cc:8443/d/images/2025/06/01/cb2b31b7c34cc47a9f208a7be9cbd32d.png\nmain_color: '#E2AECB'\ntags:\n  - Centos\n  - 食用教程\nabbrlink: '5068'\ndate: 2022-08-10 00:13:00\n---\n\n下文主要介绍使用Vmware软件安装一个centos7.9的linux虚拟机（非虚拟机安装，安装过程基本相同，这里不做说明）。正常安装好Vmware软件后，就直接按照以下步骤进行。\n\n# 一、 配置虚拟机\n\n## 1. 创建新的虚拟机\n\n![image-20220413084707493](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006968.png)\n\n## 2. 选择“典型”，点击下一步\n\n![image-20220413084746611](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006527.png)\n\n## 3. 选择稍后安装\n\n==（如果选择安装程序光盘映像文件，则会按照最小系统自动安装）==\n\n![image-20220413084827622](src/image-20220413084827622.png)\n\n## 4. 选择Linux操作系统，版本选择Centos7 64位\n\n![image-20220413085149709](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006061.png)\n\n## 5. 设置主机名、虚拟机存放位置\n\n![image-20220413085402406](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006108.png)\n\n## 6. 虚拟磁盘设置，磁盘大小和实际计算机硬盘大小无关系。\n\n==建议选择分为单个文件==\n\n![image-20220413085506300](src/image-20220413085506300.png)\n\n## 7. 点击自定义硬件\n\n![image-20220413085625000](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006728.png)\n![image-20220413085714818](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006349.png)\n![image-20220413085750301](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006392.png)\n![image-20220413085845315](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006753.png)\n![image-20220413090005394](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006249.png)\n\n## 8. 然后点击完成\n\n![image-20220413090045474](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006790.png)\n\n# 二、安装Centos7.9\n\n## 1. 点击开启此虚拟机\n\n![image-20220413090249237](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006102.png)\n\n## 2. 第一行安装 Centos7\n\n![image-20220413090329810](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006301.png)\n\n## 3. 跑码进行GUI界面\n\n![image-20220413090430296](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006646.png)\n\n![image-20220413090436071](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006102.png)\n\n![image-20220413090441255](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006702.png)\n\n![image-20220413090458544](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006428.png)\n\n## 4. 第一个滑到最下面选择中国 点击==继续==\n\n![image-20220413090544721](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006102.png)\n\n## 5. 安装设置\n\n**选择软件里的软件选择**\n\n![image-20220413090646519](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006463.png)\n\n选择最小安装 系统管理工具  点击完成\n\n![image-20220413090728909](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006345.png)\n\n滑到最下面选择系统安装位置\n\n![image-20220413090856082](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006922.png)\n\n选择硬盘 自动配置分区 然后点击完成\n\n![image-20220413090938987](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006523.png)\n\n**点击网络和主机名**\n\n![image-20220413091046294](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006138.png)\n\n编辑主机名\n\n![image-20220413091136964](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007584.png)\n\n点击配置网络\n\n![image-20220413091201116](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007002.png)\n\n==如果使用固定ip==\n\n查看一下以太网的配置 这里 是100.0.0.0 那么一会我们就输入==100.0.0.(大于2的数字)==\n\n![image-20220413091504209](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007437.png)\n\n![image-20220413092306772](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007872.png)\n\n选择IPv4设置 方法是手动 地址新增 输入==100.0.0.(大于2的数字)== 上面的 子网掩码输入上面查到的信息  DNS服务器输入8.8.8.8\n\n![image-20220413092402931](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007306.png)\n\n==自动获取IP地址就不需要设置网络信息了==\n\n点击开启以太网 就可以查看获取到的ip地址\n\n![image-20220413092452335](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007613.png)\n\n![image-20220413092618201](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007974.png)\n\n## 6. 点击开始安装 进行安装\n\n![image-20220413092932475](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007237.png)\n\n## 7. 设置root密码 和创建用户 也可以不创建\n\n![image-20220413093005837](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007041.png)\n\n![image-20220413093100278](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007439.png)\n\n## 8. 安装完成\n\n![image-20220413093207805](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007128.png)\n","slug":"服务器/Centos/Centos系统安装","published":1,"updated":"2025-06-02T07:25:10.740Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wo002lzcqbgs045245","content":"<p>下文主要介绍使用Vmware软件安装一个centos7.9的linux虚拟机（非虚拟机安装，安装过程基本相同，这里不做说明）。正常安装好Vmware软件后，就直接按照以下步骤进行。</p>\n<h1 id=\"一、-配置虚拟机\"><a href=\"#一、-配置虚拟机\" class=\"headerlink\" title=\"一、 配置虚拟机\"></a>一、 配置虚拟机</h1><h2 id=\"1-创建新的虚拟机\"><a href=\"#1-创建新的虚拟机\" class=\"headerlink\" title=\"1. 创建新的虚拟机\"></a>1. 创建新的虚拟机</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006968.png\" alt=\"image-20220413084707493\"></p>\n<h2 id=\"2-选择“典型”，点击下一步\"><a href=\"#2-选择“典型”，点击下一步\" class=\"headerlink\" title=\"2. 选择“典型”，点击下一步\"></a>2. 选择“典型”，点击下一步</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006527.png\" alt=\"image-20220413084746611\"></p>\n<h2 id=\"3-选择稍后安装\"><a href=\"#3-选择稍后安装\" class=\"headerlink\" title=\"3. 选择稍后安装\"></a>3. 选择稍后安装</h2><p>&#x3D;&#x3D;（如果选择安装程序光盘映像文件，则会按照最小系统自动安装）&#x3D;&#x3D;</p>\n<p><img src=\"/src/image-20220413084827622.png\" alt=\"image-20220413084827622\"></p>\n<h2 id=\"4-选择Linux操作系统，版本选择Centos7-64位\"><a href=\"#4-选择Linux操作系统，版本选择Centos7-64位\" class=\"headerlink\" title=\"4. 选择Linux操作系统，版本选择Centos7 64位\"></a>4. 选择Linux操作系统，版本选择Centos7 64位</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006061.png\" alt=\"image-20220413085149709\"></p>\n<h2 id=\"5-设置主机名、虚拟机存放位置\"><a href=\"#5-设置主机名、虚拟机存放位置\" class=\"headerlink\" title=\"5. 设置主机名、虚拟机存放位置\"></a>5. 设置主机名、虚拟机存放位置</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006108.png\" alt=\"image-20220413085402406\"></p>\n<h2 id=\"6-虚拟磁盘设置，磁盘大小和实际计算机硬盘大小无关系。\"><a href=\"#6-虚拟磁盘设置，磁盘大小和实际计算机硬盘大小无关系。\" class=\"headerlink\" title=\"6. 虚拟磁盘设置，磁盘大小和实际计算机硬盘大小无关系。\"></a>6. 虚拟磁盘设置，磁盘大小和实际计算机硬盘大小无关系。</h2><p>&#x3D;&#x3D;建议选择分为单个文件&#x3D;&#x3D;</p>\n<p><img src=\"/src/image-20220413085506300.png\" alt=\"image-20220413085506300\"></p>\n<h2 id=\"7-点击自定义硬件\"><a href=\"#7-点击自定义硬件\" class=\"headerlink\" title=\"7. 点击自定义硬件\"></a>7. 点击自定义硬件</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006728.png\" alt=\"image-20220413085625000\"><br><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006349.png\" alt=\"image-20220413085714818\"><br><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006392.png\" alt=\"image-20220413085750301\"><br><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006753.png\" alt=\"image-20220413085845315\"><br><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006249.png\" alt=\"image-20220413090005394\"></p>\n<h2 id=\"8-然后点击完成\"><a href=\"#8-然后点击完成\" class=\"headerlink\" title=\"8. 然后点击完成\"></a>8. 然后点击完成</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006790.png\" alt=\"image-20220413090045474\"></p>\n<h1 id=\"二、安装Centos7-9\"><a href=\"#二、安装Centos7-9\" class=\"headerlink\" title=\"二、安装Centos7.9\"></a>二、安装Centos7.9</h1><h2 id=\"1-点击开启此虚拟机\"><a href=\"#1-点击开启此虚拟机\" class=\"headerlink\" title=\"1. 点击开启此虚拟机\"></a>1. 点击开启此虚拟机</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006102.png\" alt=\"image-20220413090249237\"></p>\n<h2 id=\"2-第一行安装-Centos7\"><a href=\"#2-第一行安装-Centos7\" class=\"headerlink\" title=\"2. 第一行安装 Centos7\"></a>2. 第一行安装 Centos7</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006301.png\" alt=\"image-20220413090329810\"></p>\n<h2 id=\"3-跑码进行GUI界面\"><a href=\"#3-跑码进行GUI界面\" class=\"headerlink\" title=\"3. 跑码进行GUI界面\"></a>3. 跑码进行GUI界面</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006646.png\" alt=\"image-20220413090430296\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006102.png\" alt=\"image-20220413090436071\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006702.png\" alt=\"image-20220413090441255\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006428.png\" alt=\"image-20220413090458544\"></p>\n<h2 id=\"4-第一个滑到最下面选择中国-点击-继续\"><a href=\"#4-第一个滑到最下面选择中国-点击-继续\" class=\"headerlink\" title=\"4. 第一个滑到最下面选择中国 点击&#x3D;&#x3D;继续&#x3D;&#x3D;\"></a>4. 第一个滑到最下面选择中国 点击&#x3D;&#x3D;继续&#x3D;&#x3D;</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006102.png\" alt=\"image-20220413090544721\"></p>\n<h2 id=\"5-安装设置\"><a href=\"#5-安装设置\" class=\"headerlink\" title=\"5. 安装设置\"></a>5. 安装设置</h2><p><strong>选择软件里的软件选择</strong></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006463.png\" alt=\"image-20220413090646519\"></p>\n<p>选择最小安装 系统管理工具  点击完成</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006345.png\" alt=\"image-20220413090728909\"></p>\n<p>滑到最下面选择系统安装位置</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006922.png\" alt=\"image-20220413090856082\"></p>\n<p>选择硬盘 自动配置分区 然后点击完成</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006523.png\" alt=\"image-20220413090938987\"></p>\n<p><strong>点击网络和主机名</strong></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006138.png\" alt=\"image-20220413091046294\"></p>\n<p>编辑主机名</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007584.png\" alt=\"image-20220413091136964\"></p>\n<p>点击配置网络</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007002.png\" alt=\"image-20220413091201116\"></p>\n<p>&#x3D;&#x3D;如果使用固定ip&#x3D;&#x3D;</p>\n<p>查看一下以太网的配置 这里 是100.0.0.0 那么一会我们就输入&#x3D;&#x3D;100.0.0.(大于2的数字)&#x3D;&#x3D;</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007437.png\" alt=\"image-20220413091504209\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007872.png\" alt=\"image-20220413092306772\"></p>\n<p>选择IPv4设置 方法是手动 地址新增 输入&#x3D;&#x3D;100.0.0.(大于2的数字)&#x3D;&#x3D; 上面的 子网掩码输入上面查到的信息  DNS服务器输入8.8.8.8</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007306.png\" alt=\"image-20220413092402931\"></p>\n<p>&#x3D;&#x3D;自动获取IP地址就不需要设置网络信息了&#x3D;&#x3D;</p>\n<p>点击开启以太网 就可以查看获取到的ip地址</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007613.png\" alt=\"image-20220413092452335\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007974.png\" alt=\"image-20220413092618201\"></p>\n<h2 id=\"6-点击开始安装-进行安装\"><a href=\"#6-点击开始安装-进行安装\" class=\"headerlink\" title=\"6. 点击开始安装 进行安装\"></a>6. 点击开始安装 进行安装</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007237.png\" alt=\"image-20220413092932475\"></p>\n<h2 id=\"7-设置root密码-和创建用户-也可以不创建\"><a href=\"#7-设置root密码-和创建用户-也可以不创建\" class=\"headerlink\" title=\"7. 设置root密码 和创建用户 也可以不创建\"></a>7. 设置root密码 和创建用户 也可以不创建</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007041.png\" alt=\"image-20220413093005837\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007439.png\" alt=\"image-20220413093100278\"></p>\n<h2 id=\"8-安装完成\"><a href=\"#8-安装完成\" class=\"headerlink\" title=\"8. 安装完成\"></a>8. 安装完成</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007128.png\" alt=\"image-20220413093207805\"></p>\n","cover_type":"img","excerpt":"","more":"<p>下文主要介绍使用Vmware软件安装一个centos7.9的linux虚拟机（非虚拟机安装，安装过程基本相同，这里不做说明）。正常安装好Vmware软件后，就直接按照以下步骤进行。</p>\n<h1 id=\"一、-配置虚拟机\"><a href=\"#一、-配置虚拟机\" class=\"headerlink\" title=\"一、 配置虚拟机\"></a>一、 配置虚拟机</h1><h2 id=\"1-创建新的虚拟机\"><a href=\"#1-创建新的虚拟机\" class=\"headerlink\" title=\"1. 创建新的虚拟机\"></a>1. 创建新的虚拟机</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006968.png\" alt=\"image-20220413084707493\"></p>\n<h2 id=\"2-选择“典型”，点击下一步\"><a href=\"#2-选择“典型”，点击下一步\" class=\"headerlink\" title=\"2. 选择“典型”，点击下一步\"></a>2. 选择“典型”，点击下一步</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006527.png\" alt=\"image-20220413084746611\"></p>\n<h2 id=\"3-选择稍后安装\"><a href=\"#3-选择稍后安装\" class=\"headerlink\" title=\"3. 选择稍后安装\"></a>3. 选择稍后安装</h2><p>&#x3D;&#x3D;（如果选择安装程序光盘映像文件，则会按照最小系统自动安装）&#x3D;&#x3D;</p>\n<p><img src=\"/src/image-20220413084827622.png\" alt=\"image-20220413084827622\"></p>\n<h2 id=\"4-选择Linux操作系统，版本选择Centos7-64位\"><a href=\"#4-选择Linux操作系统，版本选择Centos7-64位\" class=\"headerlink\" title=\"4. 选择Linux操作系统，版本选择Centos7 64位\"></a>4. 选择Linux操作系统，版本选择Centos7 64位</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006061.png\" alt=\"image-20220413085149709\"></p>\n<h2 id=\"5-设置主机名、虚拟机存放位置\"><a href=\"#5-设置主机名、虚拟机存放位置\" class=\"headerlink\" title=\"5. 设置主机名、虚拟机存放位置\"></a>5. 设置主机名、虚拟机存放位置</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006108.png\" alt=\"image-20220413085402406\"></p>\n<h2 id=\"6-虚拟磁盘设置，磁盘大小和实际计算机硬盘大小无关系。\"><a href=\"#6-虚拟磁盘设置，磁盘大小和实际计算机硬盘大小无关系。\" class=\"headerlink\" title=\"6. 虚拟磁盘设置，磁盘大小和实际计算机硬盘大小无关系。\"></a>6. 虚拟磁盘设置，磁盘大小和实际计算机硬盘大小无关系。</h2><p>&#x3D;&#x3D;建议选择分为单个文件&#x3D;&#x3D;</p>\n<p><img src=\"/src/image-20220413085506300.png\" alt=\"image-20220413085506300\"></p>\n<h2 id=\"7-点击自定义硬件\"><a href=\"#7-点击自定义硬件\" class=\"headerlink\" title=\"7. 点击自定义硬件\"></a>7. 点击自定义硬件</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006728.png\" alt=\"image-20220413085625000\"><br><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006349.png\" alt=\"image-20220413085714818\"><br><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006392.png\" alt=\"image-20220413085750301\"><br><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006753.png\" alt=\"image-20220413085845315\"><br><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006249.png\" alt=\"image-20220413090005394\"></p>\n<h2 id=\"8-然后点击完成\"><a href=\"#8-然后点击完成\" class=\"headerlink\" title=\"8. 然后点击完成\"></a>8. 然后点击完成</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006790.png\" alt=\"image-20220413090045474\"></p>\n<h1 id=\"二、安装Centos7-9\"><a href=\"#二、安装Centos7-9\" class=\"headerlink\" title=\"二、安装Centos7.9\"></a>二、安装Centos7.9</h1><h2 id=\"1-点击开启此虚拟机\"><a href=\"#1-点击开启此虚拟机\" class=\"headerlink\" title=\"1. 点击开启此虚拟机\"></a>1. 点击开启此虚拟机</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006102.png\" alt=\"image-20220413090249237\"></p>\n<h2 id=\"2-第一行安装-Centos7\"><a href=\"#2-第一行安装-Centos7\" class=\"headerlink\" title=\"2. 第一行安装 Centos7\"></a>2. 第一行安装 Centos7</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006301.png\" alt=\"image-20220413090329810\"></p>\n<h2 id=\"3-跑码进行GUI界面\"><a href=\"#3-跑码进行GUI界面\" class=\"headerlink\" title=\"3. 跑码进行GUI界面\"></a>3. 跑码进行GUI界面</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006646.png\" alt=\"image-20220413090430296\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006102.png\" alt=\"image-20220413090436071\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006702.png\" alt=\"image-20220413090441255\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006428.png\" alt=\"image-20220413090458544\"></p>\n<h2 id=\"4-第一个滑到最下面选择中国-点击-继续\"><a href=\"#4-第一个滑到最下面选择中国-点击-继续\" class=\"headerlink\" title=\"4. 第一个滑到最下面选择中国 点击&#x3D;&#x3D;继续&#x3D;&#x3D;\"></a>4. 第一个滑到最下面选择中国 点击&#x3D;&#x3D;继续&#x3D;&#x3D;</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006102.png\" alt=\"image-20220413090544721\"></p>\n<h2 id=\"5-安装设置\"><a href=\"#5-安装设置\" class=\"headerlink\" title=\"5. 安装设置\"></a>5. 安装设置</h2><p><strong>选择软件里的软件选择</strong></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006463.png\" alt=\"image-20220413090646519\"></p>\n<p>选择最小安装 系统管理工具  点击完成</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006345.png\" alt=\"image-20220413090728909\"></p>\n<p>滑到最下面选择系统安装位置</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006922.png\" alt=\"image-20220413090856082\"></p>\n<p>选择硬盘 自动配置分区 然后点击完成</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006523.png\" alt=\"image-20220413090938987\"></p>\n<p><strong>点击网络和主机名</strong></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072006138.png\" alt=\"image-20220413091046294\"></p>\n<p>编辑主机名</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007584.png\" alt=\"image-20220413091136964\"></p>\n<p>点击配置网络</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007002.png\" alt=\"image-20220413091201116\"></p>\n<p>&#x3D;&#x3D;如果使用固定ip&#x3D;&#x3D;</p>\n<p>查看一下以太网的配置 这里 是100.0.0.0 那么一会我们就输入&#x3D;&#x3D;100.0.0.(大于2的数字)&#x3D;&#x3D;</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007437.png\" alt=\"image-20220413091504209\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007872.png\" alt=\"image-20220413092306772\"></p>\n<p>选择IPv4设置 方法是手动 地址新增 输入&#x3D;&#x3D;100.0.0.(大于2的数字)&#x3D;&#x3D; 上面的 子网掩码输入上面查到的信息  DNS服务器输入8.8.8.8</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007306.png\" alt=\"image-20220413092402931\"></p>\n<p>&#x3D;&#x3D;自动获取IP地址就不需要设置网络信息了&#x3D;&#x3D;</p>\n<p>点击开启以太网 就可以查看获取到的ip地址</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007613.png\" alt=\"image-20220413092452335\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007974.png\" alt=\"image-20220413092618201\"></p>\n<h2 id=\"6-点击开始安装-进行安装\"><a href=\"#6-点击开始安装-进行安装\" class=\"headerlink\" title=\"6. 点击开始安装 进行安装\"></a>6. 点击开始安装 进行安装</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007237.png\" alt=\"image-20220413092932475\"></p>\n<h2 id=\"7-设置root密码-和创建用户-也可以不创建\"><a href=\"#7-设置root密码-和创建用户-也可以不创建\" class=\"headerlink\" title=\"7. 设置root密码 和创建用户 也可以不创建\"></a>7. 设置root密码 和创建用户 也可以不创建</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007041.png\" alt=\"image-20220413093005837\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007439.png\" alt=\"image-20220413093100278\"></p>\n<h2 id=\"8-安装完成\"><a href=\"#8-安装完成\" class=\"headerlink\" title=\"8. 安装完成\"></a>8. 安装完成</h2><p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/202402072007128.png\" alt=\"image-20220413093207805\"></p>\n"},{"title":"Centos 系统校时","abbrlink":"143f","date":"2025-03-18T05:44:35.000Z","_content":"\n\n## 手动修改系统时间\n\n```bash\ntimedatectl set-timezone \"Asia/Shanghai\"\ndate -s \"2024-2-6 21:00:00\"\n```\n\n## 自动校时\n\n### 安装NTP校时服务\n\n```bash\nyum install ntp -y\n```\n\n### 配置NTP客户端\n\n所有服务器先跟内外NTP服务器同步一下时间\n\n```bash\nntpdate -u 172.0.0.1\n```\n\n把时间同步写入硬件中\n\n```bash\nhwclock -w\n```\n\n每台客户机设置一个定时任务，每小时同步一下时间。\n\n```bash\ncrontab -e\n*/60 * * * * /usr/sbin/ntpdate 172.0.0.1 >>/tmp/ntp.log\n```\n\n","source":"_posts/服务器/Centos/Centos系统校时.md","raw":"---\ntitle: Centos 系统校时\ncategories:\n  - 服务器\ntags:\n  - Centos\n  - 食用教程\nabbrlink: 143f\ndate: 2025-03-18 13:44:35\n---\n\n\n## 手动修改系统时间\n\n```bash\ntimedatectl set-timezone \"Asia/Shanghai\"\ndate -s \"2024-2-6 21:00:00\"\n```\n\n## 自动校时\n\n### 安装NTP校时服务\n\n```bash\nyum install ntp -y\n```\n\n### 配置NTP客户端\n\n所有服务器先跟内外NTP服务器同步一下时间\n\n```bash\nntpdate -u 172.0.0.1\n```\n\n把时间同步写入硬件中\n\n```bash\nhwclock -w\n```\n\n每台客户机设置一个定时任务，每小时同步一下时间。\n\n```bash\ncrontab -e\n*/60 * * * * /usr/sbin/ntpdate 172.0.0.1 >>/tmp/ntp.log\n```\n\n","slug":"服务器/Centos/Centos系统校时","published":1,"updated":"2025-06-02T07:25:14.773Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wo002pzcqbhby57fd7","content":"<h2 id=\"手动修改系统时间\"><a href=\"#手动修改系统时间\" class=\"headerlink\" title=\"手动修改系统时间\"></a>手动修改系统时间</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">timedatectl set-timezone <span class=\"string\">&quot;Asia/Shanghai&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">date</span> -s <span class=\"string\">&quot;2024-2-6 21:00:00&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"自动校时\"><a href=\"#自动校时\" class=\"headerlink\" title=\"自动校时\"></a>自动校时</h2><h3 id=\"安装NTP校时服务\"><a href=\"#安装NTP校时服务\" class=\"headerlink\" title=\"安装NTP校时服务\"></a>安装NTP校时服务</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install ntp -y</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"配置NTP客户端\"><a href=\"#配置NTP客户端\" class=\"headerlink\" title=\"配置NTP客户端\"></a>配置NTP客户端</h3><p>所有服务器先跟内外NTP服务器同步一下时间</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ntpdate -u 172.0.0.1</span><br></pre></td></tr></table></figure>\n\n<p>把时间同步写入硬件中</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hwclock -w</span><br></pre></td></tr></table></figure>\n\n<p>每台客户机设置一个定时任务，每小时同步一下时间。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -e</span><br><span class=\"line\">*/60 * * * * /usr/sbin/ntpdate 172.0.0.1 &gt;&gt;/tmp/ntp.log</span><br></pre></td></tr></table></figure>\n\n","cover":"https://t.alcy.cc/pc?_r_=dd78081a-a249-3b51-84ad-2ba984343aed","cover_type":"img","excerpt":"","more":"<h2 id=\"手动修改系统时间\"><a href=\"#手动修改系统时间\" class=\"headerlink\" title=\"手动修改系统时间\"></a>手动修改系统时间</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">timedatectl set-timezone <span class=\"string\">&quot;Asia/Shanghai&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">date</span> -s <span class=\"string\">&quot;2024-2-6 21:00:00&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"自动校时\"><a href=\"#自动校时\" class=\"headerlink\" title=\"自动校时\"></a>自动校时</h2><h3 id=\"安装NTP校时服务\"><a href=\"#安装NTP校时服务\" class=\"headerlink\" title=\"安装NTP校时服务\"></a>安装NTP校时服务</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install ntp -y</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"配置NTP客户端\"><a href=\"#配置NTP客户端\" class=\"headerlink\" title=\"配置NTP客户端\"></a>配置NTP客户端</h3><p>所有服务器先跟内外NTP服务器同步一下时间</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ntpdate -u 172.0.0.1</span><br></pre></td></tr></table></figure>\n\n<p>把时间同步写入硬件中</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hwclock -w</span><br></pre></td></tr></table></figure>\n\n<p>每台客户机设置一个定时任务，每小时同步一下时间。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -e</span><br><span class=\"line\">*/60 * * * * /usr/sbin/ntpdate 172.0.0.1 &gt;&gt;/tmp/ntp.log</span><br></pre></td></tr></table></figure>\n\n"},{"title":"使用Xtrabackup备份MySQL8.1数据库","abbrlink":"54b7","date":"2025-03-27T06:15:00.000Z","_content":"\n## 部署\n\n```bash\n# 下载二进制的 Xtrabackup 压缩包，开箱即用：\n## 环发内网地址\nwget http://192.168.1.116:40002/huanfa/devTools/percona-xtrabackup-8.1.0-1-Linux-x86_64.glibc2.17.tar.gz\n\n\n# 解压缩\ntar -zxvf percona-xtrabackup-8.1.0-1-Linux-x86_64.glibc2.17.tar.gz\n\n# 移动目录\nmv percona-xtrabackup-8.1.0-1-Linux-x86_64.glibc2.17 /app/xtrabackup\n\n# 配置软链接\nln -sf /app/xtrabackup/bin/* /usr/bin/\n\n# 查看版本命令：“xtrabackup --version”，输出版本号表示安装成功：\nxtrabackup --version\n\nxtrabackup version 8.0.34-29 based on MySQL server 8.0.34 Linux (x86_64) (revision id: 5ba706ee)\n```\n\n## MySQL备份需要的权限\n\n> 1、Reload：用于执行 FLUSH TABLES WITH REDO LOCK 和 FLUSH NO_WRITE_TO_BINLOG TABLES 是必需权限。  \n> 2、Replication client：用于执行 SHOW MASTER STATUS 和 SHOW SLAVE STATUS 查看位点信息，是必需权限。  \n> 3、BACKUP_ADMIN：用于执行 LOCK INSTANCE FOR BACKUP，是必需权限。  \n> 4、Process：用于执行 SHOW ENGINE INNODB STATUS 和 SHOW PROCESSLIST 是必需权限。  \n> 5、SYSTEM_VARIABLES_ADMIN：用于在增量备份时执行 SET GLOBAL mysqlbackup.backupid = xxx 操作，是非必需权限。  \n> 6、SUPER：在指定 --kill-long-queries-timeout 需要杀掉慢查询，和从库备份指定 --safe-slave-backup 需要重启复制，需要用到该权限。  \n> 7、SHOW VIEW：确认是否有非 INNODB 引擎表。  \n> 8、如果使用 Page Tracking 进行增量备份，还需要 mysql.component 表的查询权限。  \n> 9、如果指定 --history 还需要 performance_schema.xtraback_history 的 SELECT、INSERT、CREATE、ALTER 权限。\n\n```ini\n# 修改my.cnf文件\ngtid_mode=ON\nenforce_gtid_consistency=ON\n```\n\n## MySQL8.1需要使用非root用户\n\n```sql\nCREATE USER 'bkpuser'@'localhost' IDENTIFIED BY 's3cr%T';\n\nGRANT BACKUP_ADMIN, PROCESS, RELOAD, LOCK TABLES, REPLICATION CLIENT ON *.* TO 'bkpuser'@'localhost';\n\nGRANT SELECT ON performance_schema.log_status TO 'bkpuser'@'localhost';\n\nGRANT SELECT ON performance_schema.keyring_component_status TO bkpuser@'localhost';\n\nGRANT SELECT ON performance_schema.replication_group_members TO bkpuser@'localhost';\n```\n\n‍\n\n## 全量备份\n\n```bash\n# 运行之前先保证备份目录是否存在\n\nxtrabackup --backup --slave-info\\\n -u bkpuser\\\n -H 127.0.0.1\\\n -P3306\\\n -p's3cr%T'\\\n --compress\\\n --parallel=5\\\n --target-dir=/app/backup/bakup_`date +\"%F_%H_%M_%S\"`\n\n\n# 如果需要压缩备份 在后面加上 \n | gzip - > /app/backup/bakup_`date +\"%F_%H_%M_%S\"`.gz\n```\n\n## \n<br/>\n\n\n## <span data-type=\"text\" style=\"white-space-collapse: break-spaces;\">~~~bash</span>\n","source":"_posts/服务器/Centos/使用Xtrabackup备份MySQL8.1数据库.md","raw":"---\ntitle: 使用Xtrabackup备份MySQL8.1数据库\ncategories:\n  - 服务器\ntags:\n  - Centos\n  - 食用教程\n  - MySQL\n  - Xtrabackup\nabbrlink: 54b7\ndate: 2025-03-27 14:15:00\n---\n\n## 部署\n\n```bash\n# 下载二进制的 Xtrabackup 压缩包，开箱即用：\n## 环发内网地址\nwget http://192.168.1.116:40002/huanfa/devTools/percona-xtrabackup-8.1.0-1-Linux-x86_64.glibc2.17.tar.gz\n\n\n# 解压缩\ntar -zxvf percona-xtrabackup-8.1.0-1-Linux-x86_64.glibc2.17.tar.gz\n\n# 移动目录\nmv percona-xtrabackup-8.1.0-1-Linux-x86_64.glibc2.17 /app/xtrabackup\n\n# 配置软链接\nln -sf /app/xtrabackup/bin/* /usr/bin/\n\n# 查看版本命令：“xtrabackup --version”，输出版本号表示安装成功：\nxtrabackup --version\n\nxtrabackup version 8.0.34-29 based on MySQL server 8.0.34 Linux (x86_64) (revision id: 5ba706ee)\n```\n\n## MySQL备份需要的权限\n\n> 1、Reload：用于执行 FLUSH TABLES WITH REDO LOCK 和 FLUSH NO_WRITE_TO_BINLOG TABLES 是必需权限。  \n> 2、Replication client：用于执行 SHOW MASTER STATUS 和 SHOW SLAVE STATUS 查看位点信息，是必需权限。  \n> 3、BACKUP_ADMIN：用于执行 LOCK INSTANCE FOR BACKUP，是必需权限。  \n> 4、Process：用于执行 SHOW ENGINE INNODB STATUS 和 SHOW PROCESSLIST 是必需权限。  \n> 5、SYSTEM_VARIABLES_ADMIN：用于在增量备份时执行 SET GLOBAL mysqlbackup.backupid = xxx 操作，是非必需权限。  \n> 6、SUPER：在指定 --kill-long-queries-timeout 需要杀掉慢查询，和从库备份指定 --safe-slave-backup 需要重启复制，需要用到该权限。  \n> 7、SHOW VIEW：确认是否有非 INNODB 引擎表。  \n> 8、如果使用 Page Tracking 进行增量备份，还需要 mysql.component 表的查询权限。  \n> 9、如果指定 --history 还需要 performance_schema.xtraback_history 的 SELECT、INSERT、CREATE、ALTER 权限。\n\n```ini\n# 修改my.cnf文件\ngtid_mode=ON\nenforce_gtid_consistency=ON\n```\n\n## MySQL8.1需要使用非root用户\n\n```sql\nCREATE USER 'bkpuser'@'localhost' IDENTIFIED BY 's3cr%T';\n\nGRANT BACKUP_ADMIN, PROCESS, RELOAD, LOCK TABLES, REPLICATION CLIENT ON *.* TO 'bkpuser'@'localhost';\n\nGRANT SELECT ON performance_schema.log_status TO 'bkpuser'@'localhost';\n\nGRANT SELECT ON performance_schema.keyring_component_status TO bkpuser@'localhost';\n\nGRANT SELECT ON performance_schema.replication_group_members TO bkpuser@'localhost';\n```\n\n‍\n\n## 全量备份\n\n```bash\n# 运行之前先保证备份目录是否存在\n\nxtrabackup --backup --slave-info\\\n -u bkpuser\\\n -H 127.0.0.1\\\n -P3306\\\n -p's3cr%T'\\\n --compress\\\n --parallel=5\\\n --target-dir=/app/backup/bakup_`date +\"%F_%H_%M_%S\"`\n\n\n# 如果需要压缩备份 在后面加上 \n | gzip - > /app/backup/bakup_`date +\"%F_%H_%M_%S\"`.gz\n```\n\n## \n<br/>\n\n\n## <span data-type=\"text\" style=\"white-space-collapse: break-spaces;\">~~~bash</span>\n","slug":"服务器/Centos/使用Xtrabackup备份MySQL8.1数据库","published":1,"updated":"2025-06-02T07:25:22.364Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wp002rzcqbdva3cuwj","content":"<h2 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 下载二进制的 Xtrabackup 压缩包，开箱即用：</span></span><br><span class=\"line\"><span class=\"comment\">## 环发内网地址</span></span><br><span class=\"line\">wget http://192.168.1.116:40002/huanfa/devTools/percona-xtrabackup-8.1.0-1-Linux-x86_64.glibc2.17.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 解压缩</span></span><br><span class=\"line\">tar -zxvf percona-xtrabackup-8.1.0-1-Linux-x86_64.glibc2.17.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 移动目录</span></span><br><span class=\"line\"><span class=\"built_in\">mv</span> percona-xtrabackup-8.1.0-1-Linux-x86_64.glibc2.17 /app/xtrabackup</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置软链接</span></span><br><span class=\"line\"><span class=\"built_in\">ln</span> -sf /app/xtrabackup/bin/* /usr/bin/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看版本命令：“xtrabackup --version”，输出版本号表示安装成功：</span></span><br><span class=\"line\">xtrabackup --version</span><br><span class=\"line\"></span><br><span class=\"line\">xtrabackup version 8.0.34-29 based on MySQL server 8.0.34 Linux (x86_64) (revision <span class=\"built_in\">id</span>: 5ba706ee)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"MySQL备份需要的权限\"><a href=\"#MySQL备份需要的权限\" class=\"headerlink\" title=\"MySQL备份需要的权限\"></a>MySQL备份需要的权限</h2><blockquote>\n<p>1、Reload：用于执行 FLUSH TABLES WITH REDO LOCK 和 FLUSH NO_WRITE_TO_BINLOG TABLES 是必需权限。<br>2、Replication client：用于执行 SHOW MASTER STATUS 和 SHOW SLAVE STATUS 查看位点信息，是必需权限。<br>3、BACKUP_ADMIN：用于执行 LOCK INSTANCE FOR BACKUP，是必需权限。<br>4、Process：用于执行 SHOW ENGINE INNODB STATUS 和 SHOW PROCESSLIST 是必需权限。<br>5、SYSTEM_VARIABLES_ADMIN：用于在增量备份时执行 SET GLOBAL mysqlbackup.backupid &#x3D; xxx 操作，是非必需权限。<br>6、SUPER：在指定 –kill-long-queries-timeout 需要杀掉慢查询，和从库备份指定 –safe-slave-backup 需要重启复制，需要用到该权限。<br>7、SHOW VIEW：确认是否有非 INNODB 引擎表。<br>8、如果使用 Page Tracking 进行增量备份，还需要 mysql.component 表的查询权限。<br>9、如果指定 –history 还需要 performance_schema.xtraback_history 的 SELECT、INSERT、CREATE、ALTER 权限。</p>\n</blockquote>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 修改my.cnf文件</span></span><br><span class=\"line\"><span class=\"attr\">gtid_mode</span>=<span class=\"literal\">ON</span></span><br><span class=\"line\"><span class=\"attr\">enforce_gtid_consistency</span>=<span class=\"literal\">ON</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"MySQL8-1需要使用非root用户\"><a href=\"#MySQL8-1需要使用非root用户\" class=\"headerlink\" title=\"MySQL8.1需要使用非root用户\"></a>MySQL8.1需要使用非root用户</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">USER</span> <span class=\"string\">&#x27;bkpuser&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span> IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;s3cr%T&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">GRANT</span> BACKUP_ADMIN, PROCESS, RELOAD, LOCK TABLES, REPLICATION CLIENT <span class=\"keyword\">ON</span> <span class=\"operator\">*</span>.<span class=\"operator\">*</span> <span class=\"keyword\">TO</span> <span class=\"string\">&#x27;bkpuser&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">GRANT</span> <span class=\"keyword\">SELECT</span> <span class=\"keyword\">ON</span> performance_schema.log_status <span class=\"keyword\">TO</span> <span class=\"string\">&#x27;bkpuser&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">GRANT</span> <span class=\"keyword\">SELECT</span> <span class=\"keyword\">ON</span> performance_schema.keyring_component_status <span class=\"keyword\">TO</span> bkpuser@<span class=\"string\">&#x27;localhost&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">GRANT</span> <span class=\"keyword\">SELECT</span> <span class=\"keyword\">ON</span> performance_schema.replication_group_members <span class=\"keyword\">TO</span> bkpuser@<span class=\"string\">&#x27;localhost&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n<h2 id=\"全量备份\"><a href=\"#全量备份\" class=\"headerlink\" title=\"全量备份\"></a>全量备份</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 运行之前先保证备份目录是否存在</span></span><br><span class=\"line\"></span><br><span class=\"line\">xtrabackup --backup --slave-info\\</span><br><span class=\"line\"> -u bkpuser\\</span><br><span class=\"line\"> -H 127.0.0.1\\</span><br><span class=\"line\"> -P3306\\</span><br><span class=\"line\"> -p<span class=\"string\">&#x27;s3cr%T&#x27;</span>\\</span><br><span class=\"line\"> --compress\\</span><br><span class=\"line\"> --parallel=5\\</span><br><span class=\"line\"> --target-dir=/app/backup/bakup_`<span class=\"built_in\">date</span> +<span class=\"string\">&quot;%F_%H_%M_%S&quot;</span>`</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 如果需要压缩备份 在后面加上 </span></span><br><span class=\"line\"> | gzip - &gt; /app/backup/bakup_`<span class=\"built_in\">date</span> +<span class=\"string\">&quot;%F_%H_%M_%S&quot;</span>`.gz</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><br/>\n\n\n<h2 id=\"bash\"><a href=\"#bash\" class=\"headerlink\" title=\"~~~bash\"></a><span data-type=\"text\" style=\"white-space-collapse: break-spaces;\">~~~bash</span></h2>","cover":"https://t.alcy.cc/pc?_r_=5e2ad928-b1f7-49b3-21cb-f12951178f88","cover_type":"img","excerpt":"","more":"<h2 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 下载二进制的 Xtrabackup 压缩包，开箱即用：</span></span><br><span class=\"line\"><span class=\"comment\">## 环发内网地址</span></span><br><span class=\"line\">wget http://192.168.1.116:40002/huanfa/devTools/percona-xtrabackup-8.1.0-1-Linux-x86_64.glibc2.17.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 解压缩</span></span><br><span class=\"line\">tar -zxvf percona-xtrabackup-8.1.0-1-Linux-x86_64.glibc2.17.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 移动目录</span></span><br><span class=\"line\"><span class=\"built_in\">mv</span> percona-xtrabackup-8.1.0-1-Linux-x86_64.glibc2.17 /app/xtrabackup</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 配置软链接</span></span><br><span class=\"line\"><span class=\"built_in\">ln</span> -sf /app/xtrabackup/bin/* /usr/bin/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看版本命令：“xtrabackup --version”，输出版本号表示安装成功：</span></span><br><span class=\"line\">xtrabackup --version</span><br><span class=\"line\"></span><br><span class=\"line\">xtrabackup version 8.0.34-29 based on MySQL server 8.0.34 Linux (x86_64) (revision <span class=\"built_in\">id</span>: 5ba706ee)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"MySQL备份需要的权限\"><a href=\"#MySQL备份需要的权限\" class=\"headerlink\" title=\"MySQL备份需要的权限\"></a>MySQL备份需要的权限</h2><blockquote>\n<p>1、Reload：用于执行 FLUSH TABLES WITH REDO LOCK 和 FLUSH NO_WRITE_TO_BINLOG TABLES 是必需权限。<br>2、Replication client：用于执行 SHOW MASTER STATUS 和 SHOW SLAVE STATUS 查看位点信息，是必需权限。<br>3、BACKUP_ADMIN：用于执行 LOCK INSTANCE FOR BACKUP，是必需权限。<br>4、Process：用于执行 SHOW ENGINE INNODB STATUS 和 SHOW PROCESSLIST 是必需权限。<br>5、SYSTEM_VARIABLES_ADMIN：用于在增量备份时执行 SET GLOBAL mysqlbackup.backupid &#x3D; xxx 操作，是非必需权限。<br>6、SUPER：在指定 –kill-long-queries-timeout 需要杀掉慢查询，和从库备份指定 –safe-slave-backup 需要重启复制，需要用到该权限。<br>7、SHOW VIEW：确认是否有非 INNODB 引擎表。<br>8、如果使用 Page Tracking 进行增量备份，还需要 mysql.component 表的查询权限。<br>9、如果指定 –history 还需要 performance_schema.xtraback_history 的 SELECT、INSERT、CREATE、ALTER 权限。</p>\n</blockquote>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 修改my.cnf文件</span></span><br><span class=\"line\"><span class=\"attr\">gtid_mode</span>=<span class=\"literal\">ON</span></span><br><span class=\"line\"><span class=\"attr\">enforce_gtid_consistency</span>=<span class=\"literal\">ON</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"MySQL8-1需要使用非root用户\"><a href=\"#MySQL8-1需要使用非root用户\" class=\"headerlink\" title=\"MySQL8.1需要使用非root用户\"></a>MySQL8.1需要使用非root用户</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">USER</span> <span class=\"string\">&#x27;bkpuser&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span> IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;s3cr%T&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">GRANT</span> BACKUP_ADMIN, PROCESS, RELOAD, LOCK TABLES, REPLICATION CLIENT <span class=\"keyword\">ON</span> <span class=\"operator\">*</span>.<span class=\"operator\">*</span> <span class=\"keyword\">TO</span> <span class=\"string\">&#x27;bkpuser&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">GRANT</span> <span class=\"keyword\">SELECT</span> <span class=\"keyword\">ON</span> performance_schema.log_status <span class=\"keyword\">TO</span> <span class=\"string\">&#x27;bkpuser&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">GRANT</span> <span class=\"keyword\">SELECT</span> <span class=\"keyword\">ON</span> performance_schema.keyring_component_status <span class=\"keyword\">TO</span> bkpuser@<span class=\"string\">&#x27;localhost&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">GRANT</span> <span class=\"keyword\">SELECT</span> <span class=\"keyword\">ON</span> performance_schema.replication_group_members <span class=\"keyword\">TO</span> bkpuser@<span class=\"string\">&#x27;localhost&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n<h2 id=\"全量备份\"><a href=\"#全量备份\" class=\"headerlink\" title=\"全量备份\"></a>全量备份</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 运行之前先保证备份目录是否存在</span></span><br><span class=\"line\"></span><br><span class=\"line\">xtrabackup --backup --slave-info\\</span><br><span class=\"line\"> -u bkpuser\\</span><br><span class=\"line\"> -H 127.0.0.1\\</span><br><span class=\"line\"> -P3306\\</span><br><span class=\"line\"> -p<span class=\"string\">&#x27;s3cr%T&#x27;</span>\\</span><br><span class=\"line\"> --compress\\</span><br><span class=\"line\"> --parallel=5\\</span><br><span class=\"line\"> --target-dir=/app/backup/bakup_`<span class=\"built_in\">date</span> +<span class=\"string\">&quot;%F_%H_%M_%S&quot;</span>`</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 如果需要压缩备份 在后面加上 </span></span><br><span class=\"line\"> | gzip - &gt; /app/backup/bakup_`<span class=\"built_in\">date</span> +<span class=\"string\">&quot;%F_%H_%M_%S&quot;</span>`.gz</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><br/>\n\n\n<h2 id=\"bash\"><a href=\"#bash\" class=\"headerlink\" title=\"~~~bash\"></a><span data-type=\"text\" style=\"white-space-collapse: break-spaces;\">~~~bash</span></h2>"},{"title":"rclone的应用","abbrlink":"81d2","date":"2025-05-24T13:33:08.000Z","_content":"# rclone\n\n```yaml\nrclone mount alist-webdav: /vol1/1000/netdisk/alist --header \"Referer:\" --multi-thread-streams 6 --buffer-size 512M --vfs-fast-fingerprint --vfs-cache-mode full --no-modtime --file-perms 0777 --copy-links --allow-other --allow-non-empty  --umask 000 --daemon --cache-dir /vol1/1000/netdisk/cache/rclone\n\n\n卸载命令：fusermount -qzu /vol1/1000/netdisk/alist\n\n\nrclone mount hao: z: --network-mode --header \"Referer:\" --multi-thread-streams 4 --buffer-size 512M --vfs-fast-fingerprint --vfs-cache-mode full --no-modtime --file-perms 0777\n```\n\n‍\n","source":"_posts/服务器/Centos/rclone.md","raw":"---\ntitle: rclone的应用\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - lucky\nabbrlink: 81d2\ndate: 2025-05-24 21:33:08\n---\n# rclone\n\n```yaml\nrclone mount alist-webdav: /vol1/1000/netdisk/alist --header \"Referer:\" --multi-thread-streams 6 --buffer-size 512M --vfs-fast-fingerprint --vfs-cache-mode full --no-modtime --file-perms 0777 --copy-links --allow-other --allow-non-empty  --umask 000 --daemon --cache-dir /vol1/1000/netdisk/cache/rclone\n\n\n卸载命令：fusermount -qzu /vol1/1000/netdisk/alist\n\n\nrclone mount hao: z: --network-mode --header \"Referer:\" --multi-thread-streams 4 --buffer-size 512M --vfs-fast-fingerprint --vfs-cache-mode full --no-modtime --file-perms 0777\n```\n\n‍\n","slug":"服务器/Centos/rclone","published":1,"updated":"2025-06-02T07:25:20.228Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wp002vzcqbew1s25o6","content":"<h1 id=\"rclone\"><a href=\"#rclone\" class=\"headerlink\" title=\"rclone\"></a>rclone</h1><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">rclone mount alist-webdav:</span> <span class=\"string\">/vol1/1000/netdisk/alist</span> <span class=\"string\">--header</span> <span class=\"string\">&quot;Referer:&quot;</span> <span class=\"string\">--multi-thread-streams</span> <span class=\"number\">6</span> <span class=\"string\">--buffer-size</span> <span class=\"string\">512M</span> <span class=\"string\">--vfs-fast-fingerprint</span> <span class=\"string\">--vfs-cache-mode</span> <span class=\"string\">full</span> <span class=\"string\">--no-modtime</span> <span class=\"string\">--file-perms</span> <span class=\"number\">0777</span> <span class=\"string\">--copy-links</span> <span class=\"string\">--allow-other</span> <span class=\"string\">--allow-non-empty</span>  <span class=\"string\">--umask</span> <span class=\"number\">000</span> <span class=\"string\">--daemon</span> <span class=\"string\">--cache-dir</span> <span class=\"string\">/vol1/1000/netdisk/cache/rclone</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">卸载命令：fusermount</span> <span class=\"string\">-qzu</span> <span class=\"string\">/vol1/1000/netdisk/alist</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">rclone mount hao: z:</span> <span class=\"string\">--network-mode</span> <span class=\"string\">--header</span> <span class=\"string\">&quot;Referer:&quot;</span> <span class=\"string\">--multi-thread-streams</span> <span class=\"number\">4</span> <span class=\"string\">--buffer-size</span> <span class=\"string\">512M</span> <span class=\"string\">--vfs-fast-fingerprint</span> <span class=\"string\">--vfs-cache-mode</span> <span class=\"string\">full</span> <span class=\"string\">--no-modtime</span> <span class=\"string\">--file-perms</span> <span class=\"number\">0777</span></span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n","cover":"https://t.alcy.cc/pc?_r_=3be94e5c-b465-79dc-d136-abbed5c91b2c","cover_type":"img","excerpt":"","more":"<h1 id=\"rclone\"><a href=\"#rclone\" class=\"headerlink\" title=\"rclone\"></a>rclone</h1><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">rclone mount alist-webdav:</span> <span class=\"string\">/vol1/1000/netdisk/alist</span> <span class=\"string\">--header</span> <span class=\"string\">&quot;Referer:&quot;</span> <span class=\"string\">--multi-thread-streams</span> <span class=\"number\">6</span> <span class=\"string\">--buffer-size</span> <span class=\"string\">512M</span> <span class=\"string\">--vfs-fast-fingerprint</span> <span class=\"string\">--vfs-cache-mode</span> <span class=\"string\">full</span> <span class=\"string\">--no-modtime</span> <span class=\"string\">--file-perms</span> <span class=\"number\">0777</span> <span class=\"string\">--copy-links</span> <span class=\"string\">--allow-other</span> <span class=\"string\">--allow-non-empty</span>  <span class=\"string\">--umask</span> <span class=\"number\">000</span> <span class=\"string\">--daemon</span> <span class=\"string\">--cache-dir</span> <span class=\"string\">/vol1/1000/netdisk/cache/rclone</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">卸载命令：fusermount</span> <span class=\"string\">-qzu</span> <span class=\"string\">/vol1/1000/netdisk/alist</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">rclone mount hao: z:</span> <span class=\"string\">--network-mode</span> <span class=\"string\">--header</span> <span class=\"string\">&quot;Referer:&quot;</span> <span class=\"string\">--multi-thread-streams</span> <span class=\"number\">4</span> <span class=\"string\">--buffer-size</span> <span class=\"string\">512M</span> <span class=\"string\">--vfs-fast-fingerprint</span> <span class=\"string\">--vfs-cache-mode</span> <span class=\"string\">full</span> <span class=\"string\">--no-modtime</span> <span class=\"string\">--file-perms</span> <span class=\"number\">0777</span></span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n"},{"title":"宝塔面板关闭安全入口","abbrlink":"f5a0","date":"2025-03-01T06:15:00.000Z","_content":"\n打开ssh 输入\n\n```shell\nrm -f /www/server/panel/data/admin_path.pl\n```\n","source":"_posts/服务器/Centos/宝塔面板关闭安全入口.md","raw":"---\ntitle: 宝塔面板关闭安全入口\ncategories:\n  - 服务器\ntags:\n  - Centos\n  - 宝塔\nabbrlink: f5a0\ndate: 2025-03-01 14:15:00\n---\n\n打开ssh 输入\n\n```shell\nrm -f /www/server/panel/data/admin_path.pl\n```\n","slug":"服务器/Centos/宝塔面板关闭安全入口","published":1,"updated":"2025-06-02T07:25:24.376Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wq002yzcqbgh6c8jjk","content":"<p>打开ssh 输入</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -f /www/server/panel/data/admin_path.pl</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=2203c0b4-7dda-fada-b410-2bb61a7796b4","cover_type":"img","excerpt":"","more":"<p>打开ssh 输入</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -f /www/server/panel/data/admin_path.pl</span><br></pre></td></tr></table></figure>\n"},{"title":"Centos 防火墙设置","abbrlink":"62eb","date":"2025-01-14T16:01:00.000Z","_content":"\n个人观点：Centos防火墙没啥用处\n\n- 在云服务商，机房会开通服务器业务\n- 在个人家里，按需开放端口映射\n- 在公司企业，对内部署网闸，内网防火墙，对外部部署外网防火墙\n\n## 操作命令\n\n```shell\n# 查看运行情况\nsystemctl status firewalld.service\n# 停止\nsystemctl stop firewalld.service\n# 重启\nsystemctl restart firewalld.service\n# 开启\nsystemctl start firewalld.service\n# 关闭开机自启\nsystemctl disable firewalld.service\n```\n\n## 简单应用\n\n1. 怎么开启一个端口\n\n   添加\n\n   ```shell\n   firewall-cmd --zone=public --add-port=5005/tcp --permanent\n   （--permanent永久生效，没有此参数重启后失效）\n   ```\n\n   添加端口外部访问权限（这样外部才能访问）\n\n   ```shell\n   firewall-cmd --add-port=5005/tcp\n   ```\n\n   重新载入，添加端口后重新载入才能起作用\n\n   ```shell\n   firewall-cmd --reload\n   ```\n\n   这些之后，端口是开启成功的，如果没有成功，重启系统试试。\n\n### 2. 查看端口\n\n```shell\nfirewall-cmd --zone=public --query-port=80/tcp\n```\n\n### 3. 删除端口\n\n```shell\nfirewall-cmd --zone=public --remove-port=80/tcp --permanent\n```\n\n### 4. 查看firewall是否运行,下面两个命令都可以\n\n```shell\nsystemctl status firewalld\n\nfirewall-cmd --state\n```\n\n### 5. 查看当前开了哪些端口\n\n其实一个服务对应一个端口，每个服务对应/usr/lib/firewalld/services下面一个xml文件。\n\n### 6. 查看开启了哪些服务\n\n```shell\nfirewall-cmd --list-services\n```\n\n### 7. 查看开启了哪些端口\n\n```shell\nfirewall-cmd --list-ports\n```\n\n### 8. 查看还有哪些服务可以打开\n\n```shell\nfirewall-cmd --get-services\n```\n\n### 9. 查看所有打开的端口：\n\n```shell\nfirewall-cmd --zone=public --list-ports\n```\n\n### 10.更新防火墙规则：\n\n```shell\nfirewall-cmd --reload\n```\n\n### 11. 添加端口外部访问权限\n\n```shell\n firewall-cmd --add-port=6379/tcp\n```\n","source":"_posts/服务器/Centos/Centos防火墙设置.md","raw":"---\ntitle: Centos 防火墙设置\ncategories:\n   - 服务器\ntags:\n  - Centos\n  - 食用教程\nabbrlink: 62eb\ndate: 2025-01-15 00:01:00\n---\n\n个人观点：Centos防火墙没啥用处\n\n- 在云服务商，机房会开通服务器业务\n- 在个人家里，按需开放端口映射\n- 在公司企业，对内部署网闸，内网防火墙，对外部部署外网防火墙\n\n## 操作命令\n\n```shell\n# 查看运行情况\nsystemctl status firewalld.service\n# 停止\nsystemctl stop firewalld.service\n# 重启\nsystemctl restart firewalld.service\n# 开启\nsystemctl start firewalld.service\n# 关闭开机自启\nsystemctl disable firewalld.service\n```\n\n## 简单应用\n\n1. 怎么开启一个端口\n\n   添加\n\n   ```shell\n   firewall-cmd --zone=public --add-port=5005/tcp --permanent\n   （--permanent永久生效，没有此参数重启后失效）\n   ```\n\n   添加端口外部访问权限（这样外部才能访问）\n\n   ```shell\n   firewall-cmd --add-port=5005/tcp\n   ```\n\n   重新载入，添加端口后重新载入才能起作用\n\n   ```shell\n   firewall-cmd --reload\n   ```\n\n   这些之后，端口是开启成功的，如果没有成功，重启系统试试。\n\n### 2. 查看端口\n\n```shell\nfirewall-cmd --zone=public --query-port=80/tcp\n```\n\n### 3. 删除端口\n\n```shell\nfirewall-cmd --zone=public --remove-port=80/tcp --permanent\n```\n\n### 4. 查看firewall是否运行,下面两个命令都可以\n\n```shell\nsystemctl status firewalld\n\nfirewall-cmd --state\n```\n\n### 5. 查看当前开了哪些端口\n\n其实一个服务对应一个端口，每个服务对应/usr/lib/firewalld/services下面一个xml文件。\n\n### 6. 查看开启了哪些服务\n\n```shell\nfirewall-cmd --list-services\n```\n\n### 7. 查看开启了哪些端口\n\n```shell\nfirewall-cmd --list-ports\n```\n\n### 8. 查看还有哪些服务可以打开\n\n```shell\nfirewall-cmd --get-services\n```\n\n### 9. 查看所有打开的端口：\n\n```shell\nfirewall-cmd --zone=public --list-ports\n```\n\n### 10.更新防火墙规则：\n\n```shell\nfirewall-cmd --reload\n```\n\n### 11. 添加端口外部访问权限\n\n```shell\n firewall-cmd --add-port=6379/tcp\n```\n","slug":"服务器/Centos/Centos防火墙设置","published":1,"updated":"2025-06-02T07:25:17.422Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wq0032zcqb86by3fcv","content":"<p>个人观点：Centos防火墙没啥用处</p>\n<ul>\n<li>在云服务商，机房会开通服务器业务</li>\n<li>在个人家里，按需开放端口映射</li>\n<li>在公司企业，对内部署网闸，内网防火墙，对外部部署外网防火墙</li>\n</ul>\n<h2 id=\"操作命令\"><a href=\"#操作命令\" class=\"headerlink\" title=\"操作命令\"></a>操作命令</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看运行情况</span></span><br><span class=\"line\">systemctl status firewalld.service</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">停止</span></span><br><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重启</span></span><br><span class=\"line\">systemctl restart firewalld.service</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">开启</span></span><br><span class=\"line\">systemctl start firewalld.service</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">关闭开机自启</span></span><br><span class=\"line\">systemctl disable firewalld.service</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"简单应用\"><a href=\"#简单应用\" class=\"headerlink\" title=\"简单应用\"></a>简单应用</h2><ol>\n<li><p>怎么开启一个端口</p>\n<p>添加</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --add-port=5005/tcp --permanent</span><br><span class=\"line\">（--permanent永久生效，没有此参数重启后失效）</span><br></pre></td></tr></table></figure>\n\n<p>添加端口外部访问权限（这样外部才能访问）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --add-port=5005/tcp</span><br></pre></td></tr></table></figure>\n\n<p>重新载入，添加端口后重新载入才能起作用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n\n<p>这些之后，端口是开启成功的，如果没有成功，重启系统试试。</p>\n</li>\n</ol>\n<h3 id=\"2-查看端口\"><a href=\"#2-查看端口\" class=\"headerlink\" title=\"2. 查看端口\"></a>2. 查看端口</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --query-port=80/tcp</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-删除端口\"><a href=\"#3-删除端口\" class=\"headerlink\" title=\"3. 删除端口\"></a>3. 删除端口</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --remove-port=80/tcp --permanent</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-查看firewall是否运行-下面两个命令都可以\"><a href=\"#4-查看firewall是否运行-下面两个命令都可以\" class=\"headerlink\" title=\"4. 查看firewall是否运行,下面两个命令都可以\"></a>4. 查看firewall是否运行,下面两个命令都可以</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status firewalld</span><br><span class=\"line\"></span><br><span class=\"line\">firewall-cmd --state</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-查看当前开了哪些端口\"><a href=\"#5-查看当前开了哪些端口\" class=\"headerlink\" title=\"5. 查看当前开了哪些端口\"></a>5. 查看当前开了哪些端口</h3><p>其实一个服务对应一个端口，每个服务对应&#x2F;usr&#x2F;lib&#x2F;firewalld&#x2F;services下面一个xml文件。</p>\n<h3 id=\"6-查看开启了哪些服务\"><a href=\"#6-查看开启了哪些服务\" class=\"headerlink\" title=\"6. 查看开启了哪些服务\"></a>6. 查看开启了哪些服务</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --list-services</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-查看开启了哪些端口\"><a href=\"#7-查看开启了哪些端口\" class=\"headerlink\" title=\"7. 查看开启了哪些端口\"></a>7. 查看开启了哪些端口</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --list-ports</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8-查看还有哪些服务可以打开\"><a href=\"#8-查看还有哪些服务可以打开\" class=\"headerlink\" title=\"8. 查看还有哪些服务可以打开\"></a>8. 查看还有哪些服务可以打开</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --get-services</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"9-查看所有打开的端口：\"><a href=\"#9-查看所有打开的端口：\" class=\"headerlink\" title=\"9. 查看所有打开的端口：\"></a>9. 查看所有打开的端口：</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --list-ports</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-更新防火墙规则：\"><a href=\"#10-更新防火墙规则：\" class=\"headerlink\" title=\"10.更新防火墙规则：\"></a>10.更新防火墙规则：</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-添加端口外部访问权限\"><a href=\"#11-添加端口外部访问权限\" class=\"headerlink\" title=\"11. 添加端口外部访问权限\"></a>11. 添加端口外部访问权限</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --add-port=6379/tcp</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=2cd00243-9a4a-4706-5bbc-867b67e5c655","cover_type":"img","excerpt":"","more":"<p>个人观点：Centos防火墙没啥用处</p>\n<ul>\n<li>在云服务商，机房会开通服务器业务</li>\n<li>在个人家里，按需开放端口映射</li>\n<li>在公司企业，对内部署网闸，内网防火墙，对外部部署外网防火墙</li>\n</ul>\n<h2 id=\"操作命令\"><a href=\"#操作命令\" class=\"headerlink\" title=\"操作命令\"></a>操作命令</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看运行情况</span></span><br><span class=\"line\">systemctl status firewalld.service</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">停止</span></span><br><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重启</span></span><br><span class=\"line\">systemctl restart firewalld.service</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">开启</span></span><br><span class=\"line\">systemctl start firewalld.service</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">关闭开机自启</span></span><br><span class=\"line\">systemctl disable firewalld.service</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"简单应用\"><a href=\"#简单应用\" class=\"headerlink\" title=\"简单应用\"></a>简单应用</h2><ol>\n<li><p>怎么开启一个端口</p>\n<p>添加</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --add-port=5005/tcp --permanent</span><br><span class=\"line\">（--permanent永久生效，没有此参数重启后失效）</span><br></pre></td></tr></table></figure>\n\n<p>添加端口外部访问权限（这样外部才能访问）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --add-port=5005/tcp</span><br></pre></td></tr></table></figure>\n\n<p>重新载入，添加端口后重新载入才能起作用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n\n<p>这些之后，端口是开启成功的，如果没有成功，重启系统试试。</p>\n</li>\n</ol>\n<h3 id=\"2-查看端口\"><a href=\"#2-查看端口\" class=\"headerlink\" title=\"2. 查看端口\"></a>2. 查看端口</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --query-port=80/tcp</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-删除端口\"><a href=\"#3-删除端口\" class=\"headerlink\" title=\"3. 删除端口\"></a>3. 删除端口</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --remove-port=80/tcp --permanent</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-查看firewall是否运行-下面两个命令都可以\"><a href=\"#4-查看firewall是否运行-下面两个命令都可以\" class=\"headerlink\" title=\"4. 查看firewall是否运行,下面两个命令都可以\"></a>4. 查看firewall是否运行,下面两个命令都可以</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status firewalld</span><br><span class=\"line\"></span><br><span class=\"line\">firewall-cmd --state</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-查看当前开了哪些端口\"><a href=\"#5-查看当前开了哪些端口\" class=\"headerlink\" title=\"5. 查看当前开了哪些端口\"></a>5. 查看当前开了哪些端口</h3><p>其实一个服务对应一个端口，每个服务对应&#x2F;usr&#x2F;lib&#x2F;firewalld&#x2F;services下面一个xml文件。</p>\n<h3 id=\"6-查看开启了哪些服务\"><a href=\"#6-查看开启了哪些服务\" class=\"headerlink\" title=\"6. 查看开启了哪些服务\"></a>6. 查看开启了哪些服务</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --list-services</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-查看开启了哪些端口\"><a href=\"#7-查看开启了哪些端口\" class=\"headerlink\" title=\"7. 查看开启了哪些端口\"></a>7. 查看开启了哪些端口</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --list-ports</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8-查看还有哪些服务可以打开\"><a href=\"#8-查看还有哪些服务可以打开\" class=\"headerlink\" title=\"8. 查看还有哪些服务可以打开\"></a>8. 查看还有哪些服务可以打开</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --get-services</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"9-查看所有打开的端口：\"><a href=\"#9-查看所有打开的端口：\" class=\"headerlink\" title=\"9. 查看所有打开的端口：\"></a>9. 查看所有打开的端口：</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --zone=public --list-ports</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-更新防火墙规则：\"><a href=\"#10-更新防火墙规则：\" class=\"headerlink\" title=\"10.更新防火墙规则：\"></a>10.更新防火墙规则：</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-添加端口外部访问权限\"><a href=\"#11-添加端口外部访问权限\" class=\"headerlink\" title=\"11. 添加端口外部访问权限\"></a>11. 添加端口外部访问权限</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --add-port=6379/tcp</span><br></pre></td></tr></table></figure>\n"},{"title":"配置Jar.sh脚本 运行jar包","abbrlink":"f40e","date":"2025-01-01T06:15:00.000Z","_content":"\n\n> 经常遇到Linux部署jar包需要后台运行的情况\n>\n> 以下的脚本可以帮到大家\n\n## 代码\n\n```sh\n#!/bin/bash\n\n#author:wting（bug fixed version by suhai）\n\n#这里替换为程序位置  #注意：APP_NAME为jar文件名（而非路径），且\"=\"后面不能有空格\n#此处的APP_NAME为打包后jar包名\n#注意：如果包名携带日期或其他会变化的内容，例如xxxx-1.0.0.20221110.release.jar，请修改此处的名称为xxxx这类固定且能标识服务的名称，同时替换start方法中的启动命令\nAPP_NAME=gps-ruoyi-admin.jar\n#添加jar包路径，方便在任何目录下都可以运行脚本启动服务\nAPP_PATH=/opt/hf-gps/jar\n\n#使用说明，用来提示输入参数\nusage() {\n    echo \"Usage: sh server.sh [start|stop|restart|status]\"\n    exit 1\n}\n\n#检查程序是否在运行\nis_exist(){\n  pid=`ps -ef|grep $APP_NAME|grep -v grep|awk '{print $2}'`\n  #如果不存在返回1，存在返回0     \n  if [ -z \"${pid}\" ]; then\n   return 1\n  else\n    return 0\n  fi\n}\n\n#启动命令执行后输出结果\nstart_log(){\n  is_exist\n  if [ $? -eq 0 ]; then\n    echo \"${APP_NAME} 启动成功！  pid=${pid}\"\n  else\n    echo \"${APP_NAME} 启动失败！请检查后重试\"\n  fi\n}\n\n#启动方法\nstart(){\n  is_exist\n  if [ $? -eq 0 ]; then\n    echo \"${APP_NAME} is already running. pid=${pid}\"\n  else\n    nohup java -jar ${APP_PATH}/${APP_NAME} > /dev/null 2>&1 & \n    #如果APP_NAME携带可变内容，请替换下方启动命令，符号 * 表示jar包名称中变化的部分\n    #nohup java -jar -Xmx512m -Xms512m ${APP_PATH}/${APP_NAME}*.jar >${APP_PATH}/web.log &\n    start_log\n  fi\n}\n\n#停止方法\nstop(){\n  is_exist\n  if [ $? -eq \"0\" ]; then\n    kill -9 $pid\n    echo \"${APP_NAME} 已关闭！ pid=${pid}\"\n  else\n    echo \"${APP_NAME} is not running\"\n  fi\n  \n  #该脚本的特殊性：确保关闭所有openoffice进程\n  soffice_stop\n}\n\n#输出运行状态\nstatus(){\n  is_exist\n  if [ $? -eq \"0\" ]; then\n    echo \"${APP_NAME} is running. Pid is ${pid}\"\n  else\n    echo \"${APP_NAME} is not running.\"\n  fi\n}\n\n#重启\nrestart(){\n  stop\n  echo \"${APP_NAME} 准备重启...\"\n  sleep 5\n  start\n}\n\n#关闭openoffice\nsoffice_stop(){\n  soffice_pid=`ps -e|grep soffice.bin |awk '{print $1}'`\n  if [ -n \"${soffice_pid}\" ]; then\n    kill -9 $soffice_pid\n    echo \"已关闭soffice.bin\"\n  fi\n}\n\n\n#根据输入参数，选择执行对应方法，不输入则执行使用说明\ncase \"$1\" in\n  \"start\")\n    start\n    ;;\n  \"stop\")\n    stop\n    ;;\n  \"status\")\n    status\n    ;;\n  \"restart\")\n    restart\n    ;;\n  *)\n    usage\n    ;;\nesac\n\n\n```\n\n## 命令\n\n```shell\n# 启动jar\nsh server.sh start\n# 查看jar状态\nsh server.sh status\n# 关闭jar\nsh server.sh stop\n# 重启jar\nsh server.sh restart\n```\n","source":"_posts/服务器/Centos/配置Jar.sh脚本.md","raw":"---\ntitle: 配置Jar.sh脚本 运行jar包\ncategories:\n  - 服务器\ntags:\n  - Centos\n  - SH脚本\n  - 食用教程\n  - java\nabbrlink: f40e\ndate: 2025-01-01 14:15:00\n---\n\n\n> 经常遇到Linux部署jar包需要后台运行的情况\n>\n> 以下的脚本可以帮到大家\n\n## 代码\n\n```sh\n#!/bin/bash\n\n#author:wting（bug fixed version by suhai）\n\n#这里替换为程序位置  #注意：APP_NAME为jar文件名（而非路径），且\"=\"后面不能有空格\n#此处的APP_NAME为打包后jar包名\n#注意：如果包名携带日期或其他会变化的内容，例如xxxx-1.0.0.20221110.release.jar，请修改此处的名称为xxxx这类固定且能标识服务的名称，同时替换start方法中的启动命令\nAPP_NAME=gps-ruoyi-admin.jar\n#添加jar包路径，方便在任何目录下都可以运行脚本启动服务\nAPP_PATH=/opt/hf-gps/jar\n\n#使用说明，用来提示输入参数\nusage() {\n    echo \"Usage: sh server.sh [start|stop|restart|status]\"\n    exit 1\n}\n\n#检查程序是否在运行\nis_exist(){\n  pid=`ps -ef|grep $APP_NAME|grep -v grep|awk '{print $2}'`\n  #如果不存在返回1，存在返回0     \n  if [ -z \"${pid}\" ]; then\n   return 1\n  else\n    return 0\n  fi\n}\n\n#启动命令执行后输出结果\nstart_log(){\n  is_exist\n  if [ $? -eq 0 ]; then\n    echo \"${APP_NAME} 启动成功！  pid=${pid}\"\n  else\n    echo \"${APP_NAME} 启动失败！请检查后重试\"\n  fi\n}\n\n#启动方法\nstart(){\n  is_exist\n  if [ $? -eq 0 ]; then\n    echo \"${APP_NAME} is already running. pid=${pid}\"\n  else\n    nohup java -jar ${APP_PATH}/${APP_NAME} > /dev/null 2>&1 & \n    #如果APP_NAME携带可变内容，请替换下方启动命令，符号 * 表示jar包名称中变化的部分\n    #nohup java -jar -Xmx512m -Xms512m ${APP_PATH}/${APP_NAME}*.jar >${APP_PATH}/web.log &\n    start_log\n  fi\n}\n\n#停止方法\nstop(){\n  is_exist\n  if [ $? -eq \"0\" ]; then\n    kill -9 $pid\n    echo \"${APP_NAME} 已关闭！ pid=${pid}\"\n  else\n    echo \"${APP_NAME} is not running\"\n  fi\n  \n  #该脚本的特殊性：确保关闭所有openoffice进程\n  soffice_stop\n}\n\n#输出运行状态\nstatus(){\n  is_exist\n  if [ $? -eq \"0\" ]; then\n    echo \"${APP_NAME} is running. Pid is ${pid}\"\n  else\n    echo \"${APP_NAME} is not running.\"\n  fi\n}\n\n#重启\nrestart(){\n  stop\n  echo \"${APP_NAME} 准备重启...\"\n  sleep 5\n  start\n}\n\n#关闭openoffice\nsoffice_stop(){\n  soffice_pid=`ps -e|grep soffice.bin |awk '{print $1}'`\n  if [ -n \"${soffice_pid}\" ]; then\n    kill -9 $soffice_pid\n    echo \"已关闭soffice.bin\"\n  fi\n}\n\n\n#根据输入参数，选择执行对应方法，不输入则执行使用说明\ncase \"$1\" in\n  \"start\")\n    start\n    ;;\n  \"stop\")\n    stop\n    ;;\n  \"status\")\n    status\n    ;;\n  \"restart\")\n    restart\n    ;;\n  *)\n    usage\n    ;;\nesac\n\n\n```\n\n## 命令\n\n```shell\n# 启动jar\nsh server.sh start\n# 查看jar状态\nsh server.sh status\n# 关闭jar\nsh server.sh stop\n# 重启jar\nsh server.sh restart\n```\n","slug":"服务器/Centos/配置Jar.sh脚本","published":1,"updated":"2025-06-02T07:25:27.892Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wq0035zcqb8d1hh927","content":"<blockquote>\n<p>经常遇到Linux部署jar包需要后台运行的情况</p>\n<p>以下的脚本可以帮到大家</p>\n</blockquote>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#author:wting（bug fixed version by suhai）</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#这里替换为程序位置  #注意：APP_NAME为jar文件名（而非路径），且&quot;=&quot;后面不能有空格</span></span><br><span class=\"line\"><span class=\"comment\">#此处的APP_NAME为打包后jar包名</span></span><br><span class=\"line\"><span class=\"comment\">#注意：如果包名携带日期或其他会变化的内容，例如xxxx-1.0.0.20221110.release.jar，请修改此处的名称为xxxx这类固定且能标识服务的名称，同时替换start方法中的启动命令</span></span><br><span class=\"line\">APP_NAME=gps-ruoyi-admin.jar</span><br><span class=\"line\"><span class=\"comment\">#添加jar包路径，方便在任何目录下都可以运行脚本启动服务</span></span><br><span class=\"line\">APP_PATH=/opt/hf-gps/jar</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#使用说明，用来提示输入参数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">usage</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;Usage: sh server.sh [start|stop|restart|status]&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#检查程序是否在运行</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">is_exist</span></span>()&#123;</span><br><span class=\"line\">  pid=`ps -ef|grep <span class=\"variable\">$APP_NAME</span>|grep -v grep|awk <span class=\"string\">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class=\"line\">  <span class=\"comment\">#如果不存在返回1，存在返回0     </span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ -z <span class=\"string\">&quot;<span class=\"variable\">$&#123;pid&#125;</span>&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">   <span class=\"built_in\">return</span> 1</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">return</span> 0</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#启动命令执行后输出结果</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">start_log</span></span>()&#123;</span><br><span class=\"line\">  is_exist</span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ $? -eq 0 ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$&#123;APP_NAME&#125;</span> 启动成功！  pid=<span class=\"variable\">$&#123;pid&#125;</span>&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$&#123;APP_NAME&#125;</span> 启动失败！请检查后重试&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#启动方法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">start</span></span>()&#123;</span><br><span class=\"line\">  is_exist</span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ $? -eq 0 ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$&#123;APP_NAME&#125;</span> is already running. pid=<span class=\"variable\">$&#123;pid&#125;</span>&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">nohup</span> java -jar <span class=\"variable\">$&#123;APP_PATH&#125;</span>/<span class=\"variable\">$&#123;APP_NAME&#125;</span> &gt; /dev/null 2&gt;&amp;1 &amp; </span><br><span class=\"line\">    <span class=\"comment\">#如果APP_NAME携带可变内容，请替换下方启动命令，符号 * 表示jar包名称中变化的部分</span></span><br><span class=\"line\">    <span class=\"comment\">#nohup java -jar -Xmx512m -Xms512m $&#123;APP_PATH&#125;/$&#123;APP_NAME&#125;*.jar &gt;$&#123;APP_PATH&#125;/web.log &amp;</span></span><br><span class=\"line\">    start_log</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#停止方法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">stop</span></span>()&#123;</span><br><span class=\"line\">  is_exist</span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ $? -eq <span class=\"string\">&quot;0&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">kill</span> -9 <span class=\"variable\">$pid</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$&#123;APP_NAME&#125;</span> 已关闭！ pid=<span class=\"variable\">$&#123;pid&#125;</span>&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$&#123;APP_NAME&#125;</span> is not running&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">#该脚本的特殊性：确保关闭所有openoffice进程</span></span><br><span class=\"line\">  soffice_stop</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#输出运行状态</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">status</span></span>()&#123;</span><br><span class=\"line\">  is_exist</span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ $? -eq <span class=\"string\">&quot;0&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$&#123;APP_NAME&#125;</span> is running. Pid is <span class=\"variable\">$&#123;pid&#125;</span>&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$&#123;APP_NAME&#125;</span> is not running.&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#重启</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">restart</span></span>()&#123;</span><br><span class=\"line\">  stop</span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$&#123;APP_NAME&#125;</span> 准备重启...&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">sleep</span> 5</span><br><span class=\"line\">  start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#关闭openoffice</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">soffice_stop</span></span>()&#123;</span><br><span class=\"line\">  soffice_pid=`ps -e|grep soffice.bin |awk <span class=\"string\">&#x27;&#123;print $1&#125;&#x27;</span>`</span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ -n <span class=\"string\">&quot;<span class=\"variable\">$&#123;soffice_pid&#125;</span>&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">kill</span> -9 <span class=\"variable\">$soffice_pid</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;已关闭soffice.bin&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#根据输入参数，选择执行对应方法，不输入则执行使用说明</span></span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">&quot;<span class=\"variable\">$1</span>&quot;</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">  <span class=\"string\">&quot;start&quot;</span>)</span><br><span class=\"line\">    start</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  <span class=\"string\">&quot;stop&quot;</span>)</span><br><span class=\"line\">    stop</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  <span class=\"string\">&quot;status&quot;</span>)</span><br><span class=\"line\">    status</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  <span class=\"string\">&quot;restart&quot;</span>)</span><br><span class=\"line\">    restart</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  *)</span><br><span class=\"line\">    usage</span><br><span class=\"line\">    ;;</span><br><span class=\"line\"><span class=\"keyword\">esac</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"命令\"><a href=\"#命令\" class=\"headerlink\" title=\"命令\"></a>命令</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动jar</span></span><br><span class=\"line\">sh server.sh start</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看jar状态</span></span><br><span class=\"line\">sh server.sh status</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">关闭jar</span></span><br><span class=\"line\">sh server.sh stop</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重启jar</span></span><br><span class=\"line\">sh server.sh restart</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=85469676-bf36-eeb8-de2d-78d1830f7ac3","cover_type":"img","excerpt":"","more":"<blockquote>\n<p>经常遇到Linux部署jar包需要后台运行的情况</p>\n<p>以下的脚本可以帮到大家</p>\n</blockquote>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#author:wting（bug fixed version by suhai）</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#这里替换为程序位置  #注意：APP_NAME为jar文件名（而非路径），且&quot;=&quot;后面不能有空格</span></span><br><span class=\"line\"><span class=\"comment\">#此处的APP_NAME为打包后jar包名</span></span><br><span class=\"line\"><span class=\"comment\">#注意：如果包名携带日期或其他会变化的内容，例如xxxx-1.0.0.20221110.release.jar，请修改此处的名称为xxxx这类固定且能标识服务的名称，同时替换start方法中的启动命令</span></span><br><span class=\"line\">APP_NAME=gps-ruoyi-admin.jar</span><br><span class=\"line\"><span class=\"comment\">#添加jar包路径，方便在任何目录下都可以运行脚本启动服务</span></span><br><span class=\"line\">APP_PATH=/opt/hf-gps/jar</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#使用说明，用来提示输入参数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">usage</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;Usage: sh server.sh [start|stop|restart|status]&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#检查程序是否在运行</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">is_exist</span></span>()&#123;</span><br><span class=\"line\">  pid=`ps -ef|grep <span class=\"variable\">$APP_NAME</span>|grep -v grep|awk <span class=\"string\">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class=\"line\">  <span class=\"comment\">#如果不存在返回1，存在返回0     </span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ -z <span class=\"string\">&quot;<span class=\"variable\">$&#123;pid&#125;</span>&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">   <span class=\"built_in\">return</span> 1</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">return</span> 0</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#启动命令执行后输出结果</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">start_log</span></span>()&#123;</span><br><span class=\"line\">  is_exist</span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ $? -eq 0 ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$&#123;APP_NAME&#125;</span> 启动成功！  pid=<span class=\"variable\">$&#123;pid&#125;</span>&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$&#123;APP_NAME&#125;</span> 启动失败！请检查后重试&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#启动方法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">start</span></span>()&#123;</span><br><span class=\"line\">  is_exist</span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ $? -eq 0 ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$&#123;APP_NAME&#125;</span> is already running. pid=<span class=\"variable\">$&#123;pid&#125;</span>&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">nohup</span> java -jar <span class=\"variable\">$&#123;APP_PATH&#125;</span>/<span class=\"variable\">$&#123;APP_NAME&#125;</span> &gt; /dev/null 2&gt;&amp;1 &amp; </span><br><span class=\"line\">    <span class=\"comment\">#如果APP_NAME携带可变内容，请替换下方启动命令，符号 * 表示jar包名称中变化的部分</span></span><br><span class=\"line\">    <span class=\"comment\">#nohup java -jar -Xmx512m -Xms512m $&#123;APP_PATH&#125;/$&#123;APP_NAME&#125;*.jar &gt;$&#123;APP_PATH&#125;/web.log &amp;</span></span><br><span class=\"line\">    start_log</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#停止方法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">stop</span></span>()&#123;</span><br><span class=\"line\">  is_exist</span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ $? -eq <span class=\"string\">&quot;0&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">kill</span> -9 <span class=\"variable\">$pid</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$&#123;APP_NAME&#125;</span> 已关闭！ pid=<span class=\"variable\">$&#123;pid&#125;</span>&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$&#123;APP_NAME&#125;</span> is not running&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">#该脚本的特殊性：确保关闭所有openoffice进程</span></span><br><span class=\"line\">  soffice_stop</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#输出运行状态</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">status</span></span>()&#123;</span><br><span class=\"line\">  is_exist</span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ $? -eq <span class=\"string\">&quot;0&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$&#123;APP_NAME&#125;</span> is running. Pid is <span class=\"variable\">$&#123;pid&#125;</span>&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$&#123;APP_NAME&#125;</span> is not running.&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#重启</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">restart</span></span>()&#123;</span><br><span class=\"line\">  stop</span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$&#123;APP_NAME&#125;</span> 准备重启...&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">sleep</span> 5</span><br><span class=\"line\">  start</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#关闭openoffice</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">soffice_stop</span></span>()&#123;</span><br><span class=\"line\">  soffice_pid=`ps -e|grep soffice.bin |awk <span class=\"string\">&#x27;&#123;print $1&#125;&#x27;</span>`</span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ -n <span class=\"string\">&quot;<span class=\"variable\">$&#123;soffice_pid&#125;</span>&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">kill</span> -9 <span class=\"variable\">$soffice_pid</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;已关闭soffice.bin&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#根据输入参数，选择执行对应方法，不输入则执行使用说明</span></span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">&quot;<span class=\"variable\">$1</span>&quot;</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">  <span class=\"string\">&quot;start&quot;</span>)</span><br><span class=\"line\">    start</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  <span class=\"string\">&quot;stop&quot;</span>)</span><br><span class=\"line\">    stop</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  <span class=\"string\">&quot;status&quot;</span>)</span><br><span class=\"line\">    status</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  <span class=\"string\">&quot;restart&quot;</span>)</span><br><span class=\"line\">    restart</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  *)</span><br><span class=\"line\">    usage</span><br><span class=\"line\">    ;;</span><br><span class=\"line\"><span class=\"keyword\">esac</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"命令\"><a href=\"#命令\" class=\"headerlink\" title=\"命令\"></a>命令</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动jar</span></span><br><span class=\"line\">sh server.sh start</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看jar状态</span></span><br><span class=\"line\">sh server.sh status</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">关闭jar</span></span><br><span class=\"line\">sh server.sh stop</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重启jar</span></span><br><span class=\"line\">sh server.sh restart</span><br></pre></td></tr></table></figure>\n"},{"title":"MySQL添加外部访问权限","abbrlink":"647a","date":"2024-12-30T00:56:31.000Z","_content":"\n在Centos安装MySQL后，出现了在外网（非本机）无法访问MySQL的情况（MySQL错误码1130），由于MySQL的root用户默认权限是`localhost` 需要添加一个`root@%` 或者将权限改为`%`\n\n本次直接将权限改为`%`\n\n# 修改访问权限\n\n```sql\nmysql -u root -p \n--- 在服务器上登录进MySQL后\n\n--- 选择mysql表\nuse mysql;\n--- 查询root用户数据，可以看到host是localhost\nselect host from user where user='root';\n--- 修改host为%\nupdate user set host = '%' where user ='root';\n--- 刷新配置\nflush privileges;\n```\n\n成功登录\n","source":"_posts/服务器/MySQL/MySQL添加外部访问权限.md","raw":"---\ntitle: MySQL添加外部访问权限\ncategories:\n  - 服务器\ntags:\n  - MySQL\nabbrlink: 647a\ndate: 2024-12-30 08:56:31\n---\n\n在Centos安装MySQL后，出现了在外网（非本机）无法访问MySQL的情况（MySQL错误码1130），由于MySQL的root用户默认权限是`localhost` 需要添加一个`root@%` 或者将权限改为`%`\n\n本次直接将权限改为`%`\n\n# 修改访问权限\n\n```sql\nmysql -u root -p \n--- 在服务器上登录进MySQL后\n\n--- 选择mysql表\nuse mysql;\n--- 查询root用户数据，可以看到host是localhost\nselect host from user where user='root';\n--- 修改host为%\nupdate user set host = '%' where user ='root';\n--- 刷新配置\nflush privileges;\n```\n\n成功登录\n","slug":"服务器/MySQL/MySQL添加外部访问权限","published":1,"updated":"2025-06-02T07:27:43.690Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wr0039zcqb11kb9z1e","content":"<p>在Centos安装MySQL后，出现了在外网（非本机）无法访问MySQL的情况（MySQL错误码1130），由于MySQL的root用户默认权限是<code>localhost</code> 需要添加一个<code>root@%</code> 或者将权限改为<code>%</code></p>\n<p>本次直接将权限改为<code>%</code></p>\n<h1 id=\"修改访问权限\"><a href=\"#修改访问权限\" class=\"headerlink\" title=\"修改访问权限\"></a>修改访问权限</h1><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql <span class=\"operator\">-</span>u root <span class=\"operator\">-</span>p </span><br><span class=\"line\"><span class=\"comment\">--- 在服务器上登录进MySQL后</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">--- 选择mysql表</span></span><br><span class=\"line\">use mysql;</span><br><span class=\"line\"><span class=\"comment\">--- 查询root用户数据，可以看到host是localhost</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> host <span class=\"keyword\">from</span> <span class=\"keyword\">user</span> <span class=\"keyword\">where</span> <span class=\"keyword\">user</span><span class=\"operator\">=</span><span class=\"string\">&#x27;root&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">--- 修改host为%</span></span><br><span class=\"line\"><span class=\"keyword\">update</span> <span class=\"keyword\">user</span> <span class=\"keyword\">set</span> host <span class=\"operator\">=</span> <span class=\"string\">&#x27;%&#x27;</span> <span class=\"keyword\">where</span> <span class=\"keyword\">user</span> <span class=\"operator\">=</span><span class=\"string\">&#x27;root&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">--- 刷新配置</span></span><br><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure>\n\n<p>成功登录</p>\n","cover":"https://t.alcy.cc/pc?_r_=7ba76d37-f987-d1b6-2038-945dea3c5a09","cover_type":"img","excerpt":"","more":"<p>在Centos安装MySQL后，出现了在外网（非本机）无法访问MySQL的情况（MySQL错误码1130），由于MySQL的root用户默认权限是<code>localhost</code> 需要添加一个<code>root@%</code> 或者将权限改为<code>%</code></p>\n<p>本次直接将权限改为<code>%</code></p>\n<h1 id=\"修改访问权限\"><a href=\"#修改访问权限\" class=\"headerlink\" title=\"修改访问权限\"></a>修改访问权限</h1><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql <span class=\"operator\">-</span>u root <span class=\"operator\">-</span>p </span><br><span class=\"line\"><span class=\"comment\">--- 在服务器上登录进MySQL后</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">--- 选择mysql表</span></span><br><span class=\"line\">use mysql;</span><br><span class=\"line\"><span class=\"comment\">--- 查询root用户数据，可以看到host是localhost</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> host <span class=\"keyword\">from</span> <span class=\"keyword\">user</span> <span class=\"keyword\">where</span> <span class=\"keyword\">user</span><span class=\"operator\">=</span><span class=\"string\">&#x27;root&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">--- 修改host为%</span></span><br><span class=\"line\"><span class=\"keyword\">update</span> <span class=\"keyword\">user</span> <span class=\"keyword\">set</span> host <span class=\"operator\">=</span> <span class=\"string\">&#x27;%&#x27;</span> <span class=\"keyword\">where</span> <span class=\"keyword\">user</span> <span class=\"operator\">=</span><span class=\"string\">&#x27;root&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">--- 刷新配置</span></span><br><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure>\n\n<p>成功登录</p>\n"},{"title":"MySQL问题大全","abbrlink":"bf3","date":"2024-12-30T00:56:31.000Z","_content":"\n\n# mysql提示缺少依赖libaio.so.1的问题\n\nlinux上用rpm安装 mysql-community-server-5.7.23-1.el7.x86_64.rpm提示缺少依赖\n\n```javascript\nerror: Failed dependencies:\n\tlibaio.so.1()(64bit) is needed by mysql-community-server-5.7.23-1.el7.x86_64\n\tlibaio.so.1(LIBAIO_0.1)(64bit) is needed by mysql-community-server-5.7.23-1.el7.x86_64\n\tlibaio.so.1(LIBAIO_0.4)(64bit) is needed by mysql-community-server-5.7.23-1.el7.x86_64\n```\n\n重新安装\n\n```cobol\nrpm -ivh libaio-0.3.109-13.el7.i686.rpm\n```\n\n# Public Key Retrieval is not allowed\n\n连接MySQL数据库的时候，报错内容如下：“Public Key Retrieval is not allowed”。\n\nmysql 8.0 默认使用 `caching_sha2_password` 身份验证机制 （`即从原来mysql_native_password` 更改为 `caching_sha2_password`。）\n\n从 5.7 升级 8.0 版本的不会改变现有用户的身份验证方法，但新用户会默认使用新的 `caching_sha2_password` 。 客户端不支持新的加密方式。 修改用户的密码和加密方式。\n\n## 方案一：\n在命令行模式下进入`mysql`，输入以下命令:\n\n```sql\nALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'root';\n或者 \n\nALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'root';\n```\n\n然后就可以正常连接了。\n\n## 方案二：\n\n在配置数据源的时候直接将属性`allowPublicKeyRetrieval`设置为`true`即可\n","source":"_posts/服务器/MySQL/MySQL问题大全.md","raw":"---\ntitle: MySQL问题大全\ncategories:\n  - 服务器\ntags:\n  - MySQL\nabbrlink: bf3\ndate: 2024-12-30 08:56:31\n---\n\n\n# mysql提示缺少依赖libaio.so.1的问题\n\nlinux上用rpm安装 mysql-community-server-5.7.23-1.el7.x86_64.rpm提示缺少依赖\n\n```javascript\nerror: Failed dependencies:\n\tlibaio.so.1()(64bit) is needed by mysql-community-server-5.7.23-1.el7.x86_64\n\tlibaio.so.1(LIBAIO_0.1)(64bit) is needed by mysql-community-server-5.7.23-1.el7.x86_64\n\tlibaio.so.1(LIBAIO_0.4)(64bit) is needed by mysql-community-server-5.7.23-1.el7.x86_64\n```\n\n重新安装\n\n```cobol\nrpm -ivh libaio-0.3.109-13.el7.i686.rpm\n```\n\n# Public Key Retrieval is not allowed\n\n连接MySQL数据库的时候，报错内容如下：“Public Key Retrieval is not allowed”。\n\nmysql 8.0 默认使用 `caching_sha2_password` 身份验证机制 （`即从原来mysql_native_password` 更改为 `caching_sha2_password`。）\n\n从 5.7 升级 8.0 版本的不会改变现有用户的身份验证方法，但新用户会默认使用新的 `caching_sha2_password` 。 客户端不支持新的加密方式。 修改用户的密码和加密方式。\n\n## 方案一：\n在命令行模式下进入`mysql`，输入以下命令:\n\n```sql\nALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'root';\n或者 \n\nALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'root';\n```\n\n然后就可以正常连接了。\n\n## 方案二：\n\n在配置数据源的时候直接将属性`allowPublicKeyRetrieval`设置为`true`即可\n","slug":"服务器/MySQL/MySQL问题大全","published":1,"updated":"2025-06-02T07:27:45.906Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86ws003czcqb86ai2th9","content":"<h1 id=\"mysql提示缺少依赖libaio-so-1的问题\"><a href=\"#mysql提示缺少依赖libaio-so-1的问题\" class=\"headerlink\" title=\"mysql提示缺少依赖libaio.so.1的问题\"></a>mysql提示缺少依赖libaio.so.1的问题</h1><p>linux上用rpm安装 mysql-community-server-5.7.23-1.el7.x86_64.rpm提示缺少依赖</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">error</span>: <span class=\"title class_\">Failed</span> <span class=\"attr\">dependencies</span>:</span><br><span class=\"line\">\tlibaio.<span class=\"property\">so</span><span class=\"number\">.1</span>()(64bit) is needed by mysql-community-server-<span class=\"number\">5.7</span><span class=\"number\">.23</span>-<span class=\"number\">1.</span>el7.<span class=\"property\">x86_64</span></span><br><span class=\"line\">\tlibaio.<span class=\"property\">so</span><span class=\"number\">.1</span>(<span class=\"variable constant_\">LIBAIO_0</span><span class=\"number\">.1</span>)(64bit) is needed by mysql-community-server-<span class=\"number\">5.7</span><span class=\"number\">.23</span>-<span class=\"number\">1.</span>el7.<span class=\"property\">x86_64</span></span><br><span class=\"line\">\tlibaio.<span class=\"property\">so</span><span class=\"number\">.1</span>(<span class=\"variable constant_\">LIBAIO_0</span><span class=\"number\">.4</span>)(64bit) is needed by mysql-community-server-<span class=\"number\">5.7</span><span class=\"number\">.23</span>-<span class=\"number\">1.</span>el7.<span class=\"property\">x86_64</span></span><br></pre></td></tr></table></figure>\n\n<p>重新安装</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh libaio-0.3.109-13.el7.i686.rpm</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Public-Key-Retrieval-is-not-allowed\"><a href=\"#Public-Key-Retrieval-is-not-allowed\" class=\"headerlink\" title=\"Public Key Retrieval is not allowed\"></a>Public Key Retrieval is not allowed</h1><p>连接MySQL数据库的时候，报错内容如下：“Public Key Retrieval is not allowed”。</p>\n<p>mysql 8.0 默认使用 <code>caching_sha2_password</code> 身份验证机制 （<code>即从原来mysql_native_password</code> 更改为 <code>caching_sha2_password</code>。）</p>\n<p>从 5.7 升级 8.0 版本的不会改变现有用户的身份验证方法，但新用户会默认使用新的 <code>caching_sha2_password</code> 。 客户端不支持新的加密方式。 修改用户的密码和加密方式。</p>\n<h2 id=\"方案一：\"><a href=\"#方案一：\" class=\"headerlink\" title=\"方案一：\"></a>方案一：</h2><p>在命令行模式下进入<code>mysql</code>，输入以下命令:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">USER</span> <span class=\"string\">&#x27;root&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span> IDENTIFIED <span class=\"keyword\">WITH</span> mysql_native_password <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;root&#x27;</span>;</span><br><span class=\"line\">或者 </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">USER</span> <span class=\"string\">&#x27;root&#x27;</span>@<span class=\"string\">&#x27;%&#x27;</span> IDENTIFIED <span class=\"keyword\">WITH</span> mysql_native_password <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;root&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>然后就可以正常连接了。</p>\n<h2 id=\"方案二：\"><a href=\"#方案二：\" class=\"headerlink\" title=\"方案二：\"></a>方案二：</h2><p>在配置数据源的时候直接将属性<code>allowPublicKeyRetrieval</code>设置为<code>true</code>即可</p>\n","cover":"https://t.alcy.cc/pc?_r_=ccf08912-2e27-7e6a-4bdc-25d983f7fe86","cover_type":"img","excerpt":"","more":"<h1 id=\"mysql提示缺少依赖libaio-so-1的问题\"><a href=\"#mysql提示缺少依赖libaio-so-1的问题\" class=\"headerlink\" title=\"mysql提示缺少依赖libaio.so.1的问题\"></a>mysql提示缺少依赖libaio.so.1的问题</h1><p>linux上用rpm安装 mysql-community-server-5.7.23-1.el7.x86_64.rpm提示缺少依赖</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">error</span>: <span class=\"title class_\">Failed</span> <span class=\"attr\">dependencies</span>:</span><br><span class=\"line\">\tlibaio.<span class=\"property\">so</span><span class=\"number\">.1</span>()(64bit) is needed by mysql-community-server-<span class=\"number\">5.7</span><span class=\"number\">.23</span>-<span class=\"number\">1.</span>el7.<span class=\"property\">x86_64</span></span><br><span class=\"line\">\tlibaio.<span class=\"property\">so</span><span class=\"number\">.1</span>(<span class=\"variable constant_\">LIBAIO_0</span><span class=\"number\">.1</span>)(64bit) is needed by mysql-community-server-<span class=\"number\">5.7</span><span class=\"number\">.23</span>-<span class=\"number\">1.</span>el7.<span class=\"property\">x86_64</span></span><br><span class=\"line\">\tlibaio.<span class=\"property\">so</span><span class=\"number\">.1</span>(<span class=\"variable constant_\">LIBAIO_0</span><span class=\"number\">.4</span>)(64bit) is needed by mysql-community-server-<span class=\"number\">5.7</span><span class=\"number\">.23</span>-<span class=\"number\">1.</span>el7.<span class=\"property\">x86_64</span></span><br></pre></td></tr></table></figure>\n\n<p>重新安装</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh libaio-0.3.109-13.el7.i686.rpm</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Public-Key-Retrieval-is-not-allowed\"><a href=\"#Public-Key-Retrieval-is-not-allowed\" class=\"headerlink\" title=\"Public Key Retrieval is not allowed\"></a>Public Key Retrieval is not allowed</h1><p>连接MySQL数据库的时候，报错内容如下：“Public Key Retrieval is not allowed”。</p>\n<p>mysql 8.0 默认使用 <code>caching_sha2_password</code> 身份验证机制 （<code>即从原来mysql_native_password</code> 更改为 <code>caching_sha2_password</code>。）</p>\n<p>从 5.7 升级 8.0 版本的不会改变现有用户的身份验证方法，但新用户会默认使用新的 <code>caching_sha2_password</code> 。 客户端不支持新的加密方式。 修改用户的密码和加密方式。</p>\n<h2 id=\"方案一：\"><a href=\"#方案一：\" class=\"headerlink\" title=\"方案一：\"></a>方案一：</h2><p>在命令行模式下进入<code>mysql</code>，输入以下命令:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">USER</span> <span class=\"string\">&#x27;root&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span> IDENTIFIED <span class=\"keyword\">WITH</span> mysql_native_password <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;root&#x27;</span>;</span><br><span class=\"line\">或者 </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">USER</span> <span class=\"string\">&#x27;root&#x27;</span>@<span class=\"string\">&#x27;%&#x27;</span> IDENTIFIED <span class=\"keyword\">WITH</span> mysql_native_password <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;root&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>然后就可以正常连接了。</p>\n<h2 id=\"方案二：\"><a href=\"#方案二：\" class=\"headerlink\" title=\"方案二：\"></a>方案二：</h2><p>在配置数据源的时候直接将属性<code>allowPublicKeyRetrieval</code>设置为<code>true</code>即可</p>\n"},{"title":"Centos 系统安装 Docker","abbrlink":"f4db","date":"2025-02-24T13:31:00.000Z","_content":"\n> 安装前必读\n>\n> 环境：Centos7.9\n>\n> Linux内核：3.10\n\n## 查看当前内核版本\n\n```bash\nuname -r\n```\n\n\n## 使用 root 权限更新 yum 包\n\n```bash\nyum -y update\n```\n\n> **区分：**\n>\n> yum -y update：升级所有包同时也升级软件和系统内核；\n>\n> yum -y upgrade：只升级所有包，不升级软件和系统内核\n\n## 卸载旧版本\n\n```bash\nyum remove docker  docker-common docker-selinux docker-engine\n```\n\n## 安装需要的软件包\n\n**yum-util 提供yum-config-manager功能，另两个是devicemapper驱动依赖**\n\n```bash\nyum install -y yum-utils device-mapper-persistent-data lvm2\n```\n\n## 设置 yum 源\n\n设置一个yum源，下面两个都可用\n\n```bash\n# 中央仓库\nyum-config-manager --add-repo http://download.docker.com/linux/centos/docker-ce.repo\n\n# 阿里仓库 推荐\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n```\n\n## 选择docker版本并安装\n\n### 查看可用版本\n\n```bash\nyum list docker-ce --showduplicates | sort -r\n```\n\n### 安装Docker\n\n```bash\nyum -y install docker-ce\n```\n\n**安装指定版本**\n\n```bash\nsudo yum -y install docker-ce-17.12.1.ce\n```\n\n","source":"_posts/服务器/Docker/Centos系统安装Docker.md","raw":"---\ntitle: Centos 系统安装 Docker\ncategories:\n  - 服务器\ntags:\n  - Centos\n  - Docker\n  - 食用教程\nabbrlink: f4db\ndate: 2025-02-24 21:31:00\n---\n\n> 安装前必读\n>\n> 环境：Centos7.9\n>\n> Linux内核：3.10\n\n## 查看当前内核版本\n\n```bash\nuname -r\n```\n\n\n## 使用 root 权限更新 yum 包\n\n```bash\nyum -y update\n```\n\n> **区分：**\n>\n> yum -y update：升级所有包同时也升级软件和系统内核；\n>\n> yum -y upgrade：只升级所有包，不升级软件和系统内核\n\n## 卸载旧版本\n\n```bash\nyum remove docker  docker-common docker-selinux docker-engine\n```\n\n## 安装需要的软件包\n\n**yum-util 提供yum-config-manager功能，另两个是devicemapper驱动依赖**\n\n```bash\nyum install -y yum-utils device-mapper-persistent-data lvm2\n```\n\n## 设置 yum 源\n\n设置一个yum源，下面两个都可用\n\n```bash\n# 中央仓库\nyum-config-manager --add-repo http://download.docker.com/linux/centos/docker-ce.repo\n\n# 阿里仓库 推荐\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n```\n\n## 选择docker版本并安装\n\n### 查看可用版本\n\n```bash\nyum list docker-ce --showduplicates | sort -r\n```\n\n### 安装Docker\n\n```bash\nyum -y install docker-ce\n```\n\n**安装指定版本**\n\n```bash\nsudo yum -y install docker-ce-17.12.1.ce\n```\n\n","slug":"服务器/Docker/Centos系统安装Docker","published":1,"updated":"2025-06-02T07:25:33.218Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86ws003gzcqbawaf1vvk","content":"<blockquote>\n<p>安装前必读</p>\n<p>环境：Centos7.9</p>\n<p>Linux内核：3.10</p>\n</blockquote>\n<h2 id=\"查看当前内核版本\"><a href=\"#查看当前内核版本\" class=\"headerlink\" title=\"查看当前内核版本\"></a>查看当前内核版本</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">uname</span> -r</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"使用-root-权限更新-yum-包\"><a href=\"#使用-root-权限更新-yum-包\" class=\"headerlink\" title=\"使用 root 权限更新 yum 包\"></a>使用 root 权限更新 yum 包</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y update</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>区分：</strong></p>\n<p>yum -y update：升级所有包同时也升级软件和系统内核；</p>\n<p>yum -y upgrade：只升级所有包，不升级软件和系统内核</p>\n</blockquote>\n<h2 id=\"卸载旧版本\"><a href=\"#卸载旧版本\" class=\"headerlink\" title=\"卸载旧版本\"></a>卸载旧版本</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum remove docker  docker-common docker-selinux docker-engine</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"安装需要的软件包\"><a href=\"#安装需要的软件包\" class=\"headerlink\" title=\"安装需要的软件包\"></a>安装需要的软件包</h2><p><strong>yum-util 提供yum-config-manager功能，另两个是devicemapper驱动依赖</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"设置-yum-源\"><a href=\"#设置-yum-源\" class=\"headerlink\" title=\"设置 yum 源\"></a>设置 yum 源</h2><p>设置一个yum源，下面两个都可用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 中央仓库</span></span><br><span class=\"line\">yum-config-manager --add-repo http://download.docker.com/linux/centos/docker-ce.repo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 阿里仓库 推荐</span></span><br><span class=\"line\">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"选择docker版本并安装\"><a href=\"#选择docker版本并安装\" class=\"headerlink\" title=\"选择docker版本并安装\"></a>选择docker版本并安装</h2><h3 id=\"查看可用版本\"><a href=\"#查看可用版本\" class=\"headerlink\" title=\"查看可用版本\"></a>查看可用版本</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum list docker-ce --showduplicates | <span class=\"built_in\">sort</span> -r</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装Docker\"><a href=\"#安装Docker\" class=\"headerlink\" title=\"安装Docker\"></a>安装Docker</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install docker-ce</span><br></pre></td></tr></table></figure>\n\n<p><strong>安装指定版本</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> yum -y install docker-ce-17.12.1.ce</span><br></pre></td></tr></table></figure>\n\n","cover":"https://t.alcy.cc/pc?_r_=fee96800-e185-beb4-e0e4-5c9865d38009","cover_type":"img","excerpt":"","more":"<blockquote>\n<p>安装前必读</p>\n<p>环境：Centos7.9</p>\n<p>Linux内核：3.10</p>\n</blockquote>\n<h2 id=\"查看当前内核版本\"><a href=\"#查看当前内核版本\" class=\"headerlink\" title=\"查看当前内核版本\"></a>查看当前内核版本</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">uname</span> -r</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"使用-root-权限更新-yum-包\"><a href=\"#使用-root-权限更新-yum-包\" class=\"headerlink\" title=\"使用 root 权限更新 yum 包\"></a>使用 root 权限更新 yum 包</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y update</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>区分：</strong></p>\n<p>yum -y update：升级所有包同时也升级软件和系统内核；</p>\n<p>yum -y upgrade：只升级所有包，不升级软件和系统内核</p>\n</blockquote>\n<h2 id=\"卸载旧版本\"><a href=\"#卸载旧版本\" class=\"headerlink\" title=\"卸载旧版本\"></a>卸载旧版本</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum remove docker  docker-common docker-selinux docker-engine</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"安装需要的软件包\"><a href=\"#安装需要的软件包\" class=\"headerlink\" title=\"安装需要的软件包\"></a>安装需要的软件包</h2><p><strong>yum-util 提供yum-config-manager功能，另两个是devicemapper驱动依赖</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"设置-yum-源\"><a href=\"#设置-yum-源\" class=\"headerlink\" title=\"设置 yum 源\"></a>设置 yum 源</h2><p>设置一个yum源，下面两个都可用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 中央仓库</span></span><br><span class=\"line\">yum-config-manager --add-repo http://download.docker.com/linux/centos/docker-ce.repo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 阿里仓库 推荐</span></span><br><span class=\"line\">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"选择docker版本并安装\"><a href=\"#选择docker版本并安装\" class=\"headerlink\" title=\"选择docker版本并安装\"></a>选择docker版本并安装</h2><h3 id=\"查看可用版本\"><a href=\"#查看可用版本\" class=\"headerlink\" title=\"查看可用版本\"></a>查看可用版本</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum list docker-ce --showduplicates | <span class=\"built_in\">sort</span> -r</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装Docker\"><a href=\"#安装Docker\" class=\"headerlink\" title=\"安装Docker\"></a>安装Docker</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install docker-ce</span><br></pre></td></tr></table></figure>\n\n<p><strong>安装指定版本</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> yum -y install docker-ce-17.12.1.ce</span><br></pre></td></tr></table></figure>\n\n"},{"title":"Ubuntu安装MySQL8.1","abbrlink":"ea1d","date":"2024-12-30T00:56:31.000Z","_content":"\n## 1、确定Ubuntu版本\n\n```bash\n# 查看版本\nlsb_release -a\n```\n\n```bash\n# 例如我的版本：\nroot@huanfa:/app/mysql/data/mysql# lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 22.04.5 LTS\nRelease:        22.04\nCodename:       jammy\n```\n\n## 2、在MySQL官网查看版本并下载\n\n```bash\n# 通过官网连接，按照下图下载安装包\nhttps://downloads.mysql.com/archives/community/\n```\n\n```bash\n# 在自己建的文件夹中下载文件\n# 下载对应版本的文件（DEB Bundle）\nsudo wget https://downloads.mysql.com/archives/get/p/23/file/mysql-server_8.1.0-1ubuntu22.04_amd64.deb-bundle.tar\n```\n\n## 3、解压文件\n\n```bash\n# 括号中的是指定路径，自选加不加（解压的文件不会自己创建文件夹，建议加一下，xxx表示对应文件夹）\nsudo tar -xvf mysql-server_8.1.0-1ubuntu22.04_amd64.deb-bundle.tar （-C xxx）\n```\n\n## 4、安装MySQL\n\n```bash\n# 在安装过程中可能会遇到缺少libaio1、libmecab2包，通过以下方法执行\nsudo apt-get update\nsudo apt-get install libaio1\nsudo apt-get install libmecab2\n\n# libmecab2 在安装时会显示需要新建root密码\n```\n\n```bash\n# 依次安装包。由于包之间有依赖关系，一定要按照顺序安装依次安装包。\n# 由于包之间有依赖关系，一定要按照顺序安装\n\nsudo dpkg -i mysql-common_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i mysql-community-client-plugins_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i libmysqlclient22_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i libmysqlclient-dev_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i mysql-community-client-core_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i mysql-community-client_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i mysql-client_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i mysql-community-server-core_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i mysql-community-server_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i mysql-server_8.1.0-1ubuntu22.04_amd64.deb\n```\n\n## 5、确认是否安装成功并新建外部可访问的root账号\n\n### 1）确认安装成功\n\n```bash\n# 安装完成后验证MySQL是否安装成功\nmysql -u root -p \n# 密码为自己新建的，如果没有新建就不需要填密码\n```\n\n```bash\n# 正常安装完成后应该和下面相差不大\nroot@huanfa:/app/mysql/data/mysql# mysql -u root -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 11\nServer version: 8.1.0 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2023, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> status\n--------------\nmysql  Ver 8.1.0 for Linux on x86_64 (MySQL Community Server - GPL)\n\nConnection id:          11\nCurrent database:\nCurrent user:           root@localhost\nSSL:                    Not in use\nCurrent pager:          stdout\nUsing outfile:          ''\nUsing delimiter:        ;\nServer version:         8.1.0 MySQL Community Server - GPL\nProtocol version:       10\nConnection:             Localhost via UNIX socket\nServer characterset:    utf8mb4\nDb     characterset:    utf8mb4\nClient characterset:    utf8mb4\nConn.  characterset:    utf8mb4\nUNIX socket:            /var/run/mysqld/mysqld.sock\nBinary data as:         Hexadecimal\nUptime:                 19 min 0 sec\n\nThreads: 3  Questions: 17  Slow queries: 0  Opens: 140  Flush tables: 3  Open tables: 59  Queries per second avg: 0.014\n--------------\n\nmysql> \n```\n\n### 2）新建外部访问的root账号\n\n```bash\n# 安装完成后查看用户信息\nselect host,user from mysql.user;\n\n# 创建用户，再给用户给权限\ncreate user root@'%' identified with mysql_native_password by 'root';\ngrant all on *.* to root@'%' with grant option;\nflush privileges;\nexit;\n\n# 'root'改为自己的密码\n\n# 修改MySQL配置文件中的bind-address\nsudo vim /etc/mysql/mysql.conf.d/mysqld.cnf\n# 在文件中修改或添加如下配置\nbind-address    = 0.0.0.0\n# 重启mysql\nsudo service mysql restart\n```\n\n## 6、修改文件存储位置\n\n```bash\n# 停止MySQL服务\nsudo service mysql stop\n```\n\n```bash\n# 创建新的数据存储目录\nsudo mkdir -p /data/mysql\n\n# 复制MySQL的数据到新的目录中\nsudo cp -ar /var/lib/mysql /data/mysql\n\n# 修复新的存储目录的权限\nsudo chown -R mysql:mysql /data/mysql\n\n# 修改MySQL的配置文件\nsudo vim /etc/mysql/mysql.conf.d/mysqld.cnf\n# 编辑上述文件，在文件中找到datadir项，=后面的值即为MySQL的存储路径，修改为新的路径即可。即：\ndatadir = /data/mysql\n\n# 注意：只是修改MySQL的配置文件是不行的，因为Ubuntu有访问控制系统apparmor，所以还需要修改与该访问控制系统相关的文件\nsudo vim /etc/apparmor.d/usr.sbin.mysqld\n# 查找到以下内容\n/var/lib/mysql/ r,\n/var/lib/mysql/** rwk,\n# 并将其修改为：\n/data/mysql/ r,\n/data/mysql/** rwk,\n# 修改访问控制文件\nsudo vim /etc/apparmor.d/abstractions/mysql\n# 查到到以下内容\n/var/lib/mysql{,d}/mysql{,d}.sock rw\n# 并将其修改为：\n/data/mysql{,d}/mysql{,d}.sock rw\n\n# 重启apparmor服务\nsudo service apparmor restart\n# 重启MySQL服务\nsudo service mysql start\n```\n\n```bash\n# 在MySQL中验证存储位置\nshow variables like '%datadir%';\n\n# 如下就是修改成功了\nmysql> show variables like '%datadir%';\n+---------------+------------------------+\n| Variable_name | Value                  |\n+---------------+------------------------+\n| datadir       | /var/lib/mysql/        |\n+---------------+------------------------+\n1 row in set (0.01 sec)\n```\n\n‍\n","source":"_posts/服务器/MySQL/Ubuntu安装MySQL8.1.md","raw":"---\ntitle: Ubuntu安装MySQL8.1\ncategories:\n  - 服务器\ntags:\n  - MySQL\n  - Ubuntu\n  - 食用教程\nabbrlink: ea1d\ndate: 2024-12-30 08:56:31\n---\n\n## 1、确定Ubuntu版本\n\n```bash\n# 查看版本\nlsb_release -a\n```\n\n```bash\n# 例如我的版本：\nroot@huanfa:/app/mysql/data/mysql# lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 22.04.5 LTS\nRelease:        22.04\nCodename:       jammy\n```\n\n## 2、在MySQL官网查看版本并下载\n\n```bash\n# 通过官网连接，按照下图下载安装包\nhttps://downloads.mysql.com/archives/community/\n```\n\n```bash\n# 在自己建的文件夹中下载文件\n# 下载对应版本的文件（DEB Bundle）\nsudo wget https://downloads.mysql.com/archives/get/p/23/file/mysql-server_8.1.0-1ubuntu22.04_amd64.deb-bundle.tar\n```\n\n## 3、解压文件\n\n```bash\n# 括号中的是指定路径，自选加不加（解压的文件不会自己创建文件夹，建议加一下，xxx表示对应文件夹）\nsudo tar -xvf mysql-server_8.1.0-1ubuntu22.04_amd64.deb-bundle.tar （-C xxx）\n```\n\n## 4、安装MySQL\n\n```bash\n# 在安装过程中可能会遇到缺少libaio1、libmecab2包，通过以下方法执行\nsudo apt-get update\nsudo apt-get install libaio1\nsudo apt-get install libmecab2\n\n# libmecab2 在安装时会显示需要新建root密码\n```\n\n```bash\n# 依次安装包。由于包之间有依赖关系，一定要按照顺序安装依次安装包。\n# 由于包之间有依赖关系，一定要按照顺序安装\n\nsudo dpkg -i mysql-common_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i mysql-community-client-plugins_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i libmysqlclient22_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i libmysqlclient-dev_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i mysql-community-client-core_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i mysql-community-client_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i mysql-client_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i mysql-community-server-core_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i mysql-community-server_8.1.0-1ubuntu22.04_amd64.deb\nsudo dpkg -i mysql-server_8.1.0-1ubuntu22.04_amd64.deb\n```\n\n## 5、确认是否安装成功并新建外部可访问的root账号\n\n### 1）确认安装成功\n\n```bash\n# 安装完成后验证MySQL是否安装成功\nmysql -u root -p \n# 密码为自己新建的，如果没有新建就不需要填密码\n```\n\n```bash\n# 正常安装完成后应该和下面相差不大\nroot@huanfa:/app/mysql/data/mysql# mysql -u root -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 11\nServer version: 8.1.0 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2023, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> status\n--------------\nmysql  Ver 8.1.0 for Linux on x86_64 (MySQL Community Server - GPL)\n\nConnection id:          11\nCurrent database:\nCurrent user:           root@localhost\nSSL:                    Not in use\nCurrent pager:          stdout\nUsing outfile:          ''\nUsing delimiter:        ;\nServer version:         8.1.0 MySQL Community Server - GPL\nProtocol version:       10\nConnection:             Localhost via UNIX socket\nServer characterset:    utf8mb4\nDb     characterset:    utf8mb4\nClient characterset:    utf8mb4\nConn.  characterset:    utf8mb4\nUNIX socket:            /var/run/mysqld/mysqld.sock\nBinary data as:         Hexadecimal\nUptime:                 19 min 0 sec\n\nThreads: 3  Questions: 17  Slow queries: 0  Opens: 140  Flush tables: 3  Open tables: 59  Queries per second avg: 0.014\n--------------\n\nmysql> \n```\n\n### 2）新建外部访问的root账号\n\n```bash\n# 安装完成后查看用户信息\nselect host,user from mysql.user;\n\n# 创建用户，再给用户给权限\ncreate user root@'%' identified with mysql_native_password by 'root';\ngrant all on *.* to root@'%' with grant option;\nflush privileges;\nexit;\n\n# 'root'改为自己的密码\n\n# 修改MySQL配置文件中的bind-address\nsudo vim /etc/mysql/mysql.conf.d/mysqld.cnf\n# 在文件中修改或添加如下配置\nbind-address    = 0.0.0.0\n# 重启mysql\nsudo service mysql restart\n```\n\n## 6、修改文件存储位置\n\n```bash\n# 停止MySQL服务\nsudo service mysql stop\n```\n\n```bash\n# 创建新的数据存储目录\nsudo mkdir -p /data/mysql\n\n# 复制MySQL的数据到新的目录中\nsudo cp -ar /var/lib/mysql /data/mysql\n\n# 修复新的存储目录的权限\nsudo chown -R mysql:mysql /data/mysql\n\n# 修改MySQL的配置文件\nsudo vim /etc/mysql/mysql.conf.d/mysqld.cnf\n# 编辑上述文件，在文件中找到datadir项，=后面的值即为MySQL的存储路径，修改为新的路径即可。即：\ndatadir = /data/mysql\n\n# 注意：只是修改MySQL的配置文件是不行的，因为Ubuntu有访问控制系统apparmor，所以还需要修改与该访问控制系统相关的文件\nsudo vim /etc/apparmor.d/usr.sbin.mysqld\n# 查找到以下内容\n/var/lib/mysql/ r,\n/var/lib/mysql/** rwk,\n# 并将其修改为：\n/data/mysql/ r,\n/data/mysql/** rwk,\n# 修改访问控制文件\nsudo vim /etc/apparmor.d/abstractions/mysql\n# 查到到以下内容\n/var/lib/mysql{,d}/mysql{,d}.sock rw\n# 并将其修改为：\n/data/mysql{,d}/mysql{,d}.sock rw\n\n# 重启apparmor服务\nsudo service apparmor restart\n# 重启MySQL服务\nsudo service mysql start\n```\n\n```bash\n# 在MySQL中验证存储位置\nshow variables like '%datadir%';\n\n# 如下就是修改成功了\nmysql> show variables like '%datadir%';\n+---------------+------------------------+\n| Variable_name | Value                  |\n+---------------+------------------------+\n| datadir       | /var/lib/mysql/        |\n+---------------+------------------------+\n1 row in set (0.01 sec)\n```\n\n‍\n","slug":"服务器/MySQL/Ubuntu安装MySQL8.1","published":1,"updated":"2025-06-02T07:27:48.275Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wt003jzcqb7zgx2ae4","content":"<h2 id=\"1、确定Ubuntu版本\"><a href=\"#1、确定Ubuntu版本\" class=\"headerlink\" title=\"1、确定Ubuntu版本\"></a>1、确定Ubuntu版本</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看版本</span></span><br><span class=\"line\">lsb_release -a</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 例如我的版本：</span></span><br><span class=\"line\">root@huanfa:/app/mysql/data/mysql# lsb_release -a</span><br><span class=\"line\">No LSB modules are available.</span><br><span class=\"line\">Distributor ID: Ubuntu</span><br><span class=\"line\">Description:    Ubuntu 22.04.5 LTS</span><br><span class=\"line\">Release:        22.04</span><br><span class=\"line\">Codename:       jammy</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2、在MySQL官网查看版本并下载\"><a href=\"#2、在MySQL官网查看版本并下载\" class=\"headerlink\" title=\"2、在MySQL官网查看版本并下载\"></a>2、在MySQL官网查看版本并下载</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 通过官网连接，按照下图下载安装包</span></span><br><span class=\"line\">https://downloads.mysql.com/archives/community/</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 在自己建的文件夹中下载文件</span></span><br><span class=\"line\"><span class=\"comment\"># 下载对应版本的文件（DEB Bundle）</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> wget https://downloads.mysql.com/archives/get/p/23/file/mysql-server_8.1.0-1ubuntu22.04_amd64.deb-bundle.tar</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3、解压文件\"><a href=\"#3、解压文件\" class=\"headerlink\" title=\"3、解压文件\"></a>3、解压文件</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 括号中的是指定路径，自选加不加（解压的文件不会自己创建文件夹，建议加一下，xxx表示对应文件夹）</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> tar -xvf mysql-server_8.1.0-1ubuntu22.04_amd64.deb-bundle.tar （-C xxx）</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4、安装MySQL\"><a href=\"#4、安装MySQL\" class=\"headerlink\" title=\"4、安装MySQL\"></a>4、安装MySQL</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 在安装过程中可能会遇到缺少libaio1、libmecab2包，通过以下方法执行</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt-get update</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt-get install libaio1</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt-get install libmecab2</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># libmecab2 在安装时会显示需要新建root密码</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 依次安装包。由于包之间有依赖关系，一定要按照顺序安装依次安装包。</span></span><br><span class=\"line\"><span class=\"comment\"># 由于包之间有依赖关系，一定要按照顺序安装</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i mysql-common_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i mysql-community-client-plugins_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i libmysqlclient22_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i libmysqlclient-dev_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i mysql-community-client-core_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i mysql-community-client_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i mysql-client_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i mysql-community-server-core_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i mysql-community-server_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i mysql-server_8.1.0-1ubuntu22.04_amd64.deb</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5、确认是否安装成功并新建外部可访问的root账号\"><a href=\"#5、确认是否安装成功并新建外部可访问的root账号\" class=\"headerlink\" title=\"5、确认是否安装成功并新建外部可访问的root账号\"></a>5、确认是否安装成功并新建外部可访问的root账号</h2><h3 id=\"1）确认安装成功\"><a href=\"#1）确认安装成功\" class=\"headerlink\" title=\"1）确认安装成功\"></a>1）确认安装成功</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装完成后验证MySQL是否安装成功</span></span><br><span class=\"line\">mysql -u root -p </span><br><span class=\"line\"><span class=\"comment\"># 密码为自己新建的，如果没有新建就不需要填密码</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 正常安装完成后应该和下面相差不大</span></span><br><span class=\"line\">root@huanfa:/app/mysql/data/mysql# mysql -u root -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection <span class=\"built_in\">id</span> is 11</span><br><span class=\"line\">Server version: 8.1.0 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2023, Oracle and/or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type <span class=\"string\">&#x27;help;&#x27;</span> or <span class=\"string\">&#x27;\\h&#x27;</span> <span class=\"keyword\">for</span> <span class=\"built_in\">help</span>. Type <span class=\"string\">&#x27;\\c&#x27;</span> to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; status</span><br><span class=\"line\">--------------</span><br><span class=\"line\">mysql  Ver 8.1.0 <span class=\"keyword\">for</span> Linux on x86_64 (MySQL Community Server - GPL)</span><br><span class=\"line\"></span><br><span class=\"line\">Connection <span class=\"built_in\">id</span>:          11</span><br><span class=\"line\">Current database:</span><br><span class=\"line\">Current user:           root@localhost</span><br><span class=\"line\">SSL:                    Not <span class=\"keyword\">in</span> use</span><br><span class=\"line\">Current pager:          stdout</span><br><span class=\"line\">Using outfile:          <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">Using delimiter:        ;</span><br><span class=\"line\">Server version:         8.1.0 MySQL Community Server - GPL</span><br><span class=\"line\">Protocol version:       10</span><br><span class=\"line\">Connection:             Localhost via UNIX socket</span><br><span class=\"line\">Server characterset:    utf8mb4</span><br><span class=\"line\">Db     characterset:    utf8mb4</span><br><span class=\"line\">Client characterset:    utf8mb4</span><br><span class=\"line\">Conn.  characterset:    utf8mb4</span><br><span class=\"line\">UNIX socket:            /var/run/mysqld/mysqld.sock</span><br><span class=\"line\">Binary data as:         Hexadecimal</span><br><span class=\"line\">Uptime:                 19 min 0 sec</span><br><span class=\"line\"></span><br><span class=\"line\">Threads: 3  Questions: 17  Slow queries: 0  Opens: 140  Flush tables: 3  Open tables: 59  Queries per second avg: 0.014</span><br><span class=\"line\">--------------</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2）新建外部访问的root账号\"><a href=\"#2）新建外部访问的root账号\" class=\"headerlink\" title=\"2）新建外部访问的root账号\"></a>2）新建外部访问的root账号</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装完成后查看用户信息</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> host,user from mysql.user;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 创建用户，再给用户给权限</span></span><br><span class=\"line\">create user root@<span class=\"string\">&#x27;%&#x27;</span> identified with mysql_native_password by <span class=\"string\">&#x27;root&#x27;</span>;</span><br><span class=\"line\">grant all on *.* to root@<span class=\"string\">&#x27;%&#x27;</span> with grant option;</span><br><span class=\"line\">flush privileges;</span><br><span class=\"line\"><span class=\"built_in\">exit</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x27;root&#x27;改为自己的密码</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 修改MySQL配置文件中的bind-address</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br><span class=\"line\"><span class=\"comment\"># 在文件中修改或添加如下配置</span></span><br><span class=\"line\">bind-address    = 0.0.0.0</span><br><span class=\"line\"><span class=\"comment\"># 重启mysql</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> service mysql restart</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6、修改文件存储位置\"><a href=\"#6、修改文件存储位置\" class=\"headerlink\" title=\"6、修改文件存储位置\"></a>6、修改文件存储位置</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 停止MySQL服务</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> service mysql stop</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 创建新的数据存储目录</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">mkdir</span> -p /data/mysql</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 复制MySQL的数据到新的目录中</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">cp</span> -ar /var/lib/mysql /data/mysql</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 修复新的存储目录的权限</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">chown</span> -R mysql:mysql /data/mysql</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 修改MySQL的配置文件</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br><span class=\"line\"><span class=\"comment\"># 编辑上述文件，在文件中找到datadir项，=后面的值即为MySQL的存储路径，修改为新的路径即可。即：</span></span><br><span class=\"line\">datadir = /data/mysql</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 注意：只是修改MySQL的配置文件是不行的，因为Ubuntu有访问控制系统apparmor，所以还需要修改与该访问控制系统相关的文件</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> vim /etc/apparmor.d/usr.sbin.mysqld</span><br><span class=\"line\"><span class=\"comment\"># 查找到以下内容</span></span><br><span class=\"line\">/var/lib/mysql/ r,</span><br><span class=\"line\">/var/lib/mysql/** rwk,</span><br><span class=\"line\"><span class=\"comment\"># 并将其修改为：</span></span><br><span class=\"line\">/data/mysql/ r,</span><br><span class=\"line\">/data/mysql/** rwk,</span><br><span class=\"line\"><span class=\"comment\"># 修改访问控制文件</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> vim /etc/apparmor.d/abstractions/mysql</span><br><span class=\"line\"><span class=\"comment\"># 查到到以下内容</span></span><br><span class=\"line\">/var/lib/mysql&#123;,d&#125;/mysql&#123;,d&#125;.sock rw</span><br><span class=\"line\"><span class=\"comment\"># 并将其修改为：</span></span><br><span class=\"line\">/data/mysql&#123;,d&#125;/mysql&#123;,d&#125;.sock rw</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 重启apparmor服务</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> service apparmor restart</span><br><span class=\"line\"><span class=\"comment\"># 重启MySQL服务</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> service mysql start</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 在MySQL中验证存储位置</span></span><br><span class=\"line\">show variables like <span class=\"string\">&#x27;%datadir%&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 如下就是修改成功了</span></span><br><span class=\"line\">mysql&gt; show variables like <span class=\"string\">&#x27;%datadir%&#x27;</span>;</span><br><span class=\"line\">+---------------+------------------------+</span><br><span class=\"line\">| Variable_name | Value                  |</span><br><span class=\"line\">+---------------+------------------------+</span><br><span class=\"line\">| datadir       | /var/lib/mysql/        |</span><br><span class=\"line\">+---------------+------------------------+</span><br><span class=\"line\">1 row <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n","cover":"https://t.alcy.cc/pc?_r_=d54b73c5-5d69-510c-08d7-1ad276130da4","cover_type":"img","excerpt":"","more":"<h2 id=\"1、确定Ubuntu版本\"><a href=\"#1、确定Ubuntu版本\" class=\"headerlink\" title=\"1、确定Ubuntu版本\"></a>1、确定Ubuntu版本</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看版本</span></span><br><span class=\"line\">lsb_release -a</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 例如我的版本：</span></span><br><span class=\"line\">root@huanfa:/app/mysql/data/mysql# lsb_release -a</span><br><span class=\"line\">No LSB modules are available.</span><br><span class=\"line\">Distributor ID: Ubuntu</span><br><span class=\"line\">Description:    Ubuntu 22.04.5 LTS</span><br><span class=\"line\">Release:        22.04</span><br><span class=\"line\">Codename:       jammy</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2、在MySQL官网查看版本并下载\"><a href=\"#2、在MySQL官网查看版本并下载\" class=\"headerlink\" title=\"2、在MySQL官网查看版本并下载\"></a>2、在MySQL官网查看版本并下载</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 通过官网连接，按照下图下载安装包</span></span><br><span class=\"line\">https://downloads.mysql.com/archives/community/</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 在自己建的文件夹中下载文件</span></span><br><span class=\"line\"><span class=\"comment\"># 下载对应版本的文件（DEB Bundle）</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> wget https://downloads.mysql.com/archives/get/p/23/file/mysql-server_8.1.0-1ubuntu22.04_amd64.deb-bundle.tar</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3、解压文件\"><a href=\"#3、解压文件\" class=\"headerlink\" title=\"3、解压文件\"></a>3、解压文件</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 括号中的是指定路径，自选加不加（解压的文件不会自己创建文件夹，建议加一下，xxx表示对应文件夹）</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> tar -xvf mysql-server_8.1.0-1ubuntu22.04_amd64.deb-bundle.tar （-C xxx）</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4、安装MySQL\"><a href=\"#4、安装MySQL\" class=\"headerlink\" title=\"4、安装MySQL\"></a>4、安装MySQL</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 在安装过程中可能会遇到缺少libaio1、libmecab2包，通过以下方法执行</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt-get update</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt-get install libaio1</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt-get install libmecab2</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># libmecab2 在安装时会显示需要新建root密码</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 依次安装包。由于包之间有依赖关系，一定要按照顺序安装依次安装包。</span></span><br><span class=\"line\"><span class=\"comment\"># 由于包之间有依赖关系，一定要按照顺序安装</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i mysql-common_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i mysql-community-client-plugins_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i libmysqlclient22_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i libmysqlclient-dev_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i mysql-community-client-core_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i mysql-community-client_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i mysql-client_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i mysql-community-server-core_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i mysql-community-server_8.1.0-1ubuntu22.04_amd64.deb</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> dpkg -i mysql-server_8.1.0-1ubuntu22.04_amd64.deb</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5、确认是否安装成功并新建外部可访问的root账号\"><a href=\"#5、确认是否安装成功并新建外部可访问的root账号\" class=\"headerlink\" title=\"5、确认是否安装成功并新建外部可访问的root账号\"></a>5、确认是否安装成功并新建外部可访问的root账号</h2><h3 id=\"1）确认安装成功\"><a href=\"#1）确认安装成功\" class=\"headerlink\" title=\"1）确认安装成功\"></a>1）确认安装成功</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装完成后验证MySQL是否安装成功</span></span><br><span class=\"line\">mysql -u root -p </span><br><span class=\"line\"><span class=\"comment\"># 密码为自己新建的，如果没有新建就不需要填密码</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 正常安装完成后应该和下面相差不大</span></span><br><span class=\"line\">root@huanfa:/app/mysql/data/mysql# mysql -u root -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MySQL monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MySQL connection <span class=\"built_in\">id</span> is 11</span><br><span class=\"line\">Server version: 8.1.0 MySQL Community Server - GPL</span><br><span class=\"line\"></span><br><span class=\"line\">Copyright (c) 2000, 2023, Oracle and/or its affiliates.</span><br><span class=\"line\"></span><br><span class=\"line\">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class=\"line\">affiliates. Other names may be trademarks of their respective</span><br><span class=\"line\">owners.</span><br><span class=\"line\"></span><br><span class=\"line\">Type <span class=\"string\">&#x27;help;&#x27;</span> or <span class=\"string\">&#x27;\\h&#x27;</span> <span class=\"keyword\">for</span> <span class=\"built_in\">help</span>. Type <span class=\"string\">&#x27;\\c&#x27;</span> to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; status</span><br><span class=\"line\">--------------</span><br><span class=\"line\">mysql  Ver 8.1.0 <span class=\"keyword\">for</span> Linux on x86_64 (MySQL Community Server - GPL)</span><br><span class=\"line\"></span><br><span class=\"line\">Connection <span class=\"built_in\">id</span>:          11</span><br><span class=\"line\">Current database:</span><br><span class=\"line\">Current user:           root@localhost</span><br><span class=\"line\">SSL:                    Not <span class=\"keyword\">in</span> use</span><br><span class=\"line\">Current pager:          stdout</span><br><span class=\"line\">Using outfile:          <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">Using delimiter:        ;</span><br><span class=\"line\">Server version:         8.1.0 MySQL Community Server - GPL</span><br><span class=\"line\">Protocol version:       10</span><br><span class=\"line\">Connection:             Localhost via UNIX socket</span><br><span class=\"line\">Server characterset:    utf8mb4</span><br><span class=\"line\">Db     characterset:    utf8mb4</span><br><span class=\"line\">Client characterset:    utf8mb4</span><br><span class=\"line\">Conn.  characterset:    utf8mb4</span><br><span class=\"line\">UNIX socket:            /var/run/mysqld/mysqld.sock</span><br><span class=\"line\">Binary data as:         Hexadecimal</span><br><span class=\"line\">Uptime:                 19 min 0 sec</span><br><span class=\"line\"></span><br><span class=\"line\">Threads: 3  Questions: 17  Slow queries: 0  Opens: 140  Flush tables: 3  Open tables: 59  Queries per second avg: 0.014</span><br><span class=\"line\">--------------</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2）新建外部访问的root账号\"><a href=\"#2）新建外部访问的root账号\" class=\"headerlink\" title=\"2）新建外部访问的root账号\"></a>2）新建外部访问的root账号</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装完成后查看用户信息</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> host,user from mysql.user;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 创建用户，再给用户给权限</span></span><br><span class=\"line\">create user root@<span class=\"string\">&#x27;%&#x27;</span> identified with mysql_native_password by <span class=\"string\">&#x27;root&#x27;</span>;</span><br><span class=\"line\">grant all on *.* to root@<span class=\"string\">&#x27;%&#x27;</span> with grant option;</span><br><span class=\"line\">flush privileges;</span><br><span class=\"line\"><span class=\"built_in\">exit</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x27;root&#x27;改为自己的密码</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 修改MySQL配置文件中的bind-address</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br><span class=\"line\"><span class=\"comment\"># 在文件中修改或添加如下配置</span></span><br><span class=\"line\">bind-address    = 0.0.0.0</span><br><span class=\"line\"><span class=\"comment\"># 重启mysql</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> service mysql restart</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6、修改文件存储位置\"><a href=\"#6、修改文件存储位置\" class=\"headerlink\" title=\"6、修改文件存储位置\"></a>6、修改文件存储位置</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 停止MySQL服务</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> service mysql stop</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 创建新的数据存储目录</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">mkdir</span> -p /data/mysql</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 复制MySQL的数据到新的目录中</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">cp</span> -ar /var/lib/mysql /data/mysql</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 修复新的存储目录的权限</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">chown</span> -R mysql:mysql /data/mysql</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 修改MySQL的配置文件</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br><span class=\"line\"><span class=\"comment\"># 编辑上述文件，在文件中找到datadir项，=后面的值即为MySQL的存储路径，修改为新的路径即可。即：</span></span><br><span class=\"line\">datadir = /data/mysql</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 注意：只是修改MySQL的配置文件是不行的，因为Ubuntu有访问控制系统apparmor，所以还需要修改与该访问控制系统相关的文件</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> vim /etc/apparmor.d/usr.sbin.mysqld</span><br><span class=\"line\"><span class=\"comment\"># 查找到以下内容</span></span><br><span class=\"line\">/var/lib/mysql/ r,</span><br><span class=\"line\">/var/lib/mysql/** rwk,</span><br><span class=\"line\"><span class=\"comment\"># 并将其修改为：</span></span><br><span class=\"line\">/data/mysql/ r,</span><br><span class=\"line\">/data/mysql/** rwk,</span><br><span class=\"line\"><span class=\"comment\"># 修改访问控制文件</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> vim /etc/apparmor.d/abstractions/mysql</span><br><span class=\"line\"><span class=\"comment\"># 查到到以下内容</span></span><br><span class=\"line\">/var/lib/mysql&#123;,d&#125;/mysql&#123;,d&#125;.sock rw</span><br><span class=\"line\"><span class=\"comment\"># 并将其修改为：</span></span><br><span class=\"line\">/data/mysql&#123;,d&#125;/mysql&#123;,d&#125;.sock rw</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 重启apparmor服务</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> service apparmor restart</span><br><span class=\"line\"><span class=\"comment\"># 重启MySQL服务</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> service mysql start</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 在MySQL中验证存储位置</span></span><br><span class=\"line\">show variables like <span class=\"string\">&#x27;%datadir%&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 如下就是修改成功了</span></span><br><span class=\"line\">mysql&gt; show variables like <span class=\"string\">&#x27;%datadir%&#x27;</span>;</span><br><span class=\"line\">+---------------+------------------------+</span><br><span class=\"line\">| Variable_name | Value                  |</span><br><span class=\"line\">+---------------+------------------------+</span><br><span class=\"line\">| datadir       | /var/lib/mysql/        |</span><br><span class=\"line\">+---------------+------------------------+</span><br><span class=\"line\">1 row <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n"},{"title":"Docker 容器实例","abbrlink":"b30e","date":"2025-02-25T02:44:10.000Z","_content":"\n## Portainer\n\nPortainer 是一个用于管理 Docker 容器的开源工具，它允许用户通过一个直观的用户界面来管理和维护容器。\n\n```bash\nmkdir -p /opt/docker/portainer/data\n\ndocker run -d --restart=always --name=\"portainer\" -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /opt/docker/portainer/data:/data 6053537/portainer-ce\n```\n","source":"_posts/服务器/Docker/Docker容器实例.md","raw":"---\ntitle: Docker 容器实例\ncategories:\n  - 服务器\ntags:\n  - Docker\nabbrlink: b30e\ndate: 2025-02-25 10:44:10\n---\n\n## Portainer\n\nPortainer 是一个用于管理 Docker 容器的开源工具，它允许用户通过一个直观的用户界面来管理和维护容器。\n\n```bash\nmkdir -p /opt/docker/portainer/data\n\ndocker run -d --restart=always --name=\"portainer\" -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /opt/docker/portainer/data:/data 6053537/portainer-ce\n```\n","slug":"服务器/Docker/Docker容器实例","published":1,"updated":"2025-06-02T07:25:37.019Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wt003mzcqbdgexc0ts","content":"<h2 id=\"Portainer\"><a href=\"#Portainer\" class=\"headerlink\" title=\"Portainer\"></a>Portainer</h2><p>Portainer 是一个用于管理 Docker 容器的开源工具，它允许用户通过一个直观的用户界面来管理和维护容器。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p /opt/docker/portainer/data</span><br><span class=\"line\"></span><br><span class=\"line\">docker run -d --restart=always --name=<span class=\"string\">&quot;portainer&quot;</span> -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /opt/docker/portainer/data:/data 6053537/portainer-ce</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=8e87376c-9721-15c2-b37b-87625c004ef1","cover_type":"img","excerpt":"","more":"<h2 id=\"Portainer\"><a href=\"#Portainer\" class=\"headerlink\" title=\"Portainer\"></a>Portainer</h2><p>Portainer 是一个用于管理 Docker 容器的开源工具，它允许用户通过一个直观的用户界面来管理和维护容器。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p /opt/docker/portainer/data</span><br><span class=\"line\"></span><br><span class=\"line\">docker run -d --restart=always --name=<span class=\"string\">&quot;portainer&quot;</span> -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /opt/docker/portainer/data:/data 6053537/portainer-ce</span><br></pre></td></tr></table></figure>\n"},{"title":"Docker 打包本地镜像","abbrlink":"e8","date":"2025-02-26T13:09:30.000Z","_content":"\n## 1. 执行如下命令找到被打包镜像的名字和版本号 (版本号=TAG)\n\n```shell\ndocekr images \n```\n\n## 2. docker打包镜像的两种方式 (选一种执行即可)\n\n```shell\ndocker save 镜像名字:版本号 > /root/打包名字.tar\ndocker save -o /root/打包名字.tar 镜像名字:版本号\n```\n\n## 3. 将打包镜像分发到其它宿主机的 /root/ 目录下\n## 4. 将打成 tar 包的镜像 load 出来\n\n```shell\ndocker load < /root/打包名字.tar\n```\n\n## 5. 查看 load 出来的镜像ID\n\n```shell\ndocekr images\n```\n\n## 6. 刚 load 出来的镜像其名字、版本号均为 none, 我们要通过 tag 命令赋予名字和版本号\n\n```shell\ndocker tag 镜像ID 镜像名字:版本号\n```\n","source":"_posts/服务器/Docker/Docker打包本地镜像.md","raw":"---\ntitle: Docker 打包本地镜像\ncategories:\n  - 服务器\ntags:\n  - Docker\nabbrlink: e8\ndate: 2025-02-26 21:09:30\n---\n\n## 1. 执行如下命令找到被打包镜像的名字和版本号 (版本号=TAG)\n\n```shell\ndocekr images \n```\n\n## 2. docker打包镜像的两种方式 (选一种执行即可)\n\n```shell\ndocker save 镜像名字:版本号 > /root/打包名字.tar\ndocker save -o /root/打包名字.tar 镜像名字:版本号\n```\n\n## 3. 将打包镜像分发到其它宿主机的 /root/ 目录下\n## 4. 将打成 tar 包的镜像 load 出来\n\n```shell\ndocker load < /root/打包名字.tar\n```\n\n## 5. 查看 load 出来的镜像ID\n\n```shell\ndocekr images\n```\n\n## 6. 刚 load 出来的镜像其名字、版本号均为 none, 我们要通过 tag 命令赋予名字和版本号\n\n```shell\ndocker tag 镜像ID 镜像名字:版本号\n```\n","slug":"服务器/Docker/Docker打包本地镜像","published":1,"updated":"2025-06-02T07:25:38.654Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wu003qzcqb4wbqh2tb","content":"<h2 id=\"1-执行如下命令找到被打包镜像的名字和版本号-版本号-TAG\"><a href=\"#1-执行如下命令找到被打包镜像的名字和版本号-版本号-TAG\" class=\"headerlink\" title=\"1. 执行如下命令找到被打包镜像的名字和版本号 (版本号&#x3D;TAG)\"></a>1. 执行如下命令找到被打包镜像的名字和版本号 (版本号&#x3D;TAG)</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docekr images </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-docker打包镜像的两种方式-选一种执行即可\"><a href=\"#2-docker打包镜像的两种方式-选一种执行即可\" class=\"headerlink\" title=\"2. docker打包镜像的两种方式 (选一种执行即可)\"></a>2. docker打包镜像的两种方式 (选一种执行即可)</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker save 镜像名字:版本号 &gt; /root/打包名字.tar</span><br><span class=\"line\">docker save -o /root/打包名字.tar 镜像名字:版本号</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-将打包镜像分发到其它宿主机的-root-目录下\"><a href=\"#3-将打包镜像分发到其它宿主机的-root-目录下\" class=\"headerlink\" title=\"3. 将打包镜像分发到其它宿主机的 &#x2F;root&#x2F; 目录下\"></a>3. 将打包镜像分发到其它宿主机的 &#x2F;root&#x2F; 目录下</h2><h2 id=\"4-将打成-tar-包的镜像-load-出来\"><a href=\"#4-将打成-tar-包的镜像-load-出来\" class=\"headerlink\" title=\"4. 将打成 tar 包的镜像 load 出来\"></a>4. 将打成 tar 包的镜像 load 出来</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker load &lt; /root/打包名字.tar</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-查看-load-出来的镜像ID\"><a href=\"#5-查看-load-出来的镜像ID\" class=\"headerlink\" title=\"5. 查看 load 出来的镜像ID\"></a>5. 查看 load 出来的镜像ID</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docekr images</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-刚-load-出来的镜像其名字、版本号均为-none-我们要通过-tag-命令赋予名字和版本号\"><a href=\"#6-刚-load-出来的镜像其名字、版本号均为-none-我们要通过-tag-命令赋予名字和版本号\" class=\"headerlink\" title=\"6. 刚 load 出来的镜像其名字、版本号均为 none, 我们要通过 tag 命令赋予名字和版本号\"></a>6. 刚 load 出来的镜像其名字、版本号均为 none, 我们要通过 tag 命令赋予名字和版本号</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker tag 镜像ID 镜像名字:版本号</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=51bda541-27da-4d35-71f9-fc4c803d6c22","cover_type":"img","excerpt":"","more":"<h2 id=\"1-执行如下命令找到被打包镜像的名字和版本号-版本号-TAG\"><a href=\"#1-执行如下命令找到被打包镜像的名字和版本号-版本号-TAG\" class=\"headerlink\" title=\"1. 执行如下命令找到被打包镜像的名字和版本号 (版本号&#x3D;TAG)\"></a>1. 执行如下命令找到被打包镜像的名字和版本号 (版本号&#x3D;TAG)</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docekr images </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-docker打包镜像的两种方式-选一种执行即可\"><a href=\"#2-docker打包镜像的两种方式-选一种执行即可\" class=\"headerlink\" title=\"2. docker打包镜像的两种方式 (选一种执行即可)\"></a>2. docker打包镜像的两种方式 (选一种执行即可)</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker save 镜像名字:版本号 &gt; /root/打包名字.tar</span><br><span class=\"line\">docker save -o /root/打包名字.tar 镜像名字:版本号</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-将打包镜像分发到其它宿主机的-root-目录下\"><a href=\"#3-将打包镜像分发到其它宿主机的-root-目录下\" class=\"headerlink\" title=\"3. 将打包镜像分发到其它宿主机的 &#x2F;root&#x2F; 目录下\"></a>3. 将打包镜像分发到其它宿主机的 &#x2F;root&#x2F; 目录下</h2><h2 id=\"4-将打成-tar-包的镜像-load-出来\"><a href=\"#4-将打成-tar-包的镜像-load-出来\" class=\"headerlink\" title=\"4. 将打成 tar 包的镜像 load 出来\"></a>4. 将打成 tar 包的镜像 load 出来</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker load &lt; /root/打包名字.tar</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-查看-load-出来的镜像ID\"><a href=\"#5-查看-load-出来的镜像ID\" class=\"headerlink\" title=\"5. 查看 load 出来的镜像ID\"></a>5. 查看 load 出来的镜像ID</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docekr images</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-刚-load-出来的镜像其名字、版本号均为-none-我们要通过-tag-命令赋予名字和版本号\"><a href=\"#6-刚-load-出来的镜像其名字、版本号均为-none-我们要通过-tag-命令赋予名字和版本号\" class=\"headerlink\" title=\"6. 刚 load 出来的镜像其名字、版本号均为 none, 我们要通过 tag 命令赋予名字和版本号\"></a>6. 刚 load 出来的镜像其名字、版本号均为 none, 我们要通过 tag 命令赋予名字和版本号</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker tag 镜像ID 镜像名字:版本号</span><br></pre></td></tr></table></figure>\n"},{"title":"Docker 换源","abbrlink":"f95c","date":"2024-12-24T13:09:30.000Z","_content":"\n> 因为中国区访问Docker出现问题，所以利用cloudflare搭建了一个Docker镜像源\n\n## Docker换源\n\n### 创建文件\n\n```shell\nvim /etc/docker/daemon.json\n```\n\n### 添加镜像地址，写入下面内容\n\n```json\n{\n    \"registry-mirrors\": [\"https://docker.olinl.com.cn\"]\n}\n```\n\n### 重启docker以及daemon\n\n```shell\nsystemctl daemon-reload\nsystemctl restart docker\n```\n\n## 一键换源脚本\n\n**请确保Docker刚安装，无其他配置，此操作会替换Docker配置文件**\n\n```shell\nmkdir -p /etc/docker\ntee /etc/docker/daemon.json <<EOF\n{\n    \"registry-mirrors\": [\"https://docker.olinl.com.cn\"]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n","source":"_posts/服务器/Docker/Docker换源.md","raw":"---\ntitle: Docker 换源\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - 食用教程\nabbrlink: f95c\ndate: 2024-12-24 21:09:30\n---\n\n> 因为中国区访问Docker出现问题，所以利用cloudflare搭建了一个Docker镜像源\n\n## Docker换源\n\n### 创建文件\n\n```shell\nvim /etc/docker/daemon.json\n```\n\n### 添加镜像地址，写入下面内容\n\n```json\n{\n    \"registry-mirrors\": [\"https://docker.olinl.com.cn\"]\n}\n```\n\n### 重启docker以及daemon\n\n```shell\nsystemctl daemon-reload\nsystemctl restart docker\n```\n\n## 一键换源脚本\n\n**请确保Docker刚安装，无其他配置，此操作会替换Docker配置文件**\n\n```shell\nmkdir -p /etc/docker\ntee /etc/docker/daemon.json <<EOF\n{\n    \"registry-mirrors\": [\"https://docker.olinl.com.cn\"]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n","slug":"服务器/Docker/Docker换源","published":1,"updated":"2025-06-02T07:25:40.488Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wu003tzcqbc2ip91ao","content":"<blockquote>\n<p>因为中国区访问Docker出现问题，所以利用cloudflare搭建了一个Docker镜像源</p>\n</blockquote>\n<h2 id=\"Docker换源\"><a href=\"#Docker换源\" class=\"headerlink\" title=\"Docker换源\"></a>Docker换源</h2><h3 id=\"创建文件\"><a href=\"#创建文件\" class=\"headerlink\" title=\"创建文件\"></a>创建文件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加镜像地址，写入下面内容\"><a href=\"#添加镜像地址，写入下面内容\" class=\"headerlink\" title=\"添加镜像地址，写入下面内容\"></a>添加镜像地址，写入下面内容</h3><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;registry-mirrors&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"string\">&quot;https://docker.olinl.com.cn&quot;</span><span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"重启docker以及daemon\"><a href=\"#重启docker以及daemon\" class=\"headerlink\" title=\"重启docker以及daemon\"></a>重启docker以及daemon</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl restart docker</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"一键换源脚本\"><a href=\"#一键换源脚本\" class=\"headerlink\" title=\"一键换源脚本\"></a>一键换源脚本</h2><p><strong>请确保Docker刚安装，无其他配置，此操作会替换Docker配置文件</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /etc/docker</span><br><span class=\"line\">tee /etc/docker/daemon.json &lt;&lt;EOF</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;registry-mirrors&quot;: [&quot;https://docker.olinl.com.cn&quot;]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">EOF</span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=e49f247c-259d-7424-26c0-784a9e89fcf5","cover_type":"img","excerpt":"","more":"<blockquote>\n<p>因为中国区访问Docker出现问题，所以利用cloudflare搭建了一个Docker镜像源</p>\n</blockquote>\n<h2 id=\"Docker换源\"><a href=\"#Docker换源\" class=\"headerlink\" title=\"Docker换源\"></a>Docker换源</h2><h3 id=\"创建文件\"><a href=\"#创建文件\" class=\"headerlink\" title=\"创建文件\"></a>创建文件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加镜像地址，写入下面内容\"><a href=\"#添加镜像地址，写入下面内容\" class=\"headerlink\" title=\"添加镜像地址，写入下面内容\"></a>添加镜像地址，写入下面内容</h3><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;registry-mirrors&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"string\">&quot;https://docker.olinl.com.cn&quot;</span><span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"重启docker以及daemon\"><a href=\"#重启docker以及daemon\" class=\"headerlink\" title=\"重启docker以及daemon\"></a>重启docker以及daemon</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl restart docker</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"一键换源脚本\"><a href=\"#一键换源脚本\" class=\"headerlink\" title=\"一键换源脚本\"></a>一键换源脚本</h2><p><strong>请确保Docker刚安装，无其他配置，此操作会替换Docker配置文件</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /etc/docker</span><br><span class=\"line\">tee /etc/docker/daemon.json &lt;&lt;EOF</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;registry-mirrors&quot;: [&quot;https://docker.olinl.com.cn&quot;]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">EOF</span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>\n"},{"title":"Docker操作命令之 操作容器","abbrlink":"bb89","date":"2025-02-25T01:12:33.000Z","_content":"\n参考：[Docker 命令大全 | 菜鸟教程](https://www.runoob.com/docker/docker-command-manual.html)\n\n## Docker run\n\ndocker run 命令用于创建并启动一个新的容器。\n\n```bash\ndocker run [OPTIONS] IMAGE [COMMAND] [ARG...]\n```\n\n常用参数说明：\n\n*  **`-d`**: 后台运行容器并返回容器 ID。\n*  **`-it`**: 交互式运行容器，分配一个伪终端。\n*  **`--name`**: 给容器指定一个名称。\n*  **`-p`**: 端口映射，格式为 `host_port:container_port`。\n*  **`-v`**: 挂载卷，格式为 `host_dir:container_dir`。\n*  **`--rm`**: 容器停止后自动删除容器。\n*  **`--env`** **或**  **`-e`**: 设置环境变量。\n*  **`--network`**: 指定容器的网络模式。\n*  **`--restart`**: 容器的重启策略（如 `no`、`on-failure`、`always`、`unless-stopped`）。\n*  **`-u`**: 指定用户。\n\n## Docker start/stop/restart\n\n**docker start** 命令用于启动一个或多个已经创建的容器。\n\n**docker stop** 命令用于停止一个运行中的容器。\n\n**docker restart** 命令用于重启容器。\n\n```bash\ndocker start [OPTIONS] CONTAINER [CONTAINER...]\n```\n\n**参数**\n\n*  **`-a`**: 附加到容器的标准输入输出流。\n*  **`-i`**: 附加并保持标准输入打开。\n\n\n\n```bash\ndocker stop [OPTIONS] CONTAINER [CONTAINER...]\ndocker restart [OPTIONS] CONTAINER [CONTAINER...]\n```\n\n**参数**\n\n **-t, --time**: 停止容器之前等待的秒数，默认是 10 秒。\n\n## Docker exec\n\n`docker exec` 命令用于在运行中的容器内执行一个新的命令。这对于调试、运行附加的进程或在容器内部进行管理操作非常有用。\n\n```bash\ndocker exec [OPTIONS] CONTAINER COMMAND [ARG...]\n```\n\n### 常用参数\n\n*  **`-d, --detach`**: 在后台运行命令。\n*  **`--detach-keys`**: 覆盖分离容器的键序列。\n*  **`-e, --env`**: 设置环境变量。\n*  **`--env-file`**: 从文件中读取环境变量。\n*  **`-i, --interactive`**: 保持标准输入打开。\n*  **`--privileged`**: 给这个命令额外的权限。\n*  **`--user, -u`**: 以指定用户的身份运行命令。\n*  **`--workdir, -w`**: 指定命令的工作目录。\n*  **`-t, --tty`**: 分配一个伪终端。\n\n\n\n在运行中的 my\\_container 容器内执行 ls /app 命令，列出 /app 目录的内容。\n\n以交互模式运行命令：\n\n```\ndocker exec -it my_container /bin/bash\n```\n\n\n\n## Docker ps\n\ndocker ps 命令用于列出 Docker 容器。\n\n默认情况下，docker ps 命令只显示运行中的容器，但也可以通过指定选项来显示所有容器，包括停止的容器。\n\n```bash\ndocker ps [OPTIONS]\n```\n\nOPTIONS说明：\n\n*  **`-a, --all`**: 显示所有容器，包括停止的容器。\n*  **`-q, --quiet`**: 只显示容器 ID。\n*  **`-l, --latest`**: 显示最近创建的一个容器，包括所有状态。\n*  **`-n`**: 显示最近创建的 n 个容器，包括所有状态。\n*  **`--no-trunc`**: 不截断输出。\n*  **`-s, --size`**: 显示容器的大小。\n*  **`--filter, -f`**: 根据条件过滤显示的容器。\n*  **`--format`**: 格式化输出。\n\n### 实例\n\n**1、列出所有在运行的容器信息**\n\n默认情况下，docker ps 只显示正在运行的容器。\n\n```bash\ndocker ps\nCONTAINER ID   IMAGE          COMMAND                ...  PORTS                    NAMES\n09b93464c2f7   nginx:latest   \"nginx -g 'daemon off\" ...  80/tcp, 443/tcp          myrunoob\n96f7f14e99ab   mysql:5.6      \"docker-entrypoint.sh\" ...  0.0.0.0:3306->3306/tcp   mymysql\n\n```\n\n输出详情介绍：\n\n**CONTAINER ID:**  容器 ID。\n\n**IMAGE:**  使用的镜像。\n\n**COMMAND:**  启动容器时运行的命令。\n\n**CREATED:**  容器的创建时间。\n\n**STATUS:**  容器状态。\n\n状态有7种：\n\n* created（已创建）\n* restarting（重启中）\n* running（运行中）\n* removing（迁移中）\n* paused（暂停）\n* exited（停止）\n* dead（死亡）\n\n**PORTS:**  容器的端口信息和使用的连接类型（tcp\\\\udp）。\n\n**NAMES:**  自动分配的容器名称。\n\n\n\n## Docker logs\n\n`docker logs` 命令用于获取和查看容器的日志输出。\n\n`docker logs` 命令非常有用，可以帮助用户调试和监控运行中的容器。\n\n```bash\ndocker logs [OPTIONS] CONTAINER\n```\n\n常用选项：\n\n*  **`-f, --follow`**: 跟随日志输出（类似于 `tail -f`）。\n*  **`--since`**: 从指定时间开始显示日志。\n*  **`-t, --timestamps`**: 显示日志时间戳。\n*  **`--tail`**: 仅显示日志的最后部分，例如 `--tail 10` 显示最后 10 行。\n*  **`--details`**: 显示提供给日志的额外详细信息。\n*  **`--until`**: 显示直到指定时间的日志。\n\n### 实例\n\n**显示容器日志**\n\n```\ndocker logs my_container\n```\n\n显示名为 my\\_container 的容器的所有日志，输出内容：\n\n```\nhello world\nhello world\nhello world\n...\n```\n\n**跟随日志输出**\n\n```\ndocker logs -f my_container\n```\n\n持续显示 my\\_container 的日志输出，输出内容：\n\n```\nhello world\nhello world\nhello world\n...\n```\n\n**显示带时间戳的日志**\n\n```\ndocker logs -t my_container\n```\n\n显示包含时间戳的日志，输出内容：\n\n```\n2023-07-22T15:04:05.123456789Z hello world\n2023-07-22T15:04:06.123456789Z hello world\n2023-07-22T15:04:07.123456789Z hello world\n...\n```\n\n**从指定时间开始显示日志**\n\n```\n\ndocker logs --since=\"2023-07-22T15:00:00\" my_container\n```\n\n显示 2023-07-22T15:00:00 之后的日志。\n\n**显示最后 10 行日志**\n\n```\ndocker logs --tail 10 my_container\n```\n\n显示 my\\_container 的最后 10 行日志。\n\n**显示额外详细信息的日志**\n\n```\ndocker logs --details my_container\n```\n\n显示 my\\_container 的日志，并包含额外详细信息。\n\n**显示直到指定时间的日志**\n\n```\ndocker logs --until=\"2023-07-22T16:00:00\" my_container\n```\n\n显示 2023-07-22T16:00:00 之前的日志。\n","source":"_posts/服务器/Docker/Docker操作容器.md","raw":"---\ntitle: Docker操作命令之 操作容器\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - 食用教程\nabbrlink: bb89\ndate: 2025-02-25 09:12:33\n---\n\n参考：[Docker 命令大全 | 菜鸟教程](https://www.runoob.com/docker/docker-command-manual.html)\n\n## Docker run\n\ndocker run 命令用于创建并启动一个新的容器。\n\n```bash\ndocker run [OPTIONS] IMAGE [COMMAND] [ARG...]\n```\n\n常用参数说明：\n\n*  **`-d`**: 后台运行容器并返回容器 ID。\n*  **`-it`**: 交互式运行容器，分配一个伪终端。\n*  **`--name`**: 给容器指定一个名称。\n*  **`-p`**: 端口映射，格式为 `host_port:container_port`。\n*  **`-v`**: 挂载卷，格式为 `host_dir:container_dir`。\n*  **`--rm`**: 容器停止后自动删除容器。\n*  **`--env`** **或**  **`-e`**: 设置环境变量。\n*  **`--network`**: 指定容器的网络模式。\n*  **`--restart`**: 容器的重启策略（如 `no`、`on-failure`、`always`、`unless-stopped`）。\n*  **`-u`**: 指定用户。\n\n## Docker start/stop/restart\n\n**docker start** 命令用于启动一个或多个已经创建的容器。\n\n**docker stop** 命令用于停止一个运行中的容器。\n\n**docker restart** 命令用于重启容器。\n\n```bash\ndocker start [OPTIONS] CONTAINER [CONTAINER...]\n```\n\n**参数**\n\n*  **`-a`**: 附加到容器的标准输入输出流。\n*  **`-i`**: 附加并保持标准输入打开。\n\n\n\n```bash\ndocker stop [OPTIONS] CONTAINER [CONTAINER...]\ndocker restart [OPTIONS] CONTAINER [CONTAINER...]\n```\n\n**参数**\n\n **-t, --time**: 停止容器之前等待的秒数，默认是 10 秒。\n\n## Docker exec\n\n`docker exec` 命令用于在运行中的容器内执行一个新的命令。这对于调试、运行附加的进程或在容器内部进行管理操作非常有用。\n\n```bash\ndocker exec [OPTIONS] CONTAINER COMMAND [ARG...]\n```\n\n### 常用参数\n\n*  **`-d, --detach`**: 在后台运行命令。\n*  **`--detach-keys`**: 覆盖分离容器的键序列。\n*  **`-e, --env`**: 设置环境变量。\n*  **`--env-file`**: 从文件中读取环境变量。\n*  **`-i, --interactive`**: 保持标准输入打开。\n*  **`--privileged`**: 给这个命令额外的权限。\n*  **`--user, -u`**: 以指定用户的身份运行命令。\n*  **`--workdir, -w`**: 指定命令的工作目录。\n*  **`-t, --tty`**: 分配一个伪终端。\n\n\n\n在运行中的 my\\_container 容器内执行 ls /app 命令，列出 /app 目录的内容。\n\n以交互模式运行命令：\n\n```\ndocker exec -it my_container /bin/bash\n```\n\n\n\n## Docker ps\n\ndocker ps 命令用于列出 Docker 容器。\n\n默认情况下，docker ps 命令只显示运行中的容器，但也可以通过指定选项来显示所有容器，包括停止的容器。\n\n```bash\ndocker ps [OPTIONS]\n```\n\nOPTIONS说明：\n\n*  **`-a, --all`**: 显示所有容器，包括停止的容器。\n*  **`-q, --quiet`**: 只显示容器 ID。\n*  **`-l, --latest`**: 显示最近创建的一个容器，包括所有状态。\n*  **`-n`**: 显示最近创建的 n 个容器，包括所有状态。\n*  **`--no-trunc`**: 不截断输出。\n*  **`-s, --size`**: 显示容器的大小。\n*  **`--filter, -f`**: 根据条件过滤显示的容器。\n*  **`--format`**: 格式化输出。\n\n### 实例\n\n**1、列出所有在运行的容器信息**\n\n默认情况下，docker ps 只显示正在运行的容器。\n\n```bash\ndocker ps\nCONTAINER ID   IMAGE          COMMAND                ...  PORTS                    NAMES\n09b93464c2f7   nginx:latest   \"nginx -g 'daemon off\" ...  80/tcp, 443/tcp          myrunoob\n96f7f14e99ab   mysql:5.6      \"docker-entrypoint.sh\" ...  0.0.0.0:3306->3306/tcp   mymysql\n\n```\n\n输出详情介绍：\n\n**CONTAINER ID:**  容器 ID。\n\n**IMAGE:**  使用的镜像。\n\n**COMMAND:**  启动容器时运行的命令。\n\n**CREATED:**  容器的创建时间。\n\n**STATUS:**  容器状态。\n\n状态有7种：\n\n* created（已创建）\n* restarting（重启中）\n* running（运行中）\n* removing（迁移中）\n* paused（暂停）\n* exited（停止）\n* dead（死亡）\n\n**PORTS:**  容器的端口信息和使用的连接类型（tcp\\\\udp）。\n\n**NAMES:**  自动分配的容器名称。\n\n\n\n## Docker logs\n\n`docker logs` 命令用于获取和查看容器的日志输出。\n\n`docker logs` 命令非常有用，可以帮助用户调试和监控运行中的容器。\n\n```bash\ndocker logs [OPTIONS] CONTAINER\n```\n\n常用选项：\n\n*  **`-f, --follow`**: 跟随日志输出（类似于 `tail -f`）。\n*  **`--since`**: 从指定时间开始显示日志。\n*  **`-t, --timestamps`**: 显示日志时间戳。\n*  **`--tail`**: 仅显示日志的最后部分，例如 `--tail 10` 显示最后 10 行。\n*  **`--details`**: 显示提供给日志的额外详细信息。\n*  **`--until`**: 显示直到指定时间的日志。\n\n### 实例\n\n**显示容器日志**\n\n```\ndocker logs my_container\n```\n\n显示名为 my\\_container 的容器的所有日志，输出内容：\n\n```\nhello world\nhello world\nhello world\n...\n```\n\n**跟随日志输出**\n\n```\ndocker logs -f my_container\n```\n\n持续显示 my\\_container 的日志输出，输出内容：\n\n```\nhello world\nhello world\nhello world\n...\n```\n\n**显示带时间戳的日志**\n\n```\ndocker logs -t my_container\n```\n\n显示包含时间戳的日志，输出内容：\n\n```\n2023-07-22T15:04:05.123456789Z hello world\n2023-07-22T15:04:06.123456789Z hello world\n2023-07-22T15:04:07.123456789Z hello world\n...\n```\n\n**从指定时间开始显示日志**\n\n```\n\ndocker logs --since=\"2023-07-22T15:00:00\" my_container\n```\n\n显示 2023-07-22T15:00:00 之后的日志。\n\n**显示最后 10 行日志**\n\n```\ndocker logs --tail 10 my_container\n```\n\n显示 my\\_container 的最后 10 行日志。\n\n**显示额外详细信息的日志**\n\n```\ndocker logs --details my_container\n```\n\n显示 my\\_container 的日志，并包含额外详细信息。\n\n**显示直到指定时间的日志**\n\n```\ndocker logs --until=\"2023-07-22T16:00:00\" my_container\n```\n\n显示 2023-07-22T16:00:00 之前的日志。\n","slug":"服务器/Docker/Docker操作容器","published":1,"updated":"2025-06-02T07:25:43.280Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wv003xzcqb49ph8d32","content":"<p>参考：<a href=\"https://www.runoob.com/docker/docker-command-manual.html\">Docker 命令大全 | 菜鸟教程</a></p>\n<h2 id=\"Docker-run\"><a href=\"#Docker-run\" class=\"headerlink\" title=\"Docker run\"></a>Docker run</h2><p>docker run 命令用于创建并启动一个新的容器。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br></pre></td></tr></table></figure>\n\n<p>常用参数说明：</p>\n<ul>\n<li><strong><code>-d</code></strong>: 后台运行容器并返回容器 ID。</li>\n<li><strong><code>-it</code></strong>: 交互式运行容器，分配一个伪终端。</li>\n<li><strong><code>--name</code></strong>: 给容器指定一个名称。</li>\n<li><strong><code>-p</code></strong>: 端口映射，格式为 <code>host_port:container_port</code>。</li>\n<li><strong><code>-v</code></strong>: 挂载卷，格式为 <code>host_dir:container_dir</code>。</li>\n<li><strong><code>--rm</code></strong>: 容器停止后自动删除容器。</li>\n<li><strong><code>--env</code></strong> <strong>或</strong>  <strong><code>-e</code></strong>: 设置环境变量。</li>\n<li><strong><code>--network</code></strong>: 指定容器的网络模式。</li>\n<li><strong><code>--restart</code></strong>: 容器的重启策略（如 <code>no</code>、<code>on-failure</code>、<code>always</code>、<code>unless-stopped</code>）。</li>\n<li><strong><code>-u</code></strong>: 指定用户。</li>\n</ul>\n<h2 id=\"Docker-start-stop-restart\"><a href=\"#Docker-start-stop-restart\" class=\"headerlink\" title=\"Docker start&#x2F;stop&#x2F;restart\"></a>Docker start&#x2F;stop&#x2F;restart</h2><p><strong>docker start</strong> 命令用于启动一个或多个已经创建的容器。</p>\n<p><strong>docker stop</strong> 命令用于停止一个运行中的容器。</p>\n<p><strong>docker restart</strong> 命令用于重启容器。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker start [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>\n\n<p><strong>参数</strong></p>\n<ul>\n<li><strong><code>-a</code></strong>: 附加到容器的标准输入输出流。</li>\n<li><strong><code>-i</code></strong>: 附加并保持标准输入打开。</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker stop [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class=\"line\">docker restart [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>\n\n<p><strong>参数</strong></p>\n<p> <strong>-t, –time</strong>: 停止容器之前等待的秒数，默认是 10 秒。</p>\n<h2 id=\"Docker-exec\"><a href=\"#Docker-exec\" class=\"headerlink\" title=\"Docker exec\"></a>Docker exec</h2><p><code>docker exec</code> 命令用于在运行中的容器内执行一个新的命令。这对于调试、运行附加的进程或在容器内部进行管理操作非常有用。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker <span class=\"built_in\">exec</span> [OPTIONS] CONTAINER COMMAND [ARG...]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"常用参数\"><a href=\"#常用参数\" class=\"headerlink\" title=\"常用参数\"></a>常用参数</h3><ul>\n<li><strong><code>-d, --detach</code></strong>: 在后台运行命令。</li>\n<li><strong><code>--detach-keys</code></strong>: 覆盖分离容器的键序列。</li>\n<li><strong><code>-e, --env</code></strong>: 设置环境变量。</li>\n<li><strong><code>--env-file</code></strong>: 从文件中读取环境变量。</li>\n<li><strong><code>-i, --interactive</code></strong>: 保持标准输入打开。</li>\n<li><strong><code>--privileged</code></strong>: 给这个命令额外的权限。</li>\n<li><strong><code>--user, -u</code></strong>: 以指定用户的身份运行命令。</li>\n<li><strong><code>--workdir, -w</code></strong>: 指定命令的工作目录。</li>\n<li><strong><code>-t, --tty</code></strong>: 分配一个伪终端。</li>\n</ul>\n<p>在运行中的 my_container 容器内执行 ls &#x2F;app 命令，列出 &#x2F;app 目录的内容。</p>\n<p>以交互模式运行命令：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker exec -it my_container /bin/bash</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"Docker-ps\"><a href=\"#Docker-ps\" class=\"headerlink\" title=\"Docker ps\"></a>Docker ps</h2><p>docker ps 命令用于列出 Docker 容器。</p>\n<p>默认情况下，docker ps 命令只显示运行中的容器，但也可以通过指定选项来显示所有容器，包括停止的容器。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps [OPTIONS]</span><br></pre></td></tr></table></figure>\n\n<p>OPTIONS说明：</p>\n<ul>\n<li><strong><code>-a, --all</code></strong>: 显示所有容器，包括停止的容器。</li>\n<li><strong><code>-q, --quiet</code></strong>: 只显示容器 ID。</li>\n<li><strong><code>-l, --latest</code></strong>: 显示最近创建的一个容器，包括所有状态。</li>\n<li><strong><code>-n</code></strong>: 显示最近创建的 n 个容器，包括所有状态。</li>\n<li><strong><code>--no-trunc</code></strong>: 不截断输出。</li>\n<li><strong><code>-s, --size</code></strong>: 显示容器的大小。</li>\n<li><strong><code>--filter, -f</code></strong>: 根据条件过滤显示的容器。</li>\n<li><strong><code>--format</code></strong>: 格式化输出。</li>\n</ul>\n<h3 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h3><p><strong>1、列出所有在运行的容器信息</strong></p>\n<p>默认情况下，docker ps 只显示正在运行的容器。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps</span><br><span class=\"line\">CONTAINER ID   IMAGE          COMMAND                ...  PORTS                    NAMES</span><br><span class=\"line\">09b93464c2f7   nginx:latest   <span class=\"string\">&quot;nginx -g &#x27;daemon off&quot;</span> ...  80/tcp, 443/tcp          myrunoob</span><br><span class=\"line\">96f7f14e99ab   mysql:5.6      <span class=\"string\">&quot;docker-entrypoint.sh&quot;</span> ...  0.0.0.0:3306-&gt;3306/tcp   mymysql</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>输出详情介绍：</p>\n<p><strong>CONTAINER ID:</strong>  容器 ID。</p>\n<p><strong>IMAGE:</strong>  使用的镜像。</p>\n<p><strong>COMMAND:</strong>  启动容器时运行的命令。</p>\n<p><strong>CREATED:</strong>  容器的创建时间。</p>\n<p><strong>STATUS:</strong>  容器状态。</p>\n<p>状态有7种：</p>\n<ul>\n<li>created（已创建）</li>\n<li>restarting（重启中）</li>\n<li>running（运行中）</li>\n<li>removing（迁移中）</li>\n<li>paused（暂停）</li>\n<li>exited（停止）</li>\n<li>dead（死亡）</li>\n</ul>\n<p><strong>PORTS:</strong>  容器的端口信息和使用的连接类型（tcp\\udp）。</p>\n<p><strong>NAMES:</strong>  自动分配的容器名称。</p>\n<h2 id=\"Docker-logs\"><a href=\"#Docker-logs\" class=\"headerlink\" title=\"Docker logs\"></a>Docker logs</h2><p><code>docker logs</code> 命令用于获取和查看容器的日志输出。</p>\n<p><code>docker logs</code> 命令非常有用，可以帮助用户调试和监控运行中的容器。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker logs [OPTIONS] CONTAINER</span><br></pre></td></tr></table></figure>\n\n<p>常用选项：</p>\n<ul>\n<li><strong><code>-f, --follow</code></strong>: 跟随日志输出（类似于 <code>tail -f</code>）。</li>\n<li><strong><code>--since</code></strong>: 从指定时间开始显示日志。</li>\n<li><strong><code>-t, --timestamps</code></strong>: 显示日志时间戳。</li>\n<li><strong><code>--tail</code></strong>: 仅显示日志的最后部分，例如 <code>--tail 10</code> 显示最后 10 行。</li>\n<li><strong><code>--details</code></strong>: 显示提供给日志的额外详细信息。</li>\n<li><strong><code>--until</code></strong>: 显示直到指定时间的日志。</li>\n</ul>\n<h3 id=\"实例-1\"><a href=\"#实例-1\" class=\"headerlink\" title=\"实例\"></a>实例</h3><p><strong>显示容器日志</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker logs my_container</span><br></pre></td></tr></table></figure>\n\n<p>显示名为 my_container 的容器的所有日志，输出内容：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello world</span><br><span class=\"line\">hello world</span><br><span class=\"line\">hello world</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p><strong>跟随日志输出</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker logs -f my_container</span><br></pre></td></tr></table></figure>\n\n<p>持续显示 my_container 的日志输出，输出内容：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello world</span><br><span class=\"line\">hello world</span><br><span class=\"line\">hello world</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p><strong>显示带时间戳的日志</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker logs -t my_container</span><br></pre></td></tr></table></figure>\n\n<p>显示包含时间戳的日志，输出内容：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2023-07-22T15:04:05.123456789Z hello world</span><br><span class=\"line\">2023-07-22T15:04:06.123456789Z hello world</span><br><span class=\"line\">2023-07-22T15:04:07.123456789Z hello world</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p><strong>从指定时间开始显示日志</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">docker logs --since=&quot;2023-07-22T15:00:00&quot; my_container</span><br></pre></td></tr></table></figure>\n\n<p>显示 2023-07-22T15:00:00 之后的日志。</p>\n<p><strong>显示最后 10 行日志</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker logs --tail 10 my_container</span><br></pre></td></tr></table></figure>\n\n<p>显示 my_container 的最后 10 行日志。</p>\n<p><strong>显示额外详细信息的日志</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker logs --details my_container</span><br></pre></td></tr></table></figure>\n\n<p>显示 my_container 的日志，并包含额外详细信息。</p>\n<p><strong>显示直到指定时间的日志</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker logs --until=&quot;2023-07-22T16:00:00&quot; my_container</span><br></pre></td></tr></table></figure>\n\n<p>显示 2023-07-22T16:00:00 之前的日志。</p>\n","cover":"https://t.alcy.cc/pc?_r_=aaab2993-29b5-3e78-d38c-c86530ec428a","cover_type":"img","excerpt":"","more":"<p>参考：<a href=\"https://www.runoob.com/docker/docker-command-manual.html\">Docker 命令大全 | 菜鸟教程</a></p>\n<h2 id=\"Docker-run\"><a href=\"#Docker-run\" class=\"headerlink\" title=\"Docker run\"></a>Docker run</h2><p>docker run 命令用于创建并启动一个新的容器。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br></pre></td></tr></table></figure>\n\n<p>常用参数说明：</p>\n<ul>\n<li><strong><code>-d</code></strong>: 后台运行容器并返回容器 ID。</li>\n<li><strong><code>-it</code></strong>: 交互式运行容器，分配一个伪终端。</li>\n<li><strong><code>--name</code></strong>: 给容器指定一个名称。</li>\n<li><strong><code>-p</code></strong>: 端口映射，格式为 <code>host_port:container_port</code>。</li>\n<li><strong><code>-v</code></strong>: 挂载卷，格式为 <code>host_dir:container_dir</code>。</li>\n<li><strong><code>--rm</code></strong>: 容器停止后自动删除容器。</li>\n<li><strong><code>--env</code></strong> <strong>或</strong>  <strong><code>-e</code></strong>: 设置环境变量。</li>\n<li><strong><code>--network</code></strong>: 指定容器的网络模式。</li>\n<li><strong><code>--restart</code></strong>: 容器的重启策略（如 <code>no</code>、<code>on-failure</code>、<code>always</code>、<code>unless-stopped</code>）。</li>\n<li><strong><code>-u</code></strong>: 指定用户。</li>\n</ul>\n<h2 id=\"Docker-start-stop-restart\"><a href=\"#Docker-start-stop-restart\" class=\"headerlink\" title=\"Docker start&#x2F;stop&#x2F;restart\"></a>Docker start&#x2F;stop&#x2F;restart</h2><p><strong>docker start</strong> 命令用于启动一个或多个已经创建的容器。</p>\n<p><strong>docker stop</strong> 命令用于停止一个运行中的容器。</p>\n<p><strong>docker restart</strong> 命令用于重启容器。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker start [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>\n\n<p><strong>参数</strong></p>\n<ul>\n<li><strong><code>-a</code></strong>: 附加到容器的标准输入输出流。</li>\n<li><strong><code>-i</code></strong>: 附加并保持标准输入打开。</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker stop [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class=\"line\">docker restart [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>\n\n<p><strong>参数</strong></p>\n<p> <strong>-t, –time</strong>: 停止容器之前等待的秒数，默认是 10 秒。</p>\n<h2 id=\"Docker-exec\"><a href=\"#Docker-exec\" class=\"headerlink\" title=\"Docker exec\"></a>Docker exec</h2><p><code>docker exec</code> 命令用于在运行中的容器内执行一个新的命令。这对于调试、运行附加的进程或在容器内部进行管理操作非常有用。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker <span class=\"built_in\">exec</span> [OPTIONS] CONTAINER COMMAND [ARG...]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"常用参数\"><a href=\"#常用参数\" class=\"headerlink\" title=\"常用参数\"></a>常用参数</h3><ul>\n<li><strong><code>-d, --detach</code></strong>: 在后台运行命令。</li>\n<li><strong><code>--detach-keys</code></strong>: 覆盖分离容器的键序列。</li>\n<li><strong><code>-e, --env</code></strong>: 设置环境变量。</li>\n<li><strong><code>--env-file</code></strong>: 从文件中读取环境变量。</li>\n<li><strong><code>-i, --interactive</code></strong>: 保持标准输入打开。</li>\n<li><strong><code>--privileged</code></strong>: 给这个命令额外的权限。</li>\n<li><strong><code>--user, -u</code></strong>: 以指定用户的身份运行命令。</li>\n<li><strong><code>--workdir, -w</code></strong>: 指定命令的工作目录。</li>\n<li><strong><code>-t, --tty</code></strong>: 分配一个伪终端。</li>\n</ul>\n<p>在运行中的 my_container 容器内执行 ls &#x2F;app 命令，列出 &#x2F;app 目录的内容。</p>\n<p>以交互模式运行命令：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker exec -it my_container /bin/bash</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"Docker-ps\"><a href=\"#Docker-ps\" class=\"headerlink\" title=\"Docker ps\"></a>Docker ps</h2><p>docker ps 命令用于列出 Docker 容器。</p>\n<p>默认情况下，docker ps 命令只显示运行中的容器，但也可以通过指定选项来显示所有容器，包括停止的容器。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps [OPTIONS]</span><br></pre></td></tr></table></figure>\n\n<p>OPTIONS说明：</p>\n<ul>\n<li><strong><code>-a, --all</code></strong>: 显示所有容器，包括停止的容器。</li>\n<li><strong><code>-q, --quiet</code></strong>: 只显示容器 ID。</li>\n<li><strong><code>-l, --latest</code></strong>: 显示最近创建的一个容器，包括所有状态。</li>\n<li><strong><code>-n</code></strong>: 显示最近创建的 n 个容器，包括所有状态。</li>\n<li><strong><code>--no-trunc</code></strong>: 不截断输出。</li>\n<li><strong><code>-s, --size</code></strong>: 显示容器的大小。</li>\n<li><strong><code>--filter, -f</code></strong>: 根据条件过滤显示的容器。</li>\n<li><strong><code>--format</code></strong>: 格式化输出。</li>\n</ul>\n<h3 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h3><p><strong>1、列出所有在运行的容器信息</strong></p>\n<p>默认情况下，docker ps 只显示正在运行的容器。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps</span><br><span class=\"line\">CONTAINER ID   IMAGE          COMMAND                ...  PORTS                    NAMES</span><br><span class=\"line\">09b93464c2f7   nginx:latest   <span class=\"string\">&quot;nginx -g &#x27;daemon off&quot;</span> ...  80/tcp, 443/tcp          myrunoob</span><br><span class=\"line\">96f7f14e99ab   mysql:5.6      <span class=\"string\">&quot;docker-entrypoint.sh&quot;</span> ...  0.0.0.0:3306-&gt;3306/tcp   mymysql</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>输出详情介绍：</p>\n<p><strong>CONTAINER ID:</strong>  容器 ID。</p>\n<p><strong>IMAGE:</strong>  使用的镜像。</p>\n<p><strong>COMMAND:</strong>  启动容器时运行的命令。</p>\n<p><strong>CREATED:</strong>  容器的创建时间。</p>\n<p><strong>STATUS:</strong>  容器状态。</p>\n<p>状态有7种：</p>\n<ul>\n<li>created（已创建）</li>\n<li>restarting（重启中）</li>\n<li>running（运行中）</li>\n<li>removing（迁移中）</li>\n<li>paused（暂停）</li>\n<li>exited（停止）</li>\n<li>dead（死亡）</li>\n</ul>\n<p><strong>PORTS:</strong>  容器的端口信息和使用的连接类型（tcp\\udp）。</p>\n<p><strong>NAMES:</strong>  自动分配的容器名称。</p>\n<h2 id=\"Docker-logs\"><a href=\"#Docker-logs\" class=\"headerlink\" title=\"Docker logs\"></a>Docker logs</h2><p><code>docker logs</code> 命令用于获取和查看容器的日志输出。</p>\n<p><code>docker logs</code> 命令非常有用，可以帮助用户调试和监控运行中的容器。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker logs [OPTIONS] CONTAINER</span><br></pre></td></tr></table></figure>\n\n<p>常用选项：</p>\n<ul>\n<li><strong><code>-f, --follow</code></strong>: 跟随日志输出（类似于 <code>tail -f</code>）。</li>\n<li><strong><code>--since</code></strong>: 从指定时间开始显示日志。</li>\n<li><strong><code>-t, --timestamps</code></strong>: 显示日志时间戳。</li>\n<li><strong><code>--tail</code></strong>: 仅显示日志的最后部分，例如 <code>--tail 10</code> 显示最后 10 行。</li>\n<li><strong><code>--details</code></strong>: 显示提供给日志的额外详细信息。</li>\n<li><strong><code>--until</code></strong>: 显示直到指定时间的日志。</li>\n</ul>\n<h3 id=\"实例-1\"><a href=\"#实例-1\" class=\"headerlink\" title=\"实例\"></a>实例</h3><p><strong>显示容器日志</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker logs my_container</span><br></pre></td></tr></table></figure>\n\n<p>显示名为 my_container 的容器的所有日志，输出内容：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello world</span><br><span class=\"line\">hello world</span><br><span class=\"line\">hello world</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p><strong>跟随日志输出</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker logs -f my_container</span><br></pre></td></tr></table></figure>\n\n<p>持续显示 my_container 的日志输出，输出内容：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello world</span><br><span class=\"line\">hello world</span><br><span class=\"line\">hello world</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p><strong>显示带时间戳的日志</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker logs -t my_container</span><br></pre></td></tr></table></figure>\n\n<p>显示包含时间戳的日志，输出内容：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2023-07-22T15:04:05.123456789Z hello world</span><br><span class=\"line\">2023-07-22T15:04:06.123456789Z hello world</span><br><span class=\"line\">2023-07-22T15:04:07.123456789Z hello world</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p><strong>从指定时间开始显示日志</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">docker logs --since=&quot;2023-07-22T15:00:00&quot; my_container</span><br></pre></td></tr></table></figure>\n\n<p>显示 2023-07-22T15:00:00 之后的日志。</p>\n<p><strong>显示最后 10 行日志</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker logs --tail 10 my_container</span><br></pre></td></tr></table></figure>\n\n<p>显示 my_container 的最后 10 行日志。</p>\n<p><strong>显示额外详细信息的日志</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker logs --details my_container</span><br></pre></td></tr></table></figure>\n\n<p>显示 my_container 的日志，并包含额外详细信息。</p>\n<p><strong>显示直到指定时间的日志</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker logs --until=&quot;2023-07-22T16:00:00&quot; my_container</span><br></pre></td></tr></table></figure>\n\n<p>显示 2023-07-22T16:00:00 之前的日志。</p>\n"},{"title":"Docker操作命令之 操作镜像","abbrlink":"c42c","date":"2025-02-25T01:01:33.000Z","_content":"\n参考：[Docker 命令大全 | 菜鸟教程](https://www.runoob.com/docker/docker-command-manual.html)\n\n\n## Docker images\n\n`docker images` 命令用于列出本地的 Docker 镜像。\n\n通过 `docker images` 命令，用户可以查看所有已下载或构建的 Docker 镜像的详细信息，如仓库名称、标签、镜像 ID、创建时间和大小。\n\n```bash\ndocker images [OPTIONS] [REPOSITORY[:TAG]]\n```\n\nOPTIONS 说明：\n\n*  **`-a, --all`**: 显示所有镜像（包括中间层镜像）。\n*  **`--digests`**: 显示镜像的摘要信息。\n*  **`-f, --filter`**: 过滤输出，基于提供的条件。\n*  **`--format`**: 使用 Go 模板格式化输出。\n*  **`--no-trunc`**: 显示完整的镜像 ID。\n*  **`-q, --quiet`**: 只显示镜像 ID\n\n列出所有本地镜像:\n\n```\ndocker images\n```\n\n列出带有摘要信息的镜像:\n\n```\ndocker images --digests\n```\n\n列出所有镜像（包括中间层镜像）:\n\n```\ndocker images --all\n```\n\n使用过滤条件列出镜像:\n\n```\ndocker images --filter \"dangling=true\"\n```\n\n只显示镜像 ID:\n\n```\ndocker images --quiet\n```\n\n使用自定义格式输出:\n\n```\ndocker images --format \"table {{.Repository}}\\t{{.Tag}}\\t{{.ID}}\\t{{.Size}}\"\n```\n\n\n\n\n\n## Docker pull\n\n```bash\ndocker pull  [OPTIONS] NAME[:TAG|@DIGEST]\n```\n\n> **NAME**: 镜像名称，通常包含注册表地址（如 *docker.io/library/ubuntu*）。\n>\n> **TAG**（可选）: 镜像标签，默认为 *latest*。\n>\n> **DIGEST**（可选）: 镜像的 SHA256 摘要。\n\n**常用选项**\n\n>  ***-a, --all-tags***: 下载指定镜像的所有标签。\n>\n>  ***--disable-content-trust***: 跳过镜像签名验证。\n>\n>  ***--platform***: 如果服务器支持多平台，请设置平台。\n>\n>  ***-q, --quiet***: 抑制详细输出。\n\n### 错误处理和注意事项\n\n在使用 `docker pull`时，可能会遇到一些常见问题：\n\n* 网络问题：如果下载速度慢或无法连接，可以尝试使用加速器或检查网络设置。\n* 权限问题：当拉取私有镜像时，需要先登录镜像仓库。\n\n```bash\ndocker login myregistry.com\n```\n\n\n\n## Docker tag\n\n`docker tag` 命令用于创建本地镜像的别名（tag），通过为镜像打标签，可以使用更容易记忆的名字或版本号来标识和管理镜像。\n\n```bash\ndocker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]\n```\n\n> **`SOURCE_IMAGE[:TAG]`** : 源镜像名称和标签，标签默认为 `latest`。\n>\n> **`TARGET_IMAGE[:TAG]`** : 目标镜像名称和标签，标签默认为 `latest`。\n\n\n\n## Docker push\n\n```bash\ndocker push [OPTIONS] NAME[:TAG]\n```\n\n> **`NAME`**: 镜像名称，通常包含注册表地址（如 `docker.io/myrepo/myimage`）。\n>\n> **`TAG`**（可选）: 镜像标签，默认为 `latest`。\n\nOPTIONS 说明：\n\n*  **--disable-content-trust :** 忽略镜像的校验,默认开启\n\n## Docker save\n\n`docker save` 命令用于将一个或多个 Docker 镜像保存到一个 tar 归档文件中，以便在其他环境中分发或备份。\n\n```bash\ndocker save [OPTIONS] IMAGE [IMAGE...]\n```\n\n> **`IMAGE`**: 要保存的一个或多个镜像名称或 ID。\n\nOPTIONS 说明：\n\n*  **`-o, --output`**: 指定输出文件的路径。\n\n\n\n### 示例\n\n1、保存单个镜像到文件\n\n```bash\n# 这将 myimage:latest 镜像保存为 myimage.tar 文件。\ndocker save -o myimage.tar myimage:latest\n```\n\n## Docker load\n\n`docker load` 命令用于从由 `docker save` 命令生成的 tar 文件中加载 Docker 镜像。它可以将存档中的镜像和所有层加载到 Docker 中，使其可以在新环境中使用。\n\n```bash\ndocker load [OPTIONS]\n```\n\nOPTIONS 说明：\n\n*  **`-i, --input`**: 指定输入文件的路径。\n*  **`-q, --quiet`**: 安静模式，减少输出信息。\n\n### 示例\n\n1、从文件加载镜像\n\n```bash\n# 这将从 myimage.tar 文件中加载镜像。\ndocker load -i myimage.tar\n```\n\n\n","source":"_posts/服务器/Docker/Docker操作镜像.md","raw":"---\ntitle: Docker操作命令之 操作镜像\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - 食用教程\nabbrlink: c42c\ndate: 2025-02-25 09:01:33\n---\n\n参考：[Docker 命令大全 | 菜鸟教程](https://www.runoob.com/docker/docker-command-manual.html)\n\n\n## Docker images\n\n`docker images` 命令用于列出本地的 Docker 镜像。\n\n通过 `docker images` 命令，用户可以查看所有已下载或构建的 Docker 镜像的详细信息，如仓库名称、标签、镜像 ID、创建时间和大小。\n\n```bash\ndocker images [OPTIONS] [REPOSITORY[:TAG]]\n```\n\nOPTIONS 说明：\n\n*  **`-a, --all`**: 显示所有镜像（包括中间层镜像）。\n*  **`--digests`**: 显示镜像的摘要信息。\n*  **`-f, --filter`**: 过滤输出，基于提供的条件。\n*  **`--format`**: 使用 Go 模板格式化输出。\n*  **`--no-trunc`**: 显示完整的镜像 ID。\n*  **`-q, --quiet`**: 只显示镜像 ID\n\n列出所有本地镜像:\n\n```\ndocker images\n```\n\n列出带有摘要信息的镜像:\n\n```\ndocker images --digests\n```\n\n列出所有镜像（包括中间层镜像）:\n\n```\ndocker images --all\n```\n\n使用过滤条件列出镜像:\n\n```\ndocker images --filter \"dangling=true\"\n```\n\n只显示镜像 ID:\n\n```\ndocker images --quiet\n```\n\n使用自定义格式输出:\n\n```\ndocker images --format \"table {{.Repository}}\\t{{.Tag}}\\t{{.ID}}\\t{{.Size}}\"\n```\n\n\n\n\n\n## Docker pull\n\n```bash\ndocker pull  [OPTIONS] NAME[:TAG|@DIGEST]\n```\n\n> **NAME**: 镜像名称，通常包含注册表地址（如 *docker.io/library/ubuntu*）。\n>\n> **TAG**（可选）: 镜像标签，默认为 *latest*。\n>\n> **DIGEST**（可选）: 镜像的 SHA256 摘要。\n\n**常用选项**\n\n>  ***-a, --all-tags***: 下载指定镜像的所有标签。\n>\n>  ***--disable-content-trust***: 跳过镜像签名验证。\n>\n>  ***--platform***: 如果服务器支持多平台，请设置平台。\n>\n>  ***-q, --quiet***: 抑制详细输出。\n\n### 错误处理和注意事项\n\n在使用 `docker pull`时，可能会遇到一些常见问题：\n\n* 网络问题：如果下载速度慢或无法连接，可以尝试使用加速器或检查网络设置。\n* 权限问题：当拉取私有镜像时，需要先登录镜像仓库。\n\n```bash\ndocker login myregistry.com\n```\n\n\n\n## Docker tag\n\n`docker tag` 命令用于创建本地镜像的别名（tag），通过为镜像打标签，可以使用更容易记忆的名字或版本号来标识和管理镜像。\n\n```bash\ndocker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]\n```\n\n> **`SOURCE_IMAGE[:TAG]`** : 源镜像名称和标签，标签默认为 `latest`。\n>\n> **`TARGET_IMAGE[:TAG]`** : 目标镜像名称和标签，标签默认为 `latest`。\n\n\n\n## Docker push\n\n```bash\ndocker push [OPTIONS] NAME[:TAG]\n```\n\n> **`NAME`**: 镜像名称，通常包含注册表地址（如 `docker.io/myrepo/myimage`）。\n>\n> **`TAG`**（可选）: 镜像标签，默认为 `latest`。\n\nOPTIONS 说明：\n\n*  **--disable-content-trust :** 忽略镜像的校验,默认开启\n\n## Docker save\n\n`docker save` 命令用于将一个或多个 Docker 镜像保存到一个 tar 归档文件中，以便在其他环境中分发或备份。\n\n```bash\ndocker save [OPTIONS] IMAGE [IMAGE...]\n```\n\n> **`IMAGE`**: 要保存的一个或多个镜像名称或 ID。\n\nOPTIONS 说明：\n\n*  **`-o, --output`**: 指定输出文件的路径。\n\n\n\n### 示例\n\n1、保存单个镜像到文件\n\n```bash\n# 这将 myimage:latest 镜像保存为 myimage.tar 文件。\ndocker save -o myimage.tar myimage:latest\n```\n\n## Docker load\n\n`docker load` 命令用于从由 `docker save` 命令生成的 tar 文件中加载 Docker 镜像。它可以将存档中的镜像和所有层加载到 Docker 中，使其可以在新环境中使用。\n\n```bash\ndocker load [OPTIONS]\n```\n\nOPTIONS 说明：\n\n*  **`-i, --input`**: 指定输入文件的路径。\n*  **`-q, --quiet`**: 安静模式，减少输出信息。\n\n### 示例\n\n1、从文件加载镜像\n\n```bash\n# 这将从 myimage.tar 文件中加载镜像。\ndocker load -i myimage.tar\n```\n\n\n","slug":"服务器/Docker/Docker操作镜像","published":1,"updated":"2025-06-02T07:25:45.799Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wv0040zcqb6cw5b97z","content":"<p>参考：<a href=\"https://www.runoob.com/docker/docker-command-manual.html\">Docker 命令大全 | 菜鸟教程</a></p>\n<h2 id=\"Docker-images\"><a href=\"#Docker-images\" class=\"headerlink\" title=\"Docker images\"></a>Docker images</h2><p><code>docker images</code> 命令用于列出本地的 Docker 镜像。</p>\n<p>通过 <code>docker images</code> 命令，用户可以查看所有已下载或构建的 Docker 镜像的详细信息，如仓库名称、标签、镜像 ID、创建时间和大小。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images [OPTIONS] [REPOSITORY[:TAG]]</span><br></pre></td></tr></table></figure>\n\n<p>OPTIONS 说明：</p>\n<ul>\n<li><strong><code>-a, --all</code></strong>: 显示所有镜像（包括中间层镜像）。</li>\n<li><strong><code>--digests</code></strong>: 显示镜像的摘要信息。</li>\n<li><strong><code>-f, --filter</code></strong>: 过滤输出，基于提供的条件。</li>\n<li><strong><code>--format</code></strong>: 使用 Go 模板格式化输出。</li>\n<li><strong><code>--no-trunc</code></strong>: 显示完整的镜像 ID。</li>\n<li><strong><code>-q, --quiet</code></strong>: 只显示镜像 ID</li>\n</ul>\n<p>列出所有本地镜像:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images</span><br></pre></td></tr></table></figure>\n\n<p>列出带有摘要信息的镜像:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images --digests</span><br></pre></td></tr></table></figure>\n\n<p>列出所有镜像（包括中间层镜像）:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images --all</span><br></pre></td></tr></table></figure>\n\n<p>使用过滤条件列出镜像:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images --filter &quot;dangling=true&quot;</span><br></pre></td></tr></table></figure>\n\n<p>只显示镜像 ID:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images --quiet</span><br></pre></td></tr></table></figure>\n\n<p>使用自定义格式输出:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images --format &quot;table &#123;&#123;.Repository&#125;&#125;\\t&#123;&#123;.Tag&#125;&#125;\\t&#123;&#123;.ID&#125;&#125;\\t&#123;&#123;.Size&#125;&#125;&quot;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"Docker-pull\"><a href=\"#Docker-pull\" class=\"headerlink\" title=\"Docker pull\"></a>Docker pull</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull  [OPTIONS] NAME[:TAG|@DIGEST]</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>NAME</strong>: 镜像名称，通常包含注册表地址（如 <em>docker.io&#x2F;library&#x2F;ubuntu</em>）。</p>\n<p><strong>TAG</strong>（可选）: 镜像标签，默认为 <em>latest</em>。</p>\n<p><strong>DIGEST</strong>（可选）: 镜像的 SHA256 摘要。</p>\n</blockquote>\n<p><strong>常用选项</strong></p>\n<blockquote>\n<p> <em><strong>-a, –all-tags</strong></em>: 下载指定镜像的所有标签。</p>\n<p> <em><strong>–disable-content-trust</strong></em>: 跳过镜像签名验证。</p>\n<p> <em><strong>–platform</strong></em>: 如果服务器支持多平台，请设置平台。</p>\n<p> <em><strong>-q, –quiet</strong></em>: 抑制详细输出。</p>\n</blockquote>\n<h3 id=\"错误处理和注意事项\"><a href=\"#错误处理和注意事项\" class=\"headerlink\" title=\"错误处理和注意事项\"></a>错误处理和注意事项</h3><p>在使用 <code>docker pull</code>时，可能会遇到一些常见问题：</p>\n<ul>\n<li>网络问题：如果下载速度慢或无法连接，可以尝试使用加速器或检查网络设置。</li>\n<li>权限问题：当拉取私有镜像时，需要先登录镜像仓库。</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker login myregistry.com</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"Docker-tag\"><a href=\"#Docker-tag\" class=\"headerlink\" title=\"Docker tag\"></a>Docker tag</h2><p><code>docker tag</code> 命令用于创建本地镜像的别名（tag），通过为镜像打标签，可以使用更容易记忆的名字或版本号来标识和管理镜像。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong><code>SOURCE_IMAGE[:TAG]</code></strong> : 源镜像名称和标签，标签默认为 <code>latest</code>。</p>\n<p><strong><code>TARGET_IMAGE[:TAG]</code></strong> : 目标镜像名称和标签，标签默认为 <code>latest</code>。</p>\n</blockquote>\n<h2 id=\"Docker-push\"><a href=\"#Docker-push\" class=\"headerlink\" title=\"Docker push\"></a>Docker push</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker push [OPTIONS] NAME[:TAG]</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong><code>NAME</code></strong>: 镜像名称，通常包含注册表地址（如 <code>docker.io/myrepo/myimage</code>）。</p>\n<p>**<code>TAG</code>**（可选）: 镜像标签，默认为 <code>latest</code>。</p>\n</blockquote>\n<p>OPTIONS 说明：</p>\n<ul>\n<li><strong>–disable-content-trust :</strong> 忽略镜像的校验,默认开启</li>\n</ul>\n<h2 id=\"Docker-save\"><a href=\"#Docker-save\" class=\"headerlink\" title=\"Docker save\"></a>Docker save</h2><p><code>docker save</code> 命令用于将一个或多个 Docker 镜像保存到一个 tar 归档文件中，以便在其他环境中分发或备份。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker save [OPTIONS] IMAGE [IMAGE...]</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong><code>IMAGE</code></strong>: 要保存的一个或多个镜像名称或 ID。</p>\n</blockquote>\n<p>OPTIONS 说明：</p>\n<ul>\n<li><strong><code>-o, --output</code></strong>: 指定输出文件的路径。</li>\n</ul>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>1、保存单个镜像到文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 这将 myimage:latest 镜像保存为 myimage.tar 文件。</span></span><br><span class=\"line\">docker save -o myimage.tar myimage:latest</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Docker-load\"><a href=\"#Docker-load\" class=\"headerlink\" title=\"Docker load\"></a>Docker load</h2><p><code>docker load</code> 命令用于从由 <code>docker save</code> 命令生成的 tar 文件中加载 Docker 镜像。它可以将存档中的镜像和所有层加载到 Docker 中，使其可以在新环境中使用。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker load [OPTIONS]</span><br></pre></td></tr></table></figure>\n\n<p>OPTIONS 说明：</p>\n<ul>\n<li><strong><code>-i, --input</code></strong>: 指定输入文件的路径。</li>\n<li><strong><code>-q, --quiet</code></strong>: 安静模式，减少输出信息。</li>\n</ul>\n<h3 id=\"示例-1\"><a href=\"#示例-1\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>1、从文件加载镜像</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 这将从 myimage.tar 文件中加载镜像。</span></span><br><span class=\"line\">docker load -i myimage.tar</span><br></pre></td></tr></table></figure>\n\n\n","cover":"https://t.alcy.cc/pc?_r_=31136770-9cd9-cf18-3f9e-a4f179f61c03","cover_type":"img","excerpt":"","more":"<p>参考：<a href=\"https://www.runoob.com/docker/docker-command-manual.html\">Docker 命令大全 | 菜鸟教程</a></p>\n<h2 id=\"Docker-images\"><a href=\"#Docker-images\" class=\"headerlink\" title=\"Docker images\"></a>Docker images</h2><p><code>docker images</code> 命令用于列出本地的 Docker 镜像。</p>\n<p>通过 <code>docker images</code> 命令，用户可以查看所有已下载或构建的 Docker 镜像的详细信息，如仓库名称、标签、镜像 ID、创建时间和大小。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images [OPTIONS] [REPOSITORY[:TAG]]</span><br></pre></td></tr></table></figure>\n\n<p>OPTIONS 说明：</p>\n<ul>\n<li><strong><code>-a, --all</code></strong>: 显示所有镜像（包括中间层镜像）。</li>\n<li><strong><code>--digests</code></strong>: 显示镜像的摘要信息。</li>\n<li><strong><code>-f, --filter</code></strong>: 过滤输出，基于提供的条件。</li>\n<li><strong><code>--format</code></strong>: 使用 Go 模板格式化输出。</li>\n<li><strong><code>--no-trunc</code></strong>: 显示完整的镜像 ID。</li>\n<li><strong><code>-q, --quiet</code></strong>: 只显示镜像 ID</li>\n</ul>\n<p>列出所有本地镜像:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images</span><br></pre></td></tr></table></figure>\n\n<p>列出带有摘要信息的镜像:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images --digests</span><br></pre></td></tr></table></figure>\n\n<p>列出所有镜像（包括中间层镜像）:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images --all</span><br></pre></td></tr></table></figure>\n\n<p>使用过滤条件列出镜像:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images --filter &quot;dangling=true&quot;</span><br></pre></td></tr></table></figure>\n\n<p>只显示镜像 ID:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images --quiet</span><br></pre></td></tr></table></figure>\n\n<p>使用自定义格式输出:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images --format &quot;table &#123;&#123;.Repository&#125;&#125;\\t&#123;&#123;.Tag&#125;&#125;\\t&#123;&#123;.ID&#125;&#125;\\t&#123;&#123;.Size&#125;&#125;&quot;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"Docker-pull\"><a href=\"#Docker-pull\" class=\"headerlink\" title=\"Docker pull\"></a>Docker pull</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull  [OPTIONS] NAME[:TAG|@DIGEST]</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>NAME</strong>: 镜像名称，通常包含注册表地址（如 <em>docker.io&#x2F;library&#x2F;ubuntu</em>）。</p>\n<p><strong>TAG</strong>（可选）: 镜像标签，默认为 <em>latest</em>。</p>\n<p><strong>DIGEST</strong>（可选）: 镜像的 SHA256 摘要。</p>\n</blockquote>\n<p><strong>常用选项</strong></p>\n<blockquote>\n<p> <em><strong>-a, –all-tags</strong></em>: 下载指定镜像的所有标签。</p>\n<p> <em><strong>–disable-content-trust</strong></em>: 跳过镜像签名验证。</p>\n<p> <em><strong>–platform</strong></em>: 如果服务器支持多平台，请设置平台。</p>\n<p> <em><strong>-q, –quiet</strong></em>: 抑制详细输出。</p>\n</blockquote>\n<h3 id=\"错误处理和注意事项\"><a href=\"#错误处理和注意事项\" class=\"headerlink\" title=\"错误处理和注意事项\"></a>错误处理和注意事项</h3><p>在使用 <code>docker pull</code>时，可能会遇到一些常见问题：</p>\n<ul>\n<li>网络问题：如果下载速度慢或无法连接，可以尝试使用加速器或检查网络设置。</li>\n<li>权限问题：当拉取私有镜像时，需要先登录镜像仓库。</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker login myregistry.com</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"Docker-tag\"><a href=\"#Docker-tag\" class=\"headerlink\" title=\"Docker tag\"></a>Docker tag</h2><p><code>docker tag</code> 命令用于创建本地镜像的别名（tag），通过为镜像打标签，可以使用更容易记忆的名字或版本号来标识和管理镜像。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong><code>SOURCE_IMAGE[:TAG]</code></strong> : 源镜像名称和标签，标签默认为 <code>latest</code>。</p>\n<p><strong><code>TARGET_IMAGE[:TAG]</code></strong> : 目标镜像名称和标签，标签默认为 <code>latest</code>。</p>\n</blockquote>\n<h2 id=\"Docker-push\"><a href=\"#Docker-push\" class=\"headerlink\" title=\"Docker push\"></a>Docker push</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker push [OPTIONS] NAME[:TAG]</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong><code>NAME</code></strong>: 镜像名称，通常包含注册表地址（如 <code>docker.io/myrepo/myimage</code>）。</p>\n<p>**<code>TAG</code>**（可选）: 镜像标签，默认为 <code>latest</code>。</p>\n</blockquote>\n<p>OPTIONS 说明：</p>\n<ul>\n<li><strong>–disable-content-trust :</strong> 忽略镜像的校验,默认开启</li>\n</ul>\n<h2 id=\"Docker-save\"><a href=\"#Docker-save\" class=\"headerlink\" title=\"Docker save\"></a>Docker save</h2><p><code>docker save</code> 命令用于将一个或多个 Docker 镜像保存到一个 tar 归档文件中，以便在其他环境中分发或备份。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker save [OPTIONS] IMAGE [IMAGE...]</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong><code>IMAGE</code></strong>: 要保存的一个或多个镜像名称或 ID。</p>\n</blockquote>\n<p>OPTIONS 说明：</p>\n<ul>\n<li><strong><code>-o, --output</code></strong>: 指定输出文件的路径。</li>\n</ul>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>1、保存单个镜像到文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 这将 myimage:latest 镜像保存为 myimage.tar 文件。</span></span><br><span class=\"line\">docker save -o myimage.tar myimage:latest</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Docker-load\"><a href=\"#Docker-load\" class=\"headerlink\" title=\"Docker load\"></a>Docker load</h2><p><code>docker load</code> 命令用于从由 <code>docker save</code> 命令生成的 tar 文件中加载 Docker 镜像。它可以将存档中的镜像和所有层加载到 Docker 中，使其可以在新环境中使用。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker load [OPTIONS]</span><br></pre></td></tr></table></figure>\n\n<p>OPTIONS 说明：</p>\n<ul>\n<li><strong><code>-i, --input</code></strong>: 指定输入文件的路径。</li>\n<li><strong><code>-q, --quiet</code></strong>: 安静模式，减少输出信息。</li>\n</ul>\n<h3 id=\"示例-1\"><a href=\"#示例-1\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>1、从文件加载镜像</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 这将从 myimage.tar 文件中加载镜像。</span></span><br><span class=\"line\">docker load -i myimage.tar</span><br></pre></td></tr></table></figure>\n\n\n"},{"title":"Docker管理脚本","abbrlink":"4581","date":"2025-02-25T16:09:30.000Z","_content":"\n\n用于在多个目录中执行`docker-compose`命令，每个目录都包含一个`docker-compose.yml`文件。它支持四个动作：`status`、`start`、`stop`和`restart`。\n\n- status 查询所有docker-compose状态\n- start 开启多个 docker-compose\n- stop 关闭多个 docker-compose\n- restart 重启多个 docker-compose\n\n```shell\n#!/bin/bash\n\n# 定义函数来执行不同的操作\nfunction execute_docker_compose {\n    local action=$1  # 第一个参数是动作（如 up, down, ps）\n    local count=0    # 初始化目录计数器\n    for dir in ./*/\n    do\n        if [ -f \"${dir}docker-compose.yml\" ]; then\n         ((count++))\n            cd \"$dir\"\n            echo -e \"Executing docker-compose $action in \\033[32m$dir\\033[0m\"\n            case \"$action\" in\n                \"start\")\n                    docker-compose up -d\n                    ;;\n                \"stop\")\n                    docker-compose down\n                    ;;\n                \"restart\")\n                    docker-compose down && docker-compose up -d\n                    ;;\n                \"ps\")\n                    echo -e \"NAME\\t\\tSERVICE\\tSTATUS\\t\\tPORTS\"\n                    docker-compose ps --format \"{{.Name}}\\t{{.Service}}\\t{{.Status}}\\t{{.Ports}}\"\n\n                                  echo -e \"\\n\"\n                    ;;\n                *)\n                    echo \"Unknown action: $action\"\n                    ;;\n            esac\n            cd - > /dev/null\n       # else\n            # echo \"No docker-compose.yml found in $dir\"\n        fi\n    done\n     echo -e \"Total directories processed: \\033[31m$count\\033[0m\"  # 输出总处理目录数\n}\n\n# 检查是否提供了足够的参数\nif [ $# -lt 1 ]; then\n    echo \"Usage: $0 {status|start|stop|restart}\"\n    exit 1\nfi\n\n# 根据提供的第一个参数选择操作\ncase \"$1\" in\n    \"status\")\n        execute_docker_compose \"ps\"\n        ;;\n    \"start\")\n        execute_docker_compose \"start\"\n\n        echo -e \"\\n\\ndocker-compose up success!\\ndocker-compose ps...\\n\"\n\n        execute_docker_compose \"ps\"\n        ;;\n    \"stop\")\n        execute_docker_compose \"stop\"\n        ;;\n    \"restart\")\n        execute_docker_compose \"restart\"\n        ;;\n    *)\n        echo \"Unknown command: $1\"\n        echo \"Usage: $0 {status|start|stop|restart}\"\n        exit 1\n        ;;\nesac\n\n```\n","source":"_posts/服务器/Docker/Docker管理脚本.md","raw":"---\ntitle: Docker管理脚本\ncategories:\n  - 服务器\ntags:\n  - Docker\nabbrlink: '4581'\ndate: 2025-02-26 00:09:30\n---\n\n\n用于在多个目录中执行`docker-compose`命令，每个目录都包含一个`docker-compose.yml`文件。它支持四个动作：`status`、`start`、`stop`和`restart`。\n\n- status 查询所有docker-compose状态\n- start 开启多个 docker-compose\n- stop 关闭多个 docker-compose\n- restart 重启多个 docker-compose\n\n```shell\n#!/bin/bash\n\n# 定义函数来执行不同的操作\nfunction execute_docker_compose {\n    local action=$1  # 第一个参数是动作（如 up, down, ps）\n    local count=0    # 初始化目录计数器\n    for dir in ./*/\n    do\n        if [ -f \"${dir}docker-compose.yml\" ]; then\n         ((count++))\n            cd \"$dir\"\n            echo -e \"Executing docker-compose $action in \\033[32m$dir\\033[0m\"\n            case \"$action\" in\n                \"start\")\n                    docker-compose up -d\n                    ;;\n                \"stop\")\n                    docker-compose down\n                    ;;\n                \"restart\")\n                    docker-compose down && docker-compose up -d\n                    ;;\n                \"ps\")\n                    echo -e \"NAME\\t\\tSERVICE\\tSTATUS\\t\\tPORTS\"\n                    docker-compose ps --format \"{{.Name}}\\t{{.Service}}\\t{{.Status}}\\t{{.Ports}}\"\n\n                                  echo -e \"\\n\"\n                    ;;\n                *)\n                    echo \"Unknown action: $action\"\n                    ;;\n            esac\n            cd - > /dev/null\n       # else\n            # echo \"No docker-compose.yml found in $dir\"\n        fi\n    done\n     echo -e \"Total directories processed: \\033[31m$count\\033[0m\"  # 输出总处理目录数\n}\n\n# 检查是否提供了足够的参数\nif [ $# -lt 1 ]; then\n    echo \"Usage: $0 {status|start|stop|restart}\"\n    exit 1\nfi\n\n# 根据提供的第一个参数选择操作\ncase \"$1\" in\n    \"status\")\n        execute_docker_compose \"ps\"\n        ;;\n    \"start\")\n        execute_docker_compose \"start\"\n\n        echo -e \"\\n\\ndocker-compose up success!\\ndocker-compose ps...\\n\"\n\n        execute_docker_compose \"ps\"\n        ;;\n    \"stop\")\n        execute_docker_compose \"stop\"\n        ;;\n    \"restart\")\n        execute_docker_compose \"restart\"\n        ;;\n    *)\n        echo \"Unknown command: $1\"\n        echo \"Usage: $0 {status|start|stop|restart}\"\n        exit 1\n        ;;\nesac\n\n```\n","slug":"服务器/Docker/Docker管理脚本","published":1,"updated":"2025-06-02T07:25:50.830Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86ww0044zcqb8z1x059j","content":"<p>用于在多个目录中执行<code>docker-compose</code>命令，每个目录都包含一个<code>docker-compose.yml</code>文件。它支持四个动作：<code>status</code>、<code>start</code>、<code>stop</code>和<code>restart</code>。</p>\n<ul>\n<li>status 查询所有docker-compose状态</li>\n<li>start 开启多个 docker-compose</li>\n<li>stop 关闭多个 docker-compose</li>\n<li>restart 重启多个 docker-compose</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">!/bin/bash</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">定义函数来执行不同的操作</span></span><br><span class=\"line\">function execute_docker_compose &#123;</span><br><span class=\"line\">    local action=$1  # 第一个参数是动作（如 up, down, ps）</span><br><span class=\"line\">    local count=0    # 初始化目录计数器</span><br><span class=\"line\">    for dir in ./*/</span><br><span class=\"line\">    do</span><br><span class=\"line\">        if [ -f &quot;$&#123;dir&#125;docker-compose.yml&quot; ]; then</span><br><span class=\"line\">         ((count++))</span><br><span class=\"line\">            cd &quot;$dir&quot;</span><br><span class=\"line\">            echo -e &quot;Executing docker-compose $action in \\033[32m$dir\\033[0m&quot;</span><br><span class=\"line\">            case &quot;$action&quot; in</span><br><span class=\"line\">                &quot;start&quot;)</span><br><span class=\"line\">                    docker-compose up -d</span><br><span class=\"line\">                    ;;</span><br><span class=\"line\">                &quot;stop&quot;)</span><br><span class=\"line\">                    docker-compose down</span><br><span class=\"line\">                    ;;</span><br><span class=\"line\">                &quot;restart&quot;)</span><br><span class=\"line\">                    docker-compose down &amp;&amp; docker-compose up -d</span><br><span class=\"line\">                    ;;</span><br><span class=\"line\">                &quot;ps&quot;)</span><br><span class=\"line\">                    echo -e &quot;NAME\\t\\tSERVICE\\tSTATUS\\t\\tPORTS&quot;</span><br><span class=\"line\">                    docker-compose ps --format &quot;&#123;&#123;.Name&#125;&#125;\\t&#123;&#123;.Service&#125;&#125;\\t&#123;&#123;.Status&#125;&#125;\\t&#123;&#123;.Ports&#125;&#125;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">                                  echo -e &quot;\\n&quot;</span><br><span class=\"line\">                    ;;</span><br><span class=\"line\">                *)</span><br><span class=\"line\">                    echo &quot;Unknown action: $action&quot;</span><br><span class=\"line\">                    ;;</span><br><span class=\"line\">            esac</span><br><span class=\"line\">            cd - &gt; /dev/null</span><br><span class=\"line\">       # else</span><br><span class=\"line\">            # echo &quot;No docker-compose.yml found in $dir&quot;</span><br><span class=\"line\">        fi</span><br><span class=\"line\">    done</span><br><span class=\"line\">     echo -e &quot;Total directories processed: \\033[31m$count\\033[0m&quot;  # 输出总处理目录数</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">检查是否提供了足够的参数</span></span><br><span class=\"line\">if [ $# -lt 1 ]; then</span><br><span class=\"line\">    echo &quot;Usage: $0 &#123;status|start|stop|restart&#125;&quot;</span><br><span class=\"line\">    exit 1</span><br><span class=\"line\">fi</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">根据提供的第一个参数选择操作</span></span><br><span class=\"line\">case &quot;$1&quot; in</span><br><span class=\"line\">    &quot;status&quot;)</span><br><span class=\"line\">        execute_docker_compose &quot;ps&quot;</span><br><span class=\"line\">        ;;</span><br><span class=\"line\">    &quot;start&quot;)</span><br><span class=\"line\">        execute_docker_compose &quot;start&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">        echo -e &quot;\\n\\ndocker-compose up success!\\ndocker-compose ps...\\n&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">        execute_docker_compose &quot;ps&quot;</span><br><span class=\"line\">        ;;</span><br><span class=\"line\">    &quot;stop&quot;)</span><br><span class=\"line\">        execute_docker_compose &quot;stop&quot;</span><br><span class=\"line\">        ;;</span><br><span class=\"line\">    &quot;restart&quot;)</span><br><span class=\"line\">        execute_docker_compose &quot;restart&quot;</span><br><span class=\"line\">        ;;</span><br><span class=\"line\">    *)</span><br><span class=\"line\">        echo &quot;Unknown command: $1&quot;</span><br><span class=\"line\">        echo &quot;Usage: $0 &#123;status|start|stop|restart&#125;&quot;</span><br><span class=\"line\">        exit 1</span><br><span class=\"line\">        ;;</span><br><span class=\"line\">esac</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=e6adc7b9-2aba-6911-52fd-8d088b0bdce7","cover_type":"img","excerpt":"","more":"<p>用于在多个目录中执行<code>docker-compose</code>命令，每个目录都包含一个<code>docker-compose.yml</code>文件。它支持四个动作：<code>status</code>、<code>start</code>、<code>stop</code>和<code>restart</code>。</p>\n<ul>\n<li>status 查询所有docker-compose状态</li>\n<li>start 开启多个 docker-compose</li>\n<li>stop 关闭多个 docker-compose</li>\n<li>restart 重启多个 docker-compose</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">!/bin/bash</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">定义函数来执行不同的操作</span></span><br><span class=\"line\">function execute_docker_compose &#123;</span><br><span class=\"line\">    local action=$1  # 第一个参数是动作（如 up, down, ps）</span><br><span class=\"line\">    local count=0    # 初始化目录计数器</span><br><span class=\"line\">    for dir in ./*/</span><br><span class=\"line\">    do</span><br><span class=\"line\">        if [ -f &quot;$&#123;dir&#125;docker-compose.yml&quot; ]; then</span><br><span class=\"line\">         ((count++))</span><br><span class=\"line\">            cd &quot;$dir&quot;</span><br><span class=\"line\">            echo -e &quot;Executing docker-compose $action in \\033[32m$dir\\033[0m&quot;</span><br><span class=\"line\">            case &quot;$action&quot; in</span><br><span class=\"line\">                &quot;start&quot;)</span><br><span class=\"line\">                    docker-compose up -d</span><br><span class=\"line\">                    ;;</span><br><span class=\"line\">                &quot;stop&quot;)</span><br><span class=\"line\">                    docker-compose down</span><br><span class=\"line\">                    ;;</span><br><span class=\"line\">                &quot;restart&quot;)</span><br><span class=\"line\">                    docker-compose down &amp;&amp; docker-compose up -d</span><br><span class=\"line\">                    ;;</span><br><span class=\"line\">                &quot;ps&quot;)</span><br><span class=\"line\">                    echo -e &quot;NAME\\t\\tSERVICE\\tSTATUS\\t\\tPORTS&quot;</span><br><span class=\"line\">                    docker-compose ps --format &quot;&#123;&#123;.Name&#125;&#125;\\t&#123;&#123;.Service&#125;&#125;\\t&#123;&#123;.Status&#125;&#125;\\t&#123;&#123;.Ports&#125;&#125;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">                                  echo -e &quot;\\n&quot;</span><br><span class=\"line\">                    ;;</span><br><span class=\"line\">                *)</span><br><span class=\"line\">                    echo &quot;Unknown action: $action&quot;</span><br><span class=\"line\">                    ;;</span><br><span class=\"line\">            esac</span><br><span class=\"line\">            cd - &gt; /dev/null</span><br><span class=\"line\">       # else</span><br><span class=\"line\">            # echo &quot;No docker-compose.yml found in $dir&quot;</span><br><span class=\"line\">        fi</span><br><span class=\"line\">    done</span><br><span class=\"line\">     echo -e &quot;Total directories processed: \\033[31m$count\\033[0m&quot;  # 输出总处理目录数</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">检查是否提供了足够的参数</span></span><br><span class=\"line\">if [ $# -lt 1 ]; then</span><br><span class=\"line\">    echo &quot;Usage: $0 &#123;status|start|stop|restart&#125;&quot;</span><br><span class=\"line\">    exit 1</span><br><span class=\"line\">fi</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">根据提供的第一个参数选择操作</span></span><br><span class=\"line\">case &quot;$1&quot; in</span><br><span class=\"line\">    &quot;status&quot;)</span><br><span class=\"line\">        execute_docker_compose &quot;ps&quot;</span><br><span class=\"line\">        ;;</span><br><span class=\"line\">    &quot;start&quot;)</span><br><span class=\"line\">        execute_docker_compose &quot;start&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">        echo -e &quot;\\n\\ndocker-compose up success!\\ndocker-compose ps...\\n&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">        execute_docker_compose &quot;ps&quot;</span><br><span class=\"line\">        ;;</span><br><span class=\"line\">    &quot;stop&quot;)</span><br><span class=\"line\">        execute_docker_compose &quot;stop&quot;</span><br><span class=\"line\">        ;;</span><br><span class=\"line\">    &quot;restart&quot;)</span><br><span class=\"line\">        execute_docker_compose &quot;restart&quot;</span><br><span class=\"line\">        ;;</span><br><span class=\"line\">    *)</span><br><span class=\"line\">        echo &quot;Unknown command: $1&quot;</span><br><span class=\"line\">        echo &quot;Usage: $0 &#123;status|start|stop|restart&#125;&quot;</span><br><span class=\"line\">        exit 1</span><br><span class=\"line\">        ;;</span><br><span class=\"line\">esac</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n"},{"title":"Docker更换工作目录","abbrlink":"ded3","date":"2025-02-26T00:43:30.000Z","_content":"\n由于docker默认工作目录在`/var/lib/docker/`下，生产环境的系统磁盘有限，所以我们需要将默认目录修改到自定义的目录下，本篇修改到`/app/docker/`目录下\n\n**注意：此操作可能会造成Docker数据丢失，建议在刚安装完docker后进行此操作**\n\n原位置`/var/lib/docker/`\n\n## 修改配置\n\n```shell\nmkdir /etc/docker\nvim /etc/docker/daemon.json\n\n# 在/etc/docker/daemon.json 文件内添加\n\n{\n  \"data-root\": \"/app/docker\"\n}\n\nmdkir /app/docker/\n\n# 如果需要转移数据，此操作必须在转移数据后操作！！！\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n\n## 转移数据（可选）\n\n如果原docker环境内有数据可将原目录拷贝到新目录\n\n```shell\n\nmv /var/lib/docker/* /app/docker/\n\n...进行reload配置，重启docker\n```\n\n## 删除数据\n\n转移后如果运行正常 可删除docker原始目录\n\n```shell\nrm -rf /var/lib/docker\n```\n","source":"_posts/服务器/Docker/Docker更换工作目录.md","raw":"---\ntitle: Docker更换工作目录\ncategories:\n  - 服务器\ntags:\n  - Docker\nabbrlink: ded3\ndate: 2025-02-26 08:43:30\n---\n\n由于docker默认工作目录在`/var/lib/docker/`下，生产环境的系统磁盘有限，所以我们需要将默认目录修改到自定义的目录下，本篇修改到`/app/docker/`目录下\n\n**注意：此操作可能会造成Docker数据丢失，建议在刚安装完docker后进行此操作**\n\n原位置`/var/lib/docker/`\n\n## 修改配置\n\n```shell\nmkdir /etc/docker\nvim /etc/docker/daemon.json\n\n# 在/etc/docker/daemon.json 文件内添加\n\n{\n  \"data-root\": \"/app/docker\"\n}\n\nmdkir /app/docker/\n\n# 如果需要转移数据，此操作必须在转移数据后操作！！！\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n\n## 转移数据（可选）\n\n如果原docker环境内有数据可将原目录拷贝到新目录\n\n```shell\n\nmv /var/lib/docker/* /app/docker/\n\n...进行reload配置，重启docker\n```\n\n## 删除数据\n\n转移后如果运行正常 可删除docker原始目录\n\n```shell\nrm -rf /var/lib/docker\n```\n","slug":"服务器/Docker/Docker更换工作目录","published":1,"updated":"2025-06-02T07:25:48.180Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86ww0047zcqb796xf3du","content":"<p>由于docker默认工作目录在<code>/var/lib/docker/</code>下，生产环境的系统磁盘有限，所以我们需要将默认目录修改到自定义的目录下，本篇修改到<code>/app/docker/</code>目录下</p>\n<p><strong>注意：此操作可能会造成Docker数据丢失，建议在刚安装完docker后进行此操作</strong></p>\n<p>原位置<code>/var/lib/docker/</code></p>\n<h2 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /etc/docker</span><br><span class=\"line\">vim /etc/docker/daemon.json</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">在/etc/docker/daemon.json 文件内添加</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;data-root&quot;: &quot;/app/docker&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">mdkir /app/docker/</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">如果需要转移数据，此操作必须在转移数据后操作！！！</span></span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"转移数据（可选）\"><a href=\"#转移数据（可选）\" class=\"headerlink\" title=\"转移数据（可选）\"></a>转移数据（可选）</h2><p>如果原docker环境内有数据可将原目录拷贝到新目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">mv /var/lib/docker/* /app/docker/</span><br><span class=\"line\"></span><br><span class=\"line\">...进行reload配置，重启docker</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"删除数据\"><a href=\"#删除数据\" class=\"headerlink\" title=\"删除数据\"></a>删除数据</h2><p>转移后如果运行正常 可删除docker原始目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -rf /var/lib/docker</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=df171fab-2aff-75b5-5b3f-ca0a00f6dd9c","cover_type":"img","excerpt":"","more":"<p>由于docker默认工作目录在<code>/var/lib/docker/</code>下，生产环境的系统磁盘有限，所以我们需要将默认目录修改到自定义的目录下，本篇修改到<code>/app/docker/</code>目录下</p>\n<p><strong>注意：此操作可能会造成Docker数据丢失，建议在刚安装完docker后进行此操作</strong></p>\n<p>原位置<code>/var/lib/docker/</code></p>\n<h2 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /etc/docker</span><br><span class=\"line\">vim /etc/docker/daemon.json</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">在/etc/docker/daemon.json 文件内添加</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;data-root&quot;: &quot;/app/docker&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">mdkir /app/docker/</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">如果需要转移数据，此操作必须在转移数据后操作！！！</span></span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"转移数据（可选）\"><a href=\"#转移数据（可选）\" class=\"headerlink\" title=\"转移数据（可选）\"></a>转移数据（可选）</h2><p>如果原docker环境内有数据可将原目录拷贝到新目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">mv /var/lib/docker/* /app/docker/</span><br><span class=\"line\"></span><br><span class=\"line\">...进行reload配置，重启docker</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"删除数据\"><a href=\"#删除数据\" class=\"headerlink\" title=\"删除数据\"></a>删除数据</h2><p>转移后如果运行正常 可删除docker原始目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -rf /var/lib/docker</span><br></pre></td></tr></table></figure>\n"},{"title":"Docker操作命令之 操作镜像","abbrlink":"c42c","date":"2025-02-24T13:33:08.000Z","_content":"\n参考：[Docker 命令大全 | 菜鸟教程](https://www.runoob.com/docker/docker-command-manual.html)\n\n## 启动docker\n\n```bash\nsystemctl start docker\n```\n\n## 关闭docker\n\n```bash\nsystemctl stop docker\n```\n\n## 查看docker状态\n\n```bash\nsystemctl status docker\n```\n\n## 开机自启动\n\n```bash\nsystemctl enable docker\n```\n\n\n","source":"_posts/服务器/Docker/Docker系统命令.md","raw":"---\ntitle: Docker操作命令之 操作镜像\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - 食用教程\nabbrlink: c42c\ndate: 2025-02-24 21:33:08\n---\n\n参考：[Docker 命令大全 | 菜鸟教程](https://www.runoob.com/docker/docker-command-manual.html)\n\n## 启动docker\n\n```bash\nsystemctl start docker\n```\n\n## 关闭docker\n\n```bash\nsystemctl stop docker\n```\n\n## 查看docker状态\n\n```bash\nsystemctl status docker\n```\n\n## 开机自启动\n\n```bash\nsystemctl enable docker\n```\n\n\n","slug":"服务器/Docker/Docker系统命令","published":1,"updated":"2025-06-02T07:25:53.314Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wx004bzcqbf3r93enh","content":"<p>参考：<a href=\"https://www.runoob.com/docker/docker-command-manual.html\">Docker 命令大全 | 菜鸟教程</a></p>\n<h2 id=\"启动docker\"><a href=\"#启动docker\" class=\"headerlink\" title=\"启动docker\"></a>启动docker</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start docker</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"关闭docker\"><a href=\"#关闭docker\" class=\"headerlink\" title=\"关闭docker\"></a>关闭docker</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop docker</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"查看docker状态\"><a href=\"#查看docker状态\" class=\"headerlink\" title=\"查看docker状态\"></a>查看docker状态</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status docker</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"开机自启动\"><a href=\"#开机自启动\" class=\"headerlink\" title=\"开机自启动\"></a>开机自启动</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl <span class=\"built_in\">enable</span> docker</span><br></pre></td></tr></table></figure>\n\n\n","cover":"https://t.alcy.cc/pc?_r_=a126e270-6999-2079-2b3b-7b60b59960e6","cover_type":"img","excerpt":"","more":"<p>参考：<a href=\"https://www.runoob.com/docker/docker-command-manual.html\">Docker 命令大全 | 菜鸟教程</a></p>\n<h2 id=\"启动docker\"><a href=\"#启动docker\" class=\"headerlink\" title=\"启动docker\"></a>启动docker</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start docker</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"关闭docker\"><a href=\"#关闭docker\" class=\"headerlink\" title=\"关闭docker\"></a>关闭docker</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop docker</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"查看docker状态\"><a href=\"#查看docker状态\" class=\"headerlink\" title=\"查看docker状态\"></a>查看docker状态</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status docker</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"开机自启动\"><a href=\"#开机自启动\" class=\"headerlink\" title=\"开机自启动\"></a>开机自启动</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl <span class=\"built_in\">enable</span> docker</span><br></pre></td></tr></table></figure>\n\n\n"},{"title":"daemon.json 文件说明","abbrlink":"7dbf","date":"2025-02-24T13:09:30.000Z","_content":"\n# daemon.json\n\n这个文件是 Docker 的配置文件，下面是一些配置\n\n## 工作目录\n\n```json\n\"data-root\": \"/app/docker\"\n```\n\n\n## 容器日志\n\n```json\n\"log-opts\": {\"max-size\":\"500m\", \"max-file\":\"3\"}\n```\n\n> max-size=500m，意味着一个容器日志大小上限是 500M\n>\n> max-file=3，意味着一个容器有三个日志，分别是 id+.json、id+1.json、id+2.json\n>\n> 注：设置后只对新添加的容器有效。\n\n\n## 指定私服仓库地址\n\n```json\n\"insecure-registries\": [\n\t\"http://harbor:30001\"\n]\n```\n\n## 镜像站点\n\n```bash\n\"registry-mirrors\": [\n    \"http://harbor:30001\",\n    \"https:/docker.1panel.live\"\n  ]\n```\n\n","source":"_posts/服务器/Docker/daemon.json.md","raw":"---\ntitle: daemon.json 文件说明\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - 食用教程\nabbrlink: 7dbf\ndate: 2025-02-24 21:09:30\n---\n\n# daemon.json\n\n这个文件是 Docker 的配置文件，下面是一些配置\n\n## 工作目录\n\n```json\n\"data-root\": \"/app/docker\"\n```\n\n\n## 容器日志\n\n```json\n\"log-opts\": {\"max-size\":\"500m\", \"max-file\":\"3\"}\n```\n\n> max-size=500m，意味着一个容器日志大小上限是 500M\n>\n> max-file=3，意味着一个容器有三个日志，分别是 id+.json、id+1.json、id+2.json\n>\n> 注：设置后只对新添加的容器有效。\n\n\n## 指定私服仓库地址\n\n```json\n\"insecure-registries\": [\n\t\"http://harbor:30001\"\n]\n```\n\n## 镜像站点\n\n```bash\n\"registry-mirrors\": [\n    \"http://harbor:30001\",\n    \"https:/docker.1panel.live\"\n  ]\n```\n\n","slug":"服务器/Docker/daemon.json","published":1,"updated":"2025-06-02T07:25:35.140Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wx004ezcqbf9s008hp","content":"<h1 id=\"daemon-json\"><a href=\"#daemon-json\" class=\"headerlink\" title=\"daemon.json\"></a>daemon.json</h1><p>这个文件是 Docker 的配置文件，下面是一些配置</p>\n<h2 id=\"工作目录\"><a href=\"#工作目录\" class=\"headerlink\" title=\"工作目录\"></a>工作目录</h2><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;data-root&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;/app/docker&quot;</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"容器日志\"><a href=\"#容器日志\" class=\"headerlink\" title=\"容器日志\"></a>容器日志</h2><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;log-opts&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;max-size&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;500m&quot;</span><span class=\"punctuation\">,</span> <span class=\"attr\">&quot;max-file&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;3&quot;</span><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>max-size&#x3D;500m，意味着一个容器日志大小上限是 500M</p>\n<p>max-file&#x3D;3，意味着一个容器有三个日志，分别是 id+.json、id+1.json、id+2.json</p>\n<p>注：设置后只对新添加的容器有效。</p>\n</blockquote>\n<h2 id=\"指定私服仓库地址\"><a href=\"#指定私服仓库地址\" class=\"headerlink\" title=\"指定私服仓库地址\"></a>指定私服仓库地址</h2><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;insecure-registries&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">\t<span class=\"string\">&quot;http://harbor:30001&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">]</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"镜像站点\"><a href=\"#镜像站点\" class=\"headerlink\" title=\"镜像站点\"></a>镜像站点</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;registry-mirrors&quot;</span>: [</span><br><span class=\"line\">    <span class=\"string\">&quot;http://harbor:30001&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;https:/docker.1panel.live&quot;</span></span><br><span class=\"line\">  ]</span><br></pre></td></tr></table></figure>\n\n","cover":"https://t.alcy.cc/pc?_r_=bbb317ae-4c57-54d0-1c78-5ecfecd0cf58","cover_type":"img","excerpt":"","more":"<h1 id=\"daemon-json\"><a href=\"#daemon-json\" class=\"headerlink\" title=\"daemon.json\"></a>daemon.json</h1><p>这个文件是 Docker 的配置文件，下面是一些配置</p>\n<h2 id=\"工作目录\"><a href=\"#工作目录\" class=\"headerlink\" title=\"工作目录\"></a>工作目录</h2><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;data-root&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;/app/docker&quot;</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"容器日志\"><a href=\"#容器日志\" class=\"headerlink\" title=\"容器日志\"></a>容器日志</h2><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;log-opts&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;max-size&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;500m&quot;</span><span class=\"punctuation\">,</span> <span class=\"attr\">&quot;max-file&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;3&quot;</span><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>max-size&#x3D;500m，意味着一个容器日志大小上限是 500M</p>\n<p>max-file&#x3D;3，意味着一个容器有三个日志，分别是 id+.json、id+1.json、id+2.json</p>\n<p>注：设置后只对新添加的容器有效。</p>\n</blockquote>\n<h2 id=\"指定私服仓库地址\"><a href=\"#指定私服仓库地址\" class=\"headerlink\" title=\"指定私服仓库地址\"></a>指定私服仓库地址</h2><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;insecure-registries&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">\t<span class=\"string\">&quot;http://harbor:30001&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">]</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"镜像站点\"><a href=\"#镜像站点\" class=\"headerlink\" title=\"镜像站点\"></a>镜像站点</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;registry-mirrors&quot;</span>: [</span><br><span class=\"line\">    <span class=\"string\">&quot;http://harbor:30001&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;https:/docker.1panel.live&quot;</span></span><br><span class=\"line\">  ]</span><br></pre></td></tr></table></figure>\n\n"},{"title":"Docker网络允许外部访问","abbrlink":"ba30","date":"2025-02-24T01:33:08.000Z","_content":"\n```shell\n\n# 开放\niptables -A FORWARD -j ACCEPT\n\n\nyum install iptables-services\nsudo service iptables save\nsystemctl enable iptables \nsystemctl start iptables \n\n\n```\n","source":"_posts/服务器/Docker/Docker网络允许外部访问.md","raw":"---\ntitle: Docker网络允许外部访问\ncategories:\n  - 服务器\ntags:\n  - Docker\nabbrlink: ba30\ndate: 2025-02-24 09:33:08\n---\n\n```shell\n\n# 开放\niptables -A FORWARD -j ACCEPT\n\n\nyum install iptables-services\nsudo service iptables save\nsystemctl enable iptables \nsystemctl start iptables \n\n\n```\n","slug":"服务器/Docker/Docker网络允许外部访问","published":1,"updated":"2025-06-02T07:25:55.181Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wy004izcqbaa3t3rej","content":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">开放</span></span><br><span class=\"line\">iptables -A FORWARD -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">yum install iptables-services</span><br><span class=\"line\">sudo service iptables save</span><br><span class=\"line\">systemctl enable iptables </span><br><span class=\"line\">systemctl start iptables </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=95720e50-e8b4-f4b6-928e-fd97968f9561","cover_type":"img","excerpt":"","more":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">开放</span></span><br><span class=\"line\">iptables -A FORWARD -j ACCEPT</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">yum install iptables-services</span><br><span class=\"line\">sudo service iptables save</span><br><span class=\"line\">systemctl enable iptables </span><br><span class=\"line\">systemctl start iptables </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n"},{"title":"Docker限制日志数量","abbrlink":"bf88","date":"2025-02-26T00:44:33.000Z","_content":"\n## 前言\n\n在Docker容器的日常运维中，日志管理是确保系统高效稳定运行的关键。未受控制的日志文件会迅速填满存储空间，影响系统性能甚至导致服务中断。为此，合理配置Docker以限制日志数量和设定最大存储天数显得尤为重要。本文将介绍具体的配置方法和最佳实践，帮助您有效管理Docker日志，释放存储资源，保障应用流畅运行。让我们马上开始优化您的容器环境吧。\n\n## 正文\n\n### docker配置文件（被动）\n\n配置`daemon.json` 文件\n\n```shell\nvim /etc/docker/daemon.json\n\n# 添加以下配置\n\"log-opts\": {\"max-size\":\"500m\", \"max-file\":\"3\"}\n\n# 重启docker服务\nsystemctl daemon-reload\nsystemctl restart docker\n```\n\n> max-size=500m，意味着一个容器日志大小上限是500M，\n>\n> max-file=3，意味着一个容器有三个日志，分别是id+.json、id+1.json、id+2.json\n>\n> 注：设置后只对新添加的容器有效。\n\n### shell脚本删除docker日志（主动）\n\n执行清除\n\n```shell\n#!/bin/bash\n\n# Docker容器日志清理脚本 du -h --max-depth=1\n\n# 设置Docker日志文件存储路径\nlog_path=\"/usr/local/docker/containers\"\n\n# 获取所有容器ID\ncontainer_ids=$(ls -1 $log_path)\n\n# 循环处理每个容器\nfor container_id in $container_ids; do\n    # 构造日志文件路径\n    log_file=\"${log_path}/${container_id}/${container_id}-json.log\"\n\n    # 检查日志文件是否存在\n    if [ -f \"$log_file\" ]; then\n        echo \"清理容器 ${container_id} 的日志文件: ${log_file}\"\n        \n        # 清空日志文件\n        truncate -s 0 \"$log_file\"\n    else\n        echo \"未找到容器 ${container_id} 的日志文件: ${log_file}\"\n    fi\ndone\n\necho \"日志清理完成。\"\n```\n","source":"_posts/服务器/Docker/Docker限制日志数量.md","raw":"---\ntitle: Docker限制日志数量\ncategories:\n  - 服务器\ntags:\n  - Docker\nabbrlink: bf88\ndate: 2025-02-26 08:44:33\n---\n\n## 前言\n\n在Docker容器的日常运维中，日志管理是确保系统高效稳定运行的关键。未受控制的日志文件会迅速填满存储空间，影响系统性能甚至导致服务中断。为此，合理配置Docker以限制日志数量和设定最大存储天数显得尤为重要。本文将介绍具体的配置方法和最佳实践，帮助您有效管理Docker日志，释放存储资源，保障应用流畅运行。让我们马上开始优化您的容器环境吧。\n\n## 正文\n\n### docker配置文件（被动）\n\n配置`daemon.json` 文件\n\n```shell\nvim /etc/docker/daemon.json\n\n# 添加以下配置\n\"log-opts\": {\"max-size\":\"500m\", \"max-file\":\"3\"}\n\n# 重启docker服务\nsystemctl daemon-reload\nsystemctl restart docker\n```\n\n> max-size=500m，意味着一个容器日志大小上限是500M，\n>\n> max-file=3，意味着一个容器有三个日志，分别是id+.json、id+1.json、id+2.json\n>\n> 注：设置后只对新添加的容器有效。\n\n### shell脚本删除docker日志（主动）\n\n执行清除\n\n```shell\n#!/bin/bash\n\n# Docker容器日志清理脚本 du -h --max-depth=1\n\n# 设置Docker日志文件存储路径\nlog_path=\"/usr/local/docker/containers\"\n\n# 获取所有容器ID\ncontainer_ids=$(ls -1 $log_path)\n\n# 循环处理每个容器\nfor container_id in $container_ids; do\n    # 构造日志文件路径\n    log_file=\"${log_path}/${container_id}/${container_id}-json.log\"\n\n    # 检查日志文件是否存在\n    if [ -f \"$log_file\" ]; then\n        echo \"清理容器 ${container_id} 的日志文件: ${log_file}\"\n        \n        # 清空日志文件\n        truncate -s 0 \"$log_file\"\n    else\n        echo \"未找到容器 ${container_id} 的日志文件: ${log_file}\"\n    fi\ndone\n\necho \"日志清理完成。\"\n```\n","slug":"服务器/Docker/Docker限制日志数量","published":1,"updated":"2025-06-02T07:25:57.172Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86wz004lzcqbbtls29pm","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在Docker容器的日常运维中，日志管理是确保系统高效稳定运行的关键。未受控制的日志文件会迅速填满存储空间，影响系统性能甚至导致服务中断。为此，合理配置Docker以限制日志数量和设定最大存储天数显得尤为重要。本文将介绍具体的配置方法和最佳实践，帮助您有效管理Docker日志，释放存储资源，保障应用流畅运行。让我们马上开始优化您的容器环境吧。</p>\n<h2 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h2><h3 id=\"docker配置文件（被动）\"><a href=\"#docker配置文件（被动）\" class=\"headerlink\" title=\"docker配置文件（被动）\"></a>docker配置文件（被动）</h3><p>配置<code>daemon.json</code> 文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/docker/daemon.json</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">添加以下配置</span></span><br><span class=\"line\">&quot;log-opts&quot;: &#123;&quot;max-size&quot;:&quot;500m&quot;, &quot;max-file&quot;:&quot;3&quot;&#125;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重启docker服务</span></span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl restart docker</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>max-size&#x3D;500m，意味着一个容器日志大小上限是500M，</p>\n<p>max-file&#x3D;3，意味着一个容器有三个日志，分别是id+.json、id+1.json、id+2.json</p>\n<p>注：设置后只对新添加的容器有效。</p>\n</blockquote>\n<h3 id=\"shell脚本删除docker日志（主动）\"><a href=\"#shell脚本删除docker日志（主动）\" class=\"headerlink\" title=\"shell脚本删除docker日志（主动）\"></a>shell脚本删除docker日志（主动）</h3><p>执行清除</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">!/bin/bash</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Docker容器日志清理脚本 <span class=\"built_in\">du</span> -h --max-depth=1</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">设置Docker日志文件存储路径</span></span><br><span class=\"line\">log_path=&quot;/usr/local/docker/containers&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">获取所有容器ID</span></span><br><span class=\"line\">container_ids=$(ls -1 $log_path)</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">循环处理每个容器</span></span><br><span class=\"line\">for container_id in $container_ids; do</span><br><span class=\"line\">    # 构造日志文件路径</span><br><span class=\"line\">    log_file=&quot;$&#123;log_path&#125;/$&#123;container_id&#125;/$&#123;container_id&#125;-json.log&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">    # 检查日志文件是否存在</span><br><span class=\"line\">    if [ -f &quot;$log_file&quot; ]; then</span><br><span class=\"line\">        echo &quot;清理容器 $&#123;container_id&#125; 的日志文件: $&#123;log_file&#125;&quot;</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 清空日志文件</span><br><span class=\"line\">        truncate -s 0 &quot;$log_file&quot;</span><br><span class=\"line\">    else</span><br><span class=\"line\">        echo &quot;未找到容器 $&#123;container_id&#125; 的日志文件: $&#123;log_file&#125;&quot;</span><br><span class=\"line\">    fi</span><br><span class=\"line\">done</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;日志清理完成。&quot;</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=95f1607b-d9bd-f533-2d36-bd4935698d2a","cover_type":"img","excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在Docker容器的日常运维中，日志管理是确保系统高效稳定运行的关键。未受控制的日志文件会迅速填满存储空间，影响系统性能甚至导致服务中断。为此，合理配置Docker以限制日志数量和设定最大存储天数显得尤为重要。本文将介绍具体的配置方法和最佳实践，帮助您有效管理Docker日志，释放存储资源，保障应用流畅运行。让我们马上开始优化您的容器环境吧。</p>\n<h2 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h2><h3 id=\"docker配置文件（被动）\"><a href=\"#docker配置文件（被动）\" class=\"headerlink\" title=\"docker配置文件（被动）\"></a>docker配置文件（被动）</h3><p>配置<code>daemon.json</code> 文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/docker/daemon.json</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">添加以下配置</span></span><br><span class=\"line\">&quot;log-opts&quot;: &#123;&quot;max-size&quot;:&quot;500m&quot;, &quot;max-file&quot;:&quot;3&quot;&#125;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重启docker服务</span></span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl restart docker</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>max-size&#x3D;500m，意味着一个容器日志大小上限是500M，</p>\n<p>max-file&#x3D;3，意味着一个容器有三个日志，分别是id+.json、id+1.json、id+2.json</p>\n<p>注：设置后只对新添加的容器有效。</p>\n</blockquote>\n<h3 id=\"shell脚本删除docker日志（主动）\"><a href=\"#shell脚本删除docker日志（主动）\" class=\"headerlink\" title=\"shell脚本删除docker日志（主动）\"></a>shell脚本删除docker日志（主动）</h3><p>执行清除</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">!/bin/bash</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">Docker容器日志清理脚本 <span class=\"built_in\">du</span> -h --max-depth=1</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">设置Docker日志文件存储路径</span></span><br><span class=\"line\">log_path=&quot;/usr/local/docker/containers&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">获取所有容器ID</span></span><br><span class=\"line\">container_ids=$(ls -1 $log_path)</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">循环处理每个容器</span></span><br><span class=\"line\">for container_id in $container_ids; do</span><br><span class=\"line\">    # 构造日志文件路径</span><br><span class=\"line\">    log_file=&quot;$&#123;log_path&#125;/$&#123;container_id&#125;/$&#123;container_id&#125;-json.log&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">    # 检查日志文件是否存在</span><br><span class=\"line\">    if [ -f &quot;$log_file&quot; ]; then</span><br><span class=\"line\">        echo &quot;清理容器 $&#123;container_id&#125; 的日志文件: $&#123;log_file&#125;&quot;</span><br><span class=\"line\">        </span><br><span class=\"line\">        # 清空日志文件</span><br><span class=\"line\">        truncate -s 0 &quot;$log_file&quot;</span><br><span class=\"line\">    else</span><br><span class=\"line\">        echo &quot;未找到容器 $&#123;container_id&#125; 的日志文件: $&#123;log_file&#125;&quot;</span><br><span class=\"line\">    fi</span><br><span class=\"line\">done</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;日志清理完成。&quot;</span><br></pre></td></tr></table></figure>\n"},{"title":"安装Nacos配置中心","abbrlink":"6975","date":"2025-05-30T00:56:31.000Z","_content":"\n# 安装Nacos配置中心\n\n## 一、安装Nacos\n\n> 安装位置：/opt/nacos/\n\n## 解压缩安装包到指定位置\n\n~~~shell\ntar -zxvf nacos-server-1.3.1.tar.gz \n\n- bin  \t\t\t启动nacos服务的脚本目录\n- conf \t\t\tnacos的配置文件目录\n- target \t\tnacos的启动依赖存放目录\n- data\t\t  nacos启动成功后保存数据的目录\n~~~\n\n## 启动服务器\n\n打开终端进入nacos的bin目录执行如下命令\n\n~~~shell\n./startup.sh -m standalone\n或者\nsh startup.sh -m standalone\n~~~\n\n## 访问nacos的web服务管理界面\n\n- http://ip:8848/nacos/\n- 用户名 和 密码都是nacos\n\nnacos的默认端口号是8848，如果是阿里云服务器的话，记得在安全组开启端口\n\n# 二、持久化到Mysql数据库\n\n注意： Nacos持久化默认无法使用mysql8，如果按照正常方式配置，启动会报错 No DataSource Set\n\n在0.7版本之前，在单机模式时nacos使用嵌入式数据库实现数据的存储，不方便观察数据存储的基本情况。0.7版本增加了支持mysql数据源能力，具体的操作步骤：\n\n- 1.安装数据库，版本要求：5.6.5+\n- 2.初始化mysql数据库，数据库初始化文件：nacos-mysql.sql\n- 3.修改conf/application.properties文件，增加支持mysql数据源配置（目前只支持mysql），添加mysql数据源的url、用户名和密码。\n\n~~~properties\nspring.datasource.platform=mysql\n\ndb.num=1\ndb.url.0=jdbc:mysql://11.162.196.16:3306/nacos_devtest?characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true\ndb.user=nacos_devtest\ndb.password=youdontknow\n~~~\n\n参考文档：[Nacos安装 并且配置持久化到Mysql数据库](https://blog.csdn.net/su2231595742/article/details/122827205)\n","source":"_posts/服务器/Nacos/安装Nacos配置中心.md","raw":"---\ntitle: 安装Nacos配置中心\ncategories:\n  - 服务器\ntags:\n  - Nacos\nabbrlink: '6975'\ndate: 2025-05-30 08:56:31\n---\n\n# 安装Nacos配置中心\n\n## 一、安装Nacos\n\n> 安装位置：/opt/nacos/\n\n## 解压缩安装包到指定位置\n\n~~~shell\ntar -zxvf nacos-server-1.3.1.tar.gz \n\n- bin  \t\t\t启动nacos服务的脚本目录\n- conf \t\t\tnacos的配置文件目录\n- target \t\tnacos的启动依赖存放目录\n- data\t\t  nacos启动成功后保存数据的目录\n~~~\n\n## 启动服务器\n\n打开终端进入nacos的bin目录执行如下命令\n\n~~~shell\n./startup.sh -m standalone\n或者\nsh startup.sh -m standalone\n~~~\n\n## 访问nacos的web服务管理界面\n\n- http://ip:8848/nacos/\n- 用户名 和 密码都是nacos\n\nnacos的默认端口号是8848，如果是阿里云服务器的话，记得在安全组开启端口\n\n# 二、持久化到Mysql数据库\n\n注意： Nacos持久化默认无法使用mysql8，如果按照正常方式配置，启动会报错 No DataSource Set\n\n在0.7版本之前，在单机模式时nacos使用嵌入式数据库实现数据的存储，不方便观察数据存储的基本情况。0.7版本增加了支持mysql数据源能力，具体的操作步骤：\n\n- 1.安装数据库，版本要求：5.6.5+\n- 2.初始化mysql数据库，数据库初始化文件：nacos-mysql.sql\n- 3.修改conf/application.properties文件，增加支持mysql数据源配置（目前只支持mysql），添加mysql数据源的url、用户名和密码。\n\n~~~properties\nspring.datasource.platform=mysql\n\ndb.num=1\ndb.url.0=jdbc:mysql://11.162.196.16:3306/nacos_devtest?characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true\ndb.user=nacos_devtest\ndb.password=youdontknow\n~~~\n\n参考文档：[Nacos安装 并且配置持久化到Mysql数据库](https://blog.csdn.net/su2231595742/article/details/122827205)\n","slug":"服务器/Nacos/安装Nacos配置中心","published":1,"updated":"2025-06-02T07:27:53.725Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86x0004pzcqb7nxyggq2","content":"<h1 id=\"安装Nacos配置中心\"><a href=\"#安装Nacos配置中心\" class=\"headerlink\" title=\"安装Nacos配置中心\"></a>安装Nacos配置中心</h1><h2 id=\"一、安装Nacos\"><a href=\"#一、安装Nacos\" class=\"headerlink\" title=\"一、安装Nacos\"></a>一、安装Nacos</h2><blockquote>\n<p>安装位置：&#x2F;opt&#x2F;nacos&#x2F;</p>\n</blockquote>\n<h2 id=\"解压缩安装包到指定位置\"><a href=\"#解压缩安装包到指定位置\" class=\"headerlink\" title=\"解压缩安装包到指定位置\"></a>解压缩安装包到指定位置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf nacos-server-1.3.1.tar.gz </span><br><span class=\"line\"></span><br><span class=\"line\">- bin  \t\t\t启动nacos服务的脚本目录</span><br><span class=\"line\">- conf \t\t\tnacos的配置文件目录</span><br><span class=\"line\">- target \t\tnacos的启动依赖存放目录</span><br><span class=\"line\">- data\t\t  nacos启动成功后保存数据的目录</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"启动服务器\"><a href=\"#启动服务器\" class=\"headerlink\" title=\"启动服务器\"></a>启动服务器</h2><p>打开终端进入nacos的bin目录执行如下命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./startup.sh -m standalone</span><br><span class=\"line\">或者</span><br><span class=\"line\">sh startup.sh -m standalone</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"访问nacos的web服务管理界面\"><a href=\"#访问nacos的web服务管理界面\" class=\"headerlink\" title=\"访问nacos的web服务管理界面\"></a>访问nacos的web服务管理界面</h2><ul>\n<li><a href=\"http://ip:8848/nacos/\">http://ip:8848/nacos/</a></li>\n<li>用户名 和 密码都是nacos</li>\n</ul>\n<p>nacos的默认端口号是8848，如果是阿里云服务器的话，记得在安全组开启端口</p>\n<h1 id=\"二、持久化到Mysql数据库\"><a href=\"#二、持久化到Mysql数据库\" class=\"headerlink\" title=\"二、持久化到Mysql数据库\"></a>二、持久化到Mysql数据库</h1><p>注意： Nacos持久化默认无法使用mysql8，如果按照正常方式配置，启动会报错 No DataSource Set</p>\n<p>在0.7版本之前，在单机模式时nacos使用嵌入式数据库实现数据的存储，不方便观察数据存储的基本情况。0.7版本增加了支持mysql数据源能力，具体的操作步骤：</p>\n<ul>\n<li>1.安装数据库，版本要求：5.6.5+</li>\n<li>2.初始化mysql数据库，数据库初始化文件：nacos-mysql.sql</li>\n<li>3.修改conf&#x2F;application.properties文件，增加支持mysql数据源配置（目前只支持mysql），添加mysql数据源的url、用户名和密码。</li>\n</ul>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring.datasource.platform</span>=<span class=\"string\">mysql</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">db.num</span>=<span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"attr\">db.url.0</span>=<span class=\"string\">jdbc:mysql://11.162.196.16:3306/nacos_devtest?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true</span></span><br><span class=\"line\"><span class=\"attr\">db.user</span>=<span class=\"string\">nacos_devtest</span></span><br><span class=\"line\"><span class=\"attr\">db.password</span>=<span class=\"string\">youdontknow</span></span><br></pre></td></tr></table></figure>\n\n<p>参考文档：<a href=\"https://blog.csdn.net/su2231595742/article/details/122827205\">Nacos安装 并且配置持久化到Mysql数据库</a></p>\n","cover":"https://t.alcy.cc/pc?_r_=3d3ca302-5bf0-9d63-0307-4bdb12e8d797","cover_type":"img","excerpt":"","more":"<h1 id=\"安装Nacos配置中心\"><a href=\"#安装Nacos配置中心\" class=\"headerlink\" title=\"安装Nacos配置中心\"></a>安装Nacos配置中心</h1><h2 id=\"一、安装Nacos\"><a href=\"#一、安装Nacos\" class=\"headerlink\" title=\"一、安装Nacos\"></a>一、安装Nacos</h2><blockquote>\n<p>安装位置：&#x2F;opt&#x2F;nacos&#x2F;</p>\n</blockquote>\n<h2 id=\"解压缩安装包到指定位置\"><a href=\"#解压缩安装包到指定位置\" class=\"headerlink\" title=\"解压缩安装包到指定位置\"></a>解压缩安装包到指定位置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf nacos-server-1.3.1.tar.gz </span><br><span class=\"line\"></span><br><span class=\"line\">- bin  \t\t\t启动nacos服务的脚本目录</span><br><span class=\"line\">- conf \t\t\tnacos的配置文件目录</span><br><span class=\"line\">- target \t\tnacos的启动依赖存放目录</span><br><span class=\"line\">- data\t\t  nacos启动成功后保存数据的目录</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"启动服务器\"><a href=\"#启动服务器\" class=\"headerlink\" title=\"启动服务器\"></a>启动服务器</h2><p>打开终端进入nacos的bin目录执行如下命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./startup.sh -m standalone</span><br><span class=\"line\">或者</span><br><span class=\"line\">sh startup.sh -m standalone</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"访问nacos的web服务管理界面\"><a href=\"#访问nacos的web服务管理界面\" class=\"headerlink\" title=\"访问nacos的web服务管理界面\"></a>访问nacos的web服务管理界面</h2><ul>\n<li><a href=\"http://ip:8848/nacos/\">http://ip:8848/nacos/</a></li>\n<li>用户名 和 密码都是nacos</li>\n</ul>\n<p>nacos的默认端口号是8848，如果是阿里云服务器的话，记得在安全组开启端口</p>\n<h1 id=\"二、持久化到Mysql数据库\"><a href=\"#二、持久化到Mysql数据库\" class=\"headerlink\" title=\"二、持久化到Mysql数据库\"></a>二、持久化到Mysql数据库</h1><p>注意： Nacos持久化默认无法使用mysql8，如果按照正常方式配置，启动会报错 No DataSource Set</p>\n<p>在0.7版本之前，在单机模式时nacos使用嵌入式数据库实现数据的存储，不方便观察数据存储的基本情况。0.7版本增加了支持mysql数据源能力，具体的操作步骤：</p>\n<ul>\n<li>1.安装数据库，版本要求：5.6.5+</li>\n<li>2.初始化mysql数据库，数据库初始化文件：nacos-mysql.sql</li>\n<li>3.修改conf&#x2F;application.properties文件，增加支持mysql数据源配置（目前只支持mysql），添加mysql数据源的url、用户名和密码。</li>\n</ul>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring.datasource.platform</span>=<span class=\"string\">mysql</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">db.num</span>=<span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"attr\">db.url.0</span>=<span class=\"string\">jdbc:mysql://11.162.196.16:3306/nacos_devtest?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true</span></span><br><span class=\"line\"><span class=\"attr\">db.user</span>=<span class=\"string\">nacos_devtest</span></span><br><span class=\"line\"><span class=\"attr\">db.password</span>=<span class=\"string\">youdontknow</span></span><br></pre></td></tr></table></figure>\n\n<p>参考文档：<a href=\"https://blog.csdn.net/su2231595742/article/details/122827205\">Nacos安装 并且配置持久化到Mysql数据库</a></p>\n"},{"title":"Ubuntu 安装 Docker","abbrlink":"6812","date":"2025-02-25T00:43:30.000Z","_content":"\n\n## 前置操作\n\n```bash\n# 安装前先卸载操作系统默认安装的docker，\nsudo apt-get remove docker docker-engine docker.io containerd runc\n\n# 安装必要支持\nsudo apt install apt-transport-https ca-certificates curl software-properties-common gnupg lsb-release\n\n\n# 添加 Docker 官方 GPG key （可能国内现在访问会存在问题）\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n# 阿里源（推荐使用阿里的gpg KEY）\ncurl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n\n\n\n# 添加 apt 源:\n# Docker官方源\necho \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n# 阿里apt源\necho \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n\n# 更新源\nsudo apt update\nsudo apt-get update\n```\n\n## 安装docker\n\n```bash\n# 安装最新版本的Docker\nsudo apt install docker-ce docker-ce-cli containerd.io\n# 等待安装完成\n\n# 查看Docker版本\nsudo docker version\n\n# 查看Docker运行状态\nsudo systemctl status docker\n```\n","source":"_posts/服务器/Docker/Ubuntu安装Docker.md","raw":"---\ntitle: Ubuntu 安装 Docker\ncategories:\n  - 服务器\ntags:\n  - Ubuntu\n  - Docker\n  - 食用教程\nabbrlink: '6812'\ndate: 2025-02-25 08:43:30\n---\n\n\n## 前置操作\n\n```bash\n# 安装前先卸载操作系统默认安装的docker，\nsudo apt-get remove docker docker-engine docker.io containerd runc\n\n# 安装必要支持\nsudo apt install apt-transport-https ca-certificates curl software-properties-common gnupg lsb-release\n\n\n# 添加 Docker 官方 GPG key （可能国内现在访问会存在问题）\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n# 阿里源（推荐使用阿里的gpg KEY）\ncurl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n\n\n\n# 添加 apt 源:\n# Docker官方源\necho \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n# 阿里apt源\necho \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n\n# 更新源\nsudo apt update\nsudo apt-get update\n```\n\n## 安装docker\n\n```bash\n# 安装最新版本的Docker\nsudo apt install docker-ce docker-ce-cli containerd.io\n# 等待安装完成\n\n# 查看Docker版本\nsudo docker version\n\n# 查看Docker运行状态\nsudo systemctl status docker\n```\n","slug":"服务器/Docker/Ubuntu安装Docker","published":1,"updated":"2025-06-02T07:25:59.133Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86x1004szcqb2he94b9r","content":"<h2 id=\"前置操作\"><a href=\"#前置操作\" class=\"headerlink\" title=\"前置操作\"></a>前置操作</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装前先卸载操作系统默认安装的docker，</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt-get remove docker docker-engine docker.io containerd runc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装必要支持</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt install apt-transport-https ca-certificates curl software-properties-common gnupg lsb-release</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 添加 Docker 官方 GPG key （可能国内现在访问会存在问题）</span></span><br><span class=\"line\">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | <span class=\"built_in\">sudo</span> gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br><span class=\"line\"><span class=\"comment\"># 阿里源（推荐使用阿里的gpg KEY）</span></span><br><span class=\"line\">curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | <span class=\"built_in\">sudo</span> gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 添加 apt 源:</span></span><br><span class=\"line\"><span class=\"comment\"># Docker官方源</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;deb [arch=<span class=\"subst\">$(dpkg --print-architecture)</span> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu <span class=\"subst\">$(lsb_release -cs)</span> stable&quot;</span> | <span class=\"built_in\">sudo</span> <span class=\"built_in\">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br><span class=\"line\"><span class=\"comment\"># 阿里apt源</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;deb [arch=<span class=\"subst\">$(dpkg --print-architecture)</span> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu <span class=\"subst\">$(lsb_release -cs)</span> stable&quot;</span> | <span class=\"built_in\">sudo</span> <span class=\"built_in\">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 更新源</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt update</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt-get update</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"安装docker\"><a href=\"#安装docker\" class=\"headerlink\" title=\"安装docker\"></a>安装docker</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装最新版本的Docker</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt install docker-ce docker-ce-cli containerd.io</span><br><span class=\"line\"><span class=\"comment\"># 等待安装完成</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看Docker版本</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> docker version</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看Docker运行状态</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl status docker</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=673ff3c2-7b3e-b3c1-685b-b83e90b1f503","cover_type":"img","excerpt":"","more":"<h2 id=\"前置操作\"><a href=\"#前置操作\" class=\"headerlink\" title=\"前置操作\"></a>前置操作</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装前先卸载操作系统默认安装的docker，</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt-get remove docker docker-engine docker.io containerd runc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装必要支持</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt install apt-transport-https ca-certificates curl software-properties-common gnupg lsb-release</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 添加 Docker 官方 GPG key （可能国内现在访问会存在问题）</span></span><br><span class=\"line\">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | <span class=\"built_in\">sudo</span> gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br><span class=\"line\"><span class=\"comment\"># 阿里源（推荐使用阿里的gpg KEY）</span></span><br><span class=\"line\">curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | <span class=\"built_in\">sudo</span> gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 添加 apt 源:</span></span><br><span class=\"line\"><span class=\"comment\"># Docker官方源</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;deb [arch=<span class=\"subst\">$(dpkg --print-architecture)</span> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu <span class=\"subst\">$(lsb_release -cs)</span> stable&quot;</span> | <span class=\"built_in\">sudo</span> <span class=\"built_in\">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br><span class=\"line\"><span class=\"comment\"># 阿里apt源</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;deb [arch=<span class=\"subst\">$(dpkg --print-architecture)</span> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu <span class=\"subst\">$(lsb_release -cs)</span> stable&quot;</span> | <span class=\"built_in\">sudo</span> <span class=\"built_in\">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 更新源</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt update</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt-get update</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"安装docker\"><a href=\"#安装docker\" class=\"headerlink\" title=\"安装docker\"></a>安装docker</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装最新版本的Docker</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt install docker-ce docker-ce-cli containerd.io</span><br><span class=\"line\"><span class=\"comment\"># 等待安装完成</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看Docker版本</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> docker version</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看Docker运行状态</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl status docker</span><br></pre></td></tr></table></figure>\n"},{"title":"K8s 修改数据目录","abbrlink":"89eb","date":"2024-12-30T00:56:31.000Z","_content":"\n> 参考网址：[kubelet修改工作目录 | 好好学习的郝](https://www.voidking.com/dev-kubelet-root-dir/)\n\n## 需求描述\n\nkubelet的默认工作目录（存储目录）是`/var/lib/kubelet`，会存放volume文件（包括emptyDir volume)、plugin文件等，默认挂载在系统盘。\n而系统盘一般都不会太大，因此最好把kubelet工作目录更改到数据盘。\n本文中，我们会把docker的工作目录从`/var/lib/kubelet`改到`/app/kubelet`，其中`/app`目录挂载了数据盘。\n\n## 修改配置\n\n“建议先修改node节点的，再修改主节点的”\n\n1. 停止kubelet\n\n```shell\nsystemctl stop kubelet\n```\n\n2. 拷贝kubelet工作目录数据文件到新路径\n\n```shell\nmkdir -p /app/kubelet  \ncp -rf /var/lib/kubelet/pods /app/kubelet/  \ncp -rf /var/lib/kubelet/pod-resources /app/kubelet/  \nmv /var/lib/kubelet/pods{,.old}  \nmv /var/lib/kubelet/pod-resources{,.old}\n```\n\n注意，以下文件和目录一定要保留在老路径，不要移动和删除\n\n- /var/lib/kubelet/config.yaml\n- /var/lib/kubelet/kubeadm-flags.env\n- /var/lib/kubelet/pki\n- /var/lib/kubelet/device-plugins\n\n3. 添加或修改 /etc/sysconfig/kubelet 配置文件，添加`root-dir`参数\n\n```shell\nKUBELET_EXTRA_ARGS=\"--root-dir=/app/kubelet\"\n```\n\nPS：如果是ubuntu系统，则要修改 /etc/default/kubelet 配置文件\n4. 重启kubelet\n\n```shell\nsystemctl daemon-reload && systemctl restart kubelet\nsystemctl status kubelet\n```\n\n6. 清理旧工作目录（可选）\n\n```shell\nrm /var/lib/kubelet/pods.old -rf  \nrm /var/lib/kubelet/pod-resources.old -rf\n```\n","source":"_posts/服务器/Kubernetes/K8s修改数据目录.md","raw":"---\ntitle: K8s 修改数据目录\ncategories:\n  - 服务器\ntags:\n  - K8S\n  - Kubesphere\nabbrlink: 89eb\ndate: 2024-12-30 08:56:31\n---\n\n> 参考网址：[kubelet修改工作目录 | 好好学习的郝](https://www.voidking.com/dev-kubelet-root-dir/)\n\n## 需求描述\n\nkubelet的默认工作目录（存储目录）是`/var/lib/kubelet`，会存放volume文件（包括emptyDir volume)、plugin文件等，默认挂载在系统盘。\n而系统盘一般都不会太大，因此最好把kubelet工作目录更改到数据盘。\n本文中，我们会把docker的工作目录从`/var/lib/kubelet`改到`/app/kubelet`，其中`/app`目录挂载了数据盘。\n\n## 修改配置\n\n“建议先修改node节点的，再修改主节点的”\n\n1. 停止kubelet\n\n```shell\nsystemctl stop kubelet\n```\n\n2. 拷贝kubelet工作目录数据文件到新路径\n\n```shell\nmkdir -p /app/kubelet  \ncp -rf /var/lib/kubelet/pods /app/kubelet/  \ncp -rf /var/lib/kubelet/pod-resources /app/kubelet/  \nmv /var/lib/kubelet/pods{,.old}  \nmv /var/lib/kubelet/pod-resources{,.old}\n```\n\n注意，以下文件和目录一定要保留在老路径，不要移动和删除\n\n- /var/lib/kubelet/config.yaml\n- /var/lib/kubelet/kubeadm-flags.env\n- /var/lib/kubelet/pki\n- /var/lib/kubelet/device-plugins\n\n3. 添加或修改 /etc/sysconfig/kubelet 配置文件，添加`root-dir`参数\n\n```shell\nKUBELET_EXTRA_ARGS=\"--root-dir=/app/kubelet\"\n```\n\nPS：如果是ubuntu系统，则要修改 /etc/default/kubelet 配置文件\n4. 重启kubelet\n\n```shell\nsystemctl daemon-reload && systemctl restart kubelet\nsystemctl status kubelet\n```\n\n6. 清理旧工作目录（可选）\n\n```shell\nrm /var/lib/kubelet/pods.old -rf  \nrm /var/lib/kubelet/pod-resources.old -rf\n```\n","slug":"服务器/Kubernetes/K8s修改数据目录","published":1,"updated":"2025-06-02T07:27:32.699Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86x2004wzcqb142m00fc","content":"<blockquote>\n<p>参考网址：<a href=\"https://www.voidking.com/dev-kubelet-root-dir/\">kubelet修改工作目录 | 好好学习的郝</a></p>\n</blockquote>\n<h2 id=\"需求描述\"><a href=\"#需求描述\" class=\"headerlink\" title=\"需求描述\"></a>需求描述</h2><p>kubelet的默认工作目录（存储目录）是<code>/var/lib/kubelet</code>，会存放volume文件（包括emptyDir volume)、plugin文件等，默认挂载在系统盘。<br>而系统盘一般都不会太大，因此最好把kubelet工作目录更改到数据盘。<br>本文中，我们会把docker的工作目录从<code>/var/lib/kubelet</code>改到<code>/app/kubelet</code>，其中<code>/app</code>目录挂载了数据盘。</p>\n<h2 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h2><p>“建议先修改node节点的，再修改主节点的”</p>\n<ol>\n<li>停止kubelet</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop kubelet</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>拷贝kubelet工作目录数据文件到新路径</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /app/kubelet  </span><br><span class=\"line\">cp -rf /var/lib/kubelet/pods /app/kubelet/  </span><br><span class=\"line\">cp -rf /var/lib/kubelet/pod-resources /app/kubelet/  </span><br><span class=\"line\">mv /var/lib/kubelet/pods&#123;,.old&#125;  </span><br><span class=\"line\">mv /var/lib/kubelet/pod-resources&#123;,.old&#125;</span><br></pre></td></tr></table></figure>\n\n<p>注意，以下文件和目录一定要保留在老路径，不要移动和删除</p>\n<ul>\n<li>&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;config.yaml</li>\n<li>&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;kubeadm-flags.env</li>\n<li>&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;pki</li>\n<li>&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;device-plugins</li>\n</ul>\n<ol start=\"3\">\n<li>添加或修改 &#x2F;etc&#x2F;sysconfig&#x2F;kubelet 配置文件，添加<code>root-dir</code>参数</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">KUBELET_EXTRA_ARGS=&quot;--root-dir=/app/kubelet&quot;</span><br></pre></td></tr></table></figure>\n\n<p>PS：如果是ubuntu系统，则要修改 &#x2F;etc&#x2F;default&#x2F;kubelet 配置文件<br>4. 重启kubelet</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload &amp;&amp; systemctl restart kubelet</span><br><span class=\"line\">systemctl status kubelet</span><br></pre></td></tr></table></figure>\n\n<ol start=\"6\">\n<li>清理旧工作目录（可选）</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm /var/lib/kubelet/pods.old -rf  </span><br><span class=\"line\">rm /var/lib/kubelet/pod-resources.old -rf</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=16c21504-a2fa-85b1-da74-0c74a5b75df9","cover_type":"img","excerpt":"","more":"<blockquote>\n<p>参考网址：<a href=\"https://www.voidking.com/dev-kubelet-root-dir/\">kubelet修改工作目录 | 好好学习的郝</a></p>\n</blockquote>\n<h2 id=\"需求描述\"><a href=\"#需求描述\" class=\"headerlink\" title=\"需求描述\"></a>需求描述</h2><p>kubelet的默认工作目录（存储目录）是<code>/var/lib/kubelet</code>，会存放volume文件（包括emptyDir volume)、plugin文件等，默认挂载在系统盘。<br>而系统盘一般都不会太大，因此最好把kubelet工作目录更改到数据盘。<br>本文中，我们会把docker的工作目录从<code>/var/lib/kubelet</code>改到<code>/app/kubelet</code>，其中<code>/app</code>目录挂载了数据盘。</p>\n<h2 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h2><p>“建议先修改node节点的，再修改主节点的”</p>\n<ol>\n<li>停止kubelet</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop kubelet</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>拷贝kubelet工作目录数据文件到新路径</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /app/kubelet  </span><br><span class=\"line\">cp -rf /var/lib/kubelet/pods /app/kubelet/  </span><br><span class=\"line\">cp -rf /var/lib/kubelet/pod-resources /app/kubelet/  </span><br><span class=\"line\">mv /var/lib/kubelet/pods&#123;,.old&#125;  </span><br><span class=\"line\">mv /var/lib/kubelet/pod-resources&#123;,.old&#125;</span><br></pre></td></tr></table></figure>\n\n<p>注意，以下文件和目录一定要保留在老路径，不要移动和删除</p>\n<ul>\n<li>&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;config.yaml</li>\n<li>&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;kubeadm-flags.env</li>\n<li>&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;pki</li>\n<li>&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;device-plugins</li>\n</ul>\n<ol start=\"3\">\n<li>添加或修改 &#x2F;etc&#x2F;sysconfig&#x2F;kubelet 配置文件，添加<code>root-dir</code>参数</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">KUBELET_EXTRA_ARGS=&quot;--root-dir=/app/kubelet&quot;</span><br></pre></td></tr></table></figure>\n\n<p>PS：如果是ubuntu系统，则要修改 &#x2F;etc&#x2F;default&#x2F;kubelet 配置文件<br>4. 重启kubelet</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload &amp;&amp; systemctl restart kubelet</span><br><span class=\"line\">systemctl status kubelet</span><br></pre></td></tr></table></figure>\n\n<ol start=\"6\">\n<li>清理旧工作目录（可选）</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm /var/lib/kubelet/pods.old -rf  </span><br><span class=\"line\">rm /var/lib/kubelet/pod-resources.old -rf</span><br></pre></td></tr></table></figure>\n"},{"title":"Nacos开启鉴权配置","abbrlink":"c77","date":"2024-12-30T00:56:31.000Z","_content":"# Nacos开启鉴权配置\n\n## 一、更改application.properties中的配置\n\n路径：你的nacos的位置下 confg/application.properties\n\n## 二、修改配置\n\n开启鉴权之前，application.properties中的配置信息为：\n\n~~~properties\n### If turn on auth system:\nnacos.core.auth.enabled=false\n~~~\n\n开启鉴权之后，application.properties中的配置信息为：\n\n~~~properties\n### If turn on auth system:\nnacos.core.auth.system.type=nacos\nnacos.core.auth.enabled=true\n~~~\n\n在2.2.0.1版本后，社区发布版本将移除以文档如下值作为默认值，需要自行填充，否则无法启动节点\n\n~~~properties\n### The default token(Base64 String):\nnacos.core.auth.default.token.secret.key=SecretKey012345678901234567890123456789012345678901234567890123456789\n\n### 2.1.0 版本后\nnacos.core.auth.plugin.nacos.token.secret.key=SecretKey012345678901234567890123456789012345678901234567890123456789\n~~~\n\n自定义密钥时，推荐将配置项设置为Base64编码的字符串，且原始密钥长度不得低于32字符\n\n~~~pro\n### The default token(Base64 String):\nnacos.core.auth.default.token.secret.key=VGhpc0lzTXlDdXN0b21TZWNyZXRLZXkwMTIzNDU2Nzg=\n\n### 2.1.0 版本后\nnacos.core.auth.plugin.nacos.token.secret.key=VGhpc0lzTXlDdXN0b21TZWNyZXRLZXkwMTIzNDU2Nzg=\n~~~\n\nnacos.core.auth.server.identity.key和nacos.core.auth.server.identity.value必须要有值\n\n~~~properties\nnacos.core.auth.server.identity.key=example\nnacos.core.auth.server.identity.value=example\n~~~\n\n那么我的全部配置如下：\n\n~~~properties\n#\n# Copyright 1999-2021 Alibaba Group Holding Ltd.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n#*************** Spring Boot Related Configurations ***************#\n### Default web context path:\nserver.servlet.contextPath=/nacos\n### Include message field\nserver.error.include-message=ALWAYS\n### Default web server port:\nserver.port=8848\n\n#*************** Network Related Configurations ***************#\n### If prefer hostname over ip for Nacos server addresses in cluster.conf:\n# nacos.inetutils.prefer-hostname-over-ip=false\n\n### Specify local server's IP:\n# nacos.inetutils.ip-address=\n\n\n#*************** Config Module Related Configurations ***************#\n### If use MySQL as datasource:\n### Deprecated configuration property, it is recommended to use `spring.sql.init.platform` replaced.\n spring.datasource.platform=mysql\n# spring.sql.init.platform=mysql\n\n### Count of DB:\n db.num=1\n\n### Connect URL of DB:\n db.url.0=jdbc:mysql://127.0.0.1:3306/nacos?characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true&useUnicode=true&useSSL=false&serverTimezone=UTC\n db.user.0=root\n db.password.0=123456\n\n### Connection pool configuration: hikariCP\ndb.pool.config.connectionTimeout=30000\ndb.pool.config.validationTimeout=10000\ndb.pool.config.maximumPoolSize=20\ndb.pool.config.minimumIdle=2\n\n#*************** Naming Module Related Configurations ***************#\n\n### If enable data warmup. If set to false, the server would accept request without local data preparation:\n# nacos.naming.data.warmup=true\n\n### If enable the instance auto expiration, kind like of health check of instance:\n# nacos.naming.expireInstance=true\n\n### Add in 2.0.0\n### The interval to clean empty service, unit: milliseconds.\n# nacos.naming.clean.empty-service.interval=60000\n\n### The expired time to clean empty service, unit: milliseconds.\n# nacos.naming.clean.empty-service.expired-time=60000\n\n### The interval to clean expired metadata, unit: milliseconds.\n# nacos.naming.clean.expired-metadata.interval=5000\n\n### The expired time to clean metadata, unit: milliseconds.\n# nacos.naming.clean.expired-metadata.expired-time=60000\n\n### The delay time before push task to execute from service changed, unit: milliseconds.\n# nacos.naming.push.pushTaskDelay=500\n\n### The timeout for push task execute, unit: milliseconds.\n# nacos.naming.push.pushTaskTimeout=5000\n\n### The delay time for retrying failed push task, unit: milliseconds.\n# nacos.naming.push.pushTaskRetryDelay=1000\n\n### Since 2.0.3\n### The expired time for inactive client, unit: milliseconds.\n# nacos.naming.client.expired.time=180000\n\n#*************** CMDB Module Related Configurations ***************#\n### The interval to dump external CMDB in seconds:\n# nacos.cmdb.dumpTaskInterval=3600\n\n### The interval of polling data change event in seconds:\n# nacos.cmdb.eventTaskInterval=10\n\n### The interval of loading labels in seconds:\n# nacos.cmdb.labelTaskInterval=300\n\n### If turn on data loading task:\n# nacos.cmdb.loadDataAtStart=false\n\n\n#*************** Metrics Related Configurations ***************#\n### Metrics for prometheus\n#management.endpoints.web.exposure.include=*\n\n### Metrics for elastic search\nmanagement.metrics.export.elastic.enabled=false\n#management.metrics.export.elastic.host=http://localhost:9200\n\n### Metrics for influx\nmanagement.metrics.export.influx.enabled=false\n#management.metrics.export.influx.db=springboot\n#management.metrics.export.influx.uri=http://localhost:8086\n#management.metrics.export.influx.auto-create-db=true\n#management.metrics.export.influx.consistency=one\n#management.metrics.export.influx.compressed=true\n\n#*************** Access Log Related Configurations ***************#\n### If turn on the access log:\nserver.tomcat.accesslog.enabled=true\n\n### The access log pattern:\nserver.tomcat.accesslog.pattern=%h %l %u %t \"%r\" %s %b %D %{User-Agent}i %{Request-Source}i\n\n### The directory of access log:\nserver.tomcat.basedir=file:.\n\n#*************** Access Control Related Configurations ***************#\n### If enable spring security, this option is deprecated in 1.2.0:\n#spring.security.enabled=false\n\n### The ignore urls of auth\nnacos.security.ignore.urls=/,/error,/**/*.css,/**/*.js,/**/*.html,/**/*.map,/**/*.svg,/**/*.png,/**/*.ico,/console-ui/public/**,/v1/auth/**,/v1/console/health/**,/actuator/**,/v1/console/server/**\n\n### The auth system to use, currently only 'nacos' and 'ldap' is supported:\nnacos.core.auth.system.type=nacos\n\n### If turn on auth system:\nnacos.core.auth.enabled=true\n\n### Turn on/off caching of auth information. By turning on this switch, the update of auth information would have a 15 seconds delay.\nnacos.core.auth.caching.enabled=true\n\n### Since 1.4.1, Turn on/off white auth for user-agent: nacos-server, only for upgrade from old version.\nnacos.core.auth.enable.userAgentAuthWhite=false\n\n### Since 1.4.1, worked when nacos.core.auth.enabled=true and nacos.core.auth.enable.userAgentAuthWhite=false.\n### The two properties is the white list for auth and used by identity the request from other server.\nnacos.core.auth.server.identity.key=example\nnacos.core.auth.server.identity.value=example\n\n### worked when nacos.core.auth.system.type=nacos\n### The token expiration in seconds:\nnacos.core.auth.plugin.nacos.token.cache.enable=false\nnacos.core.auth.plugin.nacos.token.expire.seconds=18000\n### The default token (Base64 String):\nnacos.core.auth.plugin.nacos.token.secret.key=VGhpc0lzTXlDdXN0b21TZWNyZXRLZXkwMTIzNDU2Nzg=\n\n### worked when nacos.core.auth.system.type=ldap，{0} is Placeholder,replace login username\n#nacos.core.auth.ldap.url=ldap://localhost:389\n#nacos.core.auth.ldap.basedc=dc=example,dc=org\n#nacos.core.auth.ldap.userDn=cn=admin,${nacos.core.auth.ldap.basedc}\n#nacos.core.auth.ldap.password=admin\n#nacos.core.auth.ldap.userdn=cn={0},dc=example,dc=org\n#nacos.core.auth.ldap.filter.prefix=uid\n#nacos.core.auth.ldap.case.sensitive=true\n\n\n#*************** Istio Related Configurations ***************#\n### If turn on the MCP server:\nnacos.istio.mcp.server.enabled=false\n\n#*************** Core Related Configurations ***************#\n\n### set the WorkerID manually\n# nacos.core.snowflake.worker-id=\n\n### Member-MetaData\n# nacos.core.member.meta.site=\n# nacos.core.member.meta.adweight=\n# nacos.core.member.meta.weight=\n\n### MemberLookup\n### Addressing pattern category, If set, the priority is highest\n# nacos.core.member.lookup.type=[file,address-server]\n## Set the cluster list with a configuration file or command-line argument\n# nacos.member.list=192.168.16.101:8847?raft_port=8807,192.168.16.101?raft_port=8808,192.168.16.101:8849?raft_port=8809\n## for AddressServerMemberLookup\n# Maximum number of retries to query the address server upon initialization\n# nacos.core.address-server.retry=5\n## Server domain name address of [address-server] mode\n# address.server.domain=jmenv.tbsite.net\n## Server port of [address-server] mode\n# address.server.port=8080\n## Request address of [address-server] mode\n# address.server.url=/nacos/serverlist\n\n#*************** JRaft Related Configurations ***************#\n\n### Sets the Raft cluster election timeout, default value is 5 second\n# nacos.core.protocol.raft.data.election_timeout_ms=5000\n### Sets the amount of time the Raft snapshot will execute periodically, default is 30 minute\n# nacos.core.protocol.raft.data.snapshot_interval_secs=30\n### raft internal worker threads\n# nacos.core.protocol.raft.data.core_thread_num=8\n### Number of threads required for raft business request processing\n# nacos.core.protocol.raft.data.cli_service_thread_num=4\n### raft linear read strategy. Safe linear reads are used by default, that is, the Leader tenure is confirmed by heartbeat\n# nacos.core.protocol.raft.data.read_index_type=ReadOnlySafe\n### rpc request timeout, default 5 seconds\n# nacos.core.protocol.raft.data.rpc_request_timeout_ms=5000\n\n#*************** Distro Related Configurations ***************#\n\n### Distro data sync delay time, when sync task delayed, task will be merged for same data key. Default 1 second.\n# nacos.core.protocol.distro.data.sync.delayMs=1000\n\n### Distro data sync timeout for one sync data, default 3 seconds.\n# nacos.core.protocol.distro.data.sync.timeoutMs=3000\n\n### Distro data sync retry delay time when sync data failed or timeout, same behavior with delayMs, default 3 seconds.\n# nacos.core.protocol.distro.data.sync.retryDelayMs=3000\n\n### Distro data verify interval time, verify synced data whether expired for a interval. Default 5 seconds.\n# nacos.core.protocol.distro.data.verify.intervalMs=5000\n\n### Distro data verify timeout for one verify, default 3 seconds.\n# nacos.core.protocol.distro.data.verify.timeoutMs=3000\n\n### Distro data load retry delay when load snapshot data failed, default 30 seconds.\n# nacos.core.protocol.distro.data.load.retryDelayMs=30000\n\n### enable to support prometheus service discovery\n#nacos.prometheus.metrics.enabled=true\n\n### Since 2.3\n#*************** Grpc Configurations ***************#\n\n## sdk grpc(between nacos server and client) configuration\n## Sets the maximum message size allowed to be received on the server.\n#nacos.remote.server.grpc.sdk.max-inbound-message-size=10485760\n\n## Sets the time(milliseconds) without read activity before sending a keepalive ping. The typical default is two hours.\n#nacos.remote.server.grpc.sdk.keep-alive-time=7200000\n\n## Sets a time(milliseconds) waiting for read activity after sending a keepalive ping. Defaults to 20 seconds.\n#nacos.remote.server.grpc.sdk.keep-alive-timeout=20000\n\n\n## Sets a time(milliseconds) that specify the most aggressive keep-alive time clients are permitted to configure. The typical default is 5 minutes\n#nacos.remote.server.grpc.sdk.permit-keep-alive-time=300000\n\n## cluster grpc(inside the nacos server) configuration\n#nacos.remote.server.grpc.cluster.max-inbound-message-size=10485760\n\n## Sets the time(milliseconds) without read activity before sending a keepalive ping. The typical default is two hours.\n#nacos.remote.server.grpc.cluster.keep-alive-time=7200000\n\n## Sets a time(milliseconds) waiting for read activity after sending a keepalive ping. Defaults to 20 seconds.\n#nacos.remote.server.grpc.cluster.keep-alive-timeout=20000\n\n## Sets a time(milliseconds) that specify the most aggressive keep-alive time clients are permitted to configure. The typical default is 5 minutes\n#nacos.remote.server.grpc.cluster.permit-keep-alive-time=300000\n~~~\n\n配置完成后就可以在/bin cmd\n\n输入命令 startup.cmd -m standalone 运行就可以了\n","source":"_posts/服务器/Nacos/Nacos开启鉴权配置.md","raw":"---\ntitle: Nacos开启鉴权配置\ncategories:\n  - 服务器\ntags:\n  - Nacos\nabbrlink: c77\ndate: 2024-12-30 08:56:31\n---\n# Nacos开启鉴权配置\n\n## 一、更改application.properties中的配置\n\n路径：你的nacos的位置下 confg/application.properties\n\n## 二、修改配置\n\n开启鉴权之前，application.properties中的配置信息为：\n\n~~~properties\n### If turn on auth system:\nnacos.core.auth.enabled=false\n~~~\n\n开启鉴权之后，application.properties中的配置信息为：\n\n~~~properties\n### If turn on auth system:\nnacos.core.auth.system.type=nacos\nnacos.core.auth.enabled=true\n~~~\n\n在2.2.0.1版本后，社区发布版本将移除以文档如下值作为默认值，需要自行填充，否则无法启动节点\n\n~~~properties\n### The default token(Base64 String):\nnacos.core.auth.default.token.secret.key=SecretKey012345678901234567890123456789012345678901234567890123456789\n\n### 2.1.0 版本后\nnacos.core.auth.plugin.nacos.token.secret.key=SecretKey012345678901234567890123456789012345678901234567890123456789\n~~~\n\n自定义密钥时，推荐将配置项设置为Base64编码的字符串，且原始密钥长度不得低于32字符\n\n~~~pro\n### The default token(Base64 String):\nnacos.core.auth.default.token.secret.key=VGhpc0lzTXlDdXN0b21TZWNyZXRLZXkwMTIzNDU2Nzg=\n\n### 2.1.0 版本后\nnacos.core.auth.plugin.nacos.token.secret.key=VGhpc0lzTXlDdXN0b21TZWNyZXRLZXkwMTIzNDU2Nzg=\n~~~\n\nnacos.core.auth.server.identity.key和nacos.core.auth.server.identity.value必须要有值\n\n~~~properties\nnacos.core.auth.server.identity.key=example\nnacos.core.auth.server.identity.value=example\n~~~\n\n那么我的全部配置如下：\n\n~~~properties\n#\n# Copyright 1999-2021 Alibaba Group Holding Ltd.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n#*************** Spring Boot Related Configurations ***************#\n### Default web context path:\nserver.servlet.contextPath=/nacos\n### Include message field\nserver.error.include-message=ALWAYS\n### Default web server port:\nserver.port=8848\n\n#*************** Network Related Configurations ***************#\n### If prefer hostname over ip for Nacos server addresses in cluster.conf:\n# nacos.inetutils.prefer-hostname-over-ip=false\n\n### Specify local server's IP:\n# nacos.inetutils.ip-address=\n\n\n#*************** Config Module Related Configurations ***************#\n### If use MySQL as datasource:\n### Deprecated configuration property, it is recommended to use `spring.sql.init.platform` replaced.\n spring.datasource.platform=mysql\n# spring.sql.init.platform=mysql\n\n### Count of DB:\n db.num=1\n\n### Connect URL of DB:\n db.url.0=jdbc:mysql://127.0.0.1:3306/nacos?characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true&useUnicode=true&useSSL=false&serverTimezone=UTC\n db.user.0=root\n db.password.0=123456\n\n### Connection pool configuration: hikariCP\ndb.pool.config.connectionTimeout=30000\ndb.pool.config.validationTimeout=10000\ndb.pool.config.maximumPoolSize=20\ndb.pool.config.minimumIdle=2\n\n#*************** Naming Module Related Configurations ***************#\n\n### If enable data warmup. If set to false, the server would accept request without local data preparation:\n# nacos.naming.data.warmup=true\n\n### If enable the instance auto expiration, kind like of health check of instance:\n# nacos.naming.expireInstance=true\n\n### Add in 2.0.0\n### The interval to clean empty service, unit: milliseconds.\n# nacos.naming.clean.empty-service.interval=60000\n\n### The expired time to clean empty service, unit: milliseconds.\n# nacos.naming.clean.empty-service.expired-time=60000\n\n### The interval to clean expired metadata, unit: milliseconds.\n# nacos.naming.clean.expired-metadata.interval=5000\n\n### The expired time to clean metadata, unit: milliseconds.\n# nacos.naming.clean.expired-metadata.expired-time=60000\n\n### The delay time before push task to execute from service changed, unit: milliseconds.\n# nacos.naming.push.pushTaskDelay=500\n\n### The timeout for push task execute, unit: milliseconds.\n# nacos.naming.push.pushTaskTimeout=5000\n\n### The delay time for retrying failed push task, unit: milliseconds.\n# nacos.naming.push.pushTaskRetryDelay=1000\n\n### Since 2.0.3\n### The expired time for inactive client, unit: milliseconds.\n# nacos.naming.client.expired.time=180000\n\n#*************** CMDB Module Related Configurations ***************#\n### The interval to dump external CMDB in seconds:\n# nacos.cmdb.dumpTaskInterval=3600\n\n### The interval of polling data change event in seconds:\n# nacos.cmdb.eventTaskInterval=10\n\n### The interval of loading labels in seconds:\n# nacos.cmdb.labelTaskInterval=300\n\n### If turn on data loading task:\n# nacos.cmdb.loadDataAtStart=false\n\n\n#*************** Metrics Related Configurations ***************#\n### Metrics for prometheus\n#management.endpoints.web.exposure.include=*\n\n### Metrics for elastic search\nmanagement.metrics.export.elastic.enabled=false\n#management.metrics.export.elastic.host=http://localhost:9200\n\n### Metrics for influx\nmanagement.metrics.export.influx.enabled=false\n#management.metrics.export.influx.db=springboot\n#management.metrics.export.influx.uri=http://localhost:8086\n#management.metrics.export.influx.auto-create-db=true\n#management.metrics.export.influx.consistency=one\n#management.metrics.export.influx.compressed=true\n\n#*************** Access Log Related Configurations ***************#\n### If turn on the access log:\nserver.tomcat.accesslog.enabled=true\n\n### The access log pattern:\nserver.tomcat.accesslog.pattern=%h %l %u %t \"%r\" %s %b %D %{User-Agent}i %{Request-Source}i\n\n### The directory of access log:\nserver.tomcat.basedir=file:.\n\n#*************** Access Control Related Configurations ***************#\n### If enable spring security, this option is deprecated in 1.2.0:\n#spring.security.enabled=false\n\n### The ignore urls of auth\nnacos.security.ignore.urls=/,/error,/**/*.css,/**/*.js,/**/*.html,/**/*.map,/**/*.svg,/**/*.png,/**/*.ico,/console-ui/public/**,/v1/auth/**,/v1/console/health/**,/actuator/**,/v1/console/server/**\n\n### The auth system to use, currently only 'nacos' and 'ldap' is supported:\nnacos.core.auth.system.type=nacos\n\n### If turn on auth system:\nnacos.core.auth.enabled=true\n\n### Turn on/off caching of auth information. By turning on this switch, the update of auth information would have a 15 seconds delay.\nnacos.core.auth.caching.enabled=true\n\n### Since 1.4.1, Turn on/off white auth for user-agent: nacos-server, only for upgrade from old version.\nnacos.core.auth.enable.userAgentAuthWhite=false\n\n### Since 1.4.1, worked when nacos.core.auth.enabled=true and nacos.core.auth.enable.userAgentAuthWhite=false.\n### The two properties is the white list for auth and used by identity the request from other server.\nnacos.core.auth.server.identity.key=example\nnacos.core.auth.server.identity.value=example\n\n### worked when nacos.core.auth.system.type=nacos\n### The token expiration in seconds:\nnacos.core.auth.plugin.nacos.token.cache.enable=false\nnacos.core.auth.plugin.nacos.token.expire.seconds=18000\n### The default token (Base64 String):\nnacos.core.auth.plugin.nacos.token.secret.key=VGhpc0lzTXlDdXN0b21TZWNyZXRLZXkwMTIzNDU2Nzg=\n\n### worked when nacos.core.auth.system.type=ldap，{0} is Placeholder,replace login username\n#nacos.core.auth.ldap.url=ldap://localhost:389\n#nacos.core.auth.ldap.basedc=dc=example,dc=org\n#nacos.core.auth.ldap.userDn=cn=admin,${nacos.core.auth.ldap.basedc}\n#nacos.core.auth.ldap.password=admin\n#nacos.core.auth.ldap.userdn=cn={0},dc=example,dc=org\n#nacos.core.auth.ldap.filter.prefix=uid\n#nacos.core.auth.ldap.case.sensitive=true\n\n\n#*************** Istio Related Configurations ***************#\n### If turn on the MCP server:\nnacos.istio.mcp.server.enabled=false\n\n#*************** Core Related Configurations ***************#\n\n### set the WorkerID manually\n# nacos.core.snowflake.worker-id=\n\n### Member-MetaData\n# nacos.core.member.meta.site=\n# nacos.core.member.meta.adweight=\n# nacos.core.member.meta.weight=\n\n### MemberLookup\n### Addressing pattern category, If set, the priority is highest\n# nacos.core.member.lookup.type=[file,address-server]\n## Set the cluster list with a configuration file or command-line argument\n# nacos.member.list=192.168.16.101:8847?raft_port=8807,192.168.16.101?raft_port=8808,192.168.16.101:8849?raft_port=8809\n## for AddressServerMemberLookup\n# Maximum number of retries to query the address server upon initialization\n# nacos.core.address-server.retry=5\n## Server domain name address of [address-server] mode\n# address.server.domain=jmenv.tbsite.net\n## Server port of [address-server] mode\n# address.server.port=8080\n## Request address of [address-server] mode\n# address.server.url=/nacos/serverlist\n\n#*************** JRaft Related Configurations ***************#\n\n### Sets the Raft cluster election timeout, default value is 5 second\n# nacos.core.protocol.raft.data.election_timeout_ms=5000\n### Sets the amount of time the Raft snapshot will execute periodically, default is 30 minute\n# nacos.core.protocol.raft.data.snapshot_interval_secs=30\n### raft internal worker threads\n# nacos.core.protocol.raft.data.core_thread_num=8\n### Number of threads required for raft business request processing\n# nacos.core.protocol.raft.data.cli_service_thread_num=4\n### raft linear read strategy. Safe linear reads are used by default, that is, the Leader tenure is confirmed by heartbeat\n# nacos.core.protocol.raft.data.read_index_type=ReadOnlySafe\n### rpc request timeout, default 5 seconds\n# nacos.core.protocol.raft.data.rpc_request_timeout_ms=5000\n\n#*************** Distro Related Configurations ***************#\n\n### Distro data sync delay time, when sync task delayed, task will be merged for same data key. Default 1 second.\n# nacos.core.protocol.distro.data.sync.delayMs=1000\n\n### Distro data sync timeout for one sync data, default 3 seconds.\n# nacos.core.protocol.distro.data.sync.timeoutMs=3000\n\n### Distro data sync retry delay time when sync data failed or timeout, same behavior with delayMs, default 3 seconds.\n# nacos.core.protocol.distro.data.sync.retryDelayMs=3000\n\n### Distro data verify interval time, verify synced data whether expired for a interval. Default 5 seconds.\n# nacos.core.protocol.distro.data.verify.intervalMs=5000\n\n### Distro data verify timeout for one verify, default 3 seconds.\n# nacos.core.protocol.distro.data.verify.timeoutMs=3000\n\n### Distro data load retry delay when load snapshot data failed, default 30 seconds.\n# nacos.core.protocol.distro.data.load.retryDelayMs=30000\n\n### enable to support prometheus service discovery\n#nacos.prometheus.metrics.enabled=true\n\n### Since 2.3\n#*************** Grpc Configurations ***************#\n\n## sdk grpc(between nacos server and client) configuration\n## Sets the maximum message size allowed to be received on the server.\n#nacos.remote.server.grpc.sdk.max-inbound-message-size=10485760\n\n## Sets the time(milliseconds) without read activity before sending a keepalive ping. The typical default is two hours.\n#nacos.remote.server.grpc.sdk.keep-alive-time=7200000\n\n## Sets a time(milliseconds) waiting for read activity after sending a keepalive ping. Defaults to 20 seconds.\n#nacos.remote.server.grpc.sdk.keep-alive-timeout=20000\n\n\n## Sets a time(milliseconds) that specify the most aggressive keep-alive time clients are permitted to configure. The typical default is 5 minutes\n#nacos.remote.server.grpc.sdk.permit-keep-alive-time=300000\n\n## cluster grpc(inside the nacos server) configuration\n#nacos.remote.server.grpc.cluster.max-inbound-message-size=10485760\n\n## Sets the time(milliseconds) without read activity before sending a keepalive ping. The typical default is two hours.\n#nacos.remote.server.grpc.cluster.keep-alive-time=7200000\n\n## Sets a time(milliseconds) waiting for read activity after sending a keepalive ping. Defaults to 20 seconds.\n#nacos.remote.server.grpc.cluster.keep-alive-timeout=20000\n\n## Sets a time(milliseconds) that specify the most aggressive keep-alive time clients are permitted to configure. The typical default is 5 minutes\n#nacos.remote.server.grpc.cluster.permit-keep-alive-time=300000\n~~~\n\n配置完成后就可以在/bin cmd\n\n输入命令 startup.cmd -m standalone 运行就可以了\n","slug":"服务器/Nacos/Nacos开启鉴权配置","published":1,"updated":"2025-06-02T07:27:51.001Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86x2004zzcqb1dpudpu0","content":"<h1 id=\"Nacos开启鉴权配置\"><a href=\"#Nacos开启鉴权配置\" class=\"headerlink\" title=\"Nacos开启鉴权配置\"></a>Nacos开启鉴权配置</h1><h2 id=\"一、更改application-properties中的配置\"><a href=\"#一、更改application-properties中的配置\" class=\"headerlink\" title=\"一、更改application.properties中的配置\"></a>一、更改application.properties中的配置</h2><p>路径：你的nacos的位置下 confg&#x2F;application.properties</p>\n<h2 id=\"二、修改配置\"><a href=\"#二、修改配置\" class=\"headerlink\" title=\"二、修改配置\"></a>二、修改配置</h2><p>开启鉴权之前，application.properties中的配置信息为：</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### If turn on auth system:</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.enabled</span>=<span class=\"string\">false</span></span><br></pre></td></tr></table></figure>\n\n<p>开启鉴权之后，application.properties中的配置信息为：</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### If turn on auth system:</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.system.type</span>=<span class=\"string\">nacos</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.enabled</span>=<span class=\"string\">true</span></span><br></pre></td></tr></table></figure>\n\n<p>在2.2.0.1版本后，社区发布版本将移除以文档如下值作为默认值，需要自行填充，否则无法启动节点</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### The default token(Base64 String):</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.default.token.secret.key</span>=<span class=\"string\">SecretKey012345678901234567890123456789012345678901234567890123456789</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### 2.1.0 版本后</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.plugin.nacos.token.secret.key</span>=<span class=\"string\">SecretKey012345678901234567890123456789012345678901234567890123456789</span></span><br></pre></td></tr></table></figure>\n\n<p>自定义密钥时，推荐将配置项设置为Base64编码的字符串，且原始密钥长度不得低于32字符</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">### The default token(Base64 String):</span><br><span class=\"line\">nacos.core.auth.default.token.secret.key=VGhpc0lzTXlDdXN0b21TZWNyZXRLZXkwMTIzNDU2Nzg=</span><br><span class=\"line\"></span><br><span class=\"line\">### 2.1.0 版本后</span><br><span class=\"line\">nacos.core.auth.plugin.nacos.token.secret.key=VGhpc0lzTXlDdXN0b21TZWNyZXRLZXkwMTIzNDU2Nzg=</span><br></pre></td></tr></table></figure>\n\n<p>nacos.core.auth.server.identity.key和nacos.core.auth.server.identity.value必须要有值</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">nacos.core.auth.server.identity.key</span>=<span class=\"string\">example</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.server.identity.value</span>=<span class=\"string\">example</span></span><br></pre></td></tr></table></figure>\n\n<p>那么我的全部配置如下：</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Copyright 1999-2021 Alibaba Group Holding Ltd.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span><br><span class=\"line\"><span class=\"comment\"># you may not use this file except in compliance with the License.</span></span><br><span class=\"line\"><span class=\"comment\"># You may obtain a copy of the License at</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#      http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Unless required by applicable law or agreed to in writing, software</span></span><br><span class=\"line\"><span class=\"comment\"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class=\"line\"><span class=\"comment\"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class=\"line\"><span class=\"comment\"># See the License for the specific language governing permissions and</span></span><br><span class=\"line\"><span class=\"comment\"># limitations under the License.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Spring Boot Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\">### Default web context path:</span></span><br><span class=\"line\"><span class=\"attr\">server.servlet.contextPath</span>=<span class=\"string\">/nacos</span></span><br><span class=\"line\"><span class=\"comment\">### Include message field</span></span><br><span class=\"line\"><span class=\"attr\">server.error.include-message</span>=<span class=\"string\">ALWAYS</span></span><br><span class=\"line\"><span class=\"comment\">### Default web server port:</span></span><br><span class=\"line\"><span class=\"attr\">server.port</span>=<span class=\"string\">8848</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Network Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\">### If prefer hostname over ip for Nacos server addresses in cluster.conf:</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.inetutils.prefer-hostname-over-ip=false</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Specify local server&#x27;s IP:</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.inetutils.ip-address=</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Config Module Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\">### If use MySQL as datasource:</span></span><br><span class=\"line\"><span class=\"comment\">### Deprecated configuration property, it is recommended to use `spring.sql.init.platform` replaced.</span></span><br><span class=\"line\"> <span class=\"attr\">spring.datasource.platform</span>=<span class=\"string\">mysql</span></span><br><span class=\"line\"><span class=\"comment\"># spring.sql.init.platform=mysql</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Count of DB:</span></span><br><span class=\"line\"> <span class=\"attr\">db.num</span>=<span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Connect URL of DB:</span></span><br><span class=\"line\"> <span class=\"attr\">db.url.0</span>=<span class=\"string\">jdbc:mysql://127.0.0.1:3306/nacos?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true&amp;useUnicode=true&amp;useSSL=false&amp;serverTimezone=UTC</span></span><br><span class=\"line\"> <span class=\"attr\">db.user.0</span>=<span class=\"string\">root</span></span><br><span class=\"line\"> <span class=\"attr\">db.password.0</span>=<span class=\"string\">123456</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Connection pool configuration: hikariCP</span></span><br><span class=\"line\"><span class=\"attr\">db.pool.config.connectionTimeout</span>=<span class=\"string\">30000</span></span><br><span class=\"line\"><span class=\"attr\">db.pool.config.validationTimeout</span>=<span class=\"string\">10000</span></span><br><span class=\"line\"><span class=\"attr\">db.pool.config.maximumPoolSize</span>=<span class=\"string\">20</span></span><br><span class=\"line\"><span class=\"attr\">db.pool.config.minimumIdle</span>=<span class=\"string\">2</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Naming Module Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### If enable data warmup. If set to false, the server would accept request without local data preparation:</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.data.warmup=true</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### If enable the instance auto expiration, kind like of health check of instance:</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.expireInstance=true</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Add in 2.0.0</span></span><br><span class=\"line\"><span class=\"comment\">### The interval to clean empty service, unit: milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.clean.empty-service.interval=60000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The expired time to clean empty service, unit: milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.clean.empty-service.expired-time=60000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The interval to clean expired metadata, unit: milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.clean.expired-metadata.interval=5000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The expired time to clean metadata, unit: milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.clean.expired-metadata.expired-time=60000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The delay time before push task to execute from service changed, unit: milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.push.pushTaskDelay=500</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The timeout for push task execute, unit: milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.push.pushTaskTimeout=5000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The delay time for retrying failed push task, unit: milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.push.pushTaskRetryDelay=1000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Since 2.0.3</span></span><br><span class=\"line\"><span class=\"comment\">### The expired time for inactive client, unit: milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.client.expired.time=180000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** CMDB Module Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\">### The interval to dump external CMDB in seconds:</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.cmdb.dumpTaskInterval=3600</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The interval of polling data change event in seconds:</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.cmdb.eventTaskInterval=10</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The interval of loading labels in seconds:</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.cmdb.labelTaskInterval=300</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### If turn on data loading task:</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.cmdb.loadDataAtStart=false</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Metrics Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\">### Metrics for prometheus</span></span><br><span class=\"line\"><span class=\"comment\">#management.endpoints.web.exposure.include=*</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Metrics for elastic search</span></span><br><span class=\"line\"><span class=\"attr\">management.metrics.export.elastic.enabled</span>=<span class=\"string\">false</span></span><br><span class=\"line\"><span class=\"comment\">#management.metrics.export.elastic.host=http://localhost:9200</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Metrics for influx</span></span><br><span class=\"line\"><span class=\"attr\">management.metrics.export.influx.enabled</span>=<span class=\"string\">false</span></span><br><span class=\"line\"><span class=\"comment\">#management.metrics.export.influx.db=springboot</span></span><br><span class=\"line\"><span class=\"comment\">#management.metrics.export.influx.uri=http://localhost:8086</span></span><br><span class=\"line\"><span class=\"comment\">#management.metrics.export.influx.auto-create-db=true</span></span><br><span class=\"line\"><span class=\"comment\">#management.metrics.export.influx.consistency=one</span></span><br><span class=\"line\"><span class=\"comment\">#management.metrics.export.influx.compressed=true</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Access Log Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\">### If turn on the access log:</span></span><br><span class=\"line\"><span class=\"attr\">server.tomcat.accesslog.enabled</span>=<span class=\"string\">true</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The access log pattern:</span></span><br><span class=\"line\"><span class=\"attr\">server.tomcat.accesslog.pattern</span>=<span class=\"string\">%h %l %u %t &quot;%r&quot; %s %b %D %&#123;User-Agent&#125;i %&#123;Request-Source&#125;i</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The directory of access log:</span></span><br><span class=\"line\"><span class=\"attr\">server.tomcat.basedir</span>=<span class=\"string\">file:.</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Access Control Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\">### If enable spring security, this option is deprecated in 1.2.0:</span></span><br><span class=\"line\"><span class=\"comment\">#spring.security.enabled=false</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The ignore urls of auth</span></span><br><span class=\"line\"><span class=\"attr\">nacos.security.ignore.urls</span>=<span class=\"string\">/,/error,/**/*.css,/**/*.js,/**/*.html,/**/*.map,/**/*.svg,/**/*.png,/**/*.ico,/console-ui/public/**,/v1/auth/**,/v1/console/health/**,/actuator/**,/v1/console/server/**</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The auth system to use, currently only &#x27;nacos&#x27; and &#x27;ldap&#x27; is supported:</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.system.type</span>=<span class=\"string\">nacos</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### If turn on auth system:</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.enabled</span>=<span class=\"string\">true</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Turn on/off caching of auth information. By turning on this switch, the update of auth information would have a 15 seconds delay.</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.caching.enabled</span>=<span class=\"string\">true</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Since 1.4.1, Turn on/off white auth for user-agent: nacos-server, only for upgrade from old version.</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.enable.userAgentAuthWhite</span>=<span class=\"string\">false</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Since 1.4.1, worked when nacos.core.auth.enabled=true and nacos.core.auth.enable.userAgentAuthWhite=false.</span></span><br><span class=\"line\"><span class=\"comment\">### The two properties is the white list for auth and used by identity the request from other server.</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.server.identity.key</span>=<span class=\"string\">example</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.server.identity.value</span>=<span class=\"string\">example</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### worked when nacos.core.auth.system.type=nacos</span></span><br><span class=\"line\"><span class=\"comment\">### The token expiration in seconds:</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.plugin.nacos.token.cache.enable</span>=<span class=\"string\">false</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.plugin.nacos.token.expire.seconds</span>=<span class=\"string\">18000</span></span><br><span class=\"line\"><span class=\"comment\">### The default token (Base64 String):</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.plugin.nacos.token.secret.key</span>=<span class=\"string\">VGhpc0lzTXlDdXN0b21TZWNyZXRLZXkwMTIzNDU2Nzg=</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### worked when nacos.core.auth.system.type=ldap，&#123;0&#125; is Placeholder,replace login username</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.core.auth.ldap.url=ldap://localhost:389</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.core.auth.ldap.basedc=dc=example,dc=org</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.core.auth.ldap.userDn=cn=admin,$&#123;nacos.core.auth.ldap.basedc&#125;</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.core.auth.ldap.password=admin</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.core.auth.ldap.userdn=cn=&#123;0&#125;,dc=example,dc=org</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.core.auth.ldap.filter.prefix=uid</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.core.auth.ldap.case.sensitive=true</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Istio Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\">### If turn on the MCP server:</span></span><br><span class=\"line\"><span class=\"attr\">nacos.istio.mcp.server.enabled</span>=<span class=\"string\">false</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Core Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### set the WorkerID manually</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.snowflake.worker-id=</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Member-MetaData</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.member.meta.site=</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.member.meta.adweight=</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.member.meta.weight=</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### MemberLookup</span></span><br><span class=\"line\"><span class=\"comment\">### Addressing pattern category, If set, the priority is highest</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.member.lookup.type=[file,address-server]</span></span><br><span class=\"line\"><span class=\"comment\">## Set the cluster list with a configuration file or command-line argument</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.member.list=192.168.16.101:8847?raft_port=8807,192.168.16.101?raft_port=8808,192.168.16.101:8849?raft_port=8809</span></span><br><span class=\"line\"><span class=\"comment\">## for AddressServerMemberLookup</span></span><br><span class=\"line\"><span class=\"comment\"># Maximum number of retries to query the address server upon initialization</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.address-server.retry=5</span></span><br><span class=\"line\"><span class=\"comment\">## Server domain name address of [address-server] mode</span></span><br><span class=\"line\"><span class=\"comment\"># address.server.domain=jmenv.tbsite.net</span></span><br><span class=\"line\"><span class=\"comment\">## Server port of [address-server] mode</span></span><br><span class=\"line\"><span class=\"comment\"># address.server.port=8080</span></span><br><span class=\"line\"><span class=\"comment\">## Request address of [address-server] mode</span></span><br><span class=\"line\"><span class=\"comment\"># address.server.url=/nacos/serverlist</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** JRaft Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Sets the Raft cluster election timeout, default value is 5 second</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.raft.data.election_timeout_ms=5000</span></span><br><span class=\"line\"><span class=\"comment\">### Sets the amount of time the Raft snapshot will execute periodically, default is 30 minute</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.raft.data.snapshot_interval_secs=30</span></span><br><span class=\"line\"><span class=\"comment\">### raft internal worker threads</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.raft.data.core_thread_num=8</span></span><br><span class=\"line\"><span class=\"comment\">### Number of threads required for raft business request processing</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.raft.data.cli_service_thread_num=4</span></span><br><span class=\"line\"><span class=\"comment\">### raft linear read strategy. Safe linear reads are used by default, that is, the Leader tenure is confirmed by heartbeat</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.raft.data.read_index_type=ReadOnlySafe</span></span><br><span class=\"line\"><span class=\"comment\">### rpc request timeout, default 5 seconds</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.raft.data.rpc_request_timeout_ms=5000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Distro Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Distro data sync delay time, when sync task delayed, task will be merged for same data key. Default 1 second.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.distro.data.sync.delayMs=1000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Distro data sync timeout for one sync data, default 3 seconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.distro.data.sync.timeoutMs=3000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Distro data sync retry delay time when sync data failed or timeout, same behavior with delayMs, default 3 seconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.distro.data.sync.retryDelayMs=3000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Distro data verify interval time, verify synced data whether expired for a interval. Default 5 seconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.distro.data.verify.intervalMs=5000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Distro data verify timeout for one verify, default 3 seconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.distro.data.verify.timeoutMs=3000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Distro data load retry delay when load snapshot data failed, default 30 seconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.distro.data.load.retryDelayMs=30000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### enable to support prometheus service discovery</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.prometheus.metrics.enabled=true</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Since 2.3</span></span><br><span class=\"line\"><span class=\"comment\">#*************** Grpc Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">## sdk grpc(between nacos server and client) configuration</span></span><br><span class=\"line\"><span class=\"comment\">## Sets the maximum message size allowed to be received on the server.</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.remote.server.grpc.sdk.max-inbound-message-size=10485760</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">## Sets the time(milliseconds) without read activity before sending a keepalive ping. The typical default is two hours.</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.remote.server.grpc.sdk.keep-alive-time=7200000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">## Sets a time(milliseconds) waiting for read activity after sending a keepalive ping. Defaults to 20 seconds.</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.remote.server.grpc.sdk.keep-alive-timeout=20000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">## Sets a time(milliseconds) that specify the most aggressive keep-alive time clients are permitted to configure. The typical default is 5 minutes</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.remote.server.grpc.sdk.permit-keep-alive-time=300000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">## cluster grpc(inside the nacos server) configuration</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.remote.server.grpc.cluster.max-inbound-message-size=10485760</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">## Sets the time(milliseconds) without read activity before sending a keepalive ping. The typical default is two hours.</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.remote.server.grpc.cluster.keep-alive-time=7200000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">## Sets a time(milliseconds) waiting for read activity after sending a keepalive ping. Defaults to 20 seconds.</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.remote.server.grpc.cluster.keep-alive-timeout=20000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">## Sets a time(milliseconds) that specify the most aggressive keep-alive time clients are permitted to configure. The typical default is 5 minutes</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.remote.server.grpc.cluster.permit-keep-alive-time=300000</span></span><br></pre></td></tr></table></figure>\n\n<p>配置完成后就可以在&#x2F;bin cmd</p>\n<p>输入命令 startup.cmd -m standalone 运行就可以了</p>\n","cover":"https://t.alcy.cc/pc?_r_=1c65a547-76a0-a99a-5573-1c93105db22a","cover_type":"img","excerpt":"","more":"<h1 id=\"Nacos开启鉴权配置\"><a href=\"#Nacos开启鉴权配置\" class=\"headerlink\" title=\"Nacos开启鉴权配置\"></a>Nacos开启鉴权配置</h1><h2 id=\"一、更改application-properties中的配置\"><a href=\"#一、更改application-properties中的配置\" class=\"headerlink\" title=\"一、更改application.properties中的配置\"></a>一、更改application.properties中的配置</h2><p>路径：你的nacos的位置下 confg&#x2F;application.properties</p>\n<h2 id=\"二、修改配置\"><a href=\"#二、修改配置\" class=\"headerlink\" title=\"二、修改配置\"></a>二、修改配置</h2><p>开启鉴权之前，application.properties中的配置信息为：</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### If turn on auth system:</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.enabled</span>=<span class=\"string\">false</span></span><br></pre></td></tr></table></figure>\n\n<p>开启鉴权之后，application.properties中的配置信息为：</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### If turn on auth system:</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.system.type</span>=<span class=\"string\">nacos</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.enabled</span>=<span class=\"string\">true</span></span><br></pre></td></tr></table></figure>\n\n<p>在2.2.0.1版本后，社区发布版本将移除以文档如下值作为默认值，需要自行填充，否则无法启动节点</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### The default token(Base64 String):</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.default.token.secret.key</span>=<span class=\"string\">SecretKey012345678901234567890123456789012345678901234567890123456789</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### 2.1.0 版本后</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.plugin.nacos.token.secret.key</span>=<span class=\"string\">SecretKey012345678901234567890123456789012345678901234567890123456789</span></span><br></pre></td></tr></table></figure>\n\n<p>自定义密钥时，推荐将配置项设置为Base64编码的字符串，且原始密钥长度不得低于32字符</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">### The default token(Base64 String):</span><br><span class=\"line\">nacos.core.auth.default.token.secret.key=VGhpc0lzTXlDdXN0b21TZWNyZXRLZXkwMTIzNDU2Nzg=</span><br><span class=\"line\"></span><br><span class=\"line\">### 2.1.0 版本后</span><br><span class=\"line\">nacos.core.auth.plugin.nacos.token.secret.key=VGhpc0lzTXlDdXN0b21TZWNyZXRLZXkwMTIzNDU2Nzg=</span><br></pre></td></tr></table></figure>\n\n<p>nacos.core.auth.server.identity.key和nacos.core.auth.server.identity.value必须要有值</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">nacos.core.auth.server.identity.key</span>=<span class=\"string\">example</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.server.identity.value</span>=<span class=\"string\">example</span></span><br></pre></td></tr></table></figure>\n\n<p>那么我的全部配置如下：</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Copyright 1999-2021 Alibaba Group Holding Ltd.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span><br><span class=\"line\"><span class=\"comment\"># you may not use this file except in compliance with the License.</span></span><br><span class=\"line\"><span class=\"comment\"># You may obtain a copy of the License at</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#      http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Unless required by applicable law or agreed to in writing, software</span></span><br><span class=\"line\"><span class=\"comment\"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class=\"line\"><span class=\"comment\"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class=\"line\"><span class=\"comment\"># See the License for the specific language governing permissions and</span></span><br><span class=\"line\"><span class=\"comment\"># limitations under the License.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Spring Boot Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\">### Default web context path:</span></span><br><span class=\"line\"><span class=\"attr\">server.servlet.contextPath</span>=<span class=\"string\">/nacos</span></span><br><span class=\"line\"><span class=\"comment\">### Include message field</span></span><br><span class=\"line\"><span class=\"attr\">server.error.include-message</span>=<span class=\"string\">ALWAYS</span></span><br><span class=\"line\"><span class=\"comment\">### Default web server port:</span></span><br><span class=\"line\"><span class=\"attr\">server.port</span>=<span class=\"string\">8848</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Network Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\">### If prefer hostname over ip for Nacos server addresses in cluster.conf:</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.inetutils.prefer-hostname-over-ip=false</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Specify local server&#x27;s IP:</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.inetutils.ip-address=</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Config Module Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\">### If use MySQL as datasource:</span></span><br><span class=\"line\"><span class=\"comment\">### Deprecated configuration property, it is recommended to use `spring.sql.init.platform` replaced.</span></span><br><span class=\"line\"> <span class=\"attr\">spring.datasource.platform</span>=<span class=\"string\">mysql</span></span><br><span class=\"line\"><span class=\"comment\"># spring.sql.init.platform=mysql</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Count of DB:</span></span><br><span class=\"line\"> <span class=\"attr\">db.num</span>=<span class=\"string\">1</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Connect URL of DB:</span></span><br><span class=\"line\"> <span class=\"attr\">db.url.0</span>=<span class=\"string\">jdbc:mysql://127.0.0.1:3306/nacos?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true&amp;useUnicode=true&amp;useSSL=false&amp;serverTimezone=UTC</span></span><br><span class=\"line\"> <span class=\"attr\">db.user.0</span>=<span class=\"string\">root</span></span><br><span class=\"line\"> <span class=\"attr\">db.password.0</span>=<span class=\"string\">123456</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Connection pool configuration: hikariCP</span></span><br><span class=\"line\"><span class=\"attr\">db.pool.config.connectionTimeout</span>=<span class=\"string\">30000</span></span><br><span class=\"line\"><span class=\"attr\">db.pool.config.validationTimeout</span>=<span class=\"string\">10000</span></span><br><span class=\"line\"><span class=\"attr\">db.pool.config.maximumPoolSize</span>=<span class=\"string\">20</span></span><br><span class=\"line\"><span class=\"attr\">db.pool.config.minimumIdle</span>=<span class=\"string\">2</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Naming Module Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### If enable data warmup. If set to false, the server would accept request without local data preparation:</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.data.warmup=true</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### If enable the instance auto expiration, kind like of health check of instance:</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.expireInstance=true</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Add in 2.0.0</span></span><br><span class=\"line\"><span class=\"comment\">### The interval to clean empty service, unit: milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.clean.empty-service.interval=60000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The expired time to clean empty service, unit: milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.clean.empty-service.expired-time=60000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The interval to clean expired metadata, unit: milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.clean.expired-metadata.interval=5000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The expired time to clean metadata, unit: milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.clean.expired-metadata.expired-time=60000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The delay time before push task to execute from service changed, unit: milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.push.pushTaskDelay=500</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The timeout for push task execute, unit: milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.push.pushTaskTimeout=5000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The delay time for retrying failed push task, unit: milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.push.pushTaskRetryDelay=1000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Since 2.0.3</span></span><br><span class=\"line\"><span class=\"comment\">### The expired time for inactive client, unit: milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.naming.client.expired.time=180000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** CMDB Module Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\">### The interval to dump external CMDB in seconds:</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.cmdb.dumpTaskInterval=3600</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The interval of polling data change event in seconds:</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.cmdb.eventTaskInterval=10</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The interval of loading labels in seconds:</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.cmdb.labelTaskInterval=300</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### If turn on data loading task:</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.cmdb.loadDataAtStart=false</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Metrics Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\">### Metrics for prometheus</span></span><br><span class=\"line\"><span class=\"comment\">#management.endpoints.web.exposure.include=*</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Metrics for elastic search</span></span><br><span class=\"line\"><span class=\"attr\">management.metrics.export.elastic.enabled</span>=<span class=\"string\">false</span></span><br><span class=\"line\"><span class=\"comment\">#management.metrics.export.elastic.host=http://localhost:9200</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Metrics for influx</span></span><br><span class=\"line\"><span class=\"attr\">management.metrics.export.influx.enabled</span>=<span class=\"string\">false</span></span><br><span class=\"line\"><span class=\"comment\">#management.metrics.export.influx.db=springboot</span></span><br><span class=\"line\"><span class=\"comment\">#management.metrics.export.influx.uri=http://localhost:8086</span></span><br><span class=\"line\"><span class=\"comment\">#management.metrics.export.influx.auto-create-db=true</span></span><br><span class=\"line\"><span class=\"comment\">#management.metrics.export.influx.consistency=one</span></span><br><span class=\"line\"><span class=\"comment\">#management.metrics.export.influx.compressed=true</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Access Log Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\">### If turn on the access log:</span></span><br><span class=\"line\"><span class=\"attr\">server.tomcat.accesslog.enabled</span>=<span class=\"string\">true</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The access log pattern:</span></span><br><span class=\"line\"><span class=\"attr\">server.tomcat.accesslog.pattern</span>=<span class=\"string\">%h %l %u %t &quot;%r&quot; %s %b %D %&#123;User-Agent&#125;i %&#123;Request-Source&#125;i</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The directory of access log:</span></span><br><span class=\"line\"><span class=\"attr\">server.tomcat.basedir</span>=<span class=\"string\">file:.</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Access Control Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\">### If enable spring security, this option is deprecated in 1.2.0:</span></span><br><span class=\"line\"><span class=\"comment\">#spring.security.enabled=false</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The ignore urls of auth</span></span><br><span class=\"line\"><span class=\"attr\">nacos.security.ignore.urls</span>=<span class=\"string\">/,/error,/**/*.css,/**/*.js,/**/*.html,/**/*.map,/**/*.svg,/**/*.png,/**/*.ico,/console-ui/public/**,/v1/auth/**,/v1/console/health/**,/actuator/**,/v1/console/server/**</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### The auth system to use, currently only &#x27;nacos&#x27; and &#x27;ldap&#x27; is supported:</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.system.type</span>=<span class=\"string\">nacos</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### If turn on auth system:</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.enabled</span>=<span class=\"string\">true</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Turn on/off caching of auth information. By turning on this switch, the update of auth information would have a 15 seconds delay.</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.caching.enabled</span>=<span class=\"string\">true</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Since 1.4.1, Turn on/off white auth for user-agent: nacos-server, only for upgrade from old version.</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.enable.userAgentAuthWhite</span>=<span class=\"string\">false</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Since 1.4.1, worked when nacos.core.auth.enabled=true and nacos.core.auth.enable.userAgentAuthWhite=false.</span></span><br><span class=\"line\"><span class=\"comment\">### The two properties is the white list for auth and used by identity the request from other server.</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.server.identity.key</span>=<span class=\"string\">example</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.server.identity.value</span>=<span class=\"string\">example</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### worked when nacos.core.auth.system.type=nacos</span></span><br><span class=\"line\"><span class=\"comment\">### The token expiration in seconds:</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.plugin.nacos.token.cache.enable</span>=<span class=\"string\">false</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.plugin.nacos.token.expire.seconds</span>=<span class=\"string\">18000</span></span><br><span class=\"line\"><span class=\"comment\">### The default token (Base64 String):</span></span><br><span class=\"line\"><span class=\"attr\">nacos.core.auth.plugin.nacos.token.secret.key</span>=<span class=\"string\">VGhpc0lzTXlDdXN0b21TZWNyZXRLZXkwMTIzNDU2Nzg=</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### worked when nacos.core.auth.system.type=ldap，&#123;0&#125; is Placeholder,replace login username</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.core.auth.ldap.url=ldap://localhost:389</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.core.auth.ldap.basedc=dc=example,dc=org</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.core.auth.ldap.userDn=cn=admin,$&#123;nacos.core.auth.ldap.basedc&#125;</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.core.auth.ldap.password=admin</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.core.auth.ldap.userdn=cn=&#123;0&#125;,dc=example,dc=org</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.core.auth.ldap.filter.prefix=uid</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.core.auth.ldap.case.sensitive=true</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Istio Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\">### If turn on the MCP server:</span></span><br><span class=\"line\"><span class=\"attr\">nacos.istio.mcp.server.enabled</span>=<span class=\"string\">false</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Core Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### set the WorkerID manually</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.snowflake.worker-id=</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Member-MetaData</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.member.meta.site=</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.member.meta.adweight=</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.member.meta.weight=</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### MemberLookup</span></span><br><span class=\"line\"><span class=\"comment\">### Addressing pattern category, If set, the priority is highest</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.member.lookup.type=[file,address-server]</span></span><br><span class=\"line\"><span class=\"comment\">## Set the cluster list with a configuration file or command-line argument</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.member.list=192.168.16.101:8847?raft_port=8807,192.168.16.101?raft_port=8808,192.168.16.101:8849?raft_port=8809</span></span><br><span class=\"line\"><span class=\"comment\">## for AddressServerMemberLookup</span></span><br><span class=\"line\"><span class=\"comment\"># Maximum number of retries to query the address server upon initialization</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.address-server.retry=5</span></span><br><span class=\"line\"><span class=\"comment\">## Server domain name address of [address-server] mode</span></span><br><span class=\"line\"><span class=\"comment\"># address.server.domain=jmenv.tbsite.net</span></span><br><span class=\"line\"><span class=\"comment\">## Server port of [address-server] mode</span></span><br><span class=\"line\"><span class=\"comment\"># address.server.port=8080</span></span><br><span class=\"line\"><span class=\"comment\">## Request address of [address-server] mode</span></span><br><span class=\"line\"><span class=\"comment\"># address.server.url=/nacos/serverlist</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** JRaft Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Sets the Raft cluster election timeout, default value is 5 second</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.raft.data.election_timeout_ms=5000</span></span><br><span class=\"line\"><span class=\"comment\">### Sets the amount of time the Raft snapshot will execute periodically, default is 30 minute</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.raft.data.snapshot_interval_secs=30</span></span><br><span class=\"line\"><span class=\"comment\">### raft internal worker threads</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.raft.data.core_thread_num=8</span></span><br><span class=\"line\"><span class=\"comment\">### Number of threads required for raft business request processing</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.raft.data.cli_service_thread_num=4</span></span><br><span class=\"line\"><span class=\"comment\">### raft linear read strategy. Safe linear reads are used by default, that is, the Leader tenure is confirmed by heartbeat</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.raft.data.read_index_type=ReadOnlySafe</span></span><br><span class=\"line\"><span class=\"comment\">### rpc request timeout, default 5 seconds</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.raft.data.rpc_request_timeout_ms=5000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">#*************** Distro Related Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Distro data sync delay time, when sync task delayed, task will be merged for same data key. Default 1 second.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.distro.data.sync.delayMs=1000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Distro data sync timeout for one sync data, default 3 seconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.distro.data.sync.timeoutMs=3000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Distro data sync retry delay time when sync data failed or timeout, same behavior with delayMs, default 3 seconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.distro.data.sync.retryDelayMs=3000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Distro data verify interval time, verify synced data whether expired for a interval. Default 5 seconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.distro.data.verify.intervalMs=5000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Distro data verify timeout for one verify, default 3 seconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.distro.data.verify.timeoutMs=3000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Distro data load retry delay when load snapshot data failed, default 30 seconds.</span></span><br><span class=\"line\"><span class=\"comment\"># nacos.core.protocol.distro.data.load.retryDelayMs=30000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### enable to support prometheus service discovery</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.prometheus.metrics.enabled=true</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">### Since 2.3</span></span><br><span class=\"line\"><span class=\"comment\">#*************** Grpc Configurations ***************#</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">## sdk grpc(between nacos server and client) configuration</span></span><br><span class=\"line\"><span class=\"comment\">## Sets the maximum message size allowed to be received on the server.</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.remote.server.grpc.sdk.max-inbound-message-size=10485760</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">## Sets the time(milliseconds) without read activity before sending a keepalive ping. The typical default is two hours.</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.remote.server.grpc.sdk.keep-alive-time=7200000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">## Sets a time(milliseconds) waiting for read activity after sending a keepalive ping. Defaults to 20 seconds.</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.remote.server.grpc.sdk.keep-alive-timeout=20000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">## Sets a time(milliseconds) that specify the most aggressive keep-alive time clients are permitted to configure. The typical default is 5 minutes</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.remote.server.grpc.sdk.permit-keep-alive-time=300000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">## cluster grpc(inside the nacos server) configuration</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.remote.server.grpc.cluster.max-inbound-message-size=10485760</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">## Sets the time(milliseconds) without read activity before sending a keepalive ping. The typical default is two hours.</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.remote.server.grpc.cluster.keep-alive-time=7200000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">## Sets a time(milliseconds) waiting for read activity after sending a keepalive ping. Defaults to 20 seconds.</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.remote.server.grpc.cluster.keep-alive-timeout=20000</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">## Sets a time(milliseconds) that specify the most aggressive keep-alive time clients are permitted to configure. The typical default is 5 minutes</span></span><br><span class=\"line\"><span class=\"comment\">#nacos.remote.server.grpc.cluster.permit-keep-alive-time=300000</span></span><br></pre></td></tr></table></figure>\n\n<p>配置完成后就可以在&#x2F;bin cmd</p>\n<p>输入命令 startup.cmd -m standalone 运行就可以了</p>\n"},{"title":"修改Kubelet默认工作目录","abbrlink":"648e","date":"2024-12-30T00:56:31.000Z","_content":"\n\n## 前言\n\nkubelet的默认工作目录（存储目录）是`/var/lib/kubelet`，会存放volume文件（包括emptyDir volume)、plugin文件等，默认挂载在系统盘。\n\n而系统盘一般都不会太大，因此最好把kubelet工作目录更改到数据盘。\n\n本文中，我们会把docker的工作目录从`/var/lib/kubelet`改到`/data/kubelet`，其中`/data`目录挂载了数据盘。\n\n## 思路\n\n想到两个方法：\n\n- 修改配置法：拷贝数据到新目录，修改工作目录配置到新目录。\n- 软链法：拷贝数据到新目录，使用新目录的软链替换原来的工作目录。不推荐，不知道有没有什么隐藏坑。\n\n修改kubelet配置之前，为了保证不影响节点上的服务，最好先对节点操作禁止调度和驱逐。\n\n## 正文\n\n### 修改配置法\n\n1、停止kubelet\n\n```shell\nsystemctl stop kubelet\n```\n\n2、拷贝kubelet工作目录数据文件到新路径\n\n```shell\nmkdir -p /app/kubelet\ncp -rf /var/lib/kubelet/pods /app/kubelet/\ncp -rf /var/lib/kubelet/pod-resources /app/kubelet/\nmv /var/lib/kubelet/pods{,.old}\nmv /var/lib/kubelet/pod-resources{,.old}\n```\n\n> 注意，以下文件和目录一定要保留在老路径，不要移动和删除\n>\n> - /var/lib/kubelet/config.yaml\n> - /var/lib/kubelet/kubeadm-flags.env\n> - /var/lib/kubelet/pki\n> - /var/lib/kubelet/device-plugins\n\n3、添加或修改 /etc/sysconfig/kubelet 配置文件，添加`root-dir`参数\n\n```shell\nKUBELET_EXTRA_ARGS=\"--root-dir=/data/kubelet\"\n```\n\nPS：如果是ubuntu系统，则要修改 /etc/default/kubelet 配置文件\n\n4、重启kubelet\n\n```shell\nsystemctl daemon-reload && systemctl restart kubelet\nsystemctl status kubelet\n```\n\n5、确认工作目录\n\n```shell\nps -aux | grep kubelet | grep root-dir\n```\n\nPS：如果kubelet启动失败，可以通过查看kubelet详细日志进行排查。\n\n```shell\njournalctl -xu kubelet -r\n```\n\n6、清理旧工作目录（可选）\n\n```shell\nrm /var/lib/kubelet/pods.old -rf\nrm /var/lib/kubelet/pod-resources.old -rf\n```\n\n## 软链法\n\n1、停止kubelet\n\n```shell\nsystemctl stop kubelet\n```\n\n2、拷贝kubelet数据文件到新路径\n\n```shell\nmkdir -p /data/kubelet\ncp -rf /var/lib/kubelet/. /data/kubelet\nmv /var/lib/kubelet /var/lib/kubelet.old\n```\n\n3、创建软链\n\n```shell\nln -s /data/kubelet /var/lib/kubelet\n```\n\n4、启动kubelet\n\n```shell\nsystemctl daemon-reload && systemctl restart kubelet\nsystemctl status kubelet\n```\n\n5、确认工作目录\n\n```shell\nps -aux | grep kubelet | grep root-dir\n```\n\n6、清理旧工作目录（可选）\n\n```shell\nrm /var/lib/kubelet.old -rf\n```\n\n## kubeadm指定kubelet工作目录\n\n与其临渴掘井，不如未雨绸缪。能否在使用kubeadm部署k8s集群的时候，直接指定好kubelet的工作目录？必须是可以的。\n\n在执行`kubeadm init`之前，修改kubeadm.conf文件，添加kubeletExtraArgs字段。\n\n```shell\napiVersion: kubeadm.k8s.io/v1beta3\nkind: InitConfiguration\nnodeRegistration:  \n  kubeletExtraArgs:    \n    root-dir: \"/data/kubelet\"\n```\n\n参考文档：\n\n- [kubeadm Configuration - NodeRegistrationOptions](https://kubernetes.io/docs/reference/config-api/kubeadm-config.v1beta3/#kubeadm-k8s-io-v1beta3-NodeRegistrationOptions)\n","source":"_posts/服务器/Kubernetes/修改Kubelet默认工作目录.md","raw":"---\ntitle: 修改Kubelet默认工作目录\ncategories:\n  - 服务器\ntags:\n  - K8S\n  - Kubesphere\nabbrlink: 648e\ndate: 2024-12-30 08:56:31\n---\n\n\n## 前言\n\nkubelet的默认工作目录（存储目录）是`/var/lib/kubelet`，会存放volume文件（包括emptyDir volume)、plugin文件等，默认挂载在系统盘。\n\n而系统盘一般都不会太大，因此最好把kubelet工作目录更改到数据盘。\n\n本文中，我们会把docker的工作目录从`/var/lib/kubelet`改到`/data/kubelet`，其中`/data`目录挂载了数据盘。\n\n## 思路\n\n想到两个方法：\n\n- 修改配置法：拷贝数据到新目录，修改工作目录配置到新目录。\n- 软链法：拷贝数据到新目录，使用新目录的软链替换原来的工作目录。不推荐，不知道有没有什么隐藏坑。\n\n修改kubelet配置之前，为了保证不影响节点上的服务，最好先对节点操作禁止调度和驱逐。\n\n## 正文\n\n### 修改配置法\n\n1、停止kubelet\n\n```shell\nsystemctl stop kubelet\n```\n\n2、拷贝kubelet工作目录数据文件到新路径\n\n```shell\nmkdir -p /app/kubelet\ncp -rf /var/lib/kubelet/pods /app/kubelet/\ncp -rf /var/lib/kubelet/pod-resources /app/kubelet/\nmv /var/lib/kubelet/pods{,.old}\nmv /var/lib/kubelet/pod-resources{,.old}\n```\n\n> 注意，以下文件和目录一定要保留在老路径，不要移动和删除\n>\n> - /var/lib/kubelet/config.yaml\n> - /var/lib/kubelet/kubeadm-flags.env\n> - /var/lib/kubelet/pki\n> - /var/lib/kubelet/device-plugins\n\n3、添加或修改 /etc/sysconfig/kubelet 配置文件，添加`root-dir`参数\n\n```shell\nKUBELET_EXTRA_ARGS=\"--root-dir=/data/kubelet\"\n```\n\nPS：如果是ubuntu系统，则要修改 /etc/default/kubelet 配置文件\n\n4、重启kubelet\n\n```shell\nsystemctl daemon-reload && systemctl restart kubelet\nsystemctl status kubelet\n```\n\n5、确认工作目录\n\n```shell\nps -aux | grep kubelet | grep root-dir\n```\n\nPS：如果kubelet启动失败，可以通过查看kubelet详细日志进行排查。\n\n```shell\njournalctl -xu kubelet -r\n```\n\n6、清理旧工作目录（可选）\n\n```shell\nrm /var/lib/kubelet/pods.old -rf\nrm /var/lib/kubelet/pod-resources.old -rf\n```\n\n## 软链法\n\n1、停止kubelet\n\n```shell\nsystemctl stop kubelet\n```\n\n2、拷贝kubelet数据文件到新路径\n\n```shell\nmkdir -p /data/kubelet\ncp -rf /var/lib/kubelet/. /data/kubelet\nmv /var/lib/kubelet /var/lib/kubelet.old\n```\n\n3、创建软链\n\n```shell\nln -s /data/kubelet /var/lib/kubelet\n```\n\n4、启动kubelet\n\n```shell\nsystemctl daemon-reload && systemctl restart kubelet\nsystemctl status kubelet\n```\n\n5、确认工作目录\n\n```shell\nps -aux | grep kubelet | grep root-dir\n```\n\n6、清理旧工作目录（可选）\n\n```shell\nrm /var/lib/kubelet.old -rf\n```\n\n## kubeadm指定kubelet工作目录\n\n与其临渴掘井，不如未雨绸缪。能否在使用kubeadm部署k8s集群的时候，直接指定好kubelet的工作目录？必须是可以的。\n\n在执行`kubeadm init`之前，修改kubeadm.conf文件，添加kubeletExtraArgs字段。\n\n```shell\napiVersion: kubeadm.k8s.io/v1beta3\nkind: InitConfiguration\nnodeRegistration:  \n  kubeletExtraArgs:    \n    root-dir: \"/data/kubelet\"\n```\n\n参考文档：\n\n- [kubeadm Configuration - NodeRegistrationOptions](https://kubernetes.io/docs/reference/config-api/kubeadm-config.v1beta3/#kubeadm-k8s-io-v1beta3-NodeRegistrationOptions)\n","slug":"服务器/Kubernetes/修改Kubelet默认工作目录","published":1,"updated":"2025-06-02T07:27:35.120Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86x30053zcqb8d2u5zuv","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>kubelet的默认工作目录（存储目录）是<code>/var/lib/kubelet</code>，会存放volume文件（包括emptyDir volume)、plugin文件等，默认挂载在系统盘。</p>\n<p>而系统盘一般都不会太大，因此最好把kubelet工作目录更改到数据盘。</p>\n<p>本文中，我们会把docker的工作目录从<code>/var/lib/kubelet</code>改到<code>/data/kubelet</code>，其中<code>/data</code>目录挂载了数据盘。</p>\n<h2 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h2><p>想到两个方法：</p>\n<ul>\n<li>修改配置法：拷贝数据到新目录，修改工作目录配置到新目录。</li>\n<li>软链法：拷贝数据到新目录，使用新目录的软链替换原来的工作目录。不推荐，不知道有没有什么隐藏坑。</li>\n</ul>\n<p>修改kubelet配置之前，为了保证不影响节点上的服务，最好先对节点操作禁止调度和驱逐。</p>\n<h2 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h2><h3 id=\"修改配置法\"><a href=\"#修改配置法\" class=\"headerlink\" title=\"修改配置法\"></a>修改配置法</h3><p>1、停止kubelet</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop kubelet</span><br></pre></td></tr></table></figure>\n\n<p>2、拷贝kubelet工作目录数据文件到新路径</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /app/kubelet</span><br><span class=\"line\">cp -rf /var/lib/kubelet/pods /app/kubelet/</span><br><span class=\"line\">cp -rf /var/lib/kubelet/pod-resources /app/kubelet/</span><br><span class=\"line\">mv /var/lib/kubelet/pods&#123;,.old&#125;</span><br><span class=\"line\">mv /var/lib/kubelet/pod-resources&#123;,.old&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意，以下文件和目录一定要保留在老路径，不要移动和删除</p>\n<ul>\n<li>&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;config.yaml</li>\n<li>&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;kubeadm-flags.env</li>\n<li>&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;pki</li>\n<li>&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;device-plugins</li>\n</ul>\n</blockquote>\n<p>3、添加或修改 &#x2F;etc&#x2F;sysconfig&#x2F;kubelet 配置文件，添加<code>root-dir</code>参数</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">KUBELET_EXTRA_ARGS=&quot;--root-dir=/data/kubelet&quot;</span><br></pre></td></tr></table></figure>\n\n<p>PS：如果是ubuntu系统，则要修改 &#x2F;etc&#x2F;default&#x2F;kubelet 配置文件</p>\n<p>4、重启kubelet</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload &amp;&amp; systemctl restart kubelet</span><br><span class=\"line\">systemctl status kubelet</span><br></pre></td></tr></table></figure>\n\n<p>5、确认工作目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -aux | grep kubelet | grep root-dir</span><br></pre></td></tr></table></figure>\n\n<p>PS：如果kubelet启动失败，可以通过查看kubelet详细日志进行排查。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">journalctl -xu kubelet -r</span><br></pre></td></tr></table></figure>\n\n<p>6、清理旧工作目录（可选）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm /var/lib/kubelet/pods.old -rf</span><br><span class=\"line\">rm /var/lib/kubelet/pod-resources.old -rf</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"软链法\"><a href=\"#软链法\" class=\"headerlink\" title=\"软链法\"></a>软链法</h2><p>1、停止kubelet</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop kubelet</span><br></pre></td></tr></table></figure>\n\n<p>2、拷贝kubelet数据文件到新路径</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /data/kubelet</span><br><span class=\"line\">cp -rf /var/lib/kubelet/. /data/kubelet</span><br><span class=\"line\">mv /var/lib/kubelet /var/lib/kubelet.old</span><br></pre></td></tr></table></figure>\n\n<p>3、创建软链</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /data/kubelet /var/lib/kubelet</span><br></pre></td></tr></table></figure>\n\n<p>4、启动kubelet</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload &amp;&amp; systemctl restart kubelet</span><br><span class=\"line\">systemctl status kubelet</span><br></pre></td></tr></table></figure>\n\n<p>5、确认工作目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -aux | grep kubelet | grep root-dir</span><br></pre></td></tr></table></figure>\n\n<p>6、清理旧工作目录（可选）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm /var/lib/kubelet.old -rf</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"kubeadm指定kubelet工作目录\"><a href=\"#kubeadm指定kubelet工作目录\" class=\"headerlink\" title=\"kubeadm指定kubelet工作目录\"></a>kubeadm指定kubelet工作目录</h2><p>与其临渴掘井，不如未雨绸缪。能否在使用kubeadm部署k8s集群的时候，直接指定好kubelet的工作目录？必须是可以的。</p>\n<p>在执行<code>kubeadm init</code>之前，修改kubeadm.conf文件，添加kubeletExtraArgs字段。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apiVersion: kubeadm.k8s.io/v1beta3</span><br><span class=\"line\">kind: InitConfiguration</span><br><span class=\"line\">nodeRegistration:  </span><br><span class=\"line\">  kubeletExtraArgs:    </span><br><span class=\"line\">    root-dir: &quot;/data/kubelet&quot;</span><br></pre></td></tr></table></figure>\n\n<p>参考文档：</p>\n<ul>\n<li><a href=\"https://kubernetes.io/docs/reference/config-api/kubeadm-config.v1beta3/#kubeadm-k8s-io-v1beta3-NodeRegistrationOptions\">kubeadm Configuration - NodeRegistrationOptions</a></li>\n</ul>\n","cover":"https://t.alcy.cc/pc?_r_=c9e77ecc-0839-3637-5d2c-5a879ee5542e","cover_type":"img","excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>kubelet的默认工作目录（存储目录）是<code>/var/lib/kubelet</code>，会存放volume文件（包括emptyDir volume)、plugin文件等，默认挂载在系统盘。</p>\n<p>而系统盘一般都不会太大，因此最好把kubelet工作目录更改到数据盘。</p>\n<p>本文中，我们会把docker的工作目录从<code>/var/lib/kubelet</code>改到<code>/data/kubelet</code>，其中<code>/data</code>目录挂载了数据盘。</p>\n<h2 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h2><p>想到两个方法：</p>\n<ul>\n<li>修改配置法：拷贝数据到新目录，修改工作目录配置到新目录。</li>\n<li>软链法：拷贝数据到新目录，使用新目录的软链替换原来的工作目录。不推荐，不知道有没有什么隐藏坑。</li>\n</ul>\n<p>修改kubelet配置之前，为了保证不影响节点上的服务，最好先对节点操作禁止调度和驱逐。</p>\n<h2 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h2><h3 id=\"修改配置法\"><a href=\"#修改配置法\" class=\"headerlink\" title=\"修改配置法\"></a>修改配置法</h3><p>1、停止kubelet</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop kubelet</span><br></pre></td></tr></table></figure>\n\n<p>2、拷贝kubelet工作目录数据文件到新路径</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /app/kubelet</span><br><span class=\"line\">cp -rf /var/lib/kubelet/pods /app/kubelet/</span><br><span class=\"line\">cp -rf /var/lib/kubelet/pod-resources /app/kubelet/</span><br><span class=\"line\">mv /var/lib/kubelet/pods&#123;,.old&#125;</span><br><span class=\"line\">mv /var/lib/kubelet/pod-resources&#123;,.old&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注意，以下文件和目录一定要保留在老路径，不要移动和删除</p>\n<ul>\n<li>&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;config.yaml</li>\n<li>&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;kubeadm-flags.env</li>\n<li>&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;pki</li>\n<li>&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;device-plugins</li>\n</ul>\n</blockquote>\n<p>3、添加或修改 &#x2F;etc&#x2F;sysconfig&#x2F;kubelet 配置文件，添加<code>root-dir</code>参数</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">KUBELET_EXTRA_ARGS=&quot;--root-dir=/data/kubelet&quot;</span><br></pre></td></tr></table></figure>\n\n<p>PS：如果是ubuntu系统，则要修改 &#x2F;etc&#x2F;default&#x2F;kubelet 配置文件</p>\n<p>4、重启kubelet</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload &amp;&amp; systemctl restart kubelet</span><br><span class=\"line\">systemctl status kubelet</span><br></pre></td></tr></table></figure>\n\n<p>5、确认工作目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -aux | grep kubelet | grep root-dir</span><br></pre></td></tr></table></figure>\n\n<p>PS：如果kubelet启动失败，可以通过查看kubelet详细日志进行排查。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">journalctl -xu kubelet -r</span><br></pre></td></tr></table></figure>\n\n<p>6、清理旧工作目录（可选）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm /var/lib/kubelet/pods.old -rf</span><br><span class=\"line\">rm /var/lib/kubelet/pod-resources.old -rf</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"软链法\"><a href=\"#软链法\" class=\"headerlink\" title=\"软链法\"></a>软链法</h2><p>1、停止kubelet</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl stop kubelet</span><br></pre></td></tr></table></figure>\n\n<p>2、拷贝kubelet数据文件到新路径</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /data/kubelet</span><br><span class=\"line\">cp -rf /var/lib/kubelet/. /data/kubelet</span><br><span class=\"line\">mv /var/lib/kubelet /var/lib/kubelet.old</span><br></pre></td></tr></table></figure>\n\n<p>3、创建软链</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /data/kubelet /var/lib/kubelet</span><br></pre></td></tr></table></figure>\n\n<p>4、启动kubelet</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload &amp;&amp; systemctl restart kubelet</span><br><span class=\"line\">systemctl status kubelet</span><br></pre></td></tr></table></figure>\n\n<p>5、确认工作目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -aux | grep kubelet | grep root-dir</span><br></pre></td></tr></table></figure>\n\n<p>6、清理旧工作目录（可选）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm /var/lib/kubelet.old -rf</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"kubeadm指定kubelet工作目录\"><a href=\"#kubeadm指定kubelet工作目录\" class=\"headerlink\" title=\"kubeadm指定kubelet工作目录\"></a>kubeadm指定kubelet工作目录</h2><p>与其临渴掘井，不如未雨绸缪。能否在使用kubeadm部署k8s集群的时候，直接指定好kubelet的工作目录？必须是可以的。</p>\n<p>在执行<code>kubeadm init</code>之前，修改kubeadm.conf文件，添加kubeletExtraArgs字段。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apiVersion: kubeadm.k8s.io/v1beta3</span><br><span class=\"line\">kind: InitConfiguration</span><br><span class=\"line\">nodeRegistration:  </span><br><span class=\"line\">  kubeletExtraArgs:    </span><br><span class=\"line\">    root-dir: &quot;/data/kubelet&quot;</span><br></pre></td></tr></table></figure>\n\n<p>参考文档：</p>\n<ul>\n<li><a href=\"https://kubernetes.io/docs/reference/config-api/kubeadm-config.v1beta3/#kubeadm-k8s-io-v1beta3-NodeRegistrationOptions\">kubeadm Configuration - NodeRegistrationOptions</a></li>\n</ul>\n"},{"title":"离线安装Kubesphere 4.1","abbrlink":"4f54","date":"2025-02-25T04:36:24.000Z","_content":"\n## 前言\n\n本篇是离线安装`Kubernetes`和`Kubesphere`的教程，包含初始化镜像仓库`harbor` 导入必要镜像至镜像仓库\n\n> Kubernetes版本：v1.26.12\n>\n> Kubesphere版本：4.1\n\n参考教程：[离线安装 KubeSphere](https://www.kubesphere.io/zh/docs/v4.1/03-installation-and-upgrade/02-install-kubesphere/04-offline-installation/)\n\n## 正文\n\n### 1、安装依赖包\n\n所有节点需要安装必要依赖\n\n```shell\nyum install -y socat conntrack\n```\n\n### 2、导入文件包并修改配置文件\n\n以下是文件说明，已经放在网盘了，地址：\n\n`config-sample.yaml`：集群配置文件\n\n`create_project_harbor.sh`：初始化harbor项目脚本\n\n`kk`：KubeKey工具\n\n`ks-core-1.1.3.tgz`：helm安装包\n\n`kubesphere-4.1.tar.gz`：Kubernetes离线包\n\n将这些文件复制到主节点的工作目录下\n\n```yaml\n\napiVersion: kubekey.kubesphere.io/v1alpha2\nkind: Cluster\nmetadata:\n  name: sample\nspec:\n  hosts:\n  - {name: k8s-master, address: 192.168.1.20, internalAddress: 192.168.1.20, user: root, password: \"root\"}\n  - {name: k8s-node1, address: 192.168.1.21, internalAddress: 192.168.1.21, user: root, password: \"root\"}\n  - {name: k8s-node2, address: 192.168.1.22, internalAddress: 192.168.1.22, user: root, password: \"root\"}\n  roleGroups:\n    etcd:\n    - k8s-master\n    control-plane: \n    - k8s-master\n    worker:\n    - k8s-node1\n    - k8s-node2\n    registry: # 镜像仓库安装的位置\n    - k8s-master \n  controlPlaneEndpoint:\n    ## Internal loadbalancer for apiservers \n    # internalLoadbalancer: haproxy\n\n    domain: lb.kubesphere.local\n    address: \"\"\n    port: 6443\n  kubernetes:\n    kubeletArgs: # 额外安装参数\n      - --root-dir=/app/kubelet # 工作目录在/app下面，防止占满根目录\n    version: v1.26.12\n    clusterName: cluster.local\n    autoRenewCerts: true\n    containerManager: docker\n  etcd:\n    type: kubekey\n  network:\n    plugin: calico\n    kubePodsCIDR: 10.233.64.0/18\n    kubeServiceCIDR: 10.233.0.0/18\n    ## multus support. https://github.com/k8snetworkplumbingwg/multus-cni\n    multusCNI:\n      enabled: false\n  storage:\n    openebs: # 安装openebs存储，这是基于local storage的一种存储，数据保存在本地\n      basePath: /app/openebs/ # 指定安装位置\n  registry: # 镜像仓库配置\n    type: harbor\n    auths:\n      \"dockerhub.kubekey.local\":\n        username: admin\n        password: Harbor12345\n        skipTLSVerify: true # 跳过tls验证\n    privateRegistry: \"dockerhub.kubekey.local\" # 私有仓库配置\n    namespaceOverride: \"kubesphereio\" # 默认命名空间\n    registryMirrors: []\n    insecureRegistries: []\n  addons: []\n\n```\n\n### 3、创建镜像仓库（可选）\n\n如果自己存在镜像仓库可以直接配置到config文件内（目前没有配置成功过，所以默认自己搭建一个仓库，将数据目录放到数据盘下）\n\n**赋于kk执行权限**\n\n```shell\nsudo chmod +x kk\n```\n\n**执行创建仓库命令**\n\nPS：此操作会在`registry` 节点安装Docker，docker-compose 等软件，并且将 harbor 文件放在/opt/harbor 目录下\n\n```shell\n./kk init registry -f config-sample.yaml -a kubesphere-4.1.tar.gz\n```\n\n安装完成后显示如下画面\n\n![image-20250222213403587](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222213403587.png)\n\n验证容器是否启动，目录是否存在\n\n![image-20250222213517765](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222213517765.png)\n\n#### 修改docker默认存储目录，Harbor数据目录（可选）\n\n因为docker存储目录默认在 `/var/lib/docker/` 后面会把根目录塞满，需要将目录转移至数据盘下\n\n**修改docker默认存储目录**\n\nPS：此操作只建议在刚安装docker后操作\n\n```shell\n# 停止docker\nsystemctl stop docker\nsystemctl status docker\n\n# 复制docker数据目录至/app/docker\ncp -r /var/lib/docker/ /app/docker/\n\n# 修改配置文件\nvim /etc/docker/daemon.json\n# 添加如下配置\n\"data-root\": \"/app/docker\"\n\n# 重启docker\nsystemctl daemon-reload\nsystemctl start docker\n\n# 删除原目录\nrm -rf /var/lib/docker/\n```\n\n```shell\n# 修改harbor数据目录\n\n# 修改harbor配置文件\ncd /opt/harbor/\nvim harbor.yml\n# 56行   data_volume                  改成 指定目录\n:56 data_volume: /mnt/registry -> data_volume: /app/registry\n\n# 重新初始化harbor\n# 如果启动出现文件，删除docker目录重启docker后再次运行\nsh install.sh\n\n# 删除原目录\nrm -rf /mnt/registry\n```\n\n![启动成功](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222214834331.png)\n\n### 4、推送镜像至仓库\n\n运行脚本创建harbor项目\n\n```shell\nchmod +x create_project_harbor.sh\nsh create_project_harbor.sh\n```\n\nPS：如果使用别的仓库，需要修改如下配置\n\n```shell\n...\n\nurl=\"https://dockerhub.kubekey.local\"  # 或修改为实际镜像仓库地址\nuser=\"admin\"\npasswd=\"Harbor12345\"\n...\n```\n\n**推送镜像至仓库（可选）**\n\n此步骤只是验证镜像仓库是否安装成功，提前一步将镜像推送至仓库，安装集群时仍然会进行一次操作，验证所有镜像是否推送，所有此步骤可有可无\n\n```shell\n./kk artifact image push -f config-sample.yaml -a kubesphere-4.1.tar.gz\n```\n\n**推送成功**\n\n![image-20250222220209143](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222220209143.png)\n\n### 5、创建Kubernetes集群\n\n执行命令\n\n```shell\n./kk create cluster -f config-sample.yaml -a kubesphere-4.1.tar.gz --with-local-storage\n```\n\n> 指定 --with-local-storage 参数会默认部署 openebs localpv，如需对接其他存储，可在 Kubernetes 集群部署完成后自行安装。\n\n在运行后会打印出所有节点的信息，确认无误后 输入 `yes` 进行安装\n\n![image-20250222220302734](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222220302734.png)\n\n安装完成\n\n![image-20250222221103082](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222221103082.png)\n\n### 6、安装Kubesphere\n\n```shell\nhelm upgrade --install -n kubesphere-system --create-namespace ks-core ks-core-1.1.3.tgz \\\n     --set global.imageRegistry=dockerhub.kubekey.local/ks \\\n     --set extension.imageRegistry=dockerhub.kubekey.local/ks \\\n     --set ksExtensionRepository.image.tag=v1.1.2 \\\n     --debug \\\n     --wait\n```\n\n安装完成\n\n![image-20250222221251185](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222221251185.png)\n\n显示了登录的地址和默认账号密码，可以直接登录\n\n### 7、自己打包离线包（可选）\n\n因为本文提供的镜像包是默认官方的，如果有其他需求请自己打包\n\n需要准备一台可以联网的主机，无环境要求\n\n将`manifest-sample.yaml`资源配置文件，`kk` 上传到运行目录\n\n修改完成后运行如下命令，进行构建\n\n```shell\n./kk artifact export -m manifest-sample.yaml -o kubesphere.tar.gz\n```\n\n### 8、其他文件\n\n其他文件官方获取方式：\n\n**kk**\n\n```shell\ncurl -sSL https://get-kk.kubesphere.io | sh -\n```\n\n**manifest-sample.yaml**\n\n```shell\nexport KKZONE=cn\n\n# 如需使用 kk 离线部署镜像仓库，添加 --with-registry 打包镜像仓库的安装文件\n./kk create manifest --with-kubernetes v1.26.12 --with-registry\n```\n\n**ks-core-1.1.3.tgz**\n\n```shell\n# 安装 helm\ncurl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash\n\n# 下载 KubeSphere Core Helm Chart\nVERSION=1.1.3     # Chart 版本\nhelm fetch https://charts.kubesphere.io/main/ks-core-${VERSION}.tgz\n```\n\n**config-sample.yam**\n\n```shell\n./kk create config --with-kubernetes v1.26.12\n```\n","source":"_posts/服务器/Kubernetes/离线安装Kubesphere 4.1.md","raw":"---\ntitle: 离线安装Kubesphere 4.1\ncategories:\n  - 服务器\ntags:\n  - K8S\n  - Kubesphere\nabbrlink: 4f54\ndate: 2025-02-25 12:36:24\n---\n\n## 前言\n\n本篇是离线安装`Kubernetes`和`Kubesphere`的教程，包含初始化镜像仓库`harbor` 导入必要镜像至镜像仓库\n\n> Kubernetes版本：v1.26.12\n>\n> Kubesphere版本：4.1\n\n参考教程：[离线安装 KubeSphere](https://www.kubesphere.io/zh/docs/v4.1/03-installation-and-upgrade/02-install-kubesphere/04-offline-installation/)\n\n## 正文\n\n### 1、安装依赖包\n\n所有节点需要安装必要依赖\n\n```shell\nyum install -y socat conntrack\n```\n\n### 2、导入文件包并修改配置文件\n\n以下是文件说明，已经放在网盘了，地址：\n\n`config-sample.yaml`：集群配置文件\n\n`create_project_harbor.sh`：初始化harbor项目脚本\n\n`kk`：KubeKey工具\n\n`ks-core-1.1.3.tgz`：helm安装包\n\n`kubesphere-4.1.tar.gz`：Kubernetes离线包\n\n将这些文件复制到主节点的工作目录下\n\n```yaml\n\napiVersion: kubekey.kubesphere.io/v1alpha2\nkind: Cluster\nmetadata:\n  name: sample\nspec:\n  hosts:\n  - {name: k8s-master, address: 192.168.1.20, internalAddress: 192.168.1.20, user: root, password: \"root\"}\n  - {name: k8s-node1, address: 192.168.1.21, internalAddress: 192.168.1.21, user: root, password: \"root\"}\n  - {name: k8s-node2, address: 192.168.1.22, internalAddress: 192.168.1.22, user: root, password: \"root\"}\n  roleGroups:\n    etcd:\n    - k8s-master\n    control-plane: \n    - k8s-master\n    worker:\n    - k8s-node1\n    - k8s-node2\n    registry: # 镜像仓库安装的位置\n    - k8s-master \n  controlPlaneEndpoint:\n    ## Internal loadbalancer for apiservers \n    # internalLoadbalancer: haproxy\n\n    domain: lb.kubesphere.local\n    address: \"\"\n    port: 6443\n  kubernetes:\n    kubeletArgs: # 额外安装参数\n      - --root-dir=/app/kubelet # 工作目录在/app下面，防止占满根目录\n    version: v1.26.12\n    clusterName: cluster.local\n    autoRenewCerts: true\n    containerManager: docker\n  etcd:\n    type: kubekey\n  network:\n    plugin: calico\n    kubePodsCIDR: 10.233.64.0/18\n    kubeServiceCIDR: 10.233.0.0/18\n    ## multus support. https://github.com/k8snetworkplumbingwg/multus-cni\n    multusCNI:\n      enabled: false\n  storage:\n    openebs: # 安装openebs存储，这是基于local storage的一种存储，数据保存在本地\n      basePath: /app/openebs/ # 指定安装位置\n  registry: # 镜像仓库配置\n    type: harbor\n    auths:\n      \"dockerhub.kubekey.local\":\n        username: admin\n        password: Harbor12345\n        skipTLSVerify: true # 跳过tls验证\n    privateRegistry: \"dockerhub.kubekey.local\" # 私有仓库配置\n    namespaceOverride: \"kubesphereio\" # 默认命名空间\n    registryMirrors: []\n    insecureRegistries: []\n  addons: []\n\n```\n\n### 3、创建镜像仓库（可选）\n\n如果自己存在镜像仓库可以直接配置到config文件内（目前没有配置成功过，所以默认自己搭建一个仓库，将数据目录放到数据盘下）\n\n**赋于kk执行权限**\n\n```shell\nsudo chmod +x kk\n```\n\n**执行创建仓库命令**\n\nPS：此操作会在`registry` 节点安装Docker，docker-compose 等软件，并且将 harbor 文件放在/opt/harbor 目录下\n\n```shell\n./kk init registry -f config-sample.yaml -a kubesphere-4.1.tar.gz\n```\n\n安装完成后显示如下画面\n\n![image-20250222213403587](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222213403587.png)\n\n验证容器是否启动，目录是否存在\n\n![image-20250222213517765](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222213517765.png)\n\n#### 修改docker默认存储目录，Harbor数据目录（可选）\n\n因为docker存储目录默认在 `/var/lib/docker/` 后面会把根目录塞满，需要将目录转移至数据盘下\n\n**修改docker默认存储目录**\n\nPS：此操作只建议在刚安装docker后操作\n\n```shell\n# 停止docker\nsystemctl stop docker\nsystemctl status docker\n\n# 复制docker数据目录至/app/docker\ncp -r /var/lib/docker/ /app/docker/\n\n# 修改配置文件\nvim /etc/docker/daemon.json\n# 添加如下配置\n\"data-root\": \"/app/docker\"\n\n# 重启docker\nsystemctl daemon-reload\nsystemctl start docker\n\n# 删除原目录\nrm -rf /var/lib/docker/\n```\n\n```shell\n# 修改harbor数据目录\n\n# 修改harbor配置文件\ncd /opt/harbor/\nvim harbor.yml\n# 56行   data_volume                  改成 指定目录\n:56 data_volume: /mnt/registry -> data_volume: /app/registry\n\n# 重新初始化harbor\n# 如果启动出现文件，删除docker目录重启docker后再次运行\nsh install.sh\n\n# 删除原目录\nrm -rf /mnt/registry\n```\n\n![启动成功](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222214834331.png)\n\n### 4、推送镜像至仓库\n\n运行脚本创建harbor项目\n\n```shell\nchmod +x create_project_harbor.sh\nsh create_project_harbor.sh\n```\n\nPS：如果使用别的仓库，需要修改如下配置\n\n```shell\n...\n\nurl=\"https://dockerhub.kubekey.local\"  # 或修改为实际镜像仓库地址\nuser=\"admin\"\npasswd=\"Harbor12345\"\n...\n```\n\n**推送镜像至仓库（可选）**\n\n此步骤只是验证镜像仓库是否安装成功，提前一步将镜像推送至仓库，安装集群时仍然会进行一次操作，验证所有镜像是否推送，所有此步骤可有可无\n\n```shell\n./kk artifact image push -f config-sample.yaml -a kubesphere-4.1.tar.gz\n```\n\n**推送成功**\n\n![image-20250222220209143](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222220209143.png)\n\n### 5、创建Kubernetes集群\n\n执行命令\n\n```shell\n./kk create cluster -f config-sample.yaml -a kubesphere-4.1.tar.gz --with-local-storage\n```\n\n> 指定 --with-local-storage 参数会默认部署 openebs localpv，如需对接其他存储，可在 Kubernetes 集群部署完成后自行安装。\n\n在运行后会打印出所有节点的信息，确认无误后 输入 `yes` 进行安装\n\n![image-20250222220302734](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222220302734.png)\n\n安装完成\n\n![image-20250222221103082](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222221103082.png)\n\n### 6、安装Kubesphere\n\n```shell\nhelm upgrade --install -n kubesphere-system --create-namespace ks-core ks-core-1.1.3.tgz \\\n     --set global.imageRegistry=dockerhub.kubekey.local/ks \\\n     --set extension.imageRegistry=dockerhub.kubekey.local/ks \\\n     --set ksExtensionRepository.image.tag=v1.1.2 \\\n     --debug \\\n     --wait\n```\n\n安装完成\n\n![image-20250222221251185](https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222221251185.png)\n\n显示了登录的地址和默认账号密码，可以直接登录\n\n### 7、自己打包离线包（可选）\n\n因为本文提供的镜像包是默认官方的，如果有其他需求请自己打包\n\n需要准备一台可以联网的主机，无环境要求\n\n将`manifest-sample.yaml`资源配置文件，`kk` 上传到运行目录\n\n修改完成后运行如下命令，进行构建\n\n```shell\n./kk artifact export -m manifest-sample.yaml -o kubesphere.tar.gz\n```\n\n### 8、其他文件\n\n其他文件官方获取方式：\n\n**kk**\n\n```shell\ncurl -sSL https://get-kk.kubesphere.io | sh -\n```\n\n**manifest-sample.yaml**\n\n```shell\nexport KKZONE=cn\n\n# 如需使用 kk 离线部署镜像仓库，添加 --with-registry 打包镜像仓库的安装文件\n./kk create manifest --with-kubernetes v1.26.12 --with-registry\n```\n\n**ks-core-1.1.3.tgz**\n\n```shell\n# 安装 helm\ncurl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash\n\n# 下载 KubeSphere Core Helm Chart\nVERSION=1.1.3     # Chart 版本\nhelm fetch https://charts.kubesphere.io/main/ks-core-${VERSION}.tgz\n```\n\n**config-sample.yam**\n\n```shell\n./kk create config --with-kubernetes v1.26.12\n```\n","slug":"服务器/Kubernetes/离线安装Kubesphere 4.1","published":1,"updated":"2025-06-02T07:27:37.761Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86x30056zcqb9rrv2xaa","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>本篇是离线安装<code>Kubernetes</code>和<code>Kubesphere</code>的教程，包含初始化镜像仓库<code>harbor</code> 导入必要镜像至镜像仓库</p>\n<blockquote>\n<p>Kubernetes版本：v1.26.12</p>\n<p>Kubesphere版本：4.1</p>\n</blockquote>\n<p>参考教程：<a href=\"https://www.kubesphere.io/zh/docs/v4.1/03-installation-and-upgrade/02-install-kubesphere/04-offline-installation/\">离线安装 KubeSphere</a></p>\n<h2 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h2><h3 id=\"1、安装依赖包\"><a href=\"#1、安装依赖包\" class=\"headerlink\" title=\"1、安装依赖包\"></a>1、安装依赖包</h3><p>所有节点需要安装必要依赖</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y socat conntrack</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、导入文件包并修改配置文件\"><a href=\"#2、导入文件包并修改配置文件\" class=\"headerlink\" title=\"2、导入文件包并修改配置文件\"></a>2、导入文件包并修改配置文件</h3><p>以下是文件说明，已经放在网盘了，地址：</p>\n<p><code>config-sample.yaml</code>：集群配置文件</p>\n<p><code>create_project_harbor.sh</code>：初始化harbor项目脚本</p>\n<p><code>kk</code>：KubeKey工具</p>\n<p><code>ks-core-1.1.3.tgz</code>：helm安装包</p>\n<p><code>kubesphere-4.1.tar.gz</code>：Kubernetes离线包</p>\n<p>将这些文件复制到主节点的工作目录下</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">kubekey.kubesphere.io/v1alpha2</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Cluster</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">sample</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">hosts:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> &#123;<span class=\"attr\">name:</span> <span class=\"string\">k8s-master</span>, <span class=\"attr\">address:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.20</span>, <span class=\"attr\">internalAddress:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.20</span>, <span class=\"attr\">user:</span> <span class=\"string\">root</span>, <span class=\"attr\">password:</span> <span class=\"string\">&quot;root&quot;</span>&#125;</span><br><span class=\"line\">  <span class=\"bullet\">-</span> &#123;<span class=\"attr\">name:</span> <span class=\"string\">k8s-node1</span>, <span class=\"attr\">address:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.21</span>, <span class=\"attr\">internalAddress:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.21</span>, <span class=\"attr\">user:</span> <span class=\"string\">root</span>, <span class=\"attr\">password:</span> <span class=\"string\">&quot;root&quot;</span>&#125;</span><br><span class=\"line\">  <span class=\"bullet\">-</span> &#123;<span class=\"attr\">name:</span> <span class=\"string\">k8s-node2</span>, <span class=\"attr\">address:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.22</span>, <span class=\"attr\">internalAddress:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.22</span>, <span class=\"attr\">user:</span> <span class=\"string\">root</span>, <span class=\"attr\">password:</span> <span class=\"string\">&quot;root&quot;</span>&#125;</span><br><span class=\"line\">  <span class=\"attr\">roleGroups:</span></span><br><span class=\"line\">    <span class=\"attr\">etcd:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">k8s-master</span></span><br><span class=\"line\">    <span class=\"attr\">control-plane:</span> </span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">k8s-master</span></span><br><span class=\"line\">    <span class=\"attr\">worker:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">k8s-node1</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">k8s-node2</span></span><br><span class=\"line\">    <span class=\"attr\">registry:</span> <span class=\"comment\"># 镜像仓库安装的位置</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">k8s-master</span> </span><br><span class=\"line\">  <span class=\"attr\">controlPlaneEndpoint:</span></span><br><span class=\"line\">    <span class=\"comment\">## Internal loadbalancer for apiservers </span></span><br><span class=\"line\">    <span class=\"comment\"># internalLoadbalancer: haproxy</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attr\">domain:</span> <span class=\"string\">lb.kubesphere.local</span></span><br><span class=\"line\">    <span class=\"attr\">address:</span> <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">6443</span></span><br><span class=\"line\">  <span class=\"attr\">kubernetes:</span></span><br><span class=\"line\">    <span class=\"attr\">kubeletArgs:</span> <span class=\"comment\"># 额外安装参数</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">--root-dir=/app/kubelet</span> <span class=\"comment\"># 工作目录在/app下面，防止占满根目录</span></span><br><span class=\"line\">    <span class=\"attr\">version:</span> <span class=\"string\">v1.26.12</span></span><br><span class=\"line\">    <span class=\"attr\">clusterName:</span> <span class=\"string\">cluster.local</span></span><br><span class=\"line\">    <span class=\"attr\">autoRenewCerts:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">containerManager:</span> <span class=\"string\">docker</span></span><br><span class=\"line\">  <span class=\"attr\">etcd:</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">kubekey</span></span><br><span class=\"line\">  <span class=\"attr\">network:</span></span><br><span class=\"line\">    <span class=\"attr\">plugin:</span> <span class=\"string\">calico</span></span><br><span class=\"line\">    <span class=\"attr\">kubePodsCIDR:</span> <span class=\"number\">10.233</span><span class=\"number\">.64</span><span class=\"number\">.0</span><span class=\"string\">/18</span></span><br><span class=\"line\">    <span class=\"attr\">kubeServiceCIDR:</span> <span class=\"number\">10.233</span><span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"string\">/18</span></span><br><span class=\"line\">    <span class=\"comment\">## multus support. https://github.com/k8snetworkplumbingwg/multus-cni</span></span><br><span class=\"line\">    <span class=\"attr\">multusCNI:</span></span><br><span class=\"line\">      <span class=\"attr\">enabled:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"attr\">storage:</span></span><br><span class=\"line\">    <span class=\"attr\">openebs:</span> <span class=\"comment\"># 安装openebs存储，这是基于local storage的一种存储，数据保存在本地</span></span><br><span class=\"line\">      <span class=\"attr\">basePath:</span> <span class=\"string\">/app/openebs/</span> <span class=\"comment\"># 指定安装位置</span></span><br><span class=\"line\">  <span class=\"attr\">registry:</span> <span class=\"comment\"># 镜像仓库配置</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">harbor</span></span><br><span class=\"line\">    <span class=\"attr\">auths:</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;dockerhub.kubekey.local&quot;:</span></span><br><span class=\"line\">        <span class=\"attr\">username:</span> <span class=\"string\">admin</span></span><br><span class=\"line\">        <span class=\"attr\">password:</span> <span class=\"string\">Harbor12345</span></span><br><span class=\"line\">        <span class=\"attr\">skipTLSVerify:</span> <span class=\"literal\">true</span> <span class=\"comment\"># 跳过tls验证</span></span><br><span class=\"line\">    <span class=\"attr\">privateRegistry:</span> <span class=\"string\">&quot;dockerhub.kubekey.local&quot;</span> <span class=\"comment\"># 私有仓库配置</span></span><br><span class=\"line\">    <span class=\"attr\">namespaceOverride:</span> <span class=\"string\">&quot;kubesphereio&quot;</span> <span class=\"comment\"># 默认命名空间</span></span><br><span class=\"line\">    <span class=\"attr\">registryMirrors:</span> []</span><br><span class=\"line\">    <span class=\"attr\">insecureRegistries:</span> []</span><br><span class=\"line\">  <span class=\"attr\">addons:</span> []</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、创建镜像仓库（可选）\"><a href=\"#3、创建镜像仓库（可选）\" class=\"headerlink\" title=\"3、创建镜像仓库（可选）\"></a>3、创建镜像仓库（可选）</h3><p>如果自己存在镜像仓库可以直接配置到config文件内（目前没有配置成功过，所以默认自己搭建一个仓库，将数据目录放到数据盘下）</p>\n<p><strong>赋于kk执行权限</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chmod +x kk</span><br></pre></td></tr></table></figure>\n\n<p><strong>执行创建仓库命令</strong></p>\n<p>PS：此操作会在<code>registry</code> 节点安装Docker，docker-compose 等软件，并且将 harbor 文件放在&#x2F;opt&#x2F;harbor 目录下</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./kk init registry -f config-sample.yaml -a kubesphere-4.1.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p>安装完成后显示如下画面</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222213403587.png\" alt=\"image-20250222213403587\"></p>\n<p>验证容器是否启动，目录是否存在</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222213517765.png\" alt=\"image-20250222213517765\"></p>\n<h4 id=\"修改docker默认存储目录，Harbor数据目录（可选）\"><a href=\"#修改docker默认存储目录，Harbor数据目录（可选）\" class=\"headerlink\" title=\"修改docker默认存储目录，Harbor数据目录（可选）\"></a>修改docker默认存储目录，Harbor数据目录（可选）</h4><p>因为docker存储目录默认在 <code>/var/lib/docker/</code> 后面会把根目录塞满，需要将目录转移至数据盘下</p>\n<p><strong>修改docker默认存储目录</strong></p>\n<p>PS：此操作只建议在刚安装docker后操作</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">停止docker</span></span><br><span class=\"line\">systemctl stop docker</span><br><span class=\"line\">systemctl status docker</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">复制docker数据目录至/app/docker</span></span><br><span class=\"line\">cp -r /var/lib/docker/ /app/docker/</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">修改配置文件</span></span><br><span class=\"line\">vim /etc/docker/daemon.json</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">添加如下配置</span></span><br><span class=\"line\">&quot;data-root&quot;: &quot;/app/docker&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重启docker</span></span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl start docker</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">删除原目录</span></span><br><span class=\"line\">rm -rf /var/lib/docker/</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">修改harbor数据目录</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">修改harbor配置文件</span></span><br><span class=\"line\">cd /opt/harbor/</span><br><span class=\"line\">vim harbor.yml</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">56行   data_volume                  改成 指定目录</span></span><br><span class=\"line\">:56 data_volume: /mnt/registry -&gt; data_volume: /app/registry</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重新初始化harbor</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">如果启动出现文件，删除docker目录重启docker后再次运行</span></span><br><span class=\"line\">sh install.sh</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">删除原目录</span></span><br><span class=\"line\">rm -rf /mnt/registry</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222214834331.png\" alt=\"启动成功\"></p>\n<h3 id=\"4、推送镜像至仓库\"><a href=\"#4、推送镜像至仓库\" class=\"headerlink\" title=\"4、推送镜像至仓库\"></a>4、推送镜像至仓库</h3><p>运行脚本创建harbor项目</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod +x create_project_harbor.sh</span><br><span class=\"line\">sh create_project_harbor.sh</span><br></pre></td></tr></table></figure>\n\n<p>PS：如果使用别的仓库，需要修改如下配置</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">url=&quot;https://dockerhub.kubekey.local&quot;  # 或修改为实际镜像仓库地址</span><br><span class=\"line\">user=&quot;admin&quot;</span><br><span class=\"line\">passwd=&quot;Harbor12345&quot;</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p><strong>推送镜像至仓库（可选）</strong></p>\n<p>此步骤只是验证镜像仓库是否安装成功，提前一步将镜像推送至仓库，安装集群时仍然会进行一次操作，验证所有镜像是否推送，所有此步骤可有可无</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./kk artifact image push -f config-sample.yaml -a kubesphere-4.1.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p><strong>推送成功</strong></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222220209143.png\" alt=\"image-20250222220209143\"></p>\n<h3 id=\"5、创建Kubernetes集群\"><a href=\"#5、创建Kubernetes集群\" class=\"headerlink\" title=\"5、创建Kubernetes集群\"></a>5、创建Kubernetes集群</h3><p>执行命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./kk create cluster -f config-sample.yaml -a kubesphere-4.1.tar.gz --with-local-storage</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>指定 –with-local-storage 参数会默认部署 openebs localpv，如需对接其他存储，可在 Kubernetes 集群部署完成后自行安装。</p>\n</blockquote>\n<p>在运行后会打印出所有节点的信息，确认无误后 输入 <code>yes</code> 进行安装</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222220302734.png\" alt=\"image-20250222220302734\"></p>\n<p>安装完成</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222221103082.png\" alt=\"image-20250222221103082\"></p>\n<h3 id=\"6、安装Kubesphere\"><a href=\"#6、安装Kubesphere\" class=\"headerlink\" title=\"6、安装Kubesphere\"></a>6、安装Kubesphere</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">helm upgrade --install -n kubesphere-system --create-namespace ks-core ks-core-1.1.3.tgz \\</span><br><span class=\"line\">     --set global.imageRegistry=dockerhub.kubekey.local/ks \\</span><br><span class=\"line\">     --set extension.imageRegistry=dockerhub.kubekey.local/ks \\</span><br><span class=\"line\">     --set ksExtensionRepository.image.tag=v1.1.2 \\</span><br><span class=\"line\">     --debug \\</span><br><span class=\"line\">     --wait</span><br></pre></td></tr></table></figure>\n\n<p>安装完成</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222221251185.png\" alt=\"image-20250222221251185\"></p>\n<p>显示了登录的地址和默认账号密码，可以直接登录</p>\n<h3 id=\"7、自己打包离线包（可选）\"><a href=\"#7、自己打包离线包（可选）\" class=\"headerlink\" title=\"7、自己打包离线包（可选）\"></a>7、自己打包离线包（可选）</h3><p>因为本文提供的镜像包是默认官方的，如果有其他需求请自己打包</p>\n<p>需要准备一台可以联网的主机，无环境要求</p>\n<p>将<code>manifest-sample.yaml</code>资源配置文件，<code>kk</code> 上传到运行目录</p>\n<p>修改完成后运行如下命令，进行构建</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./kk artifact export -m manifest-sample.yaml -o kubesphere.tar.gz</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8、其他文件\"><a href=\"#8、其他文件\" class=\"headerlink\" title=\"8、其他文件\"></a>8、其他文件</h3><p>其他文件官方获取方式：</p>\n<p><strong>kk</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -sSL https://get-kk.kubesphere.io | sh -</span><br></pre></td></tr></table></figure>\n\n<p><strong>manifest-sample.yaml</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export KKZONE=cn</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">如需使用 kk 离线部署镜像仓库，添加 --with-registry 打包镜像仓库的安装文件</span></span><br><span class=\"line\">./kk create manifest --with-kubernetes v1.26.12 --with-registry</span><br></pre></td></tr></table></figure>\n\n<p><strong>ks-core-1.1.3.tgz</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装 helm</span></span><br><span class=\"line\">curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下载 KubeSphere Core Helm Chart</span></span><br><span class=\"line\">VERSION=1.1.3     # Chart 版本</span><br><span class=\"line\">helm fetch https://charts.kubesphere.io/main/ks-core-$&#123;VERSION&#125;.tgz</span><br></pre></td></tr></table></figure>\n\n<p><strong>config-sample.yam</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./kk create config --with-kubernetes v1.26.12</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=4d6be599-989c-b24b-45ad-ebc2537356f8","cover_type":"img","excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>本篇是离线安装<code>Kubernetes</code>和<code>Kubesphere</code>的教程，包含初始化镜像仓库<code>harbor</code> 导入必要镜像至镜像仓库</p>\n<blockquote>\n<p>Kubernetes版本：v1.26.12</p>\n<p>Kubesphere版本：4.1</p>\n</blockquote>\n<p>参考教程：<a href=\"https://www.kubesphere.io/zh/docs/v4.1/03-installation-and-upgrade/02-install-kubesphere/04-offline-installation/\">离线安装 KubeSphere</a></p>\n<h2 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h2><h3 id=\"1、安装依赖包\"><a href=\"#1、安装依赖包\" class=\"headerlink\" title=\"1、安装依赖包\"></a>1、安装依赖包</h3><p>所有节点需要安装必要依赖</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y socat conntrack</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、导入文件包并修改配置文件\"><a href=\"#2、导入文件包并修改配置文件\" class=\"headerlink\" title=\"2、导入文件包并修改配置文件\"></a>2、导入文件包并修改配置文件</h3><p>以下是文件说明，已经放在网盘了，地址：</p>\n<p><code>config-sample.yaml</code>：集群配置文件</p>\n<p><code>create_project_harbor.sh</code>：初始化harbor项目脚本</p>\n<p><code>kk</code>：KubeKey工具</p>\n<p><code>ks-core-1.1.3.tgz</code>：helm安装包</p>\n<p><code>kubesphere-4.1.tar.gz</code>：Kubernetes离线包</p>\n<p>将这些文件复制到主节点的工作目录下</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">kubekey.kubesphere.io/v1alpha2</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Cluster</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\">  <span class=\"attr\">name:</span> <span class=\"string\">sample</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\">  <span class=\"attr\">hosts:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> &#123;<span class=\"attr\">name:</span> <span class=\"string\">k8s-master</span>, <span class=\"attr\">address:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.20</span>, <span class=\"attr\">internalAddress:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.20</span>, <span class=\"attr\">user:</span> <span class=\"string\">root</span>, <span class=\"attr\">password:</span> <span class=\"string\">&quot;root&quot;</span>&#125;</span><br><span class=\"line\">  <span class=\"bullet\">-</span> &#123;<span class=\"attr\">name:</span> <span class=\"string\">k8s-node1</span>, <span class=\"attr\">address:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.21</span>, <span class=\"attr\">internalAddress:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.21</span>, <span class=\"attr\">user:</span> <span class=\"string\">root</span>, <span class=\"attr\">password:</span> <span class=\"string\">&quot;root&quot;</span>&#125;</span><br><span class=\"line\">  <span class=\"bullet\">-</span> &#123;<span class=\"attr\">name:</span> <span class=\"string\">k8s-node2</span>, <span class=\"attr\">address:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.22</span>, <span class=\"attr\">internalAddress:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.22</span>, <span class=\"attr\">user:</span> <span class=\"string\">root</span>, <span class=\"attr\">password:</span> <span class=\"string\">&quot;root&quot;</span>&#125;</span><br><span class=\"line\">  <span class=\"attr\">roleGroups:</span></span><br><span class=\"line\">    <span class=\"attr\">etcd:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">k8s-master</span></span><br><span class=\"line\">    <span class=\"attr\">control-plane:</span> </span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">k8s-master</span></span><br><span class=\"line\">    <span class=\"attr\">worker:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">k8s-node1</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">k8s-node2</span></span><br><span class=\"line\">    <span class=\"attr\">registry:</span> <span class=\"comment\"># 镜像仓库安装的位置</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">k8s-master</span> </span><br><span class=\"line\">  <span class=\"attr\">controlPlaneEndpoint:</span></span><br><span class=\"line\">    <span class=\"comment\">## Internal loadbalancer for apiservers </span></span><br><span class=\"line\">    <span class=\"comment\"># internalLoadbalancer: haproxy</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attr\">domain:</span> <span class=\"string\">lb.kubesphere.local</span></span><br><span class=\"line\">    <span class=\"attr\">address:</span> <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">port:</span> <span class=\"number\">6443</span></span><br><span class=\"line\">  <span class=\"attr\">kubernetes:</span></span><br><span class=\"line\">    <span class=\"attr\">kubeletArgs:</span> <span class=\"comment\"># 额外安装参数</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">--root-dir=/app/kubelet</span> <span class=\"comment\"># 工作目录在/app下面，防止占满根目录</span></span><br><span class=\"line\">    <span class=\"attr\">version:</span> <span class=\"string\">v1.26.12</span></span><br><span class=\"line\">    <span class=\"attr\">clusterName:</span> <span class=\"string\">cluster.local</span></span><br><span class=\"line\">    <span class=\"attr\">autoRenewCerts:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">containerManager:</span> <span class=\"string\">docker</span></span><br><span class=\"line\">  <span class=\"attr\">etcd:</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">kubekey</span></span><br><span class=\"line\">  <span class=\"attr\">network:</span></span><br><span class=\"line\">    <span class=\"attr\">plugin:</span> <span class=\"string\">calico</span></span><br><span class=\"line\">    <span class=\"attr\">kubePodsCIDR:</span> <span class=\"number\">10.233</span><span class=\"number\">.64</span><span class=\"number\">.0</span><span class=\"string\">/18</span></span><br><span class=\"line\">    <span class=\"attr\">kubeServiceCIDR:</span> <span class=\"number\">10.233</span><span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"string\">/18</span></span><br><span class=\"line\">    <span class=\"comment\">## multus support. https://github.com/k8snetworkplumbingwg/multus-cni</span></span><br><span class=\"line\">    <span class=\"attr\">multusCNI:</span></span><br><span class=\"line\">      <span class=\"attr\">enabled:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"attr\">storage:</span></span><br><span class=\"line\">    <span class=\"attr\">openebs:</span> <span class=\"comment\"># 安装openebs存储，这是基于local storage的一种存储，数据保存在本地</span></span><br><span class=\"line\">      <span class=\"attr\">basePath:</span> <span class=\"string\">/app/openebs/</span> <span class=\"comment\"># 指定安装位置</span></span><br><span class=\"line\">  <span class=\"attr\">registry:</span> <span class=\"comment\"># 镜像仓库配置</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">harbor</span></span><br><span class=\"line\">    <span class=\"attr\">auths:</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;dockerhub.kubekey.local&quot;:</span></span><br><span class=\"line\">        <span class=\"attr\">username:</span> <span class=\"string\">admin</span></span><br><span class=\"line\">        <span class=\"attr\">password:</span> <span class=\"string\">Harbor12345</span></span><br><span class=\"line\">        <span class=\"attr\">skipTLSVerify:</span> <span class=\"literal\">true</span> <span class=\"comment\"># 跳过tls验证</span></span><br><span class=\"line\">    <span class=\"attr\">privateRegistry:</span> <span class=\"string\">&quot;dockerhub.kubekey.local&quot;</span> <span class=\"comment\"># 私有仓库配置</span></span><br><span class=\"line\">    <span class=\"attr\">namespaceOverride:</span> <span class=\"string\">&quot;kubesphereio&quot;</span> <span class=\"comment\"># 默认命名空间</span></span><br><span class=\"line\">    <span class=\"attr\">registryMirrors:</span> []</span><br><span class=\"line\">    <span class=\"attr\">insecureRegistries:</span> []</span><br><span class=\"line\">  <span class=\"attr\">addons:</span> []</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、创建镜像仓库（可选）\"><a href=\"#3、创建镜像仓库（可选）\" class=\"headerlink\" title=\"3、创建镜像仓库（可选）\"></a>3、创建镜像仓库（可选）</h3><p>如果自己存在镜像仓库可以直接配置到config文件内（目前没有配置成功过，所以默认自己搭建一个仓库，将数据目录放到数据盘下）</p>\n<p><strong>赋于kk执行权限</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chmod +x kk</span><br></pre></td></tr></table></figure>\n\n<p><strong>执行创建仓库命令</strong></p>\n<p>PS：此操作会在<code>registry</code> 节点安装Docker，docker-compose 等软件，并且将 harbor 文件放在&#x2F;opt&#x2F;harbor 目录下</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./kk init registry -f config-sample.yaml -a kubesphere-4.1.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p>安装完成后显示如下画面</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222213403587.png\" alt=\"image-20250222213403587\"></p>\n<p>验证容器是否启动，目录是否存在</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222213517765.png\" alt=\"image-20250222213517765\"></p>\n<h4 id=\"修改docker默认存储目录，Harbor数据目录（可选）\"><a href=\"#修改docker默认存储目录，Harbor数据目录（可选）\" class=\"headerlink\" title=\"修改docker默认存储目录，Harbor数据目录（可选）\"></a>修改docker默认存储目录，Harbor数据目录（可选）</h4><p>因为docker存储目录默认在 <code>/var/lib/docker/</code> 后面会把根目录塞满，需要将目录转移至数据盘下</p>\n<p><strong>修改docker默认存储目录</strong></p>\n<p>PS：此操作只建议在刚安装docker后操作</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">停止docker</span></span><br><span class=\"line\">systemctl stop docker</span><br><span class=\"line\">systemctl status docker</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">复制docker数据目录至/app/docker</span></span><br><span class=\"line\">cp -r /var/lib/docker/ /app/docker/</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">修改配置文件</span></span><br><span class=\"line\">vim /etc/docker/daemon.json</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">添加如下配置</span></span><br><span class=\"line\">&quot;data-root&quot;: &quot;/app/docker&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重启docker</span></span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl start docker</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">删除原目录</span></span><br><span class=\"line\">rm -rf /var/lib/docker/</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">修改harbor数据目录</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">修改harbor配置文件</span></span><br><span class=\"line\">cd /opt/harbor/</span><br><span class=\"line\">vim harbor.yml</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">56行   data_volume                  改成 指定目录</span></span><br><span class=\"line\">:56 data_volume: /mnt/registry -&gt; data_volume: /app/registry</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重新初始化harbor</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">如果启动出现文件，删除docker目录重启docker后再次运行</span></span><br><span class=\"line\">sh install.sh</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">删除原目录</span></span><br><span class=\"line\">rm -rf /mnt/registry</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222214834331.png\" alt=\"启动成功\"></p>\n<h3 id=\"4、推送镜像至仓库\"><a href=\"#4、推送镜像至仓库\" class=\"headerlink\" title=\"4、推送镜像至仓库\"></a>4、推送镜像至仓库</h3><p>运行脚本创建harbor项目</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod +x create_project_harbor.sh</span><br><span class=\"line\">sh create_project_harbor.sh</span><br></pre></td></tr></table></figure>\n\n<p>PS：如果使用别的仓库，需要修改如下配置</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">url=&quot;https://dockerhub.kubekey.local&quot;  # 或修改为实际镜像仓库地址</span><br><span class=\"line\">user=&quot;admin&quot;</span><br><span class=\"line\">passwd=&quot;Harbor12345&quot;</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p><strong>推送镜像至仓库（可选）</strong></p>\n<p>此步骤只是验证镜像仓库是否安装成功，提前一步将镜像推送至仓库，安装集群时仍然会进行一次操作，验证所有镜像是否推送，所有此步骤可有可无</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./kk artifact image push -f config-sample.yaml -a kubesphere-4.1.tar.gz</span><br></pre></td></tr></table></figure>\n\n<p><strong>推送成功</strong></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222220209143.png\" alt=\"image-20250222220209143\"></p>\n<h3 id=\"5、创建Kubernetes集群\"><a href=\"#5、创建Kubernetes集群\" class=\"headerlink\" title=\"5、创建Kubernetes集群\"></a>5、创建Kubernetes集群</h3><p>执行命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./kk create cluster -f config-sample.yaml -a kubesphere-4.1.tar.gz --with-local-storage</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>指定 –with-local-storage 参数会默认部署 openebs localpv，如需对接其他存储，可在 Kubernetes 集群部署完成后自行安装。</p>\n</blockquote>\n<p>在运行后会打印出所有节点的信息，确认无误后 输入 <code>yes</code> 进行安装</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222220302734.png\" alt=\"image-20250222220302734\"></p>\n<p>安装完成</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222221103082.png\" alt=\"image-20250222221103082\"></p>\n<h3 id=\"6、安装Kubesphere\"><a href=\"#6、安装Kubesphere\" class=\"headerlink\" title=\"6、安装Kubesphere\"></a>6、安装Kubesphere</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">helm upgrade --install -n kubesphere-system --create-namespace ks-core ks-core-1.1.3.tgz \\</span><br><span class=\"line\">     --set global.imageRegistry=dockerhub.kubekey.local/ks \\</span><br><span class=\"line\">     --set extension.imageRegistry=dockerhub.kubekey.local/ks \\</span><br><span class=\"line\">     --set ksExtensionRepository.image.tag=v1.1.2 \\</span><br><span class=\"line\">     --debug \\</span><br><span class=\"line\">     --wait</span><br></pre></td></tr></table></figure>\n\n<p>安装完成</p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/note/image-20250222221251185.png\" alt=\"image-20250222221251185\"></p>\n<p>显示了登录的地址和默认账号密码，可以直接登录</p>\n<h3 id=\"7、自己打包离线包（可选）\"><a href=\"#7、自己打包离线包（可选）\" class=\"headerlink\" title=\"7、自己打包离线包（可选）\"></a>7、自己打包离线包（可选）</h3><p>因为本文提供的镜像包是默认官方的，如果有其他需求请自己打包</p>\n<p>需要准备一台可以联网的主机，无环境要求</p>\n<p>将<code>manifest-sample.yaml</code>资源配置文件，<code>kk</code> 上传到运行目录</p>\n<p>修改完成后运行如下命令，进行构建</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./kk artifact export -m manifest-sample.yaml -o kubesphere.tar.gz</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8、其他文件\"><a href=\"#8、其他文件\" class=\"headerlink\" title=\"8、其他文件\"></a>8、其他文件</h3><p>其他文件官方获取方式：</p>\n<p><strong>kk</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -sSL https://get-kk.kubesphere.io | sh -</span><br></pre></td></tr></table></figure>\n\n<p><strong>manifest-sample.yaml</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export KKZONE=cn</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">如需使用 kk 离线部署镜像仓库，添加 --with-registry 打包镜像仓库的安装文件</span></span><br><span class=\"line\">./kk create manifest --with-kubernetes v1.26.12 --with-registry</span><br></pre></td></tr></table></figure>\n\n<p><strong>ks-core-1.1.3.tgz</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装 helm</span></span><br><span class=\"line\">curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下载 KubeSphere Core Helm Chart</span></span><br><span class=\"line\">VERSION=1.1.3     # Chart 版本</span><br><span class=\"line\">helm fetch https://charts.kubesphere.io/main/ks-core-$&#123;VERSION&#125;.tgz</span><br></pre></td></tr></table></figure>\n\n<p><strong>config-sample.yam</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./kk create config --with-kubernetes v1.26.12</span><br></pre></td></tr></table></figure>\n"},{"title":"Kubesphere 4.1 离线模式安装插件卡住","abbrlink":"3fb4","date":"2025-02-26T00:56:31.000Z","_content":"\n# 离线模式安装插件卡住\n\n卡主的原因是离线模式无网络，拉取镜像失败\n\n\n\n### 从扩展模块拉取安装包\n\n```bash\nkubectl cp -n kubesphere-system extensions-museum-7b5f75bbf8-s84h8:/charts/gateway-1.0.2.tgz /app/gateway-1.0.2.tgz\n```\n\n\n### 进行安装\n\n需要指明命名空间，名称，必须和原来的一致\n\n```bash\nhelm  upgrade --install --namespace extension-gateway  gateway gateway-1.0.2.tgz\n```\n\n\n```bash\nhelm  upgrade --install --namespace extension-gateway  gateway-agent gateway-1.0.2.tgz\n\n\n\n\n```\n","source":"_posts/服务器/Kubernetes/离线模式安装插件卡住.md","raw":"---\ntitle: Kubesphere 4.1 离线模式安装插件卡住\ncategories:\n  - 服务器\ntags:\n  - K8S\n  - Kubesphere\nabbrlink: 3fb4\ndate: 2025-02-26 08:56:31\n---\n\n# 离线模式安装插件卡住\n\n卡主的原因是离线模式无网络，拉取镜像失败\n\n\n\n### 从扩展模块拉取安装包\n\n```bash\nkubectl cp -n kubesphere-system extensions-museum-7b5f75bbf8-s84h8:/charts/gateway-1.0.2.tgz /app/gateway-1.0.2.tgz\n```\n\n\n### 进行安装\n\n需要指明命名空间，名称，必须和原来的一致\n\n```bash\nhelm  upgrade --install --namespace extension-gateway  gateway gateway-1.0.2.tgz\n```\n\n\n```bash\nhelm  upgrade --install --namespace extension-gateway  gateway-agent gateway-1.0.2.tgz\n\n\n\n\n```\n","slug":"服务器/Kubernetes/离线模式安装插件卡住","published":1,"updated":"2025-06-02T07:27:40.309Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86x4005azcqb3m7a5aq9","content":"<h1 id=\"离线模式安装插件卡住\"><a href=\"#离线模式安装插件卡住\" class=\"headerlink\" title=\"离线模式安装插件卡住\"></a>离线模式安装插件卡住</h1><p>卡主的原因是离线模式无网络，拉取镜像失败</p>\n<h3 id=\"从扩展模块拉取安装包\"><a href=\"#从扩展模块拉取安装包\" class=\"headerlink\" title=\"从扩展模块拉取安装包\"></a>从扩展模块拉取安装包</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kubectl <span class=\"built_in\">cp</span> -n kubesphere-system extensions-museum-7b5f75bbf8-s84h8:/charts/gateway-1.0.2.tgz /app/gateway-1.0.2.tgz</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"进行安装\"><a href=\"#进行安装\" class=\"headerlink\" title=\"进行安装\"></a>进行安装</h3><p>需要指明命名空间，名称，必须和原来的一致</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">helm  upgrade --install --namespace extension-gateway  gateway gateway-1.0.2.tgz</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">helm  upgrade --install --namespace extension-gateway  gateway-agent gateway-1.0.2.tgz</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=63c16a1c-77cb-42d8-d7fd-03f79dae6ce8","cover_type":"img","excerpt":"","more":"<h1 id=\"离线模式安装插件卡住\"><a href=\"#离线模式安装插件卡住\" class=\"headerlink\" title=\"离线模式安装插件卡住\"></a>离线模式安装插件卡住</h1><p>卡主的原因是离线模式无网络，拉取镜像失败</p>\n<h3 id=\"从扩展模块拉取安装包\"><a href=\"#从扩展模块拉取安装包\" class=\"headerlink\" title=\"从扩展模块拉取安装包\"></a>从扩展模块拉取安装包</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kubectl <span class=\"built_in\">cp</span> -n kubesphere-system extensions-museum-7b5f75bbf8-s84h8:/charts/gateway-1.0.2.tgz /app/gateway-1.0.2.tgz</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"进行安装\"><a href=\"#进行安装\" class=\"headerlink\" title=\"进行安装\"></a>进行安装</h3><p>需要指明命名空间，名称，必须和原来的一致</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">helm  upgrade --install --namespace extension-gateway  gateway gateway-1.0.2.tgz</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">helm  upgrade --install --namespace extension-gateway  gateway-agent gateway-1.0.2.tgz</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n"},{"title":"Nginx反向代理Minio","abbrlink":"a503","date":"2024-12-30T00:56:31.000Z","_content":"\n## 前言\n\n在部署Minio时，直接暴露其服务可能带来安全风险。通过Nginx作为反向代理，可以有效增强安全性并优化访问控制。本文将简明介绍如何配置Nginx以代理Minio服务，确保您的数据存储解决方案既安全又高效。让我们快速了解这一重要设置。\n\n## 配置\n\n**API端口反向代理配置：**\n\n```shell\n# minio-api反向代理配置\nserver {\n    server_name  localhost;\n    listen 9000; # 外网端口\n    location / {\n\t\tproxy_set_header Host $http_host;\n\t\tproxy_pass  http://192.168.1.10:9001/;# minio地址\n   }\n}\n\n```\n\n> 如果出现 页面上显示“ The request signature we calculated does not match the signature you provided. Check your key and signing method.”可以使用此配置文件解决\n>\n> 签名是放在header头当中的，所以一定要设置 `proxy_set_header`\n","source":"_posts/服务器/Nginx/Nginx反向代理Minio.md","raw":"---\ntitle: Nginx反向代理Minio\ncategories:\n  - 服务器\ntags:\n  - Minio\n  - Nginx\nabbrlink: a503\ndate: 2024-12-30 08:56:31\n---\n\n## 前言\n\n在部署Minio时，直接暴露其服务可能带来安全风险。通过Nginx作为反向代理，可以有效增强安全性并优化访问控制。本文将简明介绍如何配置Nginx以代理Minio服务，确保您的数据存储解决方案既安全又高效。让我们快速了解这一重要设置。\n\n## 配置\n\n**API端口反向代理配置：**\n\n```shell\n# minio-api反向代理配置\nserver {\n    server_name  localhost;\n    listen 9000; # 外网端口\n    location / {\n\t\tproxy_set_header Host $http_host;\n\t\tproxy_pass  http://192.168.1.10:9001/;# minio地址\n   }\n}\n\n```\n\n> 如果出现 页面上显示“ The request signature we calculated does not match the signature you provided. Check your key and signing method.”可以使用此配置文件解决\n>\n> 签名是放在header头当中的，所以一定要设置 `proxy_set_header`\n","slug":"服务器/Nginx/Nginx反向代理Minio","published":1,"updated":"2025-06-02T07:27:59.189Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86x5005dzcqbf09137bi","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在部署Minio时，直接暴露其服务可能带来安全风险。通过Nginx作为反向代理，可以有效增强安全性并优化访问控制。本文将简明介绍如何配置Nginx以代理Minio服务，确保您的数据存储解决方案既安全又高效。让我们快速了解这一重要设置。</p>\n<h2 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h2><p><strong>API端口反向代理配置：</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">minio-api反向代理配置</span></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    server_name  localhost;</span><br><span class=\"line\">    listen 9000; # 外网端口</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">\t\tproxy_set_header Host $http_host;</span><br><span class=\"line\">\t\tproxy_pass  http://192.168.1.10:9001/;# minio地址</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>如果出现 页面上显示“ The request signature we calculated does not match the signature you provided. Check your key and signing method.”可以使用此配置文件解决</p>\n<p>签名是放在header头当中的，所以一定要设置 <code>proxy_set_header</code></p>\n</blockquote>\n","cover":"https://t.alcy.cc/pc?_r_=024f34c4-f356-cbbc-4d6d-2cf3c7c900a3","cover_type":"img","excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在部署Minio时，直接暴露其服务可能带来安全风险。通过Nginx作为反向代理，可以有效增强安全性并优化访问控制。本文将简明介绍如何配置Nginx以代理Minio服务，确保您的数据存储解决方案既安全又高效。让我们快速了解这一重要设置。</p>\n<h2 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h2><p><strong>API端口反向代理配置：</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">minio-api反向代理配置</span></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    server_name  localhost;</span><br><span class=\"line\">    listen 9000; # 外网端口</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">\t\tproxy_set_header Host $http_host;</span><br><span class=\"line\">\t\tproxy_pass  http://192.168.1.10:9001/;# minio地址</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>如果出现 页面上显示“ The request signature we calculated does not match the signature you provided. Check your key and signing method.”可以使用此配置文件解决</p>\n<p>签名是放在header头当中的，所以一定要设置 <code>proxy_set_header</code></p>\n</blockquote>\n"},{"title":"设置redis密码","abbrlink":"7763","date":"2024-12-30T00:56:31.000Z","_content":"\n安装Redis后，需要设置密码进行访问\n\nPS：在设置完密码后，无密码也可以登录，但是无法获取数据，set数据\n\n## 修改配置\n\n```shell\n# 修改配置文件\nvim redis.conf\n\n## :901 将requirepass 前面的# 去掉 后面设置成密码\n## 例如：requirepass redis@@\n```\n\n设置完成\n","source":"_posts/服务器/Redis/设置redis密码.md","raw":"---\ntitle: 设置redis密码\ncategories:\n  - 服务器\ntags:\n  - Redis\nabbrlink: '7763'\ndate: 2024-12-30 08:56:31\n---\n\n安装Redis后，需要设置密码进行访问\n\nPS：在设置完密码后，无密码也可以登录，但是无法获取数据，set数据\n\n## 修改配置\n\n```shell\n# 修改配置文件\nvim redis.conf\n\n## :901 将requirepass 前面的# 去掉 后面设置成密码\n## 例如：requirepass redis@@\n```\n\n设置完成\n","slug":"服务器/Redis/设置redis密码","published":1,"updated":"2025-06-02T07:28:07.491Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86x5005hzcqbae73ewba","content":"<p>安装Redis后，需要设置密码进行访问</p>\n<p>PS：在设置完密码后，无密码也可以登录，但是无法获取数据，set数据</p>\n<h2 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">修改配置文件</span></span><br><span class=\"line\">vim redis.conf</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># :901 将requirepass 前面的# 去掉 后面设置成密码</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 例如：requirepass redis@@</span></span></span><br></pre></td></tr></table></figure>\n\n<p>设置完成</p>\n","cover":"https://t.alcy.cc/pc?_r_=8afd9657-3322-dd2d-480f-e197b9282072","cover_type":"img","excerpt":"","more":"<p>安装Redis后，需要设置密码进行访问</p>\n<p>PS：在设置完密码后，无密码也可以登录，但是无法获取数据，set数据</p>\n<h2 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">修改配置文件</span></span><br><span class=\"line\">vim redis.conf</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># :901 将requirepass 前面的# 去掉 后面设置成密码</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 例如：requirepass redis@@</span></span></span><br></pre></td></tr></table></figure>\n\n<p>设置完成</p>\n"},{"title":"外部访问Redis","abbrlink":"ab90","date":"2024-12-30T00:56:31.000Z","_content":"\n[安装Redis](安装Redis.md)后，需要在外部进行访问\n\nPS：生产环境请勿任意将Redis服务暴漏出来\n\n## 修改配置\n\n```shell\n# 修改配置文件\nvim redis.conf\n\n## :75 将bind 172.0.0.1 -::1 改成 bind 0.0.0.0\n```\n\n设置完成\n","source":"_posts/服务器/Redis/外部访问Redis.md","raw":"---\ntitle: 外部访问Redis\ncategories:\n  - 服务器\ntags:\n  - Redis\nabbrlink: ab90\ndate: 2024-12-30 08:56:31\n---\n\n[安装Redis](安装Redis.md)后，需要在外部进行访问\n\nPS：生产环境请勿任意将Redis服务暴漏出来\n\n## 修改配置\n\n```shell\n# 修改配置文件\nvim redis.conf\n\n## :75 将bind 172.0.0.1 -::1 改成 bind 0.0.0.0\n```\n\n设置完成\n","slug":"服务器/Redis/外部访问Redis","published":1,"updated":"2025-06-02T07:28:05.040Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86x6005kzcqb60yyhzs9","content":"<p><a href=\"%E5%AE%89%E8%A3%85Redis.md\">安装Redis</a>后，需要在外部进行访问</p>\n<p>PS：生产环境请勿任意将Redis服务暴漏出来</p>\n<h2 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">修改配置文件</span></span><br><span class=\"line\">vim redis.conf</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># :75 将bind 172.0.0.1 -::1 改成 bind 0.0.0.0</span></span></span><br></pre></td></tr></table></figure>\n\n<p>设置完成</p>\n","cover":"https://t.alcy.cc/pc?_r_=c7ef32ee-ec7d-7d9f-1345-c4e8f137f149","cover_type":"img","excerpt":"","more":"<p><a href=\"%E5%AE%89%E8%A3%85Redis.md\">安装Redis</a>后，需要在外部进行访问</p>\n<p>PS：生产环境请勿任意将Redis服务暴漏出来</p>\n<h2 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">修改配置文件</span></span><br><span class=\"line\">vim redis.conf</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># :75 将bind 172.0.0.1 -::1 改成 bind 0.0.0.0</span></span></span><br></pre></td></tr></table></figure>\n\n<p>设置完成</p>\n"},{"title":"将Redis注册成服务","abbrlink":"b3cc","date":"2024-12-30T00:56:31.000Z","_content":"\n在[安装Redis](安装Redis.md)后，需要进行后台启动，需要使Redis服务开机自启\n\n## 配置\n\n```shell\n\n# 后台启动\n\nvim redis.conf\n\n## :257 daemonize no 改成 daemonize yes\n\n```\n\n新建一个系统服务文件\n\n```shell\nvim /etc/systemd/system/redis.service\n```\n\n```service\n[Unit]\nDescription=redis-server\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/app/redis/bin/redis-server /app/redis/redis.conf\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n```\n\n```shell\n# 重载\nsystemctl daemon-reload\n\n# 操作redis服务\n## 启动\nsystemctl start redis\n## 停止\nsystemctl stop redis\n## 重启\nsystemctl restart redis\n## 查看状态\nsystemctl status redis\n\n# 开机自启\nsystemctl enable redis\n\n# 查看redis进程\nps -ef | grep redis\n```\n","source":"_posts/服务器/Redis/Redis注册成服务.md","raw":"---\ntitle: 将Redis注册成服务\ncategories:\n  - 服务器\ntags:\n  - Redis\nabbrlink: b3cc\ndate: 2024-12-30 08:56:31\n---\n\n在[安装Redis](安装Redis.md)后，需要进行后台启动，需要使Redis服务开机自启\n\n## 配置\n\n```shell\n\n# 后台启动\n\nvim redis.conf\n\n## :257 daemonize no 改成 daemonize yes\n\n```\n\n新建一个系统服务文件\n\n```shell\nvim /etc/systemd/system/redis.service\n```\n\n```service\n[Unit]\nDescription=redis-server\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/app/redis/bin/redis-server /app/redis/redis.conf\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n```\n\n```shell\n# 重载\nsystemctl daemon-reload\n\n# 操作redis服务\n## 启动\nsystemctl start redis\n## 停止\nsystemctl stop redis\n## 重启\nsystemctl restart redis\n## 查看状态\nsystemctl status redis\n\n# 开机自启\nsystemctl enable redis\n\n# 查看redis进程\nps -ef | grep redis\n```\n","slug":"服务器/Redis/Redis注册成服务","published":1,"updated":"2025-06-02T07:28:02.456Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86x7005ozcqba8tr9jgw","content":"<p>在<a href=\"%E5%AE%89%E8%A3%85Redis.md\">安装Redis</a>后，需要进行后台启动，需要使Redis服务开机自启</p>\n<h2 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">后台启动</span></span><br><span class=\"line\"></span><br><span class=\"line\">vim redis.conf</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># :257 daemonize no 改成 daemonize yes</span></span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>新建一个系统服务文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/systemd/system/redis.service</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=redis-server</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=forking</span><br><span class=\"line\">ExecStart=/app/redis/bin/redis-server /app/redis/redis.conf</span><br><span class=\"line\">PrivateTmp=true</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重载</span></span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">操作redis服务</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 启动</span></span></span><br><span class=\"line\">systemctl start redis</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 停止</span></span></span><br><span class=\"line\">systemctl stop redis</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 重启</span></span></span><br><span class=\"line\">systemctl restart redis</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 查看状态</span></span></span><br><span class=\"line\">systemctl status redis</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">开机自启</span></span><br><span class=\"line\">systemctl enable redis</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看redis进程</span></span><br><span class=\"line\">ps -ef | grep redis</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=69aa6930-1f3d-9c71-76d6-39de42cc6607","cover_type":"img","excerpt":"","more":"<p>在<a href=\"%E5%AE%89%E8%A3%85Redis.md\">安装Redis</a>后，需要进行后台启动，需要使Redis服务开机自启</p>\n<h2 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">后台启动</span></span><br><span class=\"line\"></span><br><span class=\"line\">vim redis.conf</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># :257 daemonize no 改成 daemonize yes</span></span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>新建一个系统服务文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/systemd/system/redis.service</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=redis-server</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=forking</span><br><span class=\"line\">ExecStart=/app/redis/bin/redis-server /app/redis/redis.conf</span><br><span class=\"line\">PrivateTmp=true</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重载</span></span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">操作redis服务</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 启动</span></span></span><br><span class=\"line\">systemctl start redis</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 停止</span></span></span><br><span class=\"line\">systemctl stop redis</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 重启</span></span></span><br><span class=\"line\">systemctl restart redis</span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\"># 查看状态</span></span></span><br><span class=\"line\">systemctl status redis</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">开机自启</span></span><br><span class=\"line\">systemctl enable redis</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看redis进程</span></span><br><span class=\"line\">ps -ef | grep redis</span><br></pre></td></tr></table></figure>\n"},{"title":"Compose 安装","abbrlink":"159","date":"2025-02-25T02:40:02.000Z","_content":"\n\nLinux 上我们可以从 Github 上下载它的二进制包来使用，最新发行的版本地址：[https://github.com/docker/compose/releases](https://github.com/docker/compose/releases)。\n\n运行以下命令以下载 Docker Compose 的当前稳定版本：\n\n```\nsudo curl -L \"https://github.com/docker/compose/releases/download/v2.2.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n```\n\n要安装其他版本的 Compose，请替换 v2.2.2。\n\n将可执行权限应用于二进制文件：\n\n```\nsudo chmod +x /usr/local/bin/docker-compose\n```\n\n创建软链：\n\n```\nsudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose\n```\n\n测试是否安装成功：\n\n```\ndocker-compose version\ncker-compose version 1.24.1, build 4667896b\n```\n\n\n","source":"_posts/服务器/Docker/Docker-Compose/Compose 安装.md","raw":"---\ntitle: Compose 安装\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\nabbrlink: '159'\ndate: 2025-02-25 10:40:02\n---\n\n\nLinux 上我们可以从 Github 上下载它的二进制包来使用，最新发行的版本地址：[https://github.com/docker/compose/releases](https://github.com/docker/compose/releases)。\n\n运行以下命令以下载 Docker Compose 的当前稳定版本：\n\n```\nsudo curl -L \"https://github.com/docker/compose/releases/download/v2.2.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n```\n\n要安装其他版本的 Compose，请替换 v2.2.2。\n\n将可执行权限应用于二进制文件：\n\n```\nsudo chmod +x /usr/local/bin/docker-compose\n```\n\n创建软链：\n\n```\nsudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose\n```\n\n测试是否安装成功：\n\n```\ndocker-compose version\ncker-compose version 1.24.1, build 4667896b\n```\n\n\n","slug":"服务器/Docker/Docker-Compose/Compose 安装","published":1,"updated":"2025-06-02T07:26:59.394Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86x7005rzcqb872i3p7c","content":"<p>Linux 上我们可以从 Github 上下载它的二进制包来使用，最新发行的版本地址：<a href=\"https://github.com/docker/compose/releases\">https://github.com/docker/compose/releases</a>。</p>\n<p>运行以下命令以下载 Docker Compose 的当前稳定版本：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo curl -L &quot;https://github.com/docker/compose/releases/download/v2.2.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>\n\n<p>要安装其他版本的 Compose，请替换 v2.2.2。</p>\n<p>将可执行权限应用于二进制文件：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>\n\n<p>创建软链：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose</span><br></pre></td></tr></table></figure>\n\n<p>测试是否安装成功：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose version</span><br><span class=\"line\">cker-compose version 1.24.1, build 4667896b</span><br></pre></td></tr></table></figure>\n\n\n","cover":"https://t.alcy.cc/pc?_r_=d6c7b2d7-b16a-6079-d08f-4904bbab7e5e","cover_type":"img","excerpt":"","more":"<p>Linux 上我们可以从 Github 上下载它的二进制包来使用，最新发行的版本地址：<a href=\"https://github.com/docker/compose/releases\">https://github.com/docker/compose/releases</a>。</p>\n<p>运行以下命令以下载 Docker Compose 的当前稳定版本：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo curl -L &quot;https://github.com/docker/compose/releases/download/v2.2.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>\n\n<p>要安装其他版本的 Compose，请替换 v2.2.2。</p>\n<p>将可执行权限应用于二进制文件：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>\n\n<p>创建软链：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose</span><br></pre></td></tr></table></figure>\n\n<p>测试是否安装成功：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose version</span><br><span class=\"line\">cker-compose version 1.24.1, build 4667896b</span><br></pre></td></tr></table></figure>\n\n\n"},{"title":"Compose 命令","abbrlink":"2f49","date":"2025-02-25T02:40:00.000Z","_content":"\n执行以下命令来启动应用程序：\n\n```\ndocker-compose up\n```\n\n如果你想在后台执行该服务可以加上 -d 参数：\n\n```\ndocker-compose up -d\n```\n\n关闭应用程序\n\n```bash\ndocker-compose down\n```\n","source":"_posts/服务器/Docker/Docker-Compose/Compose 命令.md","raw":"---\ntitle: Compose 命令\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\nabbrlink: 2f49\ndate: 2025-02-25 10:40:00\n---\n\n执行以下命令来启动应用程序：\n\n```\ndocker-compose up\n```\n\n如果你想在后台执行该服务可以加上 -d 参数：\n\n```\ndocker-compose up -d\n```\n\n关闭应用程序\n\n```bash\ndocker-compose down\n```\n","slug":"服务器/Docker/Docker-Compose/Compose 命令","published":1,"updated":"2025-06-02T07:26:57.366Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86x8005vzcqb3zua2r9t","content":"<p>执行以下命令来启动应用程序：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose up</span><br></pre></td></tr></table></figure>\n\n<p>如果你想在后台执行该服务可以加上 -d 参数：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose up -d</span><br></pre></td></tr></table></figure>\n\n<p>关闭应用程序</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose down</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=127c561f-06d9-c2a9-7b22-29c48186dbf1","cover_type":"img","excerpt":"","more":"<p>执行以下命令来启动应用程序：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose up</span><br></pre></td></tr></table></figure>\n\n<p>如果你想在后台执行该服务可以加上 -d 参数：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose up -d</span><br></pre></td></tr></table></figure>\n\n<p>关闭应用程序</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose down</span><br></pre></td></tr></table></figure>\n"},{"title":"Kubesphere 安装 RabbitMQ集群","abbrlink":"3974","date":"2024-12-30T00:56:31.000Z","_content":"\n# RabbitMQ\n\n#### rabbitmq yaml资源文件\n\n```shell\n# /manifest/rabbitmq/*.yaml\nkubectl create namespace rabbitmq-cluster\n\nkubectl apply -f rabbitmq-cluster-operator.yml\nkubectl apply -f rabbitmq-cluster.yaml\n```\n\n下载地址：\n","source":"_posts/服务器/Kubernetes/manifest/RabbitMQ.md","raw":"---\ntitle: Kubesphere 安装 RabbitMQ集群\ncategories:\n  - 服务器\ntags:\n  - K8S\n  - Kubesphere\n  - RabbitMQ\nabbrlink: '3974'\ndate: 2024-12-30 08:56:31\n---\n\n# RabbitMQ\n\n#### rabbitmq yaml资源文件\n\n```shell\n# /manifest/rabbitmq/*.yaml\nkubectl create namespace rabbitmq-cluster\n\nkubectl apply -f rabbitmq-cluster-operator.yml\nkubectl apply -f rabbitmq-cluster.yaml\n```\n\n下载地址：\n","slug":"服务器/Kubernetes/manifest/RabbitMQ","published":1,"updated":"2025-06-02T07:27:30.024Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86x9005yzcqb4qi8etl2","content":"<h1 id=\"RabbitMQ\"><a href=\"#RabbitMQ\" class=\"headerlink\" title=\"RabbitMQ\"></a>RabbitMQ</h1><h4 id=\"rabbitmq-yaml资源文件\"><a href=\"#rabbitmq-yaml资源文件\" class=\"headerlink\" title=\"rabbitmq yaml资源文件\"></a>rabbitmq yaml资源文件</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">/manifest/rabbitmq/*.yaml</span></span><br><span class=\"line\">kubectl create namespace rabbitmq-cluster</span><br><span class=\"line\"></span><br><span class=\"line\">kubectl apply -f rabbitmq-cluster-operator.yml</span><br><span class=\"line\">kubectl apply -f rabbitmq-cluster.yaml</span><br></pre></td></tr></table></figure>\n\n<p>下载地址：</p>\n","cover":"https://t.alcy.cc/pc?_r_=33da9905-b674-0098-da0e-779a46204a0c","cover_type":"img","excerpt":"","more":"<h1 id=\"RabbitMQ\"><a href=\"#RabbitMQ\" class=\"headerlink\" title=\"RabbitMQ\"></a>RabbitMQ</h1><h4 id=\"rabbitmq-yaml资源文件\"><a href=\"#rabbitmq-yaml资源文件\" class=\"headerlink\" title=\"rabbitmq yaml资源文件\"></a>rabbitmq yaml资源文件</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">/manifest/rabbitmq/*.yaml</span></span><br><span class=\"line\">kubectl create namespace rabbitmq-cluster</span><br><span class=\"line\"></span><br><span class=\"line\">kubectl apply -f rabbitmq-cluster-operator.yml</span><br><span class=\"line\">kubectl apply -f rabbitmq-cluster.yaml</span><br></pre></td></tr></table></figure>\n\n<p>下载地址：</p>\n"},{"title":"docker-compose 网络深究","abbrlink":"8fa6","date":"2025-02-26T13:31:00.000Z","_content":"\n## 创建容器内的网络\n\n```yaml\nservices:\n  app:\n    networks:\n      - net\n\nnetworks:\n  net:\n    driver: bridge\n    name: app-network\n```\n\n## 绑定容器外的网络\n\n**这个网络必须存在**\n\n```yaml\nservices:\n  app:\n    networks:\n      - net\n\nnetworks:\n  net:\n    external: true\n    name: lin-net\n```\n\n## 绑定ip地址\n\n```yaml\nservices:\n  app:\n    networks:\n      net:\n        ipv4_address: 172.20.0.102\n```\n","source":"_posts/服务器/Docker/Docker-Compose/docker-compose 网络深究.md","raw":"---\ntitle: docker-compose 网络深究\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\nabbrlink: 8fa6\ndate: 2025-02-26 21:31:00\n---\n\n## 创建容器内的网络\n\n```yaml\nservices:\n  app:\n    networks:\n      - net\n\nnetworks:\n  net:\n    driver: bridge\n    name: app-network\n```\n\n## 绑定容器外的网络\n\n**这个网络必须存在**\n\n```yaml\nservices:\n  app:\n    networks:\n      - net\n\nnetworks:\n  net:\n    external: true\n    name: lin-net\n```\n\n## 绑定ip地址\n\n```yaml\nservices:\n  app:\n    networks:\n      net:\n        ipv4_address: 172.20.0.102\n```\n","slug":"服务器/Docker/Docker-Compose/docker-compose 网络深究","published":1,"updated":"2025-06-02T07:27:02.744Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86x90062zcqbenjy2abs","content":"<h2 id=\"创建容器内的网络\"><a href=\"#创建容器内的网络\" class=\"headerlink\" title=\"创建容器内的网络\"></a>创建容器内的网络</h2><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">app:</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">net</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">net:</span></span><br><span class=\"line\">    <span class=\"attr\">driver:</span> <span class=\"string\">bridge</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">app-network</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"绑定容器外的网络\"><a href=\"#绑定容器外的网络\" class=\"headerlink\" title=\"绑定容器外的网络\"></a>绑定容器外的网络</h2><p><strong>这个网络必须存在</strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">app:</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">net</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">net:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">lin-net</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"绑定ip地址\"><a href=\"#绑定ip地址\" class=\"headerlink\" title=\"绑定ip地址\"></a>绑定ip地址</h2><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">app:</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">net:</span></span><br><span class=\"line\">        <span class=\"attr\">ipv4_address:</span> <span class=\"number\">172.20</span><span class=\"number\">.0</span><span class=\"number\">.102</span></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=9d87eefe-bf4f-968a-09dd-5b2b70163739","cover_type":"img","excerpt":"","more":"<h2 id=\"创建容器内的网络\"><a href=\"#创建容器内的网络\" class=\"headerlink\" title=\"创建容器内的网络\"></a>创建容器内的网络</h2><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">app:</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">net</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">net:</span></span><br><span class=\"line\">    <span class=\"attr\">driver:</span> <span class=\"string\">bridge</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">app-network</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"绑定容器外的网络\"><a href=\"#绑定容器外的网络\" class=\"headerlink\" title=\"绑定容器外的网络\"></a>绑定容器外的网络</h2><p><strong>这个网络必须存在</strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">app:</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">net</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">net:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">lin-net</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"绑定ip地址\"><a href=\"#绑定ip地址\" class=\"headerlink\" title=\"绑定ip地址\"></a>绑定ip地址</h2><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">app:</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">net:</span></span><br><span class=\"line\">        <span class=\"attr\">ipv4_address:</span> <span class=\"number\">172.20</span><span class=\"number\">.0</span><span class=\"number\">.102</span></span><br></pre></td></tr></table></figure>\n"},{"title":"yml 配置指令参考","abbrlink":"f403","date":"2025-02-25T02:40:10.000Z","_content":"\n\n### version\n\n指定本 yml 依从的 compose 哪个版本制定的。\n\n### build\n\n指定为构建镜像上下文路径：\n\n例如 webapp 服务，指定为从上下文路径 ./dir/Dockerfile 所构建的镜像：\n\n```yaml\nversion: \"3.7\"\nservices:\n  webapp:\n    build: ./dir\n```\n\n或者，作为具有在上下文指定的路径的对象，以及可选的 Dockerfile 和 args：\n\n```yaml\nversion: \"3.7\"\nservices:\n  webapp:\n    build:\n      context: ./dir\n      dockerfile: Dockerfile-alternate\n      args:\n        buildno: 1\n      labels:\n        - \"com.example.description=Accounting webapp\"\n        - \"com.example.department=Finance\"\n        - \"com.example.label-with-empty-value\"\n      target: prod\n```\n\n* context：上下文路径。\n* dockerfile：指定构建镜像的 Dockerfile 文件名。\n* args：添加构建参数，这是只能在构建过程中访问的环境变量。\n* labels：设置构建镜像的标签。\n* target：多层构建，可以指定构建哪一层。\n\n### cap\\_add，cap\\_drop\n\n添加或删除容器拥有的宿主机的内核功能。\n\n```yaml\ncap_add:\n  - ALL # 开启全部权限\n\ncap_drop:\n  - SYS_PTRACE # 关闭 ptrace权限\n```\n\n### cgroup\\_parent\n\n为容器指定父 cgroup 组，意味着将继承该组的资源限制。\n\n```yaml\ncgroup_parent: m-executor-abcd\n```\n\n### command\n\n覆盖容器启动的默认命令。\n\n```yaml\ncommand: [\"bundle\", \"exec\", \"thin\", \"-p\", \"3000\"]\n```\n\n### container\\_name\n\n指定自定义容器名称，而不是生成的默认名称。\n\n```yaml\ncontainer_name: my-web-container\n```\n\n### depends\\_on\n\n设置依赖关系。\n\n* docker-compose up ：以依赖性顺序启动服务。在以下示例中，先启动 db 和 redis ，才会启动 web。\n* docker-compose up SERVICE ：自动包含 SERVICE 的依赖项。在以下示例中，docker-compose up web 还将创建并启动 db 和 redis。\n* docker-compose stop ：按依赖关系顺序停止服务。在以下示例中，web 在 db 和 redis 之前停止。\n\n```yaml\nversion: \"3.7\"\nservices:\n  web:\n    build: .\n    depends_on:\n      - db\n      - redis\n  redis:\n    image: redis\n  db:\n    image: postgres\n```\n\n注意：web 服务不会等待 redis db 完全启动 之后才启动。\n\n### deploy\n\n指定与服务的部署和运行有关的配置。只在 swarm 模式下才会有用。\n\n```yaml\nversion: \"3.7\"\nservices:\n  redis:\n    image: redis:alpine\n    deploy:\n      mode：replicated\n      replicas: 6\n      endpoint_mode: dnsrr\n      labels: \n        description: \"This redis service label\"\n      resources:\n        limits:\n          cpus: '0.50'\n          memory: 50M\n        reservations:\n          cpus: '0.25'\n          memory: 20M\n      restart_policy:\n        condition: on-failure\n        delay: 5s\n        max_attempts: 3\n        window: 120s\n```\n\n可以选参数：\n\n**endpoint_mode**：访问集群服务的方式。\n\n```yaml\nendpoint_mode: vip \n# Docker 集群服务一个对外的虚拟 ip。所有的请求都会通过这个虚拟 ip 到达集群服务内部的机器。\nendpoint_mode: dnsrr\n# DNS 轮询（DNSRR）。所有的请求会自动轮询获取到集群 ip 列表中的一个 ip 地址。\n```\n\n**labels**：在服务上设置标签。可以用容器上的 labels（跟 deploy 同级的配置） 覆盖 deploy 下的 labels。\n\n**mode**：指定服务提供的模式。\n\n* **replicated**：复制服务，复制指定服务到集群的机器上。\n* **global**：全局服务，服务将部署至集群的每个节点。\n\n**replicas：mode** 为 replicated 时，需要使用此参数配置具体运行的节点数量。\n\n**resources**：配置服务器资源使用的限制，例如上例子，配置 redis 集群运行需要的 cpu 的百分比 和 内存的占用。避免占用资源过高出现异常。\n\n**restart_policy**：配置如何在退出容器时重新启动容器。\n\n* condition：可选 none，on-failure 或者 any（默认值：any）。\n* delay：设置多久之后重启（默认值：0）。\n* max\\_attempts：尝试重新启动容器的次数，超出次数，则不再尝试（默认值：一直重试）。\n* window：设置容器重启超时时间（默认值：0）。\n\n**rollback_config**：配置在更新失败的情况下应如何回滚服务。\n\n* parallelism：一次要回滚的容器数。如果设置为0，则所有容器将同时回滚。\n* delay：每个容器组回滚之间等待的时间（默认为0s）。\n* failure\\_action：如果回滚失败，该怎么办。其中一个 continue 或者 pause（默认pause）。\n* monitor：每个容器更新后，持续观察是否失败了的时间 (ns|us|ms|s|m|h)（默认为0s）。\n* max\\_failure\\_ratio：在回滚期间可以容忍的故障率（默认为0）。\n* order：回滚期间的操作顺序。其中一个 stop-first（串行回滚），或者 start-first（并行回滚）（默认 stop-first ）。\n\n**update_config**：配置应如何更新服务，对于配置滚动更新很有用。\n\n* parallelism：一次更新的容器数。\n* delay：在更新一组容器之间等待的时间。\n* failure\\_action：如果更新失败，该怎么办。其中一个 continue，rollback 或者pause （默认：pause）。\n* monitor：每个容器更新后，持续观察是否失败了的时间 (ns|us|ms|s|m|h)（默认为0s）。\n* max\\_failure\\_ratio：在更新过程中可以容忍的故障率。\n* order：回滚期间的操作顺序。其中一个 stop-first（串行回滚），或者 start-first（并行回滚）（默认stop-first）。\n\n**注**：仅支持 V3.4 及更高版本。\n\n### devices\n\n指定设备映射列表。\n\n```yaml\ndevices:\n  - \"/dev/ttyUSB0:/dev/ttyUSB0\"\n```\n\n### dns\n\n自定义 DNS 服务器，可以是单个值或列表的多个值。\n\n```yaml\ndns: 8.8.8.8\n\ndns:\n  - 8.8.8.8\n  - 9.9.9.9\n```\n\n### dns\\_search\n\n自定义 DNS 搜索域。可以是单个值或列表。\n\n```yaml\ndns_search: example.com\n\ndns_search:\n  - dc1.example.com\n  - dc2.example.com\n```\n\n### entrypoint\n\n覆盖容器默认的 entrypoint。\n\n```yaml\nentrypoint: /code/entrypoint.sh\n```\n\n也可以是以下格式：\n\n```yaml\nentrypoint:\n    - php\n    - -d\n    - zend_extension=/usr/local/lib/php/extensions/no-debug-non-zts-20100525/xdebug.so\n    - -d\n    - memory_limit=-1\n    - vendor/bin/phpunit\n```\n\n### env\\_file\n\n从文件添加环境变量。可以是单个值或列表的多个值。\n\n```yaml\nenv_file: .env\n```\n\n也可以是列表格式：\n\n```yaml\nenv_file:\n  - ./common.env\n  - ./apps/web.env\n  - /opt/secrets.env\n```\n\n### environment\n\n添加环境变量。您可以使用数组或字典、任何布尔值，布尔值需要用引号引起来，以确保 YML 解析器不会将其转换为 True 或 False。\n\n```yaml\nenvironment:\n  RACK_ENV: development\n  SHOW: 'true'\n```\n\n### expose\n\n暴露端口，但不映射到宿主机，只被连接的服务访问。\n\n仅可以指定内部端口为参数：\n\n```yaml\nexpose:\n - \"3000\"\n - \"8000\"\n```\n\n### extra\\_hosts\n\n添加主机名映射。类似 docker client --add-host。\n\n```yaml\nextra_hosts:\n - \"somehost:162.242.195.82\"\n - \"otherhost:50.31.209.229\"\n```\n\n以上会在此服务的内部容器中 /etc/hosts 创建一个具有 ip 地址和主机名的映射关系：\n\n```yaml\n162.242.195.82  somehost\n50.31.209.229   otherhost\n```\n\n### healthcheck\n\n用于检测 docker 服务是否健康运行。\n\n```yaml\nhealthcheck:\n  test: [\"CMD\", \"curl\", \"-f\", \"http://localhost\"] # 设置检测程序\n  interval: 1m30s # 设置检测间隔\n  timeout: 10s # 设置检测超时时间\n  retries: 3 # 设置重试次数\n  start_period: 40s # 启动后，多少秒开始启动检测程序\n```\n\n### image\n\n指定容器运行的镜像。以下格式都可以：\n\n```yaml\nimage: redis\nimage: ubuntu:14.04\nimage: tutum/influxdb\nimage: example-registry.com:4000/postgresql\nimage: a4bc65fd # 镜像id\n```\n\n### logging\n\n服务的日志记录配置。\n\ndriver：指定服务容器的日志记录驱动程序，默认值为json-file。有以下三个选项\n\n```yaml\ndriver: \"json-file\"\ndriver: \"syslog\"\ndriver: \"none\"\n```\n\n仅在 json-file 驱动程序下，可以使用以下参数，限制日志得数量和大小。\n\n```yaml\nlogging:\n  driver: json-file\n  options:\n    max-size: \"200k\" # 单个文件大小为200k\n    max-file: \"10\" # 最多10个文件\n```\n\n当达到文件限制上限，会自动删除旧的文件。\n\nsyslog 驱动程序下，可以使用 syslog-address 指定日志接收地址。\n\n```yaml\nlogging:\n  driver: syslog\n  options:\n    syslog-address: \"tcp://192.168.0.42:123\"\n```\n\n### network\\_mode\n\n设置网络模式。\n\n```yaml\nnetwork_mode: \"bridge\"\nnetwork_mode: \"host\"\nnetwork_mode: \"none\"\nnetwork_mode: \"service:[service name]\"\nnetwork_mode: \"container:[container name/id]\"\n```\n\nnetworks\n\n配置容器连接的网络，引用顶级 networks 下的条目 。\n\n```yaml\nservices:\n  some-service:\n    networks:\n      some-network:\n        aliases:\n         - alias1\n      other-network:\n        aliases:\n         - alias2\nnetworks:\n  some-network:\n    # Use a custom driver\n    driver: custom-driver-1\n  other-network:\n    # Use a custom driver which takes special options\n    driver: custom-driver-2\n```\n\n**aliases** ：同一网络上的其他容器可以使用服务名称或此别名来连接到对应容器的服务。\n\n### restart\n\n* no：是默认的重启策略，在任何情况下都不会重启容器。\n* always：容器总是重新启动。\n* on-failure：在容器非正常退出时（退出状态非0），才会重启容器。\n* unless-stopped：在容器退出时总是重启容器，但是不考虑在Docker守护进程启动时就已经停止了的容器\n\n```yaml\nrestart: \"no\"\nrestart: always\nrestart: on-failure\nrestart: unless-stopped\n```\n\n注：swarm 集群模式，请改用 restart\\_policy。\n\n### secrets\n\n存储敏感数据，例如密码：\n\n```yaml\nversion: \"3.1\"\nservices:\n\nmysql:\n  image: mysql\n  environment:\n    MYSQL_ROOT_PASSWORD_FILE: /run/secrets/my_secret\n  secrets:\n    - my_secret\n\nsecrets:\n  my_secret:\n    file: ./my_secret.txt\n```\n\n### security\\_opt\n\n修改容器默认的 schema 标签。\n\n```yaml\nsecurity-opt：\n  - label:user:USER   # 设置容器的用户标签\n  - label:role:ROLE   # 设置容器的角色标签\n  - label:type:TYPE   # 设置容器的安全策略标签\n  - label:level:LEVEL  # 设置容器的安全等级标签\n```\n\n### stop\\_grace\\_period\n\n指定在容器无法处理 SIGTERM (或者任何 stop\\_signal 的信号)，等待多久后发送 SIGKILL 信号关闭容器。\n\n```yaml\nstop_grace_period: 1s # 等待 1 秒\nstop_grace_period: 1m30s # 等待 1 分 30 秒 \n```\n\n默认的等待时间是 10 秒。\n\n### stop\\_signal\n\n设置停止容器的替代信号。默认情况下使用 SIGTERM 。\n\n以下示例，使用 SIGUSR1 替代信号 SIGTERM 来停止容器。\n\n```yaml\nstop_signal: SIGUSR1\n```\n\n### sysctls\n\n设置容器中的内核参数，可以使用数组或字典格式。\n\n```yaml\nsysctls:\n  net.core.somaxconn: 1024\n  net.ipv4.tcp_syncookies: 0\n\nsysctls:\n  - net.core.somaxconn=1024\n  - net.ipv4.tcp_syncookies=0\n```\n\n### tmpfs\n\n在容器内安装一个临时文件系统。可以是单个值或列表的多个值。\n\n```yaml\ntmpfs: /run\n\ntmpfs:\n  - /run\n  - /tmp\n```\n\n### ulimits\n\n覆盖容器默认的 ulimit。\n\n```yaml\nulimits:\n  nproc: 65535\n  nofile:\n    soft: 20000\n    hard: 40000\n```\n\n### volumes\n\n将主机的数据卷或者文件挂载到容器里。\n\n```yaml\nversion: \"3.7\"\nservices:\n  db:\n    image: postgres:latest\n    volumes:\n      - \"/localhost/postgres.sock:/var/run/postgres/postgres.sock\"\n      - \"/localhost/data:/var/lib/postgresql/data\"\n```\n","source":"_posts/服务器/Docker/Docker-Compose/yml 配置指令参考.md","raw":"---\ntitle: yml 配置指令参考\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\nabbrlink: f403\ndate: 2025-02-25 10:40:10\n---\n\n\n### version\n\n指定本 yml 依从的 compose 哪个版本制定的。\n\n### build\n\n指定为构建镜像上下文路径：\n\n例如 webapp 服务，指定为从上下文路径 ./dir/Dockerfile 所构建的镜像：\n\n```yaml\nversion: \"3.7\"\nservices:\n  webapp:\n    build: ./dir\n```\n\n或者，作为具有在上下文指定的路径的对象，以及可选的 Dockerfile 和 args：\n\n```yaml\nversion: \"3.7\"\nservices:\n  webapp:\n    build:\n      context: ./dir\n      dockerfile: Dockerfile-alternate\n      args:\n        buildno: 1\n      labels:\n        - \"com.example.description=Accounting webapp\"\n        - \"com.example.department=Finance\"\n        - \"com.example.label-with-empty-value\"\n      target: prod\n```\n\n* context：上下文路径。\n* dockerfile：指定构建镜像的 Dockerfile 文件名。\n* args：添加构建参数，这是只能在构建过程中访问的环境变量。\n* labels：设置构建镜像的标签。\n* target：多层构建，可以指定构建哪一层。\n\n### cap\\_add，cap\\_drop\n\n添加或删除容器拥有的宿主机的内核功能。\n\n```yaml\ncap_add:\n  - ALL # 开启全部权限\n\ncap_drop:\n  - SYS_PTRACE # 关闭 ptrace权限\n```\n\n### cgroup\\_parent\n\n为容器指定父 cgroup 组，意味着将继承该组的资源限制。\n\n```yaml\ncgroup_parent: m-executor-abcd\n```\n\n### command\n\n覆盖容器启动的默认命令。\n\n```yaml\ncommand: [\"bundle\", \"exec\", \"thin\", \"-p\", \"3000\"]\n```\n\n### container\\_name\n\n指定自定义容器名称，而不是生成的默认名称。\n\n```yaml\ncontainer_name: my-web-container\n```\n\n### depends\\_on\n\n设置依赖关系。\n\n* docker-compose up ：以依赖性顺序启动服务。在以下示例中，先启动 db 和 redis ，才会启动 web。\n* docker-compose up SERVICE ：自动包含 SERVICE 的依赖项。在以下示例中，docker-compose up web 还将创建并启动 db 和 redis。\n* docker-compose stop ：按依赖关系顺序停止服务。在以下示例中，web 在 db 和 redis 之前停止。\n\n```yaml\nversion: \"3.7\"\nservices:\n  web:\n    build: .\n    depends_on:\n      - db\n      - redis\n  redis:\n    image: redis\n  db:\n    image: postgres\n```\n\n注意：web 服务不会等待 redis db 完全启动 之后才启动。\n\n### deploy\n\n指定与服务的部署和运行有关的配置。只在 swarm 模式下才会有用。\n\n```yaml\nversion: \"3.7\"\nservices:\n  redis:\n    image: redis:alpine\n    deploy:\n      mode：replicated\n      replicas: 6\n      endpoint_mode: dnsrr\n      labels: \n        description: \"This redis service label\"\n      resources:\n        limits:\n          cpus: '0.50'\n          memory: 50M\n        reservations:\n          cpus: '0.25'\n          memory: 20M\n      restart_policy:\n        condition: on-failure\n        delay: 5s\n        max_attempts: 3\n        window: 120s\n```\n\n可以选参数：\n\n**endpoint_mode**：访问集群服务的方式。\n\n```yaml\nendpoint_mode: vip \n# Docker 集群服务一个对外的虚拟 ip。所有的请求都会通过这个虚拟 ip 到达集群服务内部的机器。\nendpoint_mode: dnsrr\n# DNS 轮询（DNSRR）。所有的请求会自动轮询获取到集群 ip 列表中的一个 ip 地址。\n```\n\n**labels**：在服务上设置标签。可以用容器上的 labels（跟 deploy 同级的配置） 覆盖 deploy 下的 labels。\n\n**mode**：指定服务提供的模式。\n\n* **replicated**：复制服务，复制指定服务到集群的机器上。\n* **global**：全局服务，服务将部署至集群的每个节点。\n\n**replicas：mode** 为 replicated 时，需要使用此参数配置具体运行的节点数量。\n\n**resources**：配置服务器资源使用的限制，例如上例子，配置 redis 集群运行需要的 cpu 的百分比 和 内存的占用。避免占用资源过高出现异常。\n\n**restart_policy**：配置如何在退出容器时重新启动容器。\n\n* condition：可选 none，on-failure 或者 any（默认值：any）。\n* delay：设置多久之后重启（默认值：0）。\n* max\\_attempts：尝试重新启动容器的次数，超出次数，则不再尝试（默认值：一直重试）。\n* window：设置容器重启超时时间（默认值：0）。\n\n**rollback_config**：配置在更新失败的情况下应如何回滚服务。\n\n* parallelism：一次要回滚的容器数。如果设置为0，则所有容器将同时回滚。\n* delay：每个容器组回滚之间等待的时间（默认为0s）。\n* failure\\_action：如果回滚失败，该怎么办。其中一个 continue 或者 pause（默认pause）。\n* monitor：每个容器更新后，持续观察是否失败了的时间 (ns|us|ms|s|m|h)（默认为0s）。\n* max\\_failure\\_ratio：在回滚期间可以容忍的故障率（默认为0）。\n* order：回滚期间的操作顺序。其中一个 stop-first（串行回滚），或者 start-first（并行回滚）（默认 stop-first ）。\n\n**update_config**：配置应如何更新服务，对于配置滚动更新很有用。\n\n* parallelism：一次更新的容器数。\n* delay：在更新一组容器之间等待的时间。\n* failure\\_action：如果更新失败，该怎么办。其中一个 continue，rollback 或者pause （默认：pause）。\n* monitor：每个容器更新后，持续观察是否失败了的时间 (ns|us|ms|s|m|h)（默认为0s）。\n* max\\_failure\\_ratio：在更新过程中可以容忍的故障率。\n* order：回滚期间的操作顺序。其中一个 stop-first（串行回滚），或者 start-first（并行回滚）（默认stop-first）。\n\n**注**：仅支持 V3.4 及更高版本。\n\n### devices\n\n指定设备映射列表。\n\n```yaml\ndevices:\n  - \"/dev/ttyUSB0:/dev/ttyUSB0\"\n```\n\n### dns\n\n自定义 DNS 服务器，可以是单个值或列表的多个值。\n\n```yaml\ndns: 8.8.8.8\n\ndns:\n  - 8.8.8.8\n  - 9.9.9.9\n```\n\n### dns\\_search\n\n自定义 DNS 搜索域。可以是单个值或列表。\n\n```yaml\ndns_search: example.com\n\ndns_search:\n  - dc1.example.com\n  - dc2.example.com\n```\n\n### entrypoint\n\n覆盖容器默认的 entrypoint。\n\n```yaml\nentrypoint: /code/entrypoint.sh\n```\n\n也可以是以下格式：\n\n```yaml\nentrypoint:\n    - php\n    - -d\n    - zend_extension=/usr/local/lib/php/extensions/no-debug-non-zts-20100525/xdebug.so\n    - -d\n    - memory_limit=-1\n    - vendor/bin/phpunit\n```\n\n### env\\_file\n\n从文件添加环境变量。可以是单个值或列表的多个值。\n\n```yaml\nenv_file: .env\n```\n\n也可以是列表格式：\n\n```yaml\nenv_file:\n  - ./common.env\n  - ./apps/web.env\n  - /opt/secrets.env\n```\n\n### environment\n\n添加环境变量。您可以使用数组或字典、任何布尔值，布尔值需要用引号引起来，以确保 YML 解析器不会将其转换为 True 或 False。\n\n```yaml\nenvironment:\n  RACK_ENV: development\n  SHOW: 'true'\n```\n\n### expose\n\n暴露端口，但不映射到宿主机，只被连接的服务访问。\n\n仅可以指定内部端口为参数：\n\n```yaml\nexpose:\n - \"3000\"\n - \"8000\"\n```\n\n### extra\\_hosts\n\n添加主机名映射。类似 docker client --add-host。\n\n```yaml\nextra_hosts:\n - \"somehost:162.242.195.82\"\n - \"otherhost:50.31.209.229\"\n```\n\n以上会在此服务的内部容器中 /etc/hosts 创建一个具有 ip 地址和主机名的映射关系：\n\n```yaml\n162.242.195.82  somehost\n50.31.209.229   otherhost\n```\n\n### healthcheck\n\n用于检测 docker 服务是否健康运行。\n\n```yaml\nhealthcheck:\n  test: [\"CMD\", \"curl\", \"-f\", \"http://localhost\"] # 设置检测程序\n  interval: 1m30s # 设置检测间隔\n  timeout: 10s # 设置检测超时时间\n  retries: 3 # 设置重试次数\n  start_period: 40s # 启动后，多少秒开始启动检测程序\n```\n\n### image\n\n指定容器运行的镜像。以下格式都可以：\n\n```yaml\nimage: redis\nimage: ubuntu:14.04\nimage: tutum/influxdb\nimage: example-registry.com:4000/postgresql\nimage: a4bc65fd # 镜像id\n```\n\n### logging\n\n服务的日志记录配置。\n\ndriver：指定服务容器的日志记录驱动程序，默认值为json-file。有以下三个选项\n\n```yaml\ndriver: \"json-file\"\ndriver: \"syslog\"\ndriver: \"none\"\n```\n\n仅在 json-file 驱动程序下，可以使用以下参数，限制日志得数量和大小。\n\n```yaml\nlogging:\n  driver: json-file\n  options:\n    max-size: \"200k\" # 单个文件大小为200k\n    max-file: \"10\" # 最多10个文件\n```\n\n当达到文件限制上限，会自动删除旧的文件。\n\nsyslog 驱动程序下，可以使用 syslog-address 指定日志接收地址。\n\n```yaml\nlogging:\n  driver: syslog\n  options:\n    syslog-address: \"tcp://192.168.0.42:123\"\n```\n\n### network\\_mode\n\n设置网络模式。\n\n```yaml\nnetwork_mode: \"bridge\"\nnetwork_mode: \"host\"\nnetwork_mode: \"none\"\nnetwork_mode: \"service:[service name]\"\nnetwork_mode: \"container:[container name/id]\"\n```\n\nnetworks\n\n配置容器连接的网络，引用顶级 networks 下的条目 。\n\n```yaml\nservices:\n  some-service:\n    networks:\n      some-network:\n        aliases:\n         - alias1\n      other-network:\n        aliases:\n         - alias2\nnetworks:\n  some-network:\n    # Use a custom driver\n    driver: custom-driver-1\n  other-network:\n    # Use a custom driver which takes special options\n    driver: custom-driver-2\n```\n\n**aliases** ：同一网络上的其他容器可以使用服务名称或此别名来连接到对应容器的服务。\n\n### restart\n\n* no：是默认的重启策略，在任何情况下都不会重启容器。\n* always：容器总是重新启动。\n* on-failure：在容器非正常退出时（退出状态非0），才会重启容器。\n* unless-stopped：在容器退出时总是重启容器，但是不考虑在Docker守护进程启动时就已经停止了的容器\n\n```yaml\nrestart: \"no\"\nrestart: always\nrestart: on-failure\nrestart: unless-stopped\n```\n\n注：swarm 集群模式，请改用 restart\\_policy。\n\n### secrets\n\n存储敏感数据，例如密码：\n\n```yaml\nversion: \"3.1\"\nservices:\n\nmysql:\n  image: mysql\n  environment:\n    MYSQL_ROOT_PASSWORD_FILE: /run/secrets/my_secret\n  secrets:\n    - my_secret\n\nsecrets:\n  my_secret:\n    file: ./my_secret.txt\n```\n\n### security\\_opt\n\n修改容器默认的 schema 标签。\n\n```yaml\nsecurity-opt：\n  - label:user:USER   # 设置容器的用户标签\n  - label:role:ROLE   # 设置容器的角色标签\n  - label:type:TYPE   # 设置容器的安全策略标签\n  - label:level:LEVEL  # 设置容器的安全等级标签\n```\n\n### stop\\_grace\\_period\n\n指定在容器无法处理 SIGTERM (或者任何 stop\\_signal 的信号)，等待多久后发送 SIGKILL 信号关闭容器。\n\n```yaml\nstop_grace_period: 1s # 等待 1 秒\nstop_grace_period: 1m30s # 等待 1 分 30 秒 \n```\n\n默认的等待时间是 10 秒。\n\n### stop\\_signal\n\n设置停止容器的替代信号。默认情况下使用 SIGTERM 。\n\n以下示例，使用 SIGUSR1 替代信号 SIGTERM 来停止容器。\n\n```yaml\nstop_signal: SIGUSR1\n```\n\n### sysctls\n\n设置容器中的内核参数，可以使用数组或字典格式。\n\n```yaml\nsysctls:\n  net.core.somaxconn: 1024\n  net.ipv4.tcp_syncookies: 0\n\nsysctls:\n  - net.core.somaxconn=1024\n  - net.ipv4.tcp_syncookies=0\n```\n\n### tmpfs\n\n在容器内安装一个临时文件系统。可以是单个值或列表的多个值。\n\n```yaml\ntmpfs: /run\n\ntmpfs:\n  - /run\n  - /tmp\n```\n\n### ulimits\n\n覆盖容器默认的 ulimit。\n\n```yaml\nulimits:\n  nproc: 65535\n  nofile:\n    soft: 20000\n    hard: 40000\n```\n\n### volumes\n\n将主机的数据卷或者文件挂载到容器里。\n\n```yaml\nversion: \"3.7\"\nservices:\n  db:\n    image: postgres:latest\n    volumes:\n      - \"/localhost/postgres.sock:/var/run/postgres/postgres.sock\"\n      - \"/localhost/data:/var/lib/postgresql/data\"\n```\n","slug":"服务器/Docker/Docker-Compose/yml 配置指令参考","published":1,"updated":"2025-06-02T07:27:05.485Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86x90065zcqbekmvcutp","content":"<h3 id=\"version\"><a href=\"#version\" class=\"headerlink\" title=\"version\"></a>version</h3><p>指定本 yml 依从的 compose 哪个版本制定的。</p>\n<h3 id=\"build\"><a href=\"#build\" class=\"headerlink\" title=\"build\"></a>build</h3><p>指定为构建镜像上下文路径：</p>\n<p>例如 webapp 服务，指定为从上下文路径 .&#x2F;dir&#x2F;Dockerfile 所构建的镜像：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.7&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">webapp:</span></span><br><span class=\"line\">    <span class=\"attr\">build:</span> <span class=\"string\">./dir</span></span><br></pre></td></tr></table></figure>\n\n<p>或者，作为具有在上下文指定的路径的对象，以及可选的 Dockerfile 和 args：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.7&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">webapp:</span></span><br><span class=\"line\">    <span class=\"attr\">build:</span></span><br><span class=\"line\">      <span class=\"attr\">context:</span> <span class=\"string\">./dir</span></span><br><span class=\"line\">      <span class=\"attr\">dockerfile:</span> <span class=\"string\">Dockerfile-alternate</span></span><br><span class=\"line\">      <span class=\"attr\">args:</span></span><br><span class=\"line\">        <span class=\"attr\">buildno:</span> <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&quot;com.example.description=Accounting webapp&quot;</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&quot;com.example.department=Finance&quot;</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&quot;com.example.label-with-empty-value&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">target:</span> <span class=\"string\">prod</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>context：上下文路径。</li>\n<li>dockerfile：指定构建镜像的 Dockerfile 文件名。</li>\n<li>args：添加构建参数，这是只能在构建过程中访问的环境变量。</li>\n<li>labels：设置构建镜像的标签。</li>\n<li>target：多层构建，可以指定构建哪一层。</li>\n</ul>\n<h3 id=\"cap-add，cap-drop\"><a href=\"#cap-add，cap-drop\" class=\"headerlink\" title=\"cap_add，cap_drop\"></a>cap_add，cap_drop</h3><p>添加或删除容器拥有的宿主机的内核功能。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">cap_add:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">ALL</span> <span class=\"comment\"># 开启全部权限</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">cap_drop:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">SYS_PTRACE</span> <span class=\"comment\"># 关闭 ptrace权限</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"cgroup-parent\"><a href=\"#cgroup-parent\" class=\"headerlink\" title=\"cgroup_parent\"></a>cgroup_parent</h3><p>为容器指定父 cgroup 组，意味着将继承该组的资源限制。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">cgroup_parent:</span> <span class=\"string\">m-executor-abcd</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"command\"><a href=\"#command\" class=\"headerlink\" title=\"command\"></a>command</h3><p>覆盖容器启动的默认命令。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">command:</span> [<span class=\"string\">&quot;bundle&quot;</span>, <span class=\"string\">&quot;exec&quot;</span>, <span class=\"string\">&quot;thin&quot;</span>, <span class=\"string\">&quot;-p&quot;</span>, <span class=\"string\">&quot;3000&quot;</span>]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"container-name\"><a href=\"#container-name\" class=\"headerlink\" title=\"container_name\"></a>container_name</h3><p>指定自定义容器名称，而不是生成的默认名称。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">container_name:</span> <span class=\"string\">my-web-container</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"depends-on\"><a href=\"#depends-on\" class=\"headerlink\" title=\"depends_on\"></a>depends_on</h3><p>设置依赖关系。</p>\n<ul>\n<li>docker-compose up ：以依赖性顺序启动服务。在以下示例中，先启动 db 和 redis ，才会启动 web。</li>\n<li>docker-compose up SERVICE ：自动包含 SERVICE 的依赖项。在以下示例中，docker-compose up web 还将创建并启动 db 和 redis。</li>\n<li>docker-compose stop ：按依赖关系顺序停止服务。在以下示例中，web 在 db 和 redis 之前停止。</li>\n</ul>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.7&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">web:</span></span><br><span class=\"line\">    <span class=\"attr\">build:</span> <span class=\"string\">.</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">db</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">redis</span></span><br><span class=\"line\">  <span class=\"attr\">redis:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">redis</span></span><br><span class=\"line\">  <span class=\"attr\">db:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">postgres</span></span><br></pre></td></tr></table></figure>\n\n<p>注意：web 服务不会等待 redis db 完全启动 之后才启动。</p>\n<h3 id=\"deploy\"><a href=\"#deploy\" class=\"headerlink\" title=\"deploy\"></a>deploy</h3><p>指定与服务的部署和运行有关的配置。只在 swarm 模式下才会有用。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.7&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">redis:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">redis:alpine</span></span><br><span class=\"line\">    <span class=\"attr\">deploy:</span></span><br><span class=\"line\">      <span class=\"string\">mode：replicated</span></span><br><span class=\"line\">      <span class=\"attr\">replicas:</span> <span class=\"number\">6</span></span><br><span class=\"line\">      <span class=\"attr\">endpoint_mode:</span> <span class=\"string\">dnsrr</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span> </span><br><span class=\"line\">        <span class=\"attr\">description:</span> <span class=\"string\">&quot;This redis service label&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">resources:</span></span><br><span class=\"line\">        <span class=\"attr\">limits:</span></span><br><span class=\"line\">          <span class=\"attr\">cpus:</span> <span class=\"string\">&#x27;0.50&#x27;</span></span><br><span class=\"line\">          <span class=\"attr\">memory:</span> <span class=\"string\">50M</span></span><br><span class=\"line\">        <span class=\"attr\">reservations:</span></span><br><span class=\"line\">          <span class=\"attr\">cpus:</span> <span class=\"string\">&#x27;0.25&#x27;</span></span><br><span class=\"line\">          <span class=\"attr\">memory:</span> <span class=\"string\">20M</span></span><br><span class=\"line\">      <span class=\"attr\">restart_policy:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\">        <span class=\"attr\">delay:</span> <span class=\"string\">5s</span></span><br><span class=\"line\">        <span class=\"attr\">max_attempts:</span> <span class=\"number\">3</span></span><br><span class=\"line\">        <span class=\"attr\">window:</span> <span class=\"string\">120s</span></span><br></pre></td></tr></table></figure>\n\n<p>可以选参数：</p>\n<p><strong>endpoint_mode</strong>：访问集群服务的方式。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">endpoint_mode:</span> <span class=\"string\">vip</span> </span><br><span class=\"line\"><span class=\"comment\"># Docker 集群服务一个对外的虚拟 ip。所有的请求都会通过这个虚拟 ip 到达集群服务内部的机器。</span></span><br><span class=\"line\"><span class=\"attr\">endpoint_mode:</span> <span class=\"string\">dnsrr</span></span><br><span class=\"line\"><span class=\"comment\"># DNS 轮询（DNSRR）。所有的请求会自动轮询获取到集群 ip 列表中的一个 ip 地址。</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>labels</strong>：在服务上设置标签。可以用容器上的 labels（跟 deploy 同级的配置） 覆盖 deploy 下的 labels。</p>\n<p><strong>mode</strong>：指定服务提供的模式。</p>\n<ul>\n<li><strong>replicated</strong>：复制服务，复制指定服务到集群的机器上。</li>\n<li><strong>global</strong>：全局服务，服务将部署至集群的每个节点。</li>\n</ul>\n<p><strong>replicas：mode</strong> 为 replicated 时，需要使用此参数配置具体运行的节点数量。</p>\n<p><strong>resources</strong>：配置服务器资源使用的限制，例如上例子，配置 redis 集群运行需要的 cpu 的百分比 和 内存的占用。避免占用资源过高出现异常。</p>\n<p><strong>restart_policy</strong>：配置如何在退出容器时重新启动容器。</p>\n<ul>\n<li>condition：可选 none，on-failure 或者 any（默认值：any）。</li>\n<li>delay：设置多久之后重启（默认值：0）。</li>\n<li>max_attempts：尝试重新启动容器的次数，超出次数，则不再尝试（默认值：一直重试）。</li>\n<li>window：设置容器重启超时时间（默认值：0）。</li>\n</ul>\n<p><strong>rollback_config</strong>：配置在更新失败的情况下应如何回滚服务。</p>\n<ul>\n<li>parallelism：一次要回滚的容器数。如果设置为0，则所有容器将同时回滚。</li>\n<li>delay：每个容器组回滚之间等待的时间（默认为0s）。</li>\n<li>failure_action：如果回滚失败，该怎么办。其中一个 continue 或者 pause（默认pause）。</li>\n<li>monitor：每个容器更新后，持续观察是否失败了的时间 (ns|us|ms|s|m|h)（默认为0s）。</li>\n<li>max_failure_ratio：在回滚期间可以容忍的故障率（默认为0）。</li>\n<li>order：回滚期间的操作顺序。其中一个 stop-first（串行回滚），或者 start-first（并行回滚）（默认 stop-first ）。</li>\n</ul>\n<p><strong>update_config</strong>：配置应如何更新服务，对于配置滚动更新很有用。</p>\n<ul>\n<li>parallelism：一次更新的容器数。</li>\n<li>delay：在更新一组容器之间等待的时间。</li>\n<li>failure_action：如果更新失败，该怎么办。其中一个 continue，rollback 或者pause （默认：pause）。</li>\n<li>monitor：每个容器更新后，持续观察是否失败了的时间 (ns|us|ms|s|m|h)（默认为0s）。</li>\n<li>max_failure_ratio：在更新过程中可以容忍的故障率。</li>\n<li>order：回滚期间的操作顺序。其中一个 stop-first（串行回滚），或者 start-first（并行回滚）（默认stop-first）。</li>\n</ul>\n<p><strong>注</strong>：仅支持 V3.4 及更高版本。</p>\n<h3 id=\"devices\"><a href=\"#devices\" class=\"headerlink\" title=\"devices\"></a>devices</h3><p>指定设备映射列表。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">devices:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">&quot;/dev/ttyUSB0:/dev/ttyUSB0&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"dns\"><a href=\"#dns\" class=\"headerlink\" title=\"dns\"></a>dns</h3><p>自定义 DNS 服务器，可以是单个值或列表的多个值。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">dns:</span> <span class=\"number\">8.8</span><span class=\"number\">.8</span><span class=\"number\">.8</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">dns:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"number\">8.8</span><span class=\"number\">.8</span><span class=\"number\">.8</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"number\">9.9</span><span class=\"number\">.9</span><span class=\"number\">.9</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"dns-search\"><a href=\"#dns-search\" class=\"headerlink\" title=\"dns_search\"></a>dns_search</h3><p>自定义 DNS 搜索域。可以是单个值或列表。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">dns_search:</span> <span class=\"string\">example.com</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">dns_search:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">dc1.example.com</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">dc2.example.com</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"entrypoint\"><a href=\"#entrypoint\" class=\"headerlink\" title=\"entrypoint\"></a>entrypoint</h3><p>覆盖容器默认的 entrypoint。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">entrypoint:</span> <span class=\"string\">/code/entrypoint.sh</span></span><br></pre></td></tr></table></figure>\n\n<p>也可以是以下格式：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">entrypoint:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">php</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">-d</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">zend_extension=/usr/local/lib/php/extensions/no-debug-non-zts-20100525/xdebug.so</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">-d</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">memory_limit=-1</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">vendor/bin/phpunit</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"env-file\"><a href=\"#env-file\" class=\"headerlink\" title=\"env_file\"></a>env_file</h3><p>从文件添加环境变量。可以是单个值或列表的多个值。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">env_file:</span> <span class=\"string\">.env</span></span><br></pre></td></tr></table></figure>\n\n<p>也可以是列表格式：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">env_file:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">./common.env</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">./apps/web.env</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">/opt/secrets.env</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"environment\"><a href=\"#environment\" class=\"headerlink\" title=\"environment\"></a>environment</h3><p>添加环境变量。您可以使用数组或字典、任何布尔值，布尔值需要用引号引起来，以确保 YML 解析器不会将其转换为 True 或 False。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">environment:</span></span><br><span class=\"line\">  <span class=\"attr\">RACK_ENV:</span> <span class=\"string\">development</span></span><br><span class=\"line\">  <span class=\"attr\">SHOW:</span> <span class=\"string\">&#x27;true&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"expose\"><a href=\"#expose\" class=\"headerlink\" title=\"expose\"></a>expose</h3><p>暴露端口，但不映射到宿主机，只被连接的服务访问。</p>\n<p>仅可以指定内部端口为参数：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">expose:</span></span><br><span class=\"line\"> <span class=\"bullet\">-</span> <span class=\"string\">&quot;3000&quot;</span></span><br><span class=\"line\"> <span class=\"bullet\">-</span> <span class=\"string\">&quot;8000&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"extra-hosts\"><a href=\"#extra-hosts\" class=\"headerlink\" title=\"extra_hosts\"></a>extra_hosts</h3><p>添加主机名映射。类似 docker client –add-host。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">extra_hosts:</span></span><br><span class=\"line\"> <span class=\"bullet\">-</span> <span class=\"string\">&quot;somehost:162.242.195.82&quot;</span></span><br><span class=\"line\"> <span class=\"bullet\">-</span> <span class=\"string\">&quot;otherhost:50.31.209.229&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>以上会在此服务的内部容器中 &#x2F;etc&#x2F;hosts 创建一个具有 ip 地址和主机名的映射关系：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">162.242</span><span class=\"number\">.195</span><span class=\"number\">.82</span>  <span class=\"string\">somehost</span></span><br><span class=\"line\"><span class=\"number\">50.31</span><span class=\"number\">.209</span><span class=\"number\">.229</span>   <span class=\"string\">otherhost</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"healthcheck\"><a href=\"#healthcheck\" class=\"headerlink\" title=\"healthcheck\"></a>healthcheck</h3><p>用于检测 docker 服务是否健康运行。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">healthcheck:</span></span><br><span class=\"line\">  <span class=\"attr\">test:</span> [<span class=\"string\">&quot;CMD&quot;</span>, <span class=\"string\">&quot;curl&quot;</span>, <span class=\"string\">&quot;-f&quot;</span>, <span class=\"string\">&quot;http://localhost&quot;</span>] <span class=\"comment\"># 设置检测程序</span></span><br><span class=\"line\">  <span class=\"attr\">interval:</span> <span class=\"string\">1m30s</span> <span class=\"comment\"># 设置检测间隔</span></span><br><span class=\"line\">  <span class=\"attr\">timeout:</span> <span class=\"string\">10s</span> <span class=\"comment\"># 设置检测超时时间</span></span><br><span class=\"line\">  <span class=\"attr\">retries:</span> <span class=\"number\">3</span> <span class=\"comment\"># 设置重试次数</span></span><br><span class=\"line\">  <span class=\"attr\">start_period:</span> <span class=\"string\">40s</span> <span class=\"comment\"># 启动后，多少秒开始启动检测程序</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"image\"><a href=\"#image\" class=\"headerlink\" title=\"image\"></a>image</h3><p>指定容器运行的镜像。以下格式都可以：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">image:</span> <span class=\"string\">redis</span></span><br><span class=\"line\"><span class=\"attr\">image:</span> <span class=\"string\">ubuntu:14.04</span></span><br><span class=\"line\"><span class=\"attr\">image:</span> <span class=\"string\">tutum/influxdb</span></span><br><span class=\"line\"><span class=\"attr\">image:</span> <span class=\"string\">example-registry.com:4000/postgresql</span></span><br><span class=\"line\"><span class=\"attr\">image:</span> <span class=\"string\">a4bc65fd</span> <span class=\"comment\"># 镜像id</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"logging\"><a href=\"#logging\" class=\"headerlink\" title=\"logging\"></a>logging</h3><p>服务的日志记录配置。</p>\n<p>driver：指定服务容器的日志记录驱动程序，默认值为json-file。有以下三个选项</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">driver:</span> <span class=\"string\">&quot;json-file&quot;</span></span><br><span class=\"line\"><span class=\"attr\">driver:</span> <span class=\"string\">&quot;syslog&quot;</span></span><br><span class=\"line\"><span class=\"attr\">driver:</span> <span class=\"string\">&quot;none&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>仅在 json-file 驱动程序下，可以使用以下参数，限制日志得数量和大小。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">logging:</span></span><br><span class=\"line\">  <span class=\"attr\">driver:</span> <span class=\"string\">json-file</span></span><br><span class=\"line\">  <span class=\"attr\">options:</span></span><br><span class=\"line\">    <span class=\"attr\">max-size:</span> <span class=\"string\">&quot;200k&quot;</span> <span class=\"comment\"># 单个文件大小为200k</span></span><br><span class=\"line\">    <span class=\"attr\">max-file:</span> <span class=\"string\">&quot;10&quot;</span> <span class=\"comment\"># 最多10个文件</span></span><br></pre></td></tr></table></figure>\n\n<p>当达到文件限制上限，会自动删除旧的文件。</p>\n<p>syslog 驱动程序下，可以使用 syslog-address 指定日志接收地址。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">logging:</span></span><br><span class=\"line\">  <span class=\"attr\">driver:</span> <span class=\"string\">syslog</span></span><br><span class=\"line\">  <span class=\"attr\">options:</span></span><br><span class=\"line\">    <span class=\"attr\">syslog-address:</span> <span class=\"string\">&quot;tcp://192.168.0.42:123&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"network-mode\"><a href=\"#network-mode\" class=\"headerlink\" title=\"network_mode\"></a>network_mode</h3><p>设置网络模式。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">network_mode:</span> <span class=\"string\">&quot;bridge&quot;</span></span><br><span class=\"line\"><span class=\"attr\">network_mode:</span> <span class=\"string\">&quot;host&quot;</span></span><br><span class=\"line\"><span class=\"attr\">network_mode:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\"><span class=\"attr\">network_mode:</span> <span class=\"string\">&quot;service:[service name]&quot;</span></span><br><span class=\"line\"><span class=\"attr\">network_mode:</span> <span class=\"string\">&quot;container:[container name/id]&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>networks</p>\n<p>配置容器连接的网络，引用顶级 networks 下的条目 。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">some-service:</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">some-network:</span></span><br><span class=\"line\">        <span class=\"attr\">aliases:</span></span><br><span class=\"line\">         <span class=\"bullet\">-</span> <span class=\"string\">alias1</span></span><br><span class=\"line\">      <span class=\"attr\">other-network:</span></span><br><span class=\"line\">        <span class=\"attr\">aliases:</span></span><br><span class=\"line\">         <span class=\"bullet\">-</span> <span class=\"string\">alias2</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">some-network:</span></span><br><span class=\"line\">    <span class=\"comment\"># Use a custom driver</span></span><br><span class=\"line\">    <span class=\"attr\">driver:</span> <span class=\"string\">custom-driver-1</span></span><br><span class=\"line\">  <span class=\"attr\">other-network:</span></span><br><span class=\"line\">    <span class=\"comment\"># Use a custom driver which takes special options</span></span><br><span class=\"line\">    <span class=\"attr\">driver:</span> <span class=\"string\">custom-driver-2</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>aliases</strong> ：同一网络上的其他容器可以使用服务名称或此别名来连接到对应容器的服务。</p>\n<h3 id=\"restart\"><a href=\"#restart\" class=\"headerlink\" title=\"restart\"></a>restart</h3><ul>\n<li>no：是默认的重启策略，在任何情况下都不会重启容器。</li>\n<li>always：容器总是重新启动。</li>\n<li>on-failure：在容器非正常退出时（退出状态非0），才会重启容器。</li>\n<li>unless-stopped：在容器退出时总是重启容器，但是不考虑在Docker守护进程启动时就已经停止了的容器</li>\n</ul>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">restart:</span> <span class=\"string\">&quot;no&quot;</span></span><br><span class=\"line\"><span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"><span class=\"attr\">restart:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\"><span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br></pre></td></tr></table></figure>\n\n<p>注：swarm 集群模式，请改用 restart_policy。</p>\n<h3 id=\"secrets\"><a href=\"#secrets\" class=\"headerlink\" title=\"secrets\"></a>secrets</h3><p>存储敏感数据，例如密码：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.1&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">mysql:</span></span><br><span class=\"line\">  <span class=\"attr\">image:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">  <span class=\"attr\">environment:</span></span><br><span class=\"line\">    <span class=\"attr\">MYSQL_ROOT_PASSWORD_FILE:</span> <span class=\"string\">/run/secrets/my_secret</span></span><br><span class=\"line\">  <span class=\"attr\">secrets:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">my_secret</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">secrets:</span></span><br><span class=\"line\">  <span class=\"attr\">my_secret:</span></span><br><span class=\"line\">    <span class=\"attr\">file:</span> <span class=\"string\">./my_secret.txt</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"security-opt\"><a href=\"#security-opt\" class=\"headerlink\" title=\"security_opt\"></a>security_opt</h3><p>修改容器默认的 schema 标签。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">security-opt：</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">label:user:USER</span>   <span class=\"comment\"># 设置容器的用户标签</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">label:role:ROLE</span>   <span class=\"comment\"># 设置容器的角色标签</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">label:type:TYPE</span>   <span class=\"comment\"># 设置容器的安全策略标签</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">label:level:LEVEL</span>  <span class=\"comment\"># 设置容器的安全等级标签</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"stop-grace-period\"><a href=\"#stop-grace-period\" class=\"headerlink\" title=\"stop_grace_period\"></a>stop_grace_period</h3><p>指定在容器无法处理 SIGTERM (或者任何 stop_signal 的信号)，等待多久后发送 SIGKILL 信号关闭容器。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">stop_grace_period:</span> <span class=\"string\">1s</span> <span class=\"comment\"># 等待 1 秒</span></span><br><span class=\"line\"><span class=\"attr\">stop_grace_period:</span> <span class=\"string\">1m30s</span> <span class=\"comment\"># 等待 1 分 30 秒 </span></span><br></pre></td></tr></table></figure>\n\n<p>默认的等待时间是 10 秒。</p>\n<h3 id=\"stop-signal\"><a href=\"#stop-signal\" class=\"headerlink\" title=\"stop_signal\"></a>stop_signal</h3><p>设置停止容器的替代信号。默认情况下使用 SIGTERM 。</p>\n<p>以下示例，使用 SIGUSR1 替代信号 SIGTERM 来停止容器。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">stop_signal:</span> <span class=\"string\">SIGUSR1</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"sysctls\"><a href=\"#sysctls\" class=\"headerlink\" title=\"sysctls\"></a>sysctls</h3><p>设置容器中的内核参数，可以使用数组或字典格式。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">sysctls:</span></span><br><span class=\"line\">  <span class=\"attr\">net.core.somaxconn:</span> <span class=\"number\">1024</span></span><br><span class=\"line\">  <span class=\"attr\">net.ipv4.tcp_syncookies:</span> <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">sysctls:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">net.core.somaxconn=1024</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">net.ipv4.tcp_syncookies=0</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"tmpfs\"><a href=\"#tmpfs\" class=\"headerlink\" title=\"tmpfs\"></a>tmpfs</h3><p>在容器内安装一个临时文件系统。可以是单个值或列表的多个值。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">tmpfs:</span> <span class=\"string\">/run</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">tmpfs:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">/run</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">/tmp</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ulimits\"><a href=\"#ulimits\" class=\"headerlink\" title=\"ulimits\"></a>ulimits</h3><p>覆盖容器默认的 ulimit。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">ulimits:</span></span><br><span class=\"line\">  <span class=\"attr\">nproc:</span> <span class=\"number\">65535</span></span><br><span class=\"line\">  <span class=\"attr\">nofile:</span></span><br><span class=\"line\">    <span class=\"attr\">soft:</span> <span class=\"number\">20000</span></span><br><span class=\"line\">    <span class=\"attr\">hard:</span> <span class=\"number\">40000</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"volumes\"><a href=\"#volumes\" class=\"headerlink\" title=\"volumes\"></a>volumes</h3><p>将主机的数据卷或者文件挂载到容器里。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.7&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">db:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">postgres:latest</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;/localhost/postgres.sock:/var/run/postgres/postgres.sock&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;/localhost/data:/var/lib/postgresql/data&quot;</span></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=a1724a5d-2e76-394a-1899-4013f68272a7","cover_type":"img","excerpt":"","more":"<h3 id=\"version\"><a href=\"#version\" class=\"headerlink\" title=\"version\"></a>version</h3><p>指定本 yml 依从的 compose 哪个版本制定的。</p>\n<h3 id=\"build\"><a href=\"#build\" class=\"headerlink\" title=\"build\"></a>build</h3><p>指定为构建镜像上下文路径：</p>\n<p>例如 webapp 服务，指定为从上下文路径 .&#x2F;dir&#x2F;Dockerfile 所构建的镜像：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.7&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">webapp:</span></span><br><span class=\"line\">    <span class=\"attr\">build:</span> <span class=\"string\">./dir</span></span><br></pre></td></tr></table></figure>\n\n<p>或者，作为具有在上下文指定的路径的对象，以及可选的 Dockerfile 和 args：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.7&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">webapp:</span></span><br><span class=\"line\">    <span class=\"attr\">build:</span></span><br><span class=\"line\">      <span class=\"attr\">context:</span> <span class=\"string\">./dir</span></span><br><span class=\"line\">      <span class=\"attr\">dockerfile:</span> <span class=\"string\">Dockerfile-alternate</span></span><br><span class=\"line\">      <span class=\"attr\">args:</span></span><br><span class=\"line\">        <span class=\"attr\">buildno:</span> <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&quot;com.example.description=Accounting webapp&quot;</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&quot;com.example.department=Finance&quot;</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&quot;com.example.label-with-empty-value&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">target:</span> <span class=\"string\">prod</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>context：上下文路径。</li>\n<li>dockerfile：指定构建镜像的 Dockerfile 文件名。</li>\n<li>args：添加构建参数，这是只能在构建过程中访问的环境变量。</li>\n<li>labels：设置构建镜像的标签。</li>\n<li>target：多层构建，可以指定构建哪一层。</li>\n</ul>\n<h3 id=\"cap-add，cap-drop\"><a href=\"#cap-add，cap-drop\" class=\"headerlink\" title=\"cap_add，cap_drop\"></a>cap_add，cap_drop</h3><p>添加或删除容器拥有的宿主机的内核功能。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">cap_add:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">ALL</span> <span class=\"comment\"># 开启全部权限</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">cap_drop:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">SYS_PTRACE</span> <span class=\"comment\"># 关闭 ptrace权限</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"cgroup-parent\"><a href=\"#cgroup-parent\" class=\"headerlink\" title=\"cgroup_parent\"></a>cgroup_parent</h3><p>为容器指定父 cgroup 组，意味着将继承该组的资源限制。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">cgroup_parent:</span> <span class=\"string\">m-executor-abcd</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"command\"><a href=\"#command\" class=\"headerlink\" title=\"command\"></a>command</h3><p>覆盖容器启动的默认命令。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">command:</span> [<span class=\"string\">&quot;bundle&quot;</span>, <span class=\"string\">&quot;exec&quot;</span>, <span class=\"string\">&quot;thin&quot;</span>, <span class=\"string\">&quot;-p&quot;</span>, <span class=\"string\">&quot;3000&quot;</span>]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"container-name\"><a href=\"#container-name\" class=\"headerlink\" title=\"container_name\"></a>container_name</h3><p>指定自定义容器名称，而不是生成的默认名称。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">container_name:</span> <span class=\"string\">my-web-container</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"depends-on\"><a href=\"#depends-on\" class=\"headerlink\" title=\"depends_on\"></a>depends_on</h3><p>设置依赖关系。</p>\n<ul>\n<li>docker-compose up ：以依赖性顺序启动服务。在以下示例中，先启动 db 和 redis ，才会启动 web。</li>\n<li>docker-compose up SERVICE ：自动包含 SERVICE 的依赖项。在以下示例中，docker-compose up web 还将创建并启动 db 和 redis。</li>\n<li>docker-compose stop ：按依赖关系顺序停止服务。在以下示例中，web 在 db 和 redis 之前停止。</li>\n</ul>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.7&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">web:</span></span><br><span class=\"line\">    <span class=\"attr\">build:</span> <span class=\"string\">.</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">db</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">redis</span></span><br><span class=\"line\">  <span class=\"attr\">redis:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">redis</span></span><br><span class=\"line\">  <span class=\"attr\">db:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">postgres</span></span><br></pre></td></tr></table></figure>\n\n<p>注意：web 服务不会等待 redis db 完全启动 之后才启动。</p>\n<h3 id=\"deploy\"><a href=\"#deploy\" class=\"headerlink\" title=\"deploy\"></a>deploy</h3><p>指定与服务的部署和运行有关的配置。只在 swarm 模式下才会有用。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.7&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">redis:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">redis:alpine</span></span><br><span class=\"line\">    <span class=\"attr\">deploy:</span></span><br><span class=\"line\">      <span class=\"string\">mode：replicated</span></span><br><span class=\"line\">      <span class=\"attr\">replicas:</span> <span class=\"number\">6</span></span><br><span class=\"line\">      <span class=\"attr\">endpoint_mode:</span> <span class=\"string\">dnsrr</span></span><br><span class=\"line\">      <span class=\"attr\">labels:</span> </span><br><span class=\"line\">        <span class=\"attr\">description:</span> <span class=\"string\">&quot;This redis service label&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">resources:</span></span><br><span class=\"line\">        <span class=\"attr\">limits:</span></span><br><span class=\"line\">          <span class=\"attr\">cpus:</span> <span class=\"string\">&#x27;0.50&#x27;</span></span><br><span class=\"line\">          <span class=\"attr\">memory:</span> <span class=\"string\">50M</span></span><br><span class=\"line\">        <span class=\"attr\">reservations:</span></span><br><span class=\"line\">          <span class=\"attr\">cpus:</span> <span class=\"string\">&#x27;0.25&#x27;</span></span><br><span class=\"line\">          <span class=\"attr\">memory:</span> <span class=\"string\">20M</span></span><br><span class=\"line\">      <span class=\"attr\">restart_policy:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\">        <span class=\"attr\">delay:</span> <span class=\"string\">5s</span></span><br><span class=\"line\">        <span class=\"attr\">max_attempts:</span> <span class=\"number\">3</span></span><br><span class=\"line\">        <span class=\"attr\">window:</span> <span class=\"string\">120s</span></span><br></pre></td></tr></table></figure>\n\n<p>可以选参数：</p>\n<p><strong>endpoint_mode</strong>：访问集群服务的方式。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">endpoint_mode:</span> <span class=\"string\">vip</span> </span><br><span class=\"line\"><span class=\"comment\"># Docker 集群服务一个对外的虚拟 ip。所有的请求都会通过这个虚拟 ip 到达集群服务内部的机器。</span></span><br><span class=\"line\"><span class=\"attr\">endpoint_mode:</span> <span class=\"string\">dnsrr</span></span><br><span class=\"line\"><span class=\"comment\"># DNS 轮询（DNSRR）。所有的请求会自动轮询获取到集群 ip 列表中的一个 ip 地址。</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>labels</strong>：在服务上设置标签。可以用容器上的 labels（跟 deploy 同级的配置） 覆盖 deploy 下的 labels。</p>\n<p><strong>mode</strong>：指定服务提供的模式。</p>\n<ul>\n<li><strong>replicated</strong>：复制服务，复制指定服务到集群的机器上。</li>\n<li><strong>global</strong>：全局服务，服务将部署至集群的每个节点。</li>\n</ul>\n<p><strong>replicas：mode</strong> 为 replicated 时，需要使用此参数配置具体运行的节点数量。</p>\n<p><strong>resources</strong>：配置服务器资源使用的限制，例如上例子，配置 redis 集群运行需要的 cpu 的百分比 和 内存的占用。避免占用资源过高出现异常。</p>\n<p><strong>restart_policy</strong>：配置如何在退出容器时重新启动容器。</p>\n<ul>\n<li>condition：可选 none，on-failure 或者 any（默认值：any）。</li>\n<li>delay：设置多久之后重启（默认值：0）。</li>\n<li>max_attempts：尝试重新启动容器的次数，超出次数，则不再尝试（默认值：一直重试）。</li>\n<li>window：设置容器重启超时时间（默认值：0）。</li>\n</ul>\n<p><strong>rollback_config</strong>：配置在更新失败的情况下应如何回滚服务。</p>\n<ul>\n<li>parallelism：一次要回滚的容器数。如果设置为0，则所有容器将同时回滚。</li>\n<li>delay：每个容器组回滚之间等待的时间（默认为0s）。</li>\n<li>failure_action：如果回滚失败，该怎么办。其中一个 continue 或者 pause（默认pause）。</li>\n<li>monitor：每个容器更新后，持续观察是否失败了的时间 (ns|us|ms|s|m|h)（默认为0s）。</li>\n<li>max_failure_ratio：在回滚期间可以容忍的故障率（默认为0）。</li>\n<li>order：回滚期间的操作顺序。其中一个 stop-first（串行回滚），或者 start-first（并行回滚）（默认 stop-first ）。</li>\n</ul>\n<p><strong>update_config</strong>：配置应如何更新服务，对于配置滚动更新很有用。</p>\n<ul>\n<li>parallelism：一次更新的容器数。</li>\n<li>delay：在更新一组容器之间等待的时间。</li>\n<li>failure_action：如果更新失败，该怎么办。其中一个 continue，rollback 或者pause （默认：pause）。</li>\n<li>monitor：每个容器更新后，持续观察是否失败了的时间 (ns|us|ms|s|m|h)（默认为0s）。</li>\n<li>max_failure_ratio：在更新过程中可以容忍的故障率。</li>\n<li>order：回滚期间的操作顺序。其中一个 stop-first（串行回滚），或者 start-first（并行回滚）（默认stop-first）。</li>\n</ul>\n<p><strong>注</strong>：仅支持 V3.4 及更高版本。</p>\n<h3 id=\"devices\"><a href=\"#devices\" class=\"headerlink\" title=\"devices\"></a>devices</h3><p>指定设备映射列表。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">devices:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">&quot;/dev/ttyUSB0:/dev/ttyUSB0&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"dns\"><a href=\"#dns\" class=\"headerlink\" title=\"dns\"></a>dns</h3><p>自定义 DNS 服务器，可以是单个值或列表的多个值。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">dns:</span> <span class=\"number\">8.8</span><span class=\"number\">.8</span><span class=\"number\">.8</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">dns:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"number\">8.8</span><span class=\"number\">.8</span><span class=\"number\">.8</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"number\">9.9</span><span class=\"number\">.9</span><span class=\"number\">.9</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"dns-search\"><a href=\"#dns-search\" class=\"headerlink\" title=\"dns_search\"></a>dns_search</h3><p>自定义 DNS 搜索域。可以是单个值或列表。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">dns_search:</span> <span class=\"string\">example.com</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">dns_search:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">dc1.example.com</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">dc2.example.com</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"entrypoint\"><a href=\"#entrypoint\" class=\"headerlink\" title=\"entrypoint\"></a>entrypoint</h3><p>覆盖容器默认的 entrypoint。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">entrypoint:</span> <span class=\"string\">/code/entrypoint.sh</span></span><br></pre></td></tr></table></figure>\n\n<p>也可以是以下格式：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">entrypoint:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">php</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">-d</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">zend_extension=/usr/local/lib/php/extensions/no-debug-non-zts-20100525/xdebug.so</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">-d</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">memory_limit=-1</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">vendor/bin/phpunit</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"env-file\"><a href=\"#env-file\" class=\"headerlink\" title=\"env_file\"></a>env_file</h3><p>从文件添加环境变量。可以是单个值或列表的多个值。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">env_file:</span> <span class=\"string\">.env</span></span><br></pre></td></tr></table></figure>\n\n<p>也可以是列表格式：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">env_file:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">./common.env</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">./apps/web.env</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">/opt/secrets.env</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"environment\"><a href=\"#environment\" class=\"headerlink\" title=\"environment\"></a>environment</h3><p>添加环境变量。您可以使用数组或字典、任何布尔值，布尔值需要用引号引起来，以确保 YML 解析器不会将其转换为 True 或 False。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">environment:</span></span><br><span class=\"line\">  <span class=\"attr\">RACK_ENV:</span> <span class=\"string\">development</span></span><br><span class=\"line\">  <span class=\"attr\">SHOW:</span> <span class=\"string\">&#x27;true&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"expose\"><a href=\"#expose\" class=\"headerlink\" title=\"expose\"></a>expose</h3><p>暴露端口，但不映射到宿主机，只被连接的服务访问。</p>\n<p>仅可以指定内部端口为参数：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">expose:</span></span><br><span class=\"line\"> <span class=\"bullet\">-</span> <span class=\"string\">&quot;3000&quot;</span></span><br><span class=\"line\"> <span class=\"bullet\">-</span> <span class=\"string\">&quot;8000&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"extra-hosts\"><a href=\"#extra-hosts\" class=\"headerlink\" title=\"extra_hosts\"></a>extra_hosts</h3><p>添加主机名映射。类似 docker client –add-host。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">extra_hosts:</span></span><br><span class=\"line\"> <span class=\"bullet\">-</span> <span class=\"string\">&quot;somehost:162.242.195.82&quot;</span></span><br><span class=\"line\"> <span class=\"bullet\">-</span> <span class=\"string\">&quot;otherhost:50.31.209.229&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>以上会在此服务的内部容器中 &#x2F;etc&#x2F;hosts 创建一个具有 ip 地址和主机名的映射关系：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">162.242</span><span class=\"number\">.195</span><span class=\"number\">.82</span>  <span class=\"string\">somehost</span></span><br><span class=\"line\"><span class=\"number\">50.31</span><span class=\"number\">.209</span><span class=\"number\">.229</span>   <span class=\"string\">otherhost</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"healthcheck\"><a href=\"#healthcheck\" class=\"headerlink\" title=\"healthcheck\"></a>healthcheck</h3><p>用于检测 docker 服务是否健康运行。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">healthcheck:</span></span><br><span class=\"line\">  <span class=\"attr\">test:</span> [<span class=\"string\">&quot;CMD&quot;</span>, <span class=\"string\">&quot;curl&quot;</span>, <span class=\"string\">&quot;-f&quot;</span>, <span class=\"string\">&quot;http://localhost&quot;</span>] <span class=\"comment\"># 设置检测程序</span></span><br><span class=\"line\">  <span class=\"attr\">interval:</span> <span class=\"string\">1m30s</span> <span class=\"comment\"># 设置检测间隔</span></span><br><span class=\"line\">  <span class=\"attr\">timeout:</span> <span class=\"string\">10s</span> <span class=\"comment\"># 设置检测超时时间</span></span><br><span class=\"line\">  <span class=\"attr\">retries:</span> <span class=\"number\">3</span> <span class=\"comment\"># 设置重试次数</span></span><br><span class=\"line\">  <span class=\"attr\">start_period:</span> <span class=\"string\">40s</span> <span class=\"comment\"># 启动后，多少秒开始启动检测程序</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"image\"><a href=\"#image\" class=\"headerlink\" title=\"image\"></a>image</h3><p>指定容器运行的镜像。以下格式都可以：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">image:</span> <span class=\"string\">redis</span></span><br><span class=\"line\"><span class=\"attr\">image:</span> <span class=\"string\">ubuntu:14.04</span></span><br><span class=\"line\"><span class=\"attr\">image:</span> <span class=\"string\">tutum/influxdb</span></span><br><span class=\"line\"><span class=\"attr\">image:</span> <span class=\"string\">example-registry.com:4000/postgresql</span></span><br><span class=\"line\"><span class=\"attr\">image:</span> <span class=\"string\">a4bc65fd</span> <span class=\"comment\"># 镜像id</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"logging\"><a href=\"#logging\" class=\"headerlink\" title=\"logging\"></a>logging</h3><p>服务的日志记录配置。</p>\n<p>driver：指定服务容器的日志记录驱动程序，默认值为json-file。有以下三个选项</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">driver:</span> <span class=\"string\">&quot;json-file&quot;</span></span><br><span class=\"line\"><span class=\"attr\">driver:</span> <span class=\"string\">&quot;syslog&quot;</span></span><br><span class=\"line\"><span class=\"attr\">driver:</span> <span class=\"string\">&quot;none&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>仅在 json-file 驱动程序下，可以使用以下参数，限制日志得数量和大小。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">logging:</span></span><br><span class=\"line\">  <span class=\"attr\">driver:</span> <span class=\"string\">json-file</span></span><br><span class=\"line\">  <span class=\"attr\">options:</span></span><br><span class=\"line\">    <span class=\"attr\">max-size:</span> <span class=\"string\">&quot;200k&quot;</span> <span class=\"comment\"># 单个文件大小为200k</span></span><br><span class=\"line\">    <span class=\"attr\">max-file:</span> <span class=\"string\">&quot;10&quot;</span> <span class=\"comment\"># 最多10个文件</span></span><br></pre></td></tr></table></figure>\n\n<p>当达到文件限制上限，会自动删除旧的文件。</p>\n<p>syslog 驱动程序下，可以使用 syslog-address 指定日志接收地址。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">logging:</span></span><br><span class=\"line\">  <span class=\"attr\">driver:</span> <span class=\"string\">syslog</span></span><br><span class=\"line\">  <span class=\"attr\">options:</span></span><br><span class=\"line\">    <span class=\"attr\">syslog-address:</span> <span class=\"string\">&quot;tcp://192.168.0.42:123&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"network-mode\"><a href=\"#network-mode\" class=\"headerlink\" title=\"network_mode\"></a>network_mode</h3><p>设置网络模式。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">network_mode:</span> <span class=\"string\">&quot;bridge&quot;</span></span><br><span class=\"line\"><span class=\"attr\">network_mode:</span> <span class=\"string\">&quot;host&quot;</span></span><br><span class=\"line\"><span class=\"attr\">network_mode:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\"><span class=\"attr\">network_mode:</span> <span class=\"string\">&quot;service:[service name]&quot;</span></span><br><span class=\"line\"><span class=\"attr\">network_mode:</span> <span class=\"string\">&quot;container:[container name/id]&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>networks</p>\n<p>配置容器连接的网络，引用顶级 networks 下的条目 。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">some-service:</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">some-network:</span></span><br><span class=\"line\">        <span class=\"attr\">aliases:</span></span><br><span class=\"line\">         <span class=\"bullet\">-</span> <span class=\"string\">alias1</span></span><br><span class=\"line\">      <span class=\"attr\">other-network:</span></span><br><span class=\"line\">        <span class=\"attr\">aliases:</span></span><br><span class=\"line\">         <span class=\"bullet\">-</span> <span class=\"string\">alias2</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">some-network:</span></span><br><span class=\"line\">    <span class=\"comment\"># Use a custom driver</span></span><br><span class=\"line\">    <span class=\"attr\">driver:</span> <span class=\"string\">custom-driver-1</span></span><br><span class=\"line\">  <span class=\"attr\">other-network:</span></span><br><span class=\"line\">    <span class=\"comment\"># Use a custom driver which takes special options</span></span><br><span class=\"line\">    <span class=\"attr\">driver:</span> <span class=\"string\">custom-driver-2</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>aliases</strong> ：同一网络上的其他容器可以使用服务名称或此别名来连接到对应容器的服务。</p>\n<h3 id=\"restart\"><a href=\"#restart\" class=\"headerlink\" title=\"restart\"></a>restart</h3><ul>\n<li>no：是默认的重启策略，在任何情况下都不会重启容器。</li>\n<li>always：容器总是重新启动。</li>\n<li>on-failure：在容器非正常退出时（退出状态非0），才会重启容器。</li>\n<li>unless-stopped：在容器退出时总是重启容器，但是不考虑在Docker守护进程启动时就已经停止了的容器</li>\n</ul>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">restart:</span> <span class=\"string\">&quot;no&quot;</span></span><br><span class=\"line\"><span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"><span class=\"attr\">restart:</span> <span class=\"string\">on-failure</span></span><br><span class=\"line\"><span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br></pre></td></tr></table></figure>\n\n<p>注：swarm 集群模式，请改用 restart_policy。</p>\n<h3 id=\"secrets\"><a href=\"#secrets\" class=\"headerlink\" title=\"secrets\"></a>secrets</h3><p>存储敏感数据，例如密码：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.1&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">mysql:</span></span><br><span class=\"line\">  <span class=\"attr\">image:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">  <span class=\"attr\">environment:</span></span><br><span class=\"line\">    <span class=\"attr\">MYSQL_ROOT_PASSWORD_FILE:</span> <span class=\"string\">/run/secrets/my_secret</span></span><br><span class=\"line\">  <span class=\"attr\">secrets:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">my_secret</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">secrets:</span></span><br><span class=\"line\">  <span class=\"attr\">my_secret:</span></span><br><span class=\"line\">    <span class=\"attr\">file:</span> <span class=\"string\">./my_secret.txt</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"security-opt\"><a href=\"#security-opt\" class=\"headerlink\" title=\"security_opt\"></a>security_opt</h3><p>修改容器默认的 schema 标签。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">security-opt：</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">label:user:USER</span>   <span class=\"comment\"># 设置容器的用户标签</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">label:role:ROLE</span>   <span class=\"comment\"># 设置容器的角色标签</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">label:type:TYPE</span>   <span class=\"comment\"># 设置容器的安全策略标签</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">label:level:LEVEL</span>  <span class=\"comment\"># 设置容器的安全等级标签</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"stop-grace-period\"><a href=\"#stop-grace-period\" class=\"headerlink\" title=\"stop_grace_period\"></a>stop_grace_period</h3><p>指定在容器无法处理 SIGTERM (或者任何 stop_signal 的信号)，等待多久后发送 SIGKILL 信号关闭容器。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">stop_grace_period:</span> <span class=\"string\">1s</span> <span class=\"comment\"># 等待 1 秒</span></span><br><span class=\"line\"><span class=\"attr\">stop_grace_period:</span> <span class=\"string\">1m30s</span> <span class=\"comment\"># 等待 1 分 30 秒 </span></span><br></pre></td></tr></table></figure>\n\n<p>默认的等待时间是 10 秒。</p>\n<h3 id=\"stop-signal\"><a href=\"#stop-signal\" class=\"headerlink\" title=\"stop_signal\"></a>stop_signal</h3><p>设置停止容器的替代信号。默认情况下使用 SIGTERM 。</p>\n<p>以下示例，使用 SIGUSR1 替代信号 SIGTERM 来停止容器。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">stop_signal:</span> <span class=\"string\">SIGUSR1</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"sysctls\"><a href=\"#sysctls\" class=\"headerlink\" title=\"sysctls\"></a>sysctls</h3><p>设置容器中的内核参数，可以使用数组或字典格式。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">sysctls:</span></span><br><span class=\"line\">  <span class=\"attr\">net.core.somaxconn:</span> <span class=\"number\">1024</span></span><br><span class=\"line\">  <span class=\"attr\">net.ipv4.tcp_syncookies:</span> <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">sysctls:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">net.core.somaxconn=1024</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">net.ipv4.tcp_syncookies=0</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"tmpfs\"><a href=\"#tmpfs\" class=\"headerlink\" title=\"tmpfs\"></a>tmpfs</h3><p>在容器内安装一个临时文件系统。可以是单个值或列表的多个值。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">tmpfs:</span> <span class=\"string\">/run</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">tmpfs:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">/run</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">/tmp</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ulimits\"><a href=\"#ulimits\" class=\"headerlink\" title=\"ulimits\"></a>ulimits</h3><p>覆盖容器默认的 ulimit。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">ulimits:</span></span><br><span class=\"line\">  <span class=\"attr\">nproc:</span> <span class=\"number\">65535</span></span><br><span class=\"line\">  <span class=\"attr\">nofile:</span></span><br><span class=\"line\">    <span class=\"attr\">soft:</span> <span class=\"number\">20000</span></span><br><span class=\"line\">    <span class=\"attr\">hard:</span> <span class=\"number\">40000</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"volumes\"><a href=\"#volumes\" class=\"headerlink\" title=\"volumes\"></a>volumes</h3><p>将主机的数据卷或者文件挂载到容器里。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.7&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">db:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">postgres:latest</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;/localhost/postgres.sock:/var/run/postgres/postgres.sock&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;/localhost/data:/var/lib/postgresql/data&quot;</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Docker-compose实例 Alist","abbrlink":"4966","date":"2025-02-24T13:33:08.000Z","_content":"\n\n🗂️ 一个支持多种存储的文件列表程序，使用 Gin 和 Solidjs。\n\nAlist文档：[https://alist.nn.ci/zh/](https://alist.nn.ci/zh/)\n\n> AList 从一开始就设计为易于安装，并且可以在所有平台上使用。 多种存储 AList 支持多个存储提供商，包括本地存储、阿里云盘、OneDrive、Google Drive 等，且易于拓展。\n\n\n配置文件中-数据库的配置\n\n参考文档：[#database](https://alist.nn.ci/zh/config/configuration.html#database)\n\n```json\n\"database\": {\n    \"type\": \"mysql\",\n    \"host\": \"mysql\",\n    \"port\": 3306,\n    \"user\": \"alist\",\n    \"password\": \"alist\",\n    \"name\": \"alist\",\n    \"db_file\": \"data/data.db\",\n    \"table_prefix\": \"x_\",\n    \"ssl_mode\": \"\",\n    \"dsn\": \"\"\n  }\n```\n\n\ndocker-compose\n\n```yaml\nservices:\n  alist:\n    image: 'xhofe/alist:latest'\n    container_name: alist\n    hostname: alist\n    restart: always\n    ports:\n      - '5244:5244'\n    volumes:\n      - './data:/opt/alist/data'\n    environment:\n      - PUID=0\n      - PGID=0\n      - UMASK=022\n\n# 个人配置\n#    networks:\n#      - net\n#networks:\n#  net:\n#    external: true\n#    name: lin-net\n```\n\n‍\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Alist.md","raw":"---\ntitle: Docker-compose实例 Alist\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - Alist\nabbrlink: '4966'\ndate: 2025-02-24 21:33:08\n---\n\n\n🗂️ 一个支持多种存储的文件列表程序，使用 Gin 和 Solidjs。\n\nAlist文档：[https://alist.nn.ci/zh/](https://alist.nn.ci/zh/)\n\n> AList 从一开始就设计为易于安装，并且可以在所有平台上使用。 多种存储 AList 支持多个存储提供商，包括本地存储、阿里云盘、OneDrive、Google Drive 等，且易于拓展。\n\n\n配置文件中-数据库的配置\n\n参考文档：[#database](https://alist.nn.ci/zh/config/configuration.html#database)\n\n```json\n\"database\": {\n    \"type\": \"mysql\",\n    \"host\": \"mysql\",\n    \"port\": 3306,\n    \"user\": \"alist\",\n    \"password\": \"alist\",\n    \"name\": \"alist\",\n    \"db_file\": \"data/data.db\",\n    \"table_prefix\": \"x_\",\n    \"ssl_mode\": \"\",\n    \"dsn\": \"\"\n  }\n```\n\n\ndocker-compose\n\n```yaml\nservices:\n  alist:\n    image: 'xhofe/alist:latest'\n    container_name: alist\n    hostname: alist\n    restart: always\n    ports:\n      - '5244:5244'\n    volumes:\n      - './data:/opt/alist/data'\n    environment:\n      - PUID=0\n      - PGID=0\n      - UMASK=022\n\n# 个人配置\n#    networks:\n#      - net\n#networks:\n#  net:\n#    external: true\n#    name: lin-net\n```\n\n‍\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/Alist","published":1,"updated":"2025-06-02T07:26:02.703Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86xb0068zcqbgp6t8az1","content":"<p>🗂️ 一个支持多种存储的文件列表程序，使用 Gin 和 Solidjs。</p>\n<p>Alist文档：<a href=\"https://alist.nn.ci/zh/\">https://alist.nn.ci/zh/</a></p>\n<blockquote>\n<p>AList 从一开始就设计为易于安装，并且可以在所有平台上使用。 多种存储 AList 支持多个存储提供商，包括本地存储、阿里云盘、OneDrive、Google Drive 等，且易于拓展。</p>\n</blockquote>\n<p>配置文件中-数据库的配置</p>\n<p>参考文档：<a href=\"https://alist.nn.ci/zh/config/configuration.html#database\">#database</a></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;database&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;mysql&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;host&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;mysql&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;port&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3306</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;user&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;alist&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;password&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;alist&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;alist&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;db_file&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;data/data.db&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;table_prefix&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;x_&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;ssl_mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;dsn&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n\n<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">alist:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;xhofe/alist:latest&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">alist</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">alist</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5244:5244&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;./data:/opt/alist/data&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">PUID=0</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">PGID=0</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">UMASK=022</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 个人配置</span></span><br><span class=\"line\"><span class=\"comment\">#    networks:</span></span><br><span class=\"line\"><span class=\"comment\">#      - net</span></span><br><span class=\"line\"><span class=\"comment\">#networks:</span></span><br><span class=\"line\"><span class=\"comment\">#  net:</span></span><br><span class=\"line\"><span class=\"comment\">#    external: true</span></span><br><span class=\"line\"><span class=\"comment\">#    name: lin-net</span></span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n","cover":"https://t.alcy.cc/pc?_r_=76adfebe-f983-84e4-6382-62efbba721e0","cover_type":"img","excerpt":"","more":"<p>🗂️ 一个支持多种存储的文件列表程序，使用 Gin 和 Solidjs。</p>\n<p>Alist文档：<a href=\"https://alist.nn.ci/zh/\">https://alist.nn.ci/zh/</a></p>\n<blockquote>\n<p>AList 从一开始就设计为易于安装，并且可以在所有平台上使用。 多种存储 AList 支持多个存储提供商，包括本地存储、阿里云盘、OneDrive、Google Drive 等，且易于拓展。</p>\n</blockquote>\n<p>配置文件中-数据库的配置</p>\n<p>参考文档：<a href=\"https://alist.nn.ci/zh/config/configuration.html#database\">#database</a></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;database&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;mysql&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;host&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;mysql&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;port&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3306</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;user&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;alist&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;password&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;alist&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;alist&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;db_file&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;data/data.db&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;table_prefix&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;x_&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;ssl_mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;dsn&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n\n<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">alist:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;xhofe/alist:latest&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">alist</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">alist</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5244:5244&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;./data:/opt/alist/data&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">PUID=0</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">PGID=0</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">UMASK=022</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 个人配置</span></span><br><span class=\"line\"><span class=\"comment\">#    networks:</span></span><br><span class=\"line\"><span class=\"comment\">#      - net</span></span><br><span class=\"line\"><span class=\"comment\">#networks:</span></span><br><span class=\"line\"><span class=\"comment\">#  net:</span></span><br><span class=\"line\"><span class=\"comment\">#    external: true</span></span><br><span class=\"line\"><span class=\"comment\">#    name: lin-net</span></span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n"},{"title":"Docker-compose实例 Dashdot","abbrlink":"7fcd","date":"2025-02-24T13:33:08.000Z","_content":"\n[github.com](https://github.com/MauriceNino/dashdot)\n\n> Dashdot中文名字“破折号”，它是一款简单、实用的开源现代服务器仪表盘，主要应用于小型 VPS 和私人服务器（比如说NAS），是一个界面非常漂亮的监控服务器面板！\n\n```yaml\nversion: '3.1'\nservices:\n  dashdot:\n    stdin_open: true\n    tty: true\n    restart: unless-stopped\n    privileged: true\n    container_name: dashdot\n    ports:\n      - '6005:3001'\n    volumes:\n      - '/:/mnt/host:ro'\n    environment:\n      - DASHDOT_ENABLE_CPU_TEMPS=true\n      - DASHDOT_OVERRIDE_OS=DS1522+\n      - DASHDOT_ALWAYS_SHOW_PERCENTAGES=true\n    image: 'mauricenino/dashdot:latest'\n    networks:\n      bridge0:\n        ipv4_address: 172.20.0.10\nnetworks:\n  bridge0:\n    external: true\n    name: bridge0\n\n```\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Dashdot.md","raw":"---\ntitle: Docker-compose实例 Dashdot\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - Dashdot\nabbrlink: 7fcd\ndate: 2025-02-24 21:33:08\n---\n\n[github.com](https://github.com/MauriceNino/dashdot)\n\n> Dashdot中文名字“破折号”，它是一款简单、实用的开源现代服务器仪表盘，主要应用于小型 VPS 和私人服务器（比如说NAS），是一个界面非常漂亮的监控服务器面板！\n\n```yaml\nversion: '3.1'\nservices:\n  dashdot:\n    stdin_open: true\n    tty: true\n    restart: unless-stopped\n    privileged: true\n    container_name: dashdot\n    ports:\n      - '6005:3001'\n    volumes:\n      - '/:/mnt/host:ro'\n    environment:\n      - DASHDOT_ENABLE_CPU_TEMPS=true\n      - DASHDOT_OVERRIDE_OS=DS1522+\n      - DASHDOT_ALWAYS_SHOW_PERCENTAGES=true\n    image: 'mauricenino/dashdot:latest'\n    networks:\n      bridge0:\n        ipv4_address: 172.20.0.10\nnetworks:\n  bridge0:\n    external: true\n    name: bridge0\n\n```\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/Dashdot","published":1,"updated":"2025-06-02T07:26:08.275Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86xb006czcqb40drdetw","content":"<p><a href=\"https://github.com/MauriceNino/dashdot\">github.com</a></p>\n<blockquote>\n<p>Dashdot中文名字“破折号”，它是一款简单、实用的开源现代服务器仪表盘，主要应用于小型 VPS 和私人服务器（比如说NAS），是一个界面非常漂亮的监控服务器面板！</p>\n</blockquote>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3.1&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">dashdot:</span></span><br><span class=\"line\">    <span class=\"attr\">stdin_open:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">tty:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\">    <span class=\"attr\">privileged:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">dashdot</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;6005:3001&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/:/mnt/host:ro&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">DASHDOT_ENABLE_CPU_TEMPS=true</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">DASHDOT_OVERRIDE_OS=DS1522+</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">DASHDOT_ALWAYS_SHOW_PERCENTAGES=true</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;mauricenino/dashdot:latest&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">        <span class=\"attr\">ipv4_address:</span> <span class=\"number\">172.20</span><span class=\"number\">.0</span><span class=\"number\">.10</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">bridge0</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=b8971610-3ff9-524e-d0c6-c337abb45835","cover_type":"img","excerpt":"","more":"<p><a href=\"https://github.com/MauriceNino/dashdot\">github.com</a></p>\n<blockquote>\n<p>Dashdot中文名字“破折号”，它是一款简单、实用的开源现代服务器仪表盘，主要应用于小型 VPS 和私人服务器（比如说NAS），是一个界面非常漂亮的监控服务器面板！</p>\n</blockquote>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3.1&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">dashdot:</span></span><br><span class=\"line\">    <span class=\"attr\">stdin_open:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">tty:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\">    <span class=\"attr\">privileged:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">dashdot</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;6005:3001&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/:/mnt/host:ro&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">DASHDOT_ENABLE_CPU_TEMPS=true</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">DASHDOT_OVERRIDE_OS=DS1522+</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">DASHDOT_ALWAYS_SHOW_PERCENTAGES=true</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;mauricenino/dashdot:latest&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">        <span class=\"attr\">ipv4_address:</span> <span class=\"number\">172.20</span><span class=\"number\">.0</span><span class=\"number\">.10</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">bridge0</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n"},{"title":"Docker-compose实例 Elasticsearch","abbrlink":"943e","date":"2025-02-24T13:33:08.000Z","_content":"# Docker运行Elasticsearch\n\n# Elasticsearch\n\n创建文件夹\n\n```\nmkdir /usr/local/elasticsearch/{config,data,log} -pv\n    chown 1000:1000 /usr/local/elasticsearch/* -R\n```\n\n创建配置文件 主\n\n```yaml\nvim /usr/local/elasticsearch/config/es.yml\n\ncluster.name: es-cluster\nnode.name: es-master\nnode.master: true\nnode.data: true\n\n\nnetwork.bind_host: 0.0.0.0\nnetwork.publish_host: 192.168.1.241\nhttp.port: 9200\ntransport.tcp.port: 9300\nhttp.cors.enabled: true\nhttp.cors.allow-origin: \"*\"\n\ndiscovery.zen.ping.unicast.hosts: [\"es-master:9300\", \"es-node1:9300\", \"es-node2:9300\"]\ndiscovery.zen.minimum_master_nodes: 2\ndiscovery.zen.ping_timeout: 5s\n\nbootstrap.memory_lock: true\naction.destructive_requires_name: true\ncluster.initial_master_nodes: [\"es-master\"]\n\n#ingest.geoip.downloader.enabled: false\n```\n\ndocker-compose.yml\n\n```yaml\nversion: '3'\nservices:\n  es-master:\n    image: harbor:59001/library/elasticsearch:7.6.2\n    container_name: es-master\n    environment:\n      - \"ES_JAVA_OPTS=-Xms4096m -Xmx4096m\"\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n      nofile:\n        soft: 65536\n        hard: 65536\n    restart: always\n    volumes:\n      - /usr/local/elasticsearch/config/es.yml:/usr/share/elasticsearch/config/elasticsearch.yml:ro\n      - /usr/local/elasticsearch/data:/usr/share/elasticsearch/data:rw\n      - /usr/local/elasticsearch/log:/usr/share/elasticsearch/log:rw\n    ports:\n      - 9200:9200\n      - 9300:9300\n    :                        # 设置容器 hosts\n      - \"es-master:192.168.1.241\"\n      - \"es-node1:192.168.1.250\"\n      - \"es-node2:192.168.1.171\"\n```\n\n创建配置文件 从\n\n```yaml\nvim /usr/local/elasticsearch/config/es.yml\n\ncluster.name: es-cluster\nnode.name: es-node1\nnode.master: false\nnode.data: true\n\nnetwork.bind_host: 0.0.0.0\nnetwork.publish_host: 192.168.1.250\nhttp.port: 9200\ntransport.tcp.port: 9300\nhttp.cors.enabled: true\nhttp.cors.allow-origin: \"*\"\n\ndiscovery.zen.ping.unicast.hosts: [\"es-master:9300\", \"es-node1:9300\", \"es-node2:9300\"]\ndiscovery.zen.minimum_master_nodes: 2\ndiscovery.zen.ping_timeout: 5s\n\nbootstrap.memory_lock: true\naction.destructive_requires_name: true\ncluster.initial_master_nodes: [\"es-master\"]\n```\n\ndocker-compose.yml\n\n```yaml\nversion: '3'\nservices:\n  es-master:\n    image: 192.168.1.63:59001/library/elasticsearch:7.6.2\n    container_name: es-node2\n    environment:\n      - \"ES_JAVA_OPTS=-Xms4096m -Xmx4096m\"\n    restart: always\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n      nofile:\n        soft: 65536\n        hard: 65536\n    volumes:\n      - /usr/local/elasticsearch/config/es.yml:/usr/share/elasticsearch/config/elasticsearch.yml:ro\n      - /usr/local/elasticsearch/data:/usr/share/elasticsearch/data:rw\n      - /usr/local/elasticsearch/log:/usr/share/elasticsearch/log:rw\n    ports:\n      - 9200:9200\n      - 9300:9300\n    extra_hosts:                        # 设置容器 hosts\n      - \"es-master:192.168.1.241\"\n      - \"es-node1:192.168.1.250\"\n      - \"es-node2:192.168.1.171\"\n```\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Elasticsearch.md","raw":"---\ntitle: Docker-compose实例 Elasticsearch\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - Elasticsearch\nabbrlink: 943e\ndate: 2025-02-24 21:33:08\n---\n# Docker运行Elasticsearch\n\n# Elasticsearch\n\n创建文件夹\n\n```\nmkdir /usr/local/elasticsearch/{config,data,log} -pv\n    chown 1000:1000 /usr/local/elasticsearch/* -R\n```\n\n创建配置文件 主\n\n```yaml\nvim /usr/local/elasticsearch/config/es.yml\n\ncluster.name: es-cluster\nnode.name: es-master\nnode.master: true\nnode.data: true\n\n\nnetwork.bind_host: 0.0.0.0\nnetwork.publish_host: 192.168.1.241\nhttp.port: 9200\ntransport.tcp.port: 9300\nhttp.cors.enabled: true\nhttp.cors.allow-origin: \"*\"\n\ndiscovery.zen.ping.unicast.hosts: [\"es-master:9300\", \"es-node1:9300\", \"es-node2:9300\"]\ndiscovery.zen.minimum_master_nodes: 2\ndiscovery.zen.ping_timeout: 5s\n\nbootstrap.memory_lock: true\naction.destructive_requires_name: true\ncluster.initial_master_nodes: [\"es-master\"]\n\n#ingest.geoip.downloader.enabled: false\n```\n\ndocker-compose.yml\n\n```yaml\nversion: '3'\nservices:\n  es-master:\n    image: harbor:59001/library/elasticsearch:7.6.2\n    container_name: es-master\n    environment:\n      - \"ES_JAVA_OPTS=-Xms4096m -Xmx4096m\"\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n      nofile:\n        soft: 65536\n        hard: 65536\n    restart: always\n    volumes:\n      - /usr/local/elasticsearch/config/es.yml:/usr/share/elasticsearch/config/elasticsearch.yml:ro\n      - /usr/local/elasticsearch/data:/usr/share/elasticsearch/data:rw\n      - /usr/local/elasticsearch/log:/usr/share/elasticsearch/log:rw\n    ports:\n      - 9200:9200\n      - 9300:9300\n    :                        # 设置容器 hosts\n      - \"es-master:192.168.1.241\"\n      - \"es-node1:192.168.1.250\"\n      - \"es-node2:192.168.1.171\"\n```\n\n创建配置文件 从\n\n```yaml\nvim /usr/local/elasticsearch/config/es.yml\n\ncluster.name: es-cluster\nnode.name: es-node1\nnode.master: false\nnode.data: true\n\nnetwork.bind_host: 0.0.0.0\nnetwork.publish_host: 192.168.1.250\nhttp.port: 9200\ntransport.tcp.port: 9300\nhttp.cors.enabled: true\nhttp.cors.allow-origin: \"*\"\n\ndiscovery.zen.ping.unicast.hosts: [\"es-master:9300\", \"es-node1:9300\", \"es-node2:9300\"]\ndiscovery.zen.minimum_master_nodes: 2\ndiscovery.zen.ping_timeout: 5s\n\nbootstrap.memory_lock: true\naction.destructive_requires_name: true\ncluster.initial_master_nodes: [\"es-master\"]\n```\n\ndocker-compose.yml\n\n```yaml\nversion: '3'\nservices:\n  es-master:\n    image: 192.168.1.63:59001/library/elasticsearch:7.6.2\n    container_name: es-node2\n    environment:\n      - \"ES_JAVA_OPTS=-Xms4096m -Xmx4096m\"\n    restart: always\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n      nofile:\n        soft: 65536\n        hard: 65536\n    volumes:\n      - /usr/local/elasticsearch/config/es.yml:/usr/share/elasticsearch/config/elasticsearch.yml:ro\n      - /usr/local/elasticsearch/data:/usr/share/elasticsearch/data:rw\n      - /usr/local/elasticsearch/log:/usr/share/elasticsearch/log:rw\n    ports:\n      - 9200:9200\n      - 9300:9300\n    extra_hosts:                        # 设置容器 hosts\n      - \"es-master:192.168.1.241\"\n      - \"es-node1:192.168.1.250\"\n      - \"es-node2:192.168.1.171\"\n```\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/Elasticsearch","published":1,"updated":"2025-06-02T07:26:10.791Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86xr00ayzcqb1wq25858","content":"<h1 id=\"Docker运行Elasticsearch\"><a href=\"#Docker运行Elasticsearch\" class=\"headerlink\" title=\"Docker运行Elasticsearch\"></a>Docker运行Elasticsearch</h1><h1 id=\"Elasticsearch\"><a href=\"#Elasticsearch\" class=\"headerlink\" title=\"Elasticsearch\"></a>Elasticsearch</h1><p>创建文件夹</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /usr/local/elasticsearch/&#123;config,data,log&#125; -pv</span><br><span class=\"line\">    chown 1000:1000 /usr/local/elasticsearch/* -R</span><br></pre></td></tr></table></figure>\n\n<p>创建配置文件 主</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">vim</span> <span class=\"string\">/usr/local/elasticsearch/config/es.yml</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">cluster.name:</span> <span class=\"string\">es-cluster</span></span><br><span class=\"line\"><span class=\"attr\">node.name:</span> <span class=\"string\">es-master</span></span><br><span class=\"line\"><span class=\"attr\">node.master:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">node.data:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">network.bind_host:</span> <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span></span><br><span class=\"line\"><span class=\"attr\">network.publish_host:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.241</span></span><br><span class=\"line\"><span class=\"attr\">http.port:</span> <span class=\"number\">9200</span></span><br><span class=\"line\"><span class=\"attr\">transport.tcp.port:</span> <span class=\"number\">9300</span></span><br><span class=\"line\"><span class=\"attr\">http.cors.enabled:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">http.cors.allow-origin:</span> <span class=\"string\">&quot;*&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">discovery.zen.ping.unicast.hosts:</span> [<span class=\"string\">&quot;es-master:9300&quot;</span>, <span class=\"string\">&quot;es-node1:9300&quot;</span>, <span class=\"string\">&quot;es-node2:9300&quot;</span>]</span><br><span class=\"line\"><span class=\"attr\">discovery.zen.minimum_master_nodes:</span> <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"attr\">discovery.zen.ping_timeout:</span> <span class=\"string\">5s</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">bootstrap.memory_lock:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">action.destructive_requires_name:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">cluster.initial_master_nodes:</span> [<span class=\"string\">&quot;es-master&quot;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#ingest.geoip.downloader.enabled: false</span></span><br></pre></td></tr></table></figure>\n\n<p>docker-compose.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">es-master:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">harbor:59001/library/elasticsearch:7.6.2</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">es-master</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;ES_JAVA_OPTS=-Xms4096m -Xmx4096m&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">ulimits:</span></span><br><span class=\"line\">      <span class=\"attr\">memlock:</span></span><br><span class=\"line\">        <span class=\"attr\">soft:</span> <span class=\"number\">-1</span></span><br><span class=\"line\">        <span class=\"attr\">hard:</span> <span class=\"number\">-1</span></span><br><span class=\"line\">      <span class=\"attr\">nofile:</span></span><br><span class=\"line\">        <span class=\"attr\">soft:</span> <span class=\"number\">65536</span></span><br><span class=\"line\">        <span class=\"attr\">hard:</span> <span class=\"number\">65536</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/elasticsearch/config/es.yml:/usr/share/elasticsearch/config/elasticsearch.yml:ro</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/elasticsearch/data:/usr/share/elasticsearch/data:rw</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/elasticsearch/log:/usr/share/elasticsearch/log:rw</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9200</span><span class=\"string\">:9200</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9300</span><span class=\"string\">:9300</span></span><br><span class=\"line\">    <span class=\"string\">:</span>                        <span class=\"comment\"># 设置容器 hosts</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;es-master:192.168.1.241&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;es-node1:192.168.1.250&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;es-node2:192.168.1.171&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>创建配置文件 从</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">vim</span> <span class=\"string\">/usr/local/elasticsearch/config/es.yml</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">cluster.name:</span> <span class=\"string\">es-cluster</span></span><br><span class=\"line\"><span class=\"attr\">node.name:</span> <span class=\"string\">es-node1</span></span><br><span class=\"line\"><span class=\"attr\">node.master:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">node.data:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">network.bind_host:</span> <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span></span><br><span class=\"line\"><span class=\"attr\">network.publish_host:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.250</span></span><br><span class=\"line\"><span class=\"attr\">http.port:</span> <span class=\"number\">9200</span></span><br><span class=\"line\"><span class=\"attr\">transport.tcp.port:</span> <span class=\"number\">9300</span></span><br><span class=\"line\"><span class=\"attr\">http.cors.enabled:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">http.cors.allow-origin:</span> <span class=\"string\">&quot;*&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">discovery.zen.ping.unicast.hosts:</span> [<span class=\"string\">&quot;es-master:9300&quot;</span>, <span class=\"string\">&quot;es-node1:9300&quot;</span>, <span class=\"string\">&quot;es-node2:9300&quot;</span>]</span><br><span class=\"line\"><span class=\"attr\">discovery.zen.minimum_master_nodes:</span> <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"attr\">discovery.zen.ping_timeout:</span> <span class=\"string\">5s</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">bootstrap.memory_lock:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">action.destructive_requires_name:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">cluster.initial_master_nodes:</span> [<span class=\"string\">&quot;es-master&quot;</span>]</span><br></pre></td></tr></table></figure>\n\n<p>docker-compose.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">es-master:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.63</span><span class=\"string\">:59001/library/elasticsearch:7.6.2</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">es-node2</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;ES_JAVA_OPTS=-Xms4096m -Xmx4096m&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">ulimits:</span></span><br><span class=\"line\">      <span class=\"attr\">memlock:</span></span><br><span class=\"line\">        <span class=\"attr\">soft:</span> <span class=\"number\">-1</span></span><br><span class=\"line\">        <span class=\"attr\">hard:</span> <span class=\"number\">-1</span></span><br><span class=\"line\">      <span class=\"attr\">nofile:</span></span><br><span class=\"line\">        <span class=\"attr\">soft:</span> <span class=\"number\">65536</span></span><br><span class=\"line\">        <span class=\"attr\">hard:</span> <span class=\"number\">65536</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/elasticsearch/config/es.yml:/usr/share/elasticsearch/config/elasticsearch.yml:ro</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/elasticsearch/data:/usr/share/elasticsearch/data:rw</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/elasticsearch/log:/usr/share/elasticsearch/log:rw</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9200</span><span class=\"string\">:9200</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9300</span><span class=\"string\">:9300</span></span><br><span class=\"line\">    <span class=\"attr\">extra_hosts:</span>                        <span class=\"comment\"># 设置容器 hosts</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;es-master:192.168.1.241&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;es-node1:192.168.1.250&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;es-node2:192.168.1.171&quot;</span></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=ed7b6178-08f1-8433-6235-3cb4365849a7","cover_type":"img","excerpt":"","more":"<h1 id=\"Docker运行Elasticsearch\"><a href=\"#Docker运行Elasticsearch\" class=\"headerlink\" title=\"Docker运行Elasticsearch\"></a>Docker运行Elasticsearch</h1><h1 id=\"Elasticsearch\"><a href=\"#Elasticsearch\" class=\"headerlink\" title=\"Elasticsearch\"></a>Elasticsearch</h1><p>创建文件夹</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /usr/local/elasticsearch/&#123;config,data,log&#125; -pv</span><br><span class=\"line\">    chown 1000:1000 /usr/local/elasticsearch/* -R</span><br></pre></td></tr></table></figure>\n\n<p>创建配置文件 主</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">vim</span> <span class=\"string\">/usr/local/elasticsearch/config/es.yml</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">cluster.name:</span> <span class=\"string\">es-cluster</span></span><br><span class=\"line\"><span class=\"attr\">node.name:</span> <span class=\"string\">es-master</span></span><br><span class=\"line\"><span class=\"attr\">node.master:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">node.data:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">network.bind_host:</span> <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span></span><br><span class=\"line\"><span class=\"attr\">network.publish_host:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.241</span></span><br><span class=\"line\"><span class=\"attr\">http.port:</span> <span class=\"number\">9200</span></span><br><span class=\"line\"><span class=\"attr\">transport.tcp.port:</span> <span class=\"number\">9300</span></span><br><span class=\"line\"><span class=\"attr\">http.cors.enabled:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">http.cors.allow-origin:</span> <span class=\"string\">&quot;*&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">discovery.zen.ping.unicast.hosts:</span> [<span class=\"string\">&quot;es-master:9300&quot;</span>, <span class=\"string\">&quot;es-node1:9300&quot;</span>, <span class=\"string\">&quot;es-node2:9300&quot;</span>]</span><br><span class=\"line\"><span class=\"attr\">discovery.zen.minimum_master_nodes:</span> <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"attr\">discovery.zen.ping_timeout:</span> <span class=\"string\">5s</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">bootstrap.memory_lock:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">action.destructive_requires_name:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">cluster.initial_master_nodes:</span> [<span class=\"string\">&quot;es-master&quot;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#ingest.geoip.downloader.enabled: false</span></span><br></pre></td></tr></table></figure>\n\n<p>docker-compose.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">es-master:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">harbor:59001/library/elasticsearch:7.6.2</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">es-master</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;ES_JAVA_OPTS=-Xms4096m -Xmx4096m&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">ulimits:</span></span><br><span class=\"line\">      <span class=\"attr\">memlock:</span></span><br><span class=\"line\">        <span class=\"attr\">soft:</span> <span class=\"number\">-1</span></span><br><span class=\"line\">        <span class=\"attr\">hard:</span> <span class=\"number\">-1</span></span><br><span class=\"line\">      <span class=\"attr\">nofile:</span></span><br><span class=\"line\">        <span class=\"attr\">soft:</span> <span class=\"number\">65536</span></span><br><span class=\"line\">        <span class=\"attr\">hard:</span> <span class=\"number\">65536</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/elasticsearch/config/es.yml:/usr/share/elasticsearch/config/elasticsearch.yml:ro</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/elasticsearch/data:/usr/share/elasticsearch/data:rw</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/elasticsearch/log:/usr/share/elasticsearch/log:rw</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9200</span><span class=\"string\">:9200</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9300</span><span class=\"string\">:9300</span></span><br><span class=\"line\">    <span class=\"string\">:</span>                        <span class=\"comment\"># 设置容器 hosts</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;es-master:192.168.1.241&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;es-node1:192.168.1.250&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;es-node2:192.168.1.171&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>创建配置文件 从</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">vim</span> <span class=\"string\">/usr/local/elasticsearch/config/es.yml</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">cluster.name:</span> <span class=\"string\">es-cluster</span></span><br><span class=\"line\"><span class=\"attr\">node.name:</span> <span class=\"string\">es-node1</span></span><br><span class=\"line\"><span class=\"attr\">node.master:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">node.data:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">network.bind_host:</span> <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span></span><br><span class=\"line\"><span class=\"attr\">network.publish_host:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.250</span></span><br><span class=\"line\"><span class=\"attr\">http.port:</span> <span class=\"number\">9200</span></span><br><span class=\"line\"><span class=\"attr\">transport.tcp.port:</span> <span class=\"number\">9300</span></span><br><span class=\"line\"><span class=\"attr\">http.cors.enabled:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">http.cors.allow-origin:</span> <span class=\"string\">&quot;*&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">discovery.zen.ping.unicast.hosts:</span> [<span class=\"string\">&quot;es-master:9300&quot;</span>, <span class=\"string\">&quot;es-node1:9300&quot;</span>, <span class=\"string\">&quot;es-node2:9300&quot;</span>]</span><br><span class=\"line\"><span class=\"attr\">discovery.zen.minimum_master_nodes:</span> <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"attr\">discovery.zen.ping_timeout:</span> <span class=\"string\">5s</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">bootstrap.memory_lock:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">action.destructive_requires_name:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">cluster.initial_master_nodes:</span> [<span class=\"string\">&quot;es-master&quot;</span>]</span><br></pre></td></tr></table></figure>\n\n<p>docker-compose.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">es-master:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.63</span><span class=\"string\">:59001/library/elasticsearch:7.6.2</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">es-node2</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;ES_JAVA_OPTS=-Xms4096m -Xmx4096m&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">ulimits:</span></span><br><span class=\"line\">      <span class=\"attr\">memlock:</span></span><br><span class=\"line\">        <span class=\"attr\">soft:</span> <span class=\"number\">-1</span></span><br><span class=\"line\">        <span class=\"attr\">hard:</span> <span class=\"number\">-1</span></span><br><span class=\"line\">      <span class=\"attr\">nofile:</span></span><br><span class=\"line\">        <span class=\"attr\">soft:</span> <span class=\"number\">65536</span></span><br><span class=\"line\">        <span class=\"attr\">hard:</span> <span class=\"number\">65536</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/elasticsearch/config/es.yml:/usr/share/elasticsearch/config/elasticsearch.yml:ro</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/elasticsearch/data:/usr/share/elasticsearch/data:rw</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/usr/local/elasticsearch/log:/usr/share/elasticsearch/log:rw</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9200</span><span class=\"string\">:9200</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9300</span><span class=\"string\">:9300</span></span><br><span class=\"line\">    <span class=\"attr\">extra_hosts:</span>                        <span class=\"comment\"># 设置容器 hosts</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;es-master:192.168.1.241&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;es-node1:192.168.1.250&quot;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;es-node2:192.168.1.171&quot;</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Docker-compose实例 Halo","abbrlink":"2006","date":"2025-02-24T13:33:08.000Z","_content":"\n> Halo 作为一款好用又强大的开源建站工具，配合上不同的模板与插件，可以很好地帮助你构建你心中的理想站点。它可以是你公司的官方网站，可以是你的个人博客，也可以是团队共享的知识库，甚至可以是一个论坛、一个商城。\n\n[Halo - 强大易用的开源建站工具](https://www.halo.run/)\n\n```yaml\nversion: '3'\nservices:\n  halo:\n    image: 'halohub/halo:2.11'\n    container_name: halo\n    hostname: alist\n    restart: 'on-failure:3'\n    volumes:\n      - '/volume1/docker/halo/data:/root/.halo2'\n    ports:\n      - '6003:8090'\n    healthcheck:\n      test:\n        - CMD\n        - curl\n        - '-f'\n        - 'http://localhost:8090/actuator/health/readiness'\n      interval: 30s\n      timeout: 5s\n      retries: 5\n      start_period: 30s\n    command:\n      - '--spring.r2dbc.url=r2dbc:pool:mysql://mysql:3306/halo'\n      - '--spring.r2dbc.username=root'\n      - '--spring.r2dbc.password=root'\n      - '--spring.sql.init.platform=mysql'\n      - '--halo.external-url=http://10.0.0.10:6002/'\n    networks:\n      bridge0:\n        ipv4_address: 172.20.0.9\nnetworks:\n  bridge0:\n    external: true\n    name: bridge0\n```\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Halo.md","raw":"---\ntitle: Docker-compose实例 Halo\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - Halo\nabbrlink: '2006'\ndate: 2025-02-24 21:33:08\n---\n\n> Halo 作为一款好用又强大的开源建站工具，配合上不同的模板与插件，可以很好地帮助你构建你心中的理想站点。它可以是你公司的官方网站，可以是你的个人博客，也可以是团队共享的知识库，甚至可以是一个论坛、一个商城。\n\n[Halo - 强大易用的开源建站工具](https://www.halo.run/)\n\n```yaml\nversion: '3'\nservices:\n  halo:\n    image: 'halohub/halo:2.11'\n    container_name: halo\n    hostname: alist\n    restart: 'on-failure:3'\n    volumes:\n      - '/volume1/docker/halo/data:/root/.halo2'\n    ports:\n      - '6003:8090'\n    healthcheck:\n      test:\n        - CMD\n        - curl\n        - '-f'\n        - 'http://localhost:8090/actuator/health/readiness'\n      interval: 30s\n      timeout: 5s\n      retries: 5\n      start_period: 30s\n    command:\n      - '--spring.r2dbc.url=r2dbc:pool:mysql://mysql:3306/halo'\n      - '--spring.r2dbc.username=root'\n      - '--spring.r2dbc.password=root'\n      - '--spring.sql.init.platform=mysql'\n      - '--halo.external-url=http://10.0.0.10:6002/'\n    networks:\n      bridge0:\n        ipv4_address: 172.20.0.9\nnetworks:\n  bridge0:\n    external: true\n    name: bridge0\n```\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/Halo","published":1,"updated":"2025-06-02T07:26:23.054Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86xs00azzcqbdzi2hzq3","content":"<blockquote>\n<p>Halo 作为一款好用又强大的开源建站工具，配合上不同的模板与插件，可以很好地帮助你构建你心中的理想站点。它可以是你公司的官方网站，可以是你的个人博客，也可以是团队共享的知识库，甚至可以是一个论坛、一个商城。</p>\n</blockquote>\n<p><a href=\"https://www.halo.run/\">Halo - 强大易用的开源建站工具</a></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">halo:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;halohub/halo:2.11&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">halo</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">alist</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">&#x27;on-failure:3&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/volume1/docker/halo/data:/root/.halo2&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;6003:8090&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">healthcheck:</span></span><br><span class=\"line\">      <span class=\"attr\">test:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">CMD</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">curl</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&#x27;-f&#x27;</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&#x27;http://localhost:8090/actuator/health/readiness&#x27;</span></span><br><span class=\"line\">      <span class=\"attr\">interval:</span> <span class=\"string\">30s</span></span><br><span class=\"line\">      <span class=\"attr\">timeout:</span> <span class=\"string\">5s</span></span><br><span class=\"line\">      <span class=\"attr\">retries:</span> <span class=\"number\">5</span></span><br><span class=\"line\">      <span class=\"attr\">start_period:</span> <span class=\"string\">30s</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;--spring.r2dbc.url=r2dbc:pool:mysql://mysql:3306/halo&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;--spring.r2dbc.username=root&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;--spring.r2dbc.password=root&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;--spring.sql.init.platform=mysql&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;--halo.external-url=http://10.0.0.10:6002/&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">        <span class=\"attr\">ipv4_address:</span> <span class=\"number\">172.20</span><span class=\"number\">.0</span><span class=\"number\">.9</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">bridge0</span></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=b58a147d-7576-8773-7e05-76d7754e6a64","cover_type":"img","excerpt":"","more":"<blockquote>\n<p>Halo 作为一款好用又强大的开源建站工具，配合上不同的模板与插件，可以很好地帮助你构建你心中的理想站点。它可以是你公司的官方网站，可以是你的个人博客，也可以是团队共享的知识库，甚至可以是一个论坛、一个商城。</p>\n</blockquote>\n<p><a href=\"https://www.halo.run/\">Halo - 强大易用的开源建站工具</a></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">halo:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;halohub/halo:2.11&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">halo</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">alist</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">&#x27;on-failure:3&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/volume1/docker/halo/data:/root/.halo2&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;6003:8090&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">healthcheck:</span></span><br><span class=\"line\">      <span class=\"attr\">test:</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">CMD</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">curl</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&#x27;-f&#x27;</span></span><br><span class=\"line\">        <span class=\"bullet\">-</span> <span class=\"string\">&#x27;http://localhost:8090/actuator/health/readiness&#x27;</span></span><br><span class=\"line\">      <span class=\"attr\">interval:</span> <span class=\"string\">30s</span></span><br><span class=\"line\">      <span class=\"attr\">timeout:</span> <span class=\"string\">5s</span></span><br><span class=\"line\">      <span class=\"attr\">retries:</span> <span class=\"number\">5</span></span><br><span class=\"line\">      <span class=\"attr\">start_period:</span> <span class=\"string\">30s</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;--spring.r2dbc.url=r2dbc:pool:mysql://mysql:3306/halo&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;--spring.r2dbc.username=root&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;--spring.r2dbc.password=root&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;--spring.sql.init.platform=mysql&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;--halo.external-url=http://10.0.0.10:6002/&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">        <span class=\"attr\">ipv4_address:</span> <span class=\"number\">172.20</span><span class=\"number\">.0</span><span class=\"number\">.9</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">bridge0</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Docker-compose实例 Immich","abbrlink":"4bdb","date":"2025-02-24T13:33:08.000Z","_content":"\nImmich‌是一款自托管的照片和视频管理软件，旨在帮助用户轻松备份、组织和管理自己的照片和视频，同时保护用户的隐私。它支持网页版、安卓端和苹果端，用户可以在多个设备上同步使用‌\n\n官网：[https://immich.app](https://immich.app)\n\n\n\nDocker-compose安装：\n\n参考：[https://immich.app/docs/install/docker-compose](https://immich.app/docs/install/docker-compose)\n\nimmich智能相册更换支持中文搜索的CLIP大模型教程\n\n参考：[https://www.bilibili.com/opus/921308194821636097](https://www.bilibili.com/opus/921308194821636097)\n\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Immich.md","raw":"---\ntitle: Docker-compose实例 Immich\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - Immich\nabbrlink: 4bdb\ndate: 2025-02-24 21:33:08\n---\n\nImmich‌是一款自托管的照片和视频管理软件，旨在帮助用户轻松备份、组织和管理自己的照片和视频，同时保护用户的隐私。它支持网页版、安卓端和苹果端，用户可以在多个设备上同步使用‌\n\n官网：[https://immich.app](https://immich.app)\n\n\n\nDocker-compose安装：\n\n参考：[https://immich.app/docs/install/docker-compose](https://immich.app/docs/install/docker-compose)\n\nimmich智能相册更换支持中文搜索的CLIP大模型教程\n\n参考：[https://www.bilibili.com/opus/921308194821636097](https://www.bilibili.com/opus/921308194821636097)\n\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/Immich","published":1,"updated":"2025-06-02T07:26:28.888Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86xs00b1zcqbdi4a5cu2","content":"<p>Immich‌是一款自托管的照片和视频管理软件，旨在帮助用户轻松备份、组织和管理自己的照片和视频，同时保护用户的隐私。它支持网页版、安卓端和苹果端，用户可以在多个设备上同步使用‌</p>\n<p>官网：<a href=\"https://immich.app/\">https://immich.app</a></p>\n<p>Docker-compose安装：</p>\n<p>参考：<a href=\"https://immich.app/docs/install/docker-compose\">https://immich.app/docs/install/docker-compose</a></p>\n<p>immich智能相册更换支持中文搜索的CLIP大模型教程</p>\n<p>参考：<a href=\"https://www.bilibili.com/opus/921308194821636097\">https://www.bilibili.com/opus/921308194821636097</a></p>\n","cover":"https://t.alcy.cc/pc?_r_=d762fc7d-1894-f752-2213-aa2415f65b36","cover_type":"img","excerpt":"","more":"<p>Immich‌是一款自托管的照片和视频管理软件，旨在帮助用户轻松备份、组织和管理自己的照片和视频，同时保护用户的隐私。它支持网页版、安卓端和苹果端，用户可以在多个设备上同步使用‌</p>\n<p>官网：<a href=\"https://immich.app/\">https://immich.app</a></p>\n<p>Docker-compose安装：</p>\n<p>参考：<a href=\"https://immich.app/docs/install/docker-compose\">https://immich.app/docs/install/docker-compose</a></p>\n<p>immich智能相册更换支持中文搜索的CLIP大模型教程</p>\n<p>参考：<a href=\"https://www.bilibili.com/opus/921308194821636097\">https://www.bilibili.com/opus/921308194821636097</a></p>\n"},{"title":"Docker-compose实例 jenkins","abbrlink":"2e3f","date":"2025-02-24T13:33:08.000Z","_content":"\n# jenkins\n\ndocker-compose.yml\n\n```yaml\nversion : '3'\nservices:\n  jenkins:\n    user: root\n    restart: always\n    image: jenkins/jenkins\n    container_name: jenkins\n    ports:\n      - 7001:8080\n    volumes:\n      - /opt/jenkins/home/:/var/jenkins_home/\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /usr/bin/docker:/usr/bin/docker\n      - /etc/docker/daemon.json:/etc/docker/daemon.json\n      - /opt/jdk1.8:/usr/local/java/jdk1.8.0_161\n      - /opt/maven3:/usr/local/maven/maven3\n      - /opt/node:/usr/local/node\n      - /opt/jenkins/workspace:/usr/local/workspace\n\n```\n\n部署后端项目\n\n**源码管理**\n\n![image-20240511084012247](https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084012247.png)\n\n**触发器**\n\n![image-20240511084032231](https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084032231.png)\n\n![image-20240511084240453](https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084240453.png)\n\n![image-20240511084249597](https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084249597.png)\n\n**Build**\n\n![image-20240511084044273](https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084044273.png)\n\n**构建后操作**\n\n![image-20240511084058484](https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084058484.png)\n\n![image-20240511084103606](https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084103606.png)\n\n```\nSource files：huanfa-car-biz-service/huanfa-car-biz-service-business/target/*.jar\nRemove prefix：huanfa-car-biz-service/huanfa-car-biz-service-business/target/\nRemote directory：/opt/huanfav2/huanfa/huanfa-car-biz-service-business\nExec command：\n\ncd /opt/huanfav2/huanfa/huanfa-car-biz-service-business\nsource /etc/profile\nbash server.sh restart\n```\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Jenkins.md","raw":"---\ntitle: Docker-compose实例 jenkins\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - jenkins\nabbrlink: 2e3f\ndate: 2025-02-24 21:33:08\n---\n\n# jenkins\n\ndocker-compose.yml\n\n```yaml\nversion : '3'\nservices:\n  jenkins:\n    user: root\n    restart: always\n    image: jenkins/jenkins\n    container_name: jenkins\n    ports:\n      - 7001:8080\n    volumes:\n      - /opt/jenkins/home/:/var/jenkins_home/\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /usr/bin/docker:/usr/bin/docker\n      - /etc/docker/daemon.json:/etc/docker/daemon.json\n      - /opt/jdk1.8:/usr/local/java/jdk1.8.0_161\n      - /opt/maven3:/usr/local/maven/maven3\n      - /opt/node:/usr/local/node\n      - /opt/jenkins/workspace:/usr/local/workspace\n\n```\n\n部署后端项目\n\n**源码管理**\n\n![image-20240511084012247](https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084012247.png)\n\n**触发器**\n\n![image-20240511084032231](https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084032231.png)\n\n![image-20240511084240453](https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084240453.png)\n\n![image-20240511084249597](https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084249597.png)\n\n**Build**\n\n![image-20240511084044273](https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084044273.png)\n\n**构建后操作**\n\n![image-20240511084058484](https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084058484.png)\n\n![image-20240511084103606](https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084103606.png)\n\n```\nSource files：huanfa-car-biz-service/huanfa-car-biz-service-business/target/*.jar\nRemove prefix：huanfa-car-biz-service/huanfa-car-biz-service-business/target/\nRemote directory：/opt/huanfav2/huanfa/huanfa-car-biz-service-business\nExec command：\n\ncd /opt/huanfav2/huanfa/huanfa-car-biz-service-business\nsource /etc/profile\nbash server.sh restart\n```\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/Jenkins","published":1,"updated":"2025-06-02T07:26:31.050Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86xt00b2zcqbbvvd6rvb","content":"<h1 id=\"jenkins\"><a href=\"#jenkins\" class=\"headerlink\" title=\"jenkins\"></a>jenkins</h1><p>docker-compose.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version :</span> <span class=\"string\">&#x27;3&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">jenkins:</span></span><br><span class=\"line\">    <span class=\"attr\">user:</span> <span class=\"string\">root</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">jenkins/jenkins</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">jenkins</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">7001</span><span class=\"string\">:8080</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/opt/jenkins/home/:/var/jenkins_home/</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/var/run/docker.sock:/var/run/docker.sock</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/usr/bin/docker:/usr/bin/docker</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/etc/docker/daemon.json:/etc/docker/daemon.json</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/opt/jdk1.8:/usr/local/java/jdk1.8.0_161</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/opt/maven3:/usr/local/maven/maven3</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/opt/node:/usr/local/node</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/opt/jenkins/workspace:/usr/local/workspace</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>部署后端项目</p>\n<p><strong>源码管理</strong></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084012247.png\" alt=\"image-20240511084012247\"></p>\n<p><strong>触发器</strong></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084032231.png\" alt=\"image-20240511084032231\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084240453.png\" alt=\"image-20240511084240453\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084249597.png\" alt=\"image-20240511084249597\"></p>\n<p><strong>Build</strong></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084044273.png\" alt=\"image-20240511084044273\"></p>\n<p><strong>构建后操作</strong></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084058484.png\" alt=\"image-20240511084058484\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084103606.png\" alt=\"image-20240511084103606\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Source files：huanfa-car-biz-service/huanfa-car-biz-service-business/target/*.jar</span><br><span class=\"line\">Remove prefix：huanfa-car-biz-service/huanfa-car-biz-service-business/target/</span><br><span class=\"line\">Remote directory：/opt/huanfav2/huanfa/huanfa-car-biz-service-business</span><br><span class=\"line\">Exec command：</span><br><span class=\"line\"></span><br><span class=\"line\">cd /opt/huanfav2/huanfa/huanfa-car-biz-service-business</span><br><span class=\"line\">source /etc/profile</span><br><span class=\"line\">bash server.sh restart</span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=11bbfacc-1144-93c2-24cd-4ab38c6c2450","cover_type":"img","excerpt":"","more":"<h1 id=\"jenkins\"><a href=\"#jenkins\" class=\"headerlink\" title=\"jenkins\"></a>jenkins</h1><p>docker-compose.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version :</span> <span class=\"string\">&#x27;3&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">jenkins:</span></span><br><span class=\"line\">    <span class=\"attr\">user:</span> <span class=\"string\">root</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">jenkins/jenkins</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">jenkins</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">7001</span><span class=\"string\">:8080</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/opt/jenkins/home/:/var/jenkins_home/</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/var/run/docker.sock:/var/run/docker.sock</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/usr/bin/docker:/usr/bin/docker</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/etc/docker/daemon.json:/etc/docker/daemon.json</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/opt/jdk1.8:/usr/local/java/jdk1.8.0_161</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/opt/maven3:/usr/local/maven/maven3</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/opt/node:/usr/local/node</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/opt/jenkins/workspace:/usr/local/workspace</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>部署后端项目</p>\n<p><strong>源码管理</strong></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084012247.png\" alt=\"image-20240511084012247\"></p>\n<p><strong>触发器</strong></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084032231.png\" alt=\"image-20240511084032231\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084240453.png\" alt=\"image-20240511084240453\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084249597.png\" alt=\"image-20240511084249597\"></p>\n<p><strong>Build</strong></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084044273.png\" alt=\"image-20240511084044273\"></p>\n<p><strong>构建后操作</strong></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084058484.png\" alt=\"image-20240511084058484\"></p>\n<p><img src=\"https://olinl-note.oss-cn-shanghai.aliyuncs.com/images/image-20240511084103606.png\" alt=\"image-20240511084103606\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Source files：huanfa-car-biz-service/huanfa-car-biz-service-business/target/*.jar</span><br><span class=\"line\">Remove prefix：huanfa-car-biz-service/huanfa-car-biz-service-business/target/</span><br><span class=\"line\">Remote directory：/opt/huanfav2/huanfa/huanfa-car-biz-service-business</span><br><span class=\"line\">Exec command：</span><br><span class=\"line\"></span><br><span class=\"line\">cd /opt/huanfav2/huanfa/huanfa-car-biz-service-business</span><br><span class=\"line\">source /etc/profile</span><br><span class=\"line\">bash server.sh restart</span><br></pre></td></tr></table></figure>\n"},{"title":"Docker-compose实例 Homarr","abbrlink":"3af","date":"2025-02-24T13:33:08.000Z","_content":"\n> 使用 Homarr 简化服务器的管理 - 一个时尚、现代的仪表板，让您的所有应用程序和服务触手可及。使用 Homarr，您可以在一个方便的位置访问和控制所有内容。Homarr 与您添加的应用程序无缝集成，为您提供有价值的信息并让您完全控制。安装轻而易举，Homarr 支持多种部署方法。\n\n[Homarr documentation](https://homarr.dev/)\n\n```yaml\nversion: \"3.8\"\nservices:\n  homarr:\n    image: ghcr.io/ajnart/homarr:latest\n    container_name: homarr\n    restart: unless-stopped\n    environment:\n      - PUID=1000\n      - PGID=100\n      - TZ=Asia/Shanghai\n      - PASSWORD=123456\n    volumes:\n      - /volume1/docker/homarr/configs:/app/data/configs\n      - /volume1/docker/homarr/icons:/app/public/icons\n      - /volume1/docker/homarr/img:/app/public/img\n    ports:\n      - 80:7575\n      - 6001:7575\n    networks:\n      bridge0:\n        ipv4_address: 172.20.0.7\nnetworks:\n  bridge0:\n    external: true\n    name: bridge0\n```\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Homarr.md","raw":"---\ntitle: Docker-compose实例 Homarr\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - Homarr\nabbrlink: 3af\ndate: 2025-02-24 21:33:08\n---\n\n> 使用 Homarr 简化服务器的管理 - 一个时尚、现代的仪表板，让您的所有应用程序和服务触手可及。使用 Homarr，您可以在一个方便的位置访问和控制所有内容。Homarr 与您添加的应用程序无缝集成，为您提供有价值的信息并让您完全控制。安装轻而易举，Homarr 支持多种部署方法。\n\n[Homarr documentation](https://homarr.dev/)\n\n```yaml\nversion: \"3.8\"\nservices:\n  homarr:\n    image: ghcr.io/ajnart/homarr:latest\n    container_name: homarr\n    restart: unless-stopped\n    environment:\n      - PUID=1000\n      - PGID=100\n      - TZ=Asia/Shanghai\n      - PASSWORD=123456\n    volumes:\n      - /volume1/docker/homarr/configs:/app/data/configs\n      - /volume1/docker/homarr/icons:/app/public/icons\n      - /volume1/docker/homarr/img:/app/public/img\n    ports:\n      - 80:7575\n      - 6001:7575\n    networks:\n      bridge0:\n        ipv4_address: 172.20.0.7\nnetworks:\n  bridge0:\n    external: true\n    name: bridge0\n```\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/Homarr","published":1,"updated":"2025-06-02T07:26:26.199Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86xt00b4zcqb56jq6owq","content":"<blockquote>\n<p>使用 Homarr 简化服务器的管理 - 一个时尚、现代的仪表板，让您的所有应用程序和服务触手可及。使用 Homarr，您可以在一个方便的位置访问和控制所有内容。Homarr 与您添加的应用程序无缝集成，为您提供有价值的信息并让您完全控制。安装轻而易举，Homarr 支持多种部署方法。</p>\n</blockquote>\n<p><a href=\"https://homarr.dev/\">Homarr documentation</a></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.8&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">homarr:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">ghcr.io/ajnart/homarr:latest</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">homarr</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">PUID=1000</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">PGID=100</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">TZ=Asia/Shanghai</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">PASSWORD=123456</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/volume1/docker/homarr/configs:/app/data/configs</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/volume1/docker/homarr/icons:/app/public/icons</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/volume1/docker/homarr/img:/app/public/img</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">80</span><span class=\"string\">:7575</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">6001</span><span class=\"string\">:7575</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">        <span class=\"attr\">ipv4_address:</span> <span class=\"number\">172.20</span><span class=\"number\">.0</span><span class=\"number\">.7</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">bridge0</span></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=c0330e83-05a5-da43-6950-2ab02c139f93","cover_type":"img","excerpt":"","more":"<blockquote>\n<p>使用 Homarr 简化服务器的管理 - 一个时尚、现代的仪表板，让您的所有应用程序和服务触手可及。使用 Homarr，您可以在一个方便的位置访问和控制所有内容。Homarr 与您添加的应用程序无缝集成，为您提供有价值的信息并让您完全控制。安装轻而易举，Homarr 支持多种部署方法。</p>\n</blockquote>\n<p><a href=\"https://homarr.dev/\">Homarr documentation</a></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.8&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">homarr:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">ghcr.io/ajnart/homarr:latest</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">homarr</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">PUID=1000</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">PGID=100</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">TZ=Asia/Shanghai</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">PASSWORD=123456</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/volume1/docker/homarr/configs:/app/data/configs</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/volume1/docker/homarr/icons:/app/public/icons</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/volume1/docker/homarr/img:/app/public/img</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">80</span><span class=\"string\">:7575</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">6001</span><span class=\"string\">:7575</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">        <span class=\"attr\">ipv4_address:</span> <span class=\"number\">172.20</span><span class=\"number\">.0</span><span class=\"number\">.7</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">bridge0</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Docker-compose实例 Memos","abbrlink":"177d","date":"2025-02-24T13:33:08.000Z","_content":"\nMemos 是一项隐私优先的轻量级笔记服务。轻松捕捉并分享您的精彩想法。\n\n官网：[https://www.usememos.com](https://www.usememos.com)\n\n仓库地址：[https://github.com/usememos/memos](https://github.com/usememos/memos)\n\n\ndocker-compose\n\n```yaml\nservices:\n  memos:\n    image: 'docker.olinl.com.cn/neosmemo/memos:stable'\n    container_name: memos\n    hostname: memos\n    restart: always\n    ports:\n      - '5230:5230'\n    volumes:\n      - './data:/var/opt/memos'\n\n# 个人配置\n    networks:\n      - net:\nnetworks:\n  net:\n    external: true\n    name: lin-net\n```\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Memos.md","raw":"---\ntitle: Docker-compose实例 Memos\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - Memos\nabbrlink: 177d\ndate: 2025-02-24 21:33:08\n---\n\nMemos 是一项隐私优先的轻量级笔记服务。轻松捕捉并分享您的精彩想法。\n\n官网：[https://www.usememos.com](https://www.usememos.com)\n\n仓库地址：[https://github.com/usememos/memos](https://github.com/usememos/memos)\n\n\ndocker-compose\n\n```yaml\nservices:\n  memos:\n    image: 'docker.olinl.com.cn/neosmemo/memos:stable'\n    container_name: memos\n    hostname: memos\n    restart: always\n    ports:\n      - '5230:5230'\n    volumes:\n      - './data:/var/opt/memos'\n\n# 个人配置\n    networks:\n      - net:\nnetworks:\n  net:\n    external: true\n    name: lin-net\n```\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/Memos","published":1,"updated":"2025-06-02T07:26:38.724Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86xu00b8zcqbatnm1tjy","content":"<p>Memos 是一项隐私优先的轻量级笔记服务。轻松捕捉并分享您的精彩想法。</p>\n<p>官网：<a href=\"https://www.usememos.com/\">https://www.usememos.com</a></p>\n<p>仓库地址：<a href=\"https://github.com/usememos/memos\">https://github.com/usememos/memos</a></p>\n<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">memos:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;docker.olinl.com.cn/neosmemo/memos:stable&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">memos</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">memos</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5230:5230&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;./data:/var/opt/memos&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 个人配置</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">net:</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">net:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">lin-net</span></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=9113e832-cf81-6c41-2f88-cf2969959357","cover_type":"img","excerpt":"","more":"<p>Memos 是一项隐私优先的轻量级笔记服务。轻松捕捉并分享您的精彩想法。</p>\n<p>官网：<a href=\"https://www.usememos.com/\">https://www.usememos.com</a></p>\n<p>仓库地址：<a href=\"https://github.com/usememos/memos\">https://github.com/usememos/memos</a></p>\n<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">memos:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;docker.olinl.com.cn/neosmemo/memos:stable&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">memos</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">memos</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5230:5230&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;./data:/var/opt/memos&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 个人配置</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">net:</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">net:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">lin-net</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Docker-compose实例 Sun-Panel","abbrlink":"7d84","date":"2025-02-24T13:33:08.000Z","_content":"\n一个NAS、月服务器导航面板、简易docker管理器、Homepage、浏览器首页\n\n首页：[Sun-Panel](https://doc.sun-panel.top/zh_cn/)\n\ngithub：[sun-panel](https://github.com/hslr-s/sun-panel)\n\n\n\ndocker-compose\n\n```yaml\nservices:\n  panel:\n    image: 'docker.olinl.com.cn/hslr/sun-panel:latest'\n    hostname: panel\n    container_name: panel\n    ports:\n      - '3002:3002'\n    volumes:\n      - './conf:/app/conf'\n      - '/var/run/docker.sock:/var/run/docker.sock' # 挂载docker.sock\n      # - ./runtime:/app/runtime # 挂载日志目录\n      # - /mnt/sata1-1:/os # 硬盘挂载点（根据自己需求修改）\n    restart: always\n# 个人配置\n    networks:\n      - net\nnetworks:\n  net:\n    external: true\n    name: lin-net\n```\n\n‍\n\n‍\n\n## \n<br/>\n\n\n参考：[doc](https://doc.sun-panel.top/zh_cn/advanced/mysql_redis.html)\n\n```yaml\n# ======================\n# Basic configuration\n# ======================\n[base]\n# Web run port. Default:3002\nhttp_port=3002\n# Database driver [mysql/sqlite(Default)]\ndatabase_drive=mysql\n# Cache driver [redis/memory(Default)]\ncache_drive=redis\n# Queue driver [redis/memory(Default)]\nqueue_drive=redis\n# File cache path (Please start with the current path './')\n# Warning: The files that have been uploaded after the modification cannot be accessed\nsource_path=./uploads\n# File cache path.\nsource_temp_path=./runtime/temp\n\n# ======================\n# Mysql database driver\n# ======================\n[mysql]\nhost=127.0.0.1\nport=3306\nusername=root\npassword=root\ndb_name=sun_panel\nwait_timeout=100\n\n# ======================\n# sqlite database driver\n# ======================\n[sqlite]\nfile_path=./database/database.db\n\n# ======================\n# redis database driver\n# ======================\n[redis]\naddress=127.0.0.1:6379\npassword=\nprefix=sun_panel:\ndb=0\n```\n\n‍\n\n‍\n\n‍\n\n## 美化\n\n### 添加毛玻璃效果\n\n```yaml\n/* 分组毛玻璃 */\n.item-list{\n  backdrop-filter: blur(1px); /* 毛玻璃效果 */\n  -webkit-backdrop-filter: blur(1px); /* 对于 Safari 等 WebKit 浏览器 */\n  background: rgba(255, 255, 255, 0.3); /* 半透明背景色 */\n  border-radius: 15px;\n  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  padding: 10px;\n  color: white;\n  margin: auto;\n}\n```\n\n‍\n\n### **添加首页三张图**\n\n**js**\n\n```yaml\n\n/* 搜索下方三张图片 */\ndocument.addEventListener('DOMContentLoaded', () => {\n    // 创建一个 MutationObserver 实例，监听 DOM 的变化\n    const observer = new MutationObserver((mutationsList) => {\n        // 查找目标父容器\n        const parentDiv = document.querySelector('#item-card-box');\n\n        // 如果找到了目标父容器，则停止观察并执行后续逻辑\n        if (parentDiv) {\n            observer.disconnect(); // 停止观察\n\n            // 图片链接数组和对应的点击链接数组\n            const imageLinks = [\n                { src: \"https://t.alcy.cc/moez?t=1\", href: \"#\" },\n                { src: \"https://t.alcy.cc/moez?t=2\", href: \"#\" },\n                { src: \"https://t.alcy.cc/moez?t=3\", href: \"#\" }\n            ];\n\n            // 创建一个新的 div 容器\n            const newDiv = document.createElement('div');\n            newDiv.classList.add('image-container'); // 添加样式类\n\n            // 遍历图片链接数组，动态创建图片和链接元素\n            imageLinks.forEach((item, index) => {\n                const a = document.createElement('a'); // 创建 a 标签\n                a.href = item.href; // 设置链接地址\n                a.classList.add('image-link'); // 添加链接样式类\n\n                const img = document.createElement('img'); // 创建 img 标签\n                img.src = item.src; // 设置图片地址\n                img.alt = `Image ${index + 1}`; // 设置图片描述\n                img.classList.add('image-item'); // 添加图片样式类\n\n                // 如果是第三个图片，添加点击事件\n               // if (index === 2) {\n               //     img.addEventListener('click', (event) => {\n               //         event.preventDefault(); // 阻止默认跳转行为\n               //         alert(\"点上瘾了是吧，这个啥也没有！\"); // 自定义点击逻辑\n               //     });\n               // }\n\n                // 将 img 添加到 a 标签内\n                a.appendChild(img);\n                // 将 a 标签添加到新 div 中\n                newDiv.appendChild(a);\n            });\n\n            // 将新 div 插入到目标父容器中\n            if (parentDiv.firstChild) {\n                parentDiv.insertBefore(newDiv, parentDiv.firstChild); // 插入到第一个子元素前\n            } else {\n                parentDiv.appendChild(newDiv); // 如果没有子元素，直接追加\n            }\n        }\n    });\n\n    // 开始观察整个文档的变化\n    observer.observe(document.body, { childList: true, subtree: true });\n});\n```\n\n**css**\n\n```yaml\n/* 搜索下方三张图片 */\n/* 容器样式 */\n.image-container {\n    display: flex;\n    justify-content: center; /* 水平居中 */\n    align-items: center; /* 垂直居中 */\n    gap: 50px; /* 图片之间的间距 */\n    margin: 20px 0; /* 上下外边距 */\n    flex-wrap: wrap; /* 当空间不足时换行 */\n}\n\n/* 图片链接样式 */\n.image-link {\n    text-decoration: none; /* 去掉下划线 */\n    border-radius: 28px; /* 圆角 */\n    overflow: hidden; /* 防止图片溢出 */\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* 阴影效果 */\n    transition: transform 0.3s ease; /* 平滑过渡 */\n}\n\n/* 图片样式 */\n.image-item {\n    width: 350px; /* 固定宽度 */\n    height: 200px; /* 自适应高度 */\n    border-radius: 28px; /* 圆角 */\n    transition: transform 0.3s ease; /* 平滑过渡 */\n}\n\n/* 鼠标悬停时的效果 */\n.image-link:hover .image-item {\n    transform: scale(1.1) rotate(5deg); /* 放大并旋转 */\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3); /* 加深阴影 */\n}\n\n/* Media Query for mobile devices */\n@media (max-width: 768px) {\n    /* 在小屏幕上，使图片竖排 */\n    .image-container {\n        flex-direction: column; /* 竖向排列 */\n        align-items: center; /* 居中对齐 */\n        gap: 20px; /* 减少间距 */\n    }\n\n    /* 调整图片大小以适应小屏幕 */\n    .image-item {\n        width: 100%; /* 宽度为100% */\n        max-width: 400px; /* 设置最大宽度 */\n    }\n}\n```\n\n### 添加**鼠标悬停动画**\n\n```yaml\n/*鼠标悬停动画 */\n\n/* 当鼠标悬停在图标信息框上时触发动画 */\n/* 详细图标摇晃动画 */\n.icon-info-box .rounded-2xl:hover {\n  background: rgba(42, 42, 42, 0.7) !important;/* 背景颜色变成深灰色 */\n  -webkit-animation: info-shake-bounce .5s alternate !important;\n  -moz-animation: info-shake-bounce .5s alternate !important;\n  -o-animation: info-shake-bounce .5s alternate !important;\n  animation: info-shake-bounce .5s alternate !important;\n}\n\n \n\n/* 小图标摇晃动画 */\n.icon-small-box .rounded-2xl:hover {\n  background: rgba(42, 42, 42, 0.7) !important;/* 背景颜色变成深灰色 */\n  -webkit-animation: small-shake-bounce .5s alternate !important;\n  -moz-animation: small-shake-bounce .5s alternate !important;\n  -o-animation: small-shake-bounce .5s alternate !important;\n  animation: small-shake-bounce .5s alternate !important;\n}\n\n \n\n/* 定义摇详细图标晃弹跳动画的关键帧 */\n@keyframes info-shake-bounce {\n\n  0%,\n  100% {\n    transform: rotate(0);\n  }\n\n  25% {\n    transform: rotate(10deg);\n  }\n\n  50% {\n    transform: rotate(-10deg);\n  }\n\n  75% {\n    transform: rotate(2.5deg);\n  }\n\n  85% {\n    transform: rotate(-2.5deg);\n  }\n}\n\n \n\n/* 定义摇小图标晃弹跳动画的关键帧 */\n@keyframes small-shake-bounce {\n\n  0%,\n  100% {\n    transform: rotate(0);\n  }\n\n  25% {\n    transform: rotate(15deg);\n  }\n\n  50% {\n    transform: rotate(-15deg);\n  }\n\n  75% {\n    transform: rotate(5deg);\n  }\n\n  85% {\n    transform: rotate(5deg);\n  }\n}\n```\n\n‍\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Sun-Panel.md","raw":"---\ntitle: Docker-compose实例 Sun-Panel\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - Sun-Panel\nabbrlink: 7d84\ndate: 2025-02-24 21:33:08\n---\n\n一个NAS、月服务器导航面板、简易docker管理器、Homepage、浏览器首页\n\n首页：[Sun-Panel](https://doc.sun-panel.top/zh_cn/)\n\ngithub：[sun-panel](https://github.com/hslr-s/sun-panel)\n\n\n\ndocker-compose\n\n```yaml\nservices:\n  panel:\n    image: 'docker.olinl.com.cn/hslr/sun-panel:latest'\n    hostname: panel\n    container_name: panel\n    ports:\n      - '3002:3002'\n    volumes:\n      - './conf:/app/conf'\n      - '/var/run/docker.sock:/var/run/docker.sock' # 挂载docker.sock\n      # - ./runtime:/app/runtime # 挂载日志目录\n      # - /mnt/sata1-1:/os # 硬盘挂载点（根据自己需求修改）\n    restart: always\n# 个人配置\n    networks:\n      - net\nnetworks:\n  net:\n    external: true\n    name: lin-net\n```\n\n‍\n\n‍\n\n## \n<br/>\n\n\n参考：[doc](https://doc.sun-panel.top/zh_cn/advanced/mysql_redis.html)\n\n```yaml\n# ======================\n# Basic configuration\n# ======================\n[base]\n# Web run port. Default:3002\nhttp_port=3002\n# Database driver [mysql/sqlite(Default)]\ndatabase_drive=mysql\n# Cache driver [redis/memory(Default)]\ncache_drive=redis\n# Queue driver [redis/memory(Default)]\nqueue_drive=redis\n# File cache path (Please start with the current path './')\n# Warning: The files that have been uploaded after the modification cannot be accessed\nsource_path=./uploads\n# File cache path.\nsource_temp_path=./runtime/temp\n\n# ======================\n# Mysql database driver\n# ======================\n[mysql]\nhost=127.0.0.1\nport=3306\nusername=root\npassword=root\ndb_name=sun_panel\nwait_timeout=100\n\n# ======================\n# sqlite database driver\n# ======================\n[sqlite]\nfile_path=./database/database.db\n\n# ======================\n# redis database driver\n# ======================\n[redis]\naddress=127.0.0.1:6379\npassword=\nprefix=sun_panel:\ndb=0\n```\n\n‍\n\n‍\n\n‍\n\n## 美化\n\n### 添加毛玻璃效果\n\n```yaml\n/* 分组毛玻璃 */\n.item-list{\n  backdrop-filter: blur(1px); /* 毛玻璃效果 */\n  -webkit-backdrop-filter: blur(1px); /* 对于 Safari 等 WebKit 浏览器 */\n  background: rgba(255, 255, 255, 0.3); /* 半透明背景色 */\n  border-radius: 15px;\n  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  padding: 10px;\n  color: white;\n  margin: auto;\n}\n```\n\n‍\n\n### **添加首页三张图**\n\n**js**\n\n```yaml\n\n/* 搜索下方三张图片 */\ndocument.addEventListener('DOMContentLoaded', () => {\n    // 创建一个 MutationObserver 实例，监听 DOM 的变化\n    const observer = new MutationObserver((mutationsList) => {\n        // 查找目标父容器\n        const parentDiv = document.querySelector('#item-card-box');\n\n        // 如果找到了目标父容器，则停止观察并执行后续逻辑\n        if (parentDiv) {\n            observer.disconnect(); // 停止观察\n\n            // 图片链接数组和对应的点击链接数组\n            const imageLinks = [\n                { src: \"https://t.alcy.cc/moez?t=1\", href: \"#\" },\n                { src: \"https://t.alcy.cc/moez?t=2\", href: \"#\" },\n                { src: \"https://t.alcy.cc/moez?t=3\", href: \"#\" }\n            ];\n\n            // 创建一个新的 div 容器\n            const newDiv = document.createElement('div');\n            newDiv.classList.add('image-container'); // 添加样式类\n\n            // 遍历图片链接数组，动态创建图片和链接元素\n            imageLinks.forEach((item, index) => {\n                const a = document.createElement('a'); // 创建 a 标签\n                a.href = item.href; // 设置链接地址\n                a.classList.add('image-link'); // 添加链接样式类\n\n                const img = document.createElement('img'); // 创建 img 标签\n                img.src = item.src; // 设置图片地址\n                img.alt = `Image ${index + 1}`; // 设置图片描述\n                img.classList.add('image-item'); // 添加图片样式类\n\n                // 如果是第三个图片，添加点击事件\n               // if (index === 2) {\n               //     img.addEventListener('click', (event) => {\n               //         event.preventDefault(); // 阻止默认跳转行为\n               //         alert(\"点上瘾了是吧，这个啥也没有！\"); // 自定义点击逻辑\n               //     });\n               // }\n\n                // 将 img 添加到 a 标签内\n                a.appendChild(img);\n                // 将 a 标签添加到新 div 中\n                newDiv.appendChild(a);\n            });\n\n            // 将新 div 插入到目标父容器中\n            if (parentDiv.firstChild) {\n                parentDiv.insertBefore(newDiv, parentDiv.firstChild); // 插入到第一个子元素前\n            } else {\n                parentDiv.appendChild(newDiv); // 如果没有子元素，直接追加\n            }\n        }\n    });\n\n    // 开始观察整个文档的变化\n    observer.observe(document.body, { childList: true, subtree: true });\n});\n```\n\n**css**\n\n```yaml\n/* 搜索下方三张图片 */\n/* 容器样式 */\n.image-container {\n    display: flex;\n    justify-content: center; /* 水平居中 */\n    align-items: center; /* 垂直居中 */\n    gap: 50px; /* 图片之间的间距 */\n    margin: 20px 0; /* 上下外边距 */\n    flex-wrap: wrap; /* 当空间不足时换行 */\n}\n\n/* 图片链接样式 */\n.image-link {\n    text-decoration: none; /* 去掉下划线 */\n    border-radius: 28px; /* 圆角 */\n    overflow: hidden; /* 防止图片溢出 */\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* 阴影效果 */\n    transition: transform 0.3s ease; /* 平滑过渡 */\n}\n\n/* 图片样式 */\n.image-item {\n    width: 350px; /* 固定宽度 */\n    height: 200px; /* 自适应高度 */\n    border-radius: 28px; /* 圆角 */\n    transition: transform 0.3s ease; /* 平滑过渡 */\n}\n\n/* 鼠标悬停时的效果 */\n.image-link:hover .image-item {\n    transform: scale(1.1) rotate(5deg); /* 放大并旋转 */\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3); /* 加深阴影 */\n}\n\n/* Media Query for mobile devices */\n@media (max-width: 768px) {\n    /* 在小屏幕上，使图片竖排 */\n    .image-container {\n        flex-direction: column; /* 竖向排列 */\n        align-items: center; /* 居中对齐 */\n        gap: 20px; /* 减少间距 */\n    }\n\n    /* 调整图片大小以适应小屏幕 */\n    .image-item {\n        width: 100%; /* 宽度为100% */\n        max-width: 400px; /* 设置最大宽度 */\n    }\n}\n```\n\n### 添加**鼠标悬停动画**\n\n```yaml\n/*鼠标悬停动画 */\n\n/* 当鼠标悬停在图标信息框上时触发动画 */\n/* 详细图标摇晃动画 */\n.icon-info-box .rounded-2xl:hover {\n  background: rgba(42, 42, 42, 0.7) !important;/* 背景颜色变成深灰色 */\n  -webkit-animation: info-shake-bounce .5s alternate !important;\n  -moz-animation: info-shake-bounce .5s alternate !important;\n  -o-animation: info-shake-bounce .5s alternate !important;\n  animation: info-shake-bounce .5s alternate !important;\n}\n\n \n\n/* 小图标摇晃动画 */\n.icon-small-box .rounded-2xl:hover {\n  background: rgba(42, 42, 42, 0.7) !important;/* 背景颜色变成深灰色 */\n  -webkit-animation: small-shake-bounce .5s alternate !important;\n  -moz-animation: small-shake-bounce .5s alternate !important;\n  -o-animation: small-shake-bounce .5s alternate !important;\n  animation: small-shake-bounce .5s alternate !important;\n}\n\n \n\n/* 定义摇详细图标晃弹跳动画的关键帧 */\n@keyframes info-shake-bounce {\n\n  0%,\n  100% {\n    transform: rotate(0);\n  }\n\n  25% {\n    transform: rotate(10deg);\n  }\n\n  50% {\n    transform: rotate(-10deg);\n  }\n\n  75% {\n    transform: rotate(2.5deg);\n  }\n\n  85% {\n    transform: rotate(-2.5deg);\n  }\n}\n\n \n\n/* 定义摇小图标晃弹跳动画的关键帧 */\n@keyframes small-shake-bounce {\n\n  0%,\n  100% {\n    transform: rotate(0);\n  }\n\n  25% {\n    transform: rotate(15deg);\n  }\n\n  50% {\n    transform: rotate(-15deg);\n  }\n\n  75% {\n    transform: rotate(5deg);\n  }\n\n  85% {\n    transform: rotate(5deg);\n  }\n}\n```\n\n‍\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/Sun-Panel","published":1,"updated":"2025-06-02T07:26:48.982Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86xu00bbzcqb10rzd68p","content":"<p>一个NAS、月服务器导航面板、简易docker管理器、Homepage、浏览器首页</p>\n<p>首页：<a href=\"https://doc.sun-panel.top/zh_cn/\">Sun-Panel</a></p>\n<p>github：<a href=\"https://github.com/hslr-s/sun-panel\">sun-panel</a></p>\n<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">panel:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;docker.olinl.com.cn/hslr/sun-panel:latest&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">panel</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">panel</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;3002:3002&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;./conf:/app/conf&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/var/run/docker.sock:/var/run/docker.sock&#x27;</span> <span class=\"comment\"># 挂载docker.sock</span></span><br><span class=\"line\">      <span class=\"comment\"># - ./runtime:/app/runtime # 挂载日志目录</span></span><br><span class=\"line\">      <span class=\"comment\"># - /mnt/sata1-1:/os # 硬盘挂载点（根据自己需求修改）</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"><span class=\"comment\"># 个人配置</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">net</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">net:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">lin-net</span></span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n<p>‍</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><br/>\n\n\n<p>参考：<a href=\"https://doc.sun-panel.top/zh_cn/advanced/mysql_redis.html\">doc</a></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ======================</span></span><br><span class=\"line\"><span class=\"comment\"># Basic configuration</span></span><br><span class=\"line\"><span class=\"comment\"># ======================</span></span><br><span class=\"line\">[<span class=\"string\">base</span>]</span><br><span class=\"line\"><span class=\"comment\"># Web run port. Default:3002</span></span><br><span class=\"line\"><span class=\"string\">http_port=3002</span></span><br><span class=\"line\"><span class=\"comment\"># Database driver [mysql/sqlite(Default)]</span></span><br><span class=\"line\"><span class=\"string\">database_drive=mysql</span></span><br><span class=\"line\"><span class=\"comment\"># Cache driver [redis/memory(Default)]</span></span><br><span class=\"line\"><span class=\"string\">cache_drive=redis</span></span><br><span class=\"line\"><span class=\"comment\"># Queue driver [redis/memory(Default)]</span></span><br><span class=\"line\"><span class=\"string\">queue_drive=redis</span></span><br><span class=\"line\"><span class=\"comment\"># File cache path (Please start with the current path &#x27;./&#x27;)</span></span><br><span class=\"line\"><span class=\"comment\"># Warning: The files that have been uploaded after the modification cannot be accessed</span></span><br><span class=\"line\"><span class=\"string\">source_path=./uploads</span></span><br><span class=\"line\"><span class=\"comment\"># File cache path.</span></span><br><span class=\"line\"><span class=\"string\">source_temp_path=./runtime/temp</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ======================</span></span><br><span class=\"line\"><span class=\"comment\"># Mysql database driver</span></span><br><span class=\"line\"><span class=\"comment\"># ======================</span></span><br><span class=\"line\">[<span class=\"string\">mysql</span>]</span><br><span class=\"line\"><span class=\"string\">host=127.0.0.1</span></span><br><span class=\"line\"><span class=\"string\">port=3306</span></span><br><span class=\"line\"><span class=\"string\">username=root</span></span><br><span class=\"line\"><span class=\"string\">password=root</span></span><br><span class=\"line\"><span class=\"string\">db_name=sun_panel</span></span><br><span class=\"line\"><span class=\"string\">wait_timeout=100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ======================</span></span><br><span class=\"line\"><span class=\"comment\"># sqlite database driver</span></span><br><span class=\"line\"><span class=\"comment\"># ======================</span></span><br><span class=\"line\">[<span class=\"string\">sqlite</span>]</span><br><span class=\"line\"><span class=\"string\">file_path=./database/database.db</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ======================</span></span><br><span class=\"line\"><span class=\"comment\"># redis database driver</span></span><br><span class=\"line\"><span class=\"comment\"># ======================</span></span><br><span class=\"line\">[<span class=\"string\">redis</span>]</span><br><span class=\"line\"><span class=\"string\">address=127.0.0.1:6379</span></span><br><span class=\"line\"><span class=\"string\">password=</span></span><br><span class=\"line\"><span class=\"string\">prefix=sun_panel:</span></span><br><span class=\"line\"><span class=\"string\">db=0</span></span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n<p>‍</p>\n<p>‍</p>\n<h2 id=\"美化\"><a href=\"#美化\" class=\"headerlink\" title=\"美化\"></a>美化</h2><h3 id=\"添加毛玻璃效果\"><a href=\"#添加毛玻璃效果\" class=\"headerlink\" title=\"添加毛玻璃效果\"></a>添加毛玻璃效果</h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">分组毛玻璃</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">.item-list&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">backdrop-filter:</span> <span class=\"string\">blur(1px);</span> <span class=\"string\">/*</span> <span class=\"string\">毛玻璃效果</span> <span class=\"string\">*/</span></span><br><span class=\"line\">  <span class=\"string\">-webkit-backdrop-filter:</span> <span class=\"string\">blur(1px);</span> <span class=\"string\">/*</span> <span class=\"string\">对于</span> <span class=\"string\">Safari</span> <span class=\"string\">等</span> <span class=\"string\">WebKit</span> <span class=\"string\">浏览器</span> <span class=\"string\">*/</span></span><br><span class=\"line\">  <span class=\"attr\">background:</span> <span class=\"string\">rgba(255,</span> <span class=\"number\">255</span><span class=\"string\">,</span> <span class=\"number\">255</span><span class=\"string\">,</span> <span class=\"number\">0.3</span><span class=\"string\">);</span> <span class=\"string\">/*</span> <span class=\"string\">半透明背景色</span> <span class=\"string\">*/</span></span><br><span class=\"line\">  <span class=\"attr\">border-radius:</span> <span class=\"string\">15px;</span></span><br><span class=\"line\">  <span class=\"attr\">box-shadow:</span> <span class=\"number\">0</span> <span class=\"string\">4px</span> <span class=\"string\">30px</span> <span class=\"string\">rgba(0,</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"number\">0.1</span><span class=\"string\">);</span></span><br><span class=\"line\">  <span class=\"attr\">border:</span> <span class=\"string\">1px</span> <span class=\"string\">solid</span> <span class=\"string\">rgba(255,</span> <span class=\"number\">255</span><span class=\"string\">,</span> <span class=\"number\">255</span><span class=\"string\">,</span> <span class=\"number\">0.2</span><span class=\"string\">);</span></span><br><span class=\"line\">  <span class=\"attr\">padding:</span> <span class=\"string\">10px;</span></span><br><span class=\"line\">  <span class=\"attr\">color:</span> <span class=\"string\">white;</span></span><br><span class=\"line\">  <span class=\"attr\">margin:</span> <span class=\"string\">auto;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n<h3 id=\"添加首页三张图\"><a href=\"#添加首页三张图\" class=\"headerlink\" title=\"添加首页三张图\"></a><strong>添加首页三张图</strong></h3><p><strong>js</strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">搜索下方三张图片</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">document.addEventListener(&#x27;DOMContentLoaded&#x27;,</span> <span class=\"string\">()</span> <span class=\"string\">=&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"string\">//</span> <span class=\"string\">创建一个</span> <span class=\"string\">MutationObserver</span> <span class=\"string\">实例，监听</span> <span class=\"string\">DOM</span> <span class=\"string\">的变化</span></span><br><span class=\"line\">    <span class=\"string\">const</span> <span class=\"string\">observer</span> <span class=\"string\">=</span> <span class=\"string\">new</span> <span class=\"string\">MutationObserver((mutationsList)</span> <span class=\"string\">=&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"string\">//</span> <span class=\"string\">查找目标父容器</span></span><br><span class=\"line\">        <span class=\"string\">const</span> <span class=\"string\">parentDiv</span> <span class=\"string\">=</span> <span class=\"string\">document.querySelector(&#x27;#item-card-box&#x27;);</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">//</span> <span class=\"string\">如果找到了目标父容器，则停止观察并执行后续逻辑</span></span><br><span class=\"line\">        <span class=\"string\">if</span> <span class=\"string\">(parentDiv)</span> &#123;</span><br><span class=\"line\">            <span class=\"string\">observer.disconnect();</span> <span class=\"string\">//</span> <span class=\"string\">停止观察</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"string\">//</span> <span class=\"string\">图片链接数组和对应的点击链接数组</span></span><br><span class=\"line\">            <span class=\"string\">const</span> <span class=\"string\">imageLinks</span> <span class=\"string\">=</span> [</span><br><span class=\"line\">                &#123; <span class=\"attr\">src:</span> <span class=\"string\">&quot;https://t.alcy.cc/moez?t=1&quot;</span>, <span class=\"attr\">href:</span> <span class=\"string\">&quot;#&quot;</span> &#125;,</span><br><span class=\"line\">                &#123; <span class=\"attr\">src:</span> <span class=\"string\">&quot;https://t.alcy.cc/moez?t=2&quot;</span>, <span class=\"attr\">href:</span> <span class=\"string\">&quot;#&quot;</span> &#125;,</span><br><span class=\"line\">                &#123; <span class=\"attr\">src:</span> <span class=\"string\">&quot;https://t.alcy.cc/moez?t=3&quot;</span>, <span class=\"attr\">href:</span> <span class=\"string\">&quot;#&quot;</span> &#125;</span><br><span class=\"line\">            ]<span class=\"string\">;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"string\">//</span> <span class=\"string\">创建一个新的</span> <span class=\"string\">div</span> <span class=\"string\">容器</span></span><br><span class=\"line\">            <span class=\"string\">const</span> <span class=\"string\">newDiv</span> <span class=\"string\">=</span> <span class=\"string\">document.createElement(&#x27;div&#x27;);</span></span><br><span class=\"line\">            <span class=\"string\">newDiv.classList.add(&#x27;image-container&#x27;);</span> <span class=\"string\">//</span> <span class=\"string\">添加样式类</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"string\">//</span> <span class=\"string\">遍历图片链接数组，动态创建图片和链接元素</span></span><br><span class=\"line\">            <span class=\"string\">imageLinks.forEach((item</span>, <span class=\"string\">index)</span> <span class=\"string\">=&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"string\">const</span> <span class=\"string\">a</span> <span class=\"string\">=</span> <span class=\"string\">document.createElement(&#x27;a&#x27;);</span> <span class=\"string\">//</span> <span class=\"string\">创建</span> <span class=\"string\">a</span> <span class=\"string\">标签</span></span><br><span class=\"line\">                <span class=\"string\">a.href</span> <span class=\"string\">=</span> <span class=\"string\">item.href;</span> <span class=\"string\">//</span> <span class=\"string\">设置链接地址</span></span><br><span class=\"line\">                <span class=\"string\">a.classList.add(&#x27;image-link&#x27;);</span> <span class=\"string\">//</span> <span class=\"string\">添加链接样式类</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"string\">const</span> <span class=\"string\">img</span> <span class=\"string\">=</span> <span class=\"string\">document.createElement(&#x27;img&#x27;);</span> <span class=\"string\">//</span> <span class=\"string\">创建</span> <span class=\"string\">img</span> <span class=\"string\">标签</span></span><br><span class=\"line\">                <span class=\"string\">img.src</span> <span class=\"string\">=</span> <span class=\"string\">item.src;</span> <span class=\"string\">//</span> <span class=\"string\">设置图片地址</span></span><br><span class=\"line\">                <span class=\"string\">img.alt</span> <span class=\"string\">=</span> <span class=\"string\">`Image</span> <span class=\"string\">$</span>&#123;<span class=\"string\">index</span> <span class=\"string\">+</span> <span class=\"number\">1</span>&#125;<span class=\"string\">`;</span> <span class=\"string\">//</span> <span class=\"string\">设置图片描述</span></span><br><span class=\"line\">                <span class=\"string\">img.classList.add(&#x27;image-item&#x27;);</span> <span class=\"string\">//</span> <span class=\"string\">添加图片样式类</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"string\">//</span> <span class=\"string\">如果是第三个图片，添加点击事件</span></span><br><span class=\"line\">               <span class=\"string\">//</span> <span class=\"string\">if</span> <span class=\"string\">(index</span> <span class=\"string\">===</span> <span class=\"number\">2</span><span class=\"string\">)</span> &#123;</span><br><span class=\"line\">               <span class=\"string\">//</span>     <span class=\"string\">img.addEventListener(&#x27;click&#x27;</span>, <span class=\"string\">(event)</span> <span class=\"string\">=&gt;</span> &#123;</span><br><span class=\"line\">               <span class=\"string\">//</span>         <span class=\"string\">event.preventDefault();</span> <span class=\"string\">//</span> <span class=\"string\">阻止默认跳转行为</span></span><br><span class=\"line\">               <span class=\"string\">//</span>         <span class=\"string\">alert(&quot;点上瘾了是吧，这个啥也没有！&quot;);</span> <span class=\"string\">//</span> <span class=\"string\">自定义点击逻辑</span></span><br><span class=\"line\">               <span class=\"string\">//</span>     &#125;<span class=\"string\">);</span></span><br><span class=\"line\">               <span class=\"string\">//</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"string\">//</span> <span class=\"string\">将</span> <span class=\"string\">img</span> <span class=\"string\">添加到</span> <span class=\"string\">a</span> <span class=\"string\">标签内</span></span><br><span class=\"line\">                <span class=\"string\">a.appendChild(img);</span></span><br><span class=\"line\">                <span class=\"string\">//</span> <span class=\"string\">将</span> <span class=\"string\">a</span> <span class=\"string\">标签添加到新</span> <span class=\"string\">div</span> <span class=\"string\">中</span></span><br><span class=\"line\">                <span class=\"string\">newDiv.appendChild(a);</span></span><br><span class=\"line\">            &#125;<span class=\"string\">);</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"string\">//</span> <span class=\"string\">将新</span> <span class=\"string\">div</span> <span class=\"string\">插入到目标父容器中</span></span><br><span class=\"line\">            <span class=\"string\">if</span> <span class=\"string\">(parentDiv.firstChild)</span> &#123;</span><br><span class=\"line\">                <span class=\"string\">parentDiv.insertBefore(newDiv</span>, <span class=\"string\">parentDiv.firstChild);</span> <span class=\"string\">//</span> <span class=\"string\">插入到第一个子元素前</span></span><br><span class=\"line\">            &#125; <span class=\"string\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"string\">parentDiv.appendChild(newDiv);</span> <span class=\"string\">//</span> <span class=\"string\">如果没有子元素，直接追加</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;<span class=\"string\">);</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">//</span> <span class=\"string\">开始观察整个文档的变化</span></span><br><span class=\"line\">    <span class=\"string\">observer.observe(document.body</span>, &#123; <span class=\"attr\">childList:</span> <span class=\"literal\">true</span>, <span class=\"attr\">subtree:</span> <span class=\"literal\">true</span> &#125;<span class=\"string\">);</span></span><br><span class=\"line\">&#125;<span class=\"string\">);</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>css</strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">搜索下方三张图片</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">容器样式</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">.image-container</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">display:</span> <span class=\"string\">flex;</span></span><br><span class=\"line\">    <span class=\"attr\">justify-content:</span> <span class=\"string\">center;</span> <span class=\"string\">/*</span> <span class=\"string\">水平居中</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">align-items:</span> <span class=\"string\">center;</span> <span class=\"string\">/*</span> <span class=\"string\">垂直居中</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">gap:</span> <span class=\"string\">50px;</span> <span class=\"string\">/*</span> <span class=\"string\">图片之间的间距</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">margin:</span> <span class=\"string\">20px</span> <span class=\"number\">0</span><span class=\"string\">;</span> <span class=\"string\">/*</span> <span class=\"string\">上下外边距</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">flex-wrap:</span> <span class=\"string\">wrap;</span> <span class=\"string\">/*</span> <span class=\"string\">当空间不足时换行</span> <span class=\"string\">*/</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">图片链接样式</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">.image-link</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">text-decoration:</span> <span class=\"string\">none;</span> <span class=\"string\">/*</span> <span class=\"string\">去掉下划线</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">border-radius:</span> <span class=\"string\">28px;</span> <span class=\"string\">/*</span> <span class=\"string\">圆角</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">overflow:</span> <span class=\"string\">hidden;</span> <span class=\"string\">/*</span> <span class=\"string\">防止图片溢出</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">box-shadow:</span> <span class=\"number\">0</span> <span class=\"string\">4px</span> <span class=\"string\">8px</span> <span class=\"string\">rgba(0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.2</span><span class=\"string\">);</span> <span class=\"string\">/*</span> <span class=\"string\">阴影效果</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">transition:</span> <span class=\"string\">transform</span> <span class=\"number\">0.</span><span class=\"string\">3s</span> <span class=\"string\">ease;</span> <span class=\"string\">/*</span> <span class=\"string\">平滑过渡</span> <span class=\"string\">*/</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">图片样式</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">.image-item</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">width:</span> <span class=\"string\">350px;</span> <span class=\"string\">/*</span> <span class=\"string\">固定宽度</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">height:</span> <span class=\"string\">200px;</span> <span class=\"string\">/*</span> <span class=\"string\">自适应高度</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">border-radius:</span> <span class=\"string\">28px;</span> <span class=\"string\">/*</span> <span class=\"string\">圆角</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">transition:</span> <span class=\"string\">transform</span> <span class=\"number\">0.</span><span class=\"string\">3s</span> <span class=\"string\">ease;</span> <span class=\"string\">/*</span> <span class=\"string\">平滑过渡</span> <span class=\"string\">*/</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">鼠标悬停时的效果</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">.image-link:hover</span> <span class=\"string\">.image-item</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">scale(1.1)</span> <span class=\"string\">rotate(5deg);</span> <span class=\"string\">/*</span> <span class=\"string\">放大并旋转</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">box-shadow:</span> <span class=\"number\">0</span> <span class=\"string\">8px</span> <span class=\"string\">16px</span> <span class=\"string\">rgba(0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.3</span><span class=\"string\">);</span> <span class=\"string\">/*</span> <span class=\"string\">加深阴影</span> <span class=\"string\">*/</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">Media</span> <span class=\"string\">Query</span> <span class=\"string\">for</span> <span class=\"string\">mobile</span> <span class=\"string\">devices</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"attr\">@media (max-width:</span> <span class=\"string\">768px)</span> &#123;</span><br><span class=\"line\">    <span class=\"string\">/*</span> <span class=\"string\">在小屏幕上，使图片竖排</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"string\">.image-container</span> &#123;</span><br><span class=\"line\">        <span class=\"attr\">flex-direction:</span> <span class=\"string\">column;</span> <span class=\"string\">/*</span> <span class=\"string\">竖向排列</span> <span class=\"string\">*/</span></span><br><span class=\"line\">        <span class=\"attr\">align-items:</span> <span class=\"string\">center;</span> <span class=\"string\">/*</span> <span class=\"string\">居中对齐</span> <span class=\"string\">*/</span></span><br><span class=\"line\">        <span class=\"attr\">gap:</span> <span class=\"string\">20px;</span> <span class=\"string\">/*</span> <span class=\"string\">减少间距</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">/*</span> <span class=\"string\">调整图片大小以适应小屏幕</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"string\">.image-item</span> &#123;</span><br><span class=\"line\">        <span class=\"attr\">width:</span> <span class=\"number\">100</span><span class=\"string\">%;</span> <span class=\"string\">/*</span> <span class=\"string\">宽度为100%</span> <span class=\"string\">*/</span></span><br><span class=\"line\">        <span class=\"attr\">max-width:</span> <span class=\"string\">400px;</span> <span class=\"string\">/*</span> <span class=\"string\">设置最大宽度</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加鼠标悬停动画\"><a href=\"#添加鼠标悬停动画\" class=\"headerlink\" title=\"添加鼠标悬停动画\"></a>添加<strong>鼠标悬停动画</strong></h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">/*鼠标悬停动画</span> <span class=\"string\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">当鼠标悬停在图标信息框上时触发动画</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">详细图标摇晃动画</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">.icon-info-box</span> <span class=\"string\">.rounded-2xl:hover</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">background:</span> <span class=\"string\">rgba(42</span>, <span class=\"number\">42</span>, <span class=\"number\">42</span>, <span class=\"number\">0.7</span><span class=\"string\">)</span> <span class=\"type\">!important;/*</span> <span class=\"string\">背景颜色变成深灰色</span> <span class=\"string\">*/</span></span><br><span class=\"line\">  <span class=\"string\">-webkit-animation:</span> <span class=\"string\">info-shake-bounce</span> <span class=\"string\">.5s</span> <span class=\"string\">alternate</span> <span class=\"type\">!important;</span></span><br><span class=\"line\">  <span class=\"string\">-moz-animation:</span> <span class=\"string\">info-shake-bounce</span> <span class=\"string\">.5s</span> <span class=\"string\">alternate</span> <span class=\"type\">!important;</span></span><br><span class=\"line\">  <span class=\"string\">-o-animation:</span> <span class=\"string\">info-shake-bounce</span> <span class=\"string\">.5s</span> <span class=\"string\">alternate</span> <span class=\"type\">!important;</span></span><br><span class=\"line\">  <span class=\"attr\">animation:</span> <span class=\"string\">info-shake-bounce</span> <span class=\"string\">.5s</span> <span class=\"string\">alternate</span> <span class=\"type\">!important;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">小图标摇晃动画</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">.icon-small-box</span> <span class=\"string\">.rounded-2xl:hover</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">background:</span> <span class=\"string\">rgba(42</span>, <span class=\"number\">42</span>, <span class=\"number\">42</span>, <span class=\"number\">0.7</span><span class=\"string\">)</span> <span class=\"type\">!important;/*</span> <span class=\"string\">背景颜色变成深灰色</span> <span class=\"string\">*/</span></span><br><span class=\"line\">  <span class=\"string\">-webkit-animation:</span> <span class=\"string\">small-shake-bounce</span> <span class=\"string\">.5s</span> <span class=\"string\">alternate</span> <span class=\"type\">!important;</span></span><br><span class=\"line\">  <span class=\"string\">-moz-animation:</span> <span class=\"string\">small-shake-bounce</span> <span class=\"string\">.5s</span> <span class=\"string\">alternate</span> <span class=\"type\">!important;</span></span><br><span class=\"line\">  <span class=\"string\">-o-animation:</span> <span class=\"string\">small-shake-bounce</span> <span class=\"string\">.5s</span> <span class=\"string\">alternate</span> <span class=\"type\">!important;</span></span><br><span class=\"line\">  <span class=\"attr\">animation:</span> <span class=\"string\">small-shake-bounce</span> <span class=\"string\">.5s</span> <span class=\"string\">alternate</span> <span class=\"type\">!important;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">定义摇详细图标晃弹跳动画的关键帧</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">@keyframes</span> <span class=\"string\">info-shake-bounce</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">0</span><span class=\"string\">%</span>,</span><br><span class=\"line\">  <span class=\"number\">100</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(0);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">25</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(10deg);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">50</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(-10deg);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">75</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(2.5deg);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">85</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(-2.5deg);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">定义摇小图标晃弹跳动画的关键帧</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">@keyframes</span> <span class=\"string\">small-shake-bounce</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">0</span><span class=\"string\">%</span>,</span><br><span class=\"line\">  <span class=\"number\">100</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(0);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">25</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(15deg);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">50</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(-15deg);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">75</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(5deg);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">85</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(5deg);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n","cover":"https://t.alcy.cc/pc?_r_=516be7e9-e519-a833-2b71-03d95658ad12","cover_type":"img","excerpt":"","more":"<p>一个NAS、月服务器导航面板、简易docker管理器、Homepage、浏览器首页</p>\n<p>首页：<a href=\"https://doc.sun-panel.top/zh_cn/\">Sun-Panel</a></p>\n<p>github：<a href=\"https://github.com/hslr-s/sun-panel\">sun-panel</a></p>\n<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">panel:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;docker.olinl.com.cn/hslr/sun-panel:latest&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">panel</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">panel</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;3002:3002&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;./conf:/app/conf&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/var/run/docker.sock:/var/run/docker.sock&#x27;</span> <span class=\"comment\"># 挂载docker.sock</span></span><br><span class=\"line\">      <span class=\"comment\"># - ./runtime:/app/runtime # 挂载日志目录</span></span><br><span class=\"line\">      <span class=\"comment\"># - /mnt/sata1-1:/os # 硬盘挂载点（根据自己需求修改）</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"><span class=\"comment\"># 个人配置</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">net</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">net:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">lin-net</span></span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n<p>‍</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><br/>\n\n\n<p>参考：<a href=\"https://doc.sun-panel.top/zh_cn/advanced/mysql_redis.html\">doc</a></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ======================</span></span><br><span class=\"line\"><span class=\"comment\"># Basic configuration</span></span><br><span class=\"line\"><span class=\"comment\"># ======================</span></span><br><span class=\"line\">[<span class=\"string\">base</span>]</span><br><span class=\"line\"><span class=\"comment\"># Web run port. Default:3002</span></span><br><span class=\"line\"><span class=\"string\">http_port=3002</span></span><br><span class=\"line\"><span class=\"comment\"># Database driver [mysql/sqlite(Default)]</span></span><br><span class=\"line\"><span class=\"string\">database_drive=mysql</span></span><br><span class=\"line\"><span class=\"comment\"># Cache driver [redis/memory(Default)]</span></span><br><span class=\"line\"><span class=\"string\">cache_drive=redis</span></span><br><span class=\"line\"><span class=\"comment\"># Queue driver [redis/memory(Default)]</span></span><br><span class=\"line\"><span class=\"string\">queue_drive=redis</span></span><br><span class=\"line\"><span class=\"comment\"># File cache path (Please start with the current path &#x27;./&#x27;)</span></span><br><span class=\"line\"><span class=\"comment\"># Warning: The files that have been uploaded after the modification cannot be accessed</span></span><br><span class=\"line\"><span class=\"string\">source_path=./uploads</span></span><br><span class=\"line\"><span class=\"comment\"># File cache path.</span></span><br><span class=\"line\"><span class=\"string\">source_temp_path=./runtime/temp</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ======================</span></span><br><span class=\"line\"><span class=\"comment\"># Mysql database driver</span></span><br><span class=\"line\"><span class=\"comment\"># ======================</span></span><br><span class=\"line\">[<span class=\"string\">mysql</span>]</span><br><span class=\"line\"><span class=\"string\">host=127.0.0.1</span></span><br><span class=\"line\"><span class=\"string\">port=3306</span></span><br><span class=\"line\"><span class=\"string\">username=root</span></span><br><span class=\"line\"><span class=\"string\">password=root</span></span><br><span class=\"line\"><span class=\"string\">db_name=sun_panel</span></span><br><span class=\"line\"><span class=\"string\">wait_timeout=100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ======================</span></span><br><span class=\"line\"><span class=\"comment\"># sqlite database driver</span></span><br><span class=\"line\"><span class=\"comment\"># ======================</span></span><br><span class=\"line\">[<span class=\"string\">sqlite</span>]</span><br><span class=\"line\"><span class=\"string\">file_path=./database/database.db</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ======================</span></span><br><span class=\"line\"><span class=\"comment\"># redis database driver</span></span><br><span class=\"line\"><span class=\"comment\"># ======================</span></span><br><span class=\"line\">[<span class=\"string\">redis</span>]</span><br><span class=\"line\"><span class=\"string\">address=127.0.0.1:6379</span></span><br><span class=\"line\"><span class=\"string\">password=</span></span><br><span class=\"line\"><span class=\"string\">prefix=sun_panel:</span></span><br><span class=\"line\"><span class=\"string\">db=0</span></span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n<p>‍</p>\n<p>‍</p>\n<h2 id=\"美化\"><a href=\"#美化\" class=\"headerlink\" title=\"美化\"></a>美化</h2><h3 id=\"添加毛玻璃效果\"><a href=\"#添加毛玻璃效果\" class=\"headerlink\" title=\"添加毛玻璃效果\"></a>添加毛玻璃效果</h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">分组毛玻璃</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">.item-list&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">backdrop-filter:</span> <span class=\"string\">blur(1px);</span> <span class=\"string\">/*</span> <span class=\"string\">毛玻璃效果</span> <span class=\"string\">*/</span></span><br><span class=\"line\">  <span class=\"string\">-webkit-backdrop-filter:</span> <span class=\"string\">blur(1px);</span> <span class=\"string\">/*</span> <span class=\"string\">对于</span> <span class=\"string\">Safari</span> <span class=\"string\">等</span> <span class=\"string\">WebKit</span> <span class=\"string\">浏览器</span> <span class=\"string\">*/</span></span><br><span class=\"line\">  <span class=\"attr\">background:</span> <span class=\"string\">rgba(255,</span> <span class=\"number\">255</span><span class=\"string\">,</span> <span class=\"number\">255</span><span class=\"string\">,</span> <span class=\"number\">0.3</span><span class=\"string\">);</span> <span class=\"string\">/*</span> <span class=\"string\">半透明背景色</span> <span class=\"string\">*/</span></span><br><span class=\"line\">  <span class=\"attr\">border-radius:</span> <span class=\"string\">15px;</span></span><br><span class=\"line\">  <span class=\"attr\">box-shadow:</span> <span class=\"number\">0</span> <span class=\"string\">4px</span> <span class=\"string\">30px</span> <span class=\"string\">rgba(0,</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"number\">0.1</span><span class=\"string\">);</span></span><br><span class=\"line\">  <span class=\"attr\">border:</span> <span class=\"string\">1px</span> <span class=\"string\">solid</span> <span class=\"string\">rgba(255,</span> <span class=\"number\">255</span><span class=\"string\">,</span> <span class=\"number\">255</span><span class=\"string\">,</span> <span class=\"number\">0.2</span><span class=\"string\">);</span></span><br><span class=\"line\">  <span class=\"attr\">padding:</span> <span class=\"string\">10px;</span></span><br><span class=\"line\">  <span class=\"attr\">color:</span> <span class=\"string\">white;</span></span><br><span class=\"line\">  <span class=\"attr\">margin:</span> <span class=\"string\">auto;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n<h3 id=\"添加首页三张图\"><a href=\"#添加首页三张图\" class=\"headerlink\" title=\"添加首页三张图\"></a><strong>添加首页三张图</strong></h3><p><strong>js</strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">搜索下方三张图片</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">document.addEventListener(&#x27;DOMContentLoaded&#x27;,</span> <span class=\"string\">()</span> <span class=\"string\">=&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"string\">//</span> <span class=\"string\">创建一个</span> <span class=\"string\">MutationObserver</span> <span class=\"string\">实例，监听</span> <span class=\"string\">DOM</span> <span class=\"string\">的变化</span></span><br><span class=\"line\">    <span class=\"string\">const</span> <span class=\"string\">observer</span> <span class=\"string\">=</span> <span class=\"string\">new</span> <span class=\"string\">MutationObserver((mutationsList)</span> <span class=\"string\">=&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"string\">//</span> <span class=\"string\">查找目标父容器</span></span><br><span class=\"line\">        <span class=\"string\">const</span> <span class=\"string\">parentDiv</span> <span class=\"string\">=</span> <span class=\"string\">document.querySelector(&#x27;#item-card-box&#x27;);</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">//</span> <span class=\"string\">如果找到了目标父容器，则停止观察并执行后续逻辑</span></span><br><span class=\"line\">        <span class=\"string\">if</span> <span class=\"string\">(parentDiv)</span> &#123;</span><br><span class=\"line\">            <span class=\"string\">observer.disconnect();</span> <span class=\"string\">//</span> <span class=\"string\">停止观察</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"string\">//</span> <span class=\"string\">图片链接数组和对应的点击链接数组</span></span><br><span class=\"line\">            <span class=\"string\">const</span> <span class=\"string\">imageLinks</span> <span class=\"string\">=</span> [</span><br><span class=\"line\">                &#123; <span class=\"attr\">src:</span> <span class=\"string\">&quot;https://t.alcy.cc/moez?t=1&quot;</span>, <span class=\"attr\">href:</span> <span class=\"string\">&quot;#&quot;</span> &#125;,</span><br><span class=\"line\">                &#123; <span class=\"attr\">src:</span> <span class=\"string\">&quot;https://t.alcy.cc/moez?t=2&quot;</span>, <span class=\"attr\">href:</span> <span class=\"string\">&quot;#&quot;</span> &#125;,</span><br><span class=\"line\">                &#123; <span class=\"attr\">src:</span> <span class=\"string\">&quot;https://t.alcy.cc/moez?t=3&quot;</span>, <span class=\"attr\">href:</span> <span class=\"string\">&quot;#&quot;</span> &#125;</span><br><span class=\"line\">            ]<span class=\"string\">;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"string\">//</span> <span class=\"string\">创建一个新的</span> <span class=\"string\">div</span> <span class=\"string\">容器</span></span><br><span class=\"line\">            <span class=\"string\">const</span> <span class=\"string\">newDiv</span> <span class=\"string\">=</span> <span class=\"string\">document.createElement(&#x27;div&#x27;);</span></span><br><span class=\"line\">            <span class=\"string\">newDiv.classList.add(&#x27;image-container&#x27;);</span> <span class=\"string\">//</span> <span class=\"string\">添加样式类</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"string\">//</span> <span class=\"string\">遍历图片链接数组，动态创建图片和链接元素</span></span><br><span class=\"line\">            <span class=\"string\">imageLinks.forEach((item</span>, <span class=\"string\">index)</span> <span class=\"string\">=&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"string\">const</span> <span class=\"string\">a</span> <span class=\"string\">=</span> <span class=\"string\">document.createElement(&#x27;a&#x27;);</span> <span class=\"string\">//</span> <span class=\"string\">创建</span> <span class=\"string\">a</span> <span class=\"string\">标签</span></span><br><span class=\"line\">                <span class=\"string\">a.href</span> <span class=\"string\">=</span> <span class=\"string\">item.href;</span> <span class=\"string\">//</span> <span class=\"string\">设置链接地址</span></span><br><span class=\"line\">                <span class=\"string\">a.classList.add(&#x27;image-link&#x27;);</span> <span class=\"string\">//</span> <span class=\"string\">添加链接样式类</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"string\">const</span> <span class=\"string\">img</span> <span class=\"string\">=</span> <span class=\"string\">document.createElement(&#x27;img&#x27;);</span> <span class=\"string\">//</span> <span class=\"string\">创建</span> <span class=\"string\">img</span> <span class=\"string\">标签</span></span><br><span class=\"line\">                <span class=\"string\">img.src</span> <span class=\"string\">=</span> <span class=\"string\">item.src;</span> <span class=\"string\">//</span> <span class=\"string\">设置图片地址</span></span><br><span class=\"line\">                <span class=\"string\">img.alt</span> <span class=\"string\">=</span> <span class=\"string\">`Image</span> <span class=\"string\">$</span>&#123;<span class=\"string\">index</span> <span class=\"string\">+</span> <span class=\"number\">1</span>&#125;<span class=\"string\">`;</span> <span class=\"string\">//</span> <span class=\"string\">设置图片描述</span></span><br><span class=\"line\">                <span class=\"string\">img.classList.add(&#x27;image-item&#x27;);</span> <span class=\"string\">//</span> <span class=\"string\">添加图片样式类</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"string\">//</span> <span class=\"string\">如果是第三个图片，添加点击事件</span></span><br><span class=\"line\">               <span class=\"string\">//</span> <span class=\"string\">if</span> <span class=\"string\">(index</span> <span class=\"string\">===</span> <span class=\"number\">2</span><span class=\"string\">)</span> &#123;</span><br><span class=\"line\">               <span class=\"string\">//</span>     <span class=\"string\">img.addEventListener(&#x27;click&#x27;</span>, <span class=\"string\">(event)</span> <span class=\"string\">=&gt;</span> &#123;</span><br><span class=\"line\">               <span class=\"string\">//</span>         <span class=\"string\">event.preventDefault();</span> <span class=\"string\">//</span> <span class=\"string\">阻止默认跳转行为</span></span><br><span class=\"line\">               <span class=\"string\">//</span>         <span class=\"string\">alert(&quot;点上瘾了是吧，这个啥也没有！&quot;);</span> <span class=\"string\">//</span> <span class=\"string\">自定义点击逻辑</span></span><br><span class=\"line\">               <span class=\"string\">//</span>     &#125;<span class=\"string\">);</span></span><br><span class=\"line\">               <span class=\"string\">//</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"string\">//</span> <span class=\"string\">将</span> <span class=\"string\">img</span> <span class=\"string\">添加到</span> <span class=\"string\">a</span> <span class=\"string\">标签内</span></span><br><span class=\"line\">                <span class=\"string\">a.appendChild(img);</span></span><br><span class=\"line\">                <span class=\"string\">//</span> <span class=\"string\">将</span> <span class=\"string\">a</span> <span class=\"string\">标签添加到新</span> <span class=\"string\">div</span> <span class=\"string\">中</span></span><br><span class=\"line\">                <span class=\"string\">newDiv.appendChild(a);</span></span><br><span class=\"line\">            &#125;<span class=\"string\">);</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"string\">//</span> <span class=\"string\">将新</span> <span class=\"string\">div</span> <span class=\"string\">插入到目标父容器中</span></span><br><span class=\"line\">            <span class=\"string\">if</span> <span class=\"string\">(parentDiv.firstChild)</span> &#123;</span><br><span class=\"line\">                <span class=\"string\">parentDiv.insertBefore(newDiv</span>, <span class=\"string\">parentDiv.firstChild);</span> <span class=\"string\">//</span> <span class=\"string\">插入到第一个子元素前</span></span><br><span class=\"line\">            &#125; <span class=\"string\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"string\">parentDiv.appendChild(newDiv);</span> <span class=\"string\">//</span> <span class=\"string\">如果没有子元素，直接追加</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;<span class=\"string\">);</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">//</span> <span class=\"string\">开始观察整个文档的变化</span></span><br><span class=\"line\">    <span class=\"string\">observer.observe(document.body</span>, &#123; <span class=\"attr\">childList:</span> <span class=\"literal\">true</span>, <span class=\"attr\">subtree:</span> <span class=\"literal\">true</span> &#125;<span class=\"string\">);</span></span><br><span class=\"line\">&#125;<span class=\"string\">);</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>css</strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">搜索下方三张图片</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">容器样式</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">.image-container</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">display:</span> <span class=\"string\">flex;</span></span><br><span class=\"line\">    <span class=\"attr\">justify-content:</span> <span class=\"string\">center;</span> <span class=\"string\">/*</span> <span class=\"string\">水平居中</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">align-items:</span> <span class=\"string\">center;</span> <span class=\"string\">/*</span> <span class=\"string\">垂直居中</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">gap:</span> <span class=\"string\">50px;</span> <span class=\"string\">/*</span> <span class=\"string\">图片之间的间距</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">margin:</span> <span class=\"string\">20px</span> <span class=\"number\">0</span><span class=\"string\">;</span> <span class=\"string\">/*</span> <span class=\"string\">上下外边距</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">flex-wrap:</span> <span class=\"string\">wrap;</span> <span class=\"string\">/*</span> <span class=\"string\">当空间不足时换行</span> <span class=\"string\">*/</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">图片链接样式</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">.image-link</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">text-decoration:</span> <span class=\"string\">none;</span> <span class=\"string\">/*</span> <span class=\"string\">去掉下划线</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">border-radius:</span> <span class=\"string\">28px;</span> <span class=\"string\">/*</span> <span class=\"string\">圆角</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">overflow:</span> <span class=\"string\">hidden;</span> <span class=\"string\">/*</span> <span class=\"string\">防止图片溢出</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">box-shadow:</span> <span class=\"number\">0</span> <span class=\"string\">4px</span> <span class=\"string\">8px</span> <span class=\"string\">rgba(0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.2</span><span class=\"string\">);</span> <span class=\"string\">/*</span> <span class=\"string\">阴影效果</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">transition:</span> <span class=\"string\">transform</span> <span class=\"number\">0.</span><span class=\"string\">3s</span> <span class=\"string\">ease;</span> <span class=\"string\">/*</span> <span class=\"string\">平滑过渡</span> <span class=\"string\">*/</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">图片样式</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">.image-item</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">width:</span> <span class=\"string\">350px;</span> <span class=\"string\">/*</span> <span class=\"string\">固定宽度</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">height:</span> <span class=\"string\">200px;</span> <span class=\"string\">/*</span> <span class=\"string\">自适应高度</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">border-radius:</span> <span class=\"string\">28px;</span> <span class=\"string\">/*</span> <span class=\"string\">圆角</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">transition:</span> <span class=\"string\">transform</span> <span class=\"number\">0.</span><span class=\"string\">3s</span> <span class=\"string\">ease;</span> <span class=\"string\">/*</span> <span class=\"string\">平滑过渡</span> <span class=\"string\">*/</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">鼠标悬停时的效果</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">.image-link:hover</span> <span class=\"string\">.image-item</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">scale(1.1)</span> <span class=\"string\">rotate(5deg);</span> <span class=\"string\">/*</span> <span class=\"string\">放大并旋转</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">box-shadow:</span> <span class=\"number\">0</span> <span class=\"string\">8px</span> <span class=\"string\">16px</span> <span class=\"string\">rgba(0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.3</span><span class=\"string\">);</span> <span class=\"string\">/*</span> <span class=\"string\">加深阴影</span> <span class=\"string\">*/</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">Media</span> <span class=\"string\">Query</span> <span class=\"string\">for</span> <span class=\"string\">mobile</span> <span class=\"string\">devices</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"attr\">@media (max-width:</span> <span class=\"string\">768px)</span> &#123;</span><br><span class=\"line\">    <span class=\"string\">/*</span> <span class=\"string\">在小屏幕上，使图片竖排</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"string\">.image-container</span> &#123;</span><br><span class=\"line\">        <span class=\"attr\">flex-direction:</span> <span class=\"string\">column;</span> <span class=\"string\">/*</span> <span class=\"string\">竖向排列</span> <span class=\"string\">*/</span></span><br><span class=\"line\">        <span class=\"attr\">align-items:</span> <span class=\"string\">center;</span> <span class=\"string\">/*</span> <span class=\"string\">居中对齐</span> <span class=\"string\">*/</span></span><br><span class=\"line\">        <span class=\"attr\">gap:</span> <span class=\"string\">20px;</span> <span class=\"string\">/*</span> <span class=\"string\">减少间距</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">/*</span> <span class=\"string\">调整图片大小以适应小屏幕</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"string\">.image-item</span> &#123;</span><br><span class=\"line\">        <span class=\"attr\">width:</span> <span class=\"number\">100</span><span class=\"string\">%;</span> <span class=\"string\">/*</span> <span class=\"string\">宽度为100%</span> <span class=\"string\">*/</span></span><br><span class=\"line\">        <span class=\"attr\">max-width:</span> <span class=\"string\">400px;</span> <span class=\"string\">/*</span> <span class=\"string\">设置最大宽度</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加鼠标悬停动画\"><a href=\"#添加鼠标悬停动画\" class=\"headerlink\" title=\"添加鼠标悬停动画\"></a>添加<strong>鼠标悬停动画</strong></h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">/*鼠标悬停动画</span> <span class=\"string\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">当鼠标悬停在图标信息框上时触发动画</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">详细图标摇晃动画</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">.icon-info-box</span> <span class=\"string\">.rounded-2xl:hover</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">background:</span> <span class=\"string\">rgba(42</span>, <span class=\"number\">42</span>, <span class=\"number\">42</span>, <span class=\"number\">0.7</span><span class=\"string\">)</span> <span class=\"type\">!important;/*</span> <span class=\"string\">背景颜色变成深灰色</span> <span class=\"string\">*/</span></span><br><span class=\"line\">  <span class=\"string\">-webkit-animation:</span> <span class=\"string\">info-shake-bounce</span> <span class=\"string\">.5s</span> <span class=\"string\">alternate</span> <span class=\"type\">!important;</span></span><br><span class=\"line\">  <span class=\"string\">-moz-animation:</span> <span class=\"string\">info-shake-bounce</span> <span class=\"string\">.5s</span> <span class=\"string\">alternate</span> <span class=\"type\">!important;</span></span><br><span class=\"line\">  <span class=\"string\">-o-animation:</span> <span class=\"string\">info-shake-bounce</span> <span class=\"string\">.5s</span> <span class=\"string\">alternate</span> <span class=\"type\">!important;</span></span><br><span class=\"line\">  <span class=\"attr\">animation:</span> <span class=\"string\">info-shake-bounce</span> <span class=\"string\">.5s</span> <span class=\"string\">alternate</span> <span class=\"type\">!important;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">小图标摇晃动画</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">.icon-small-box</span> <span class=\"string\">.rounded-2xl:hover</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">background:</span> <span class=\"string\">rgba(42</span>, <span class=\"number\">42</span>, <span class=\"number\">42</span>, <span class=\"number\">0.7</span><span class=\"string\">)</span> <span class=\"type\">!important;/*</span> <span class=\"string\">背景颜色变成深灰色</span> <span class=\"string\">*/</span></span><br><span class=\"line\">  <span class=\"string\">-webkit-animation:</span> <span class=\"string\">small-shake-bounce</span> <span class=\"string\">.5s</span> <span class=\"string\">alternate</span> <span class=\"type\">!important;</span></span><br><span class=\"line\">  <span class=\"string\">-moz-animation:</span> <span class=\"string\">small-shake-bounce</span> <span class=\"string\">.5s</span> <span class=\"string\">alternate</span> <span class=\"type\">!important;</span></span><br><span class=\"line\">  <span class=\"string\">-o-animation:</span> <span class=\"string\">small-shake-bounce</span> <span class=\"string\">.5s</span> <span class=\"string\">alternate</span> <span class=\"type\">!important;</span></span><br><span class=\"line\">  <span class=\"attr\">animation:</span> <span class=\"string\">small-shake-bounce</span> <span class=\"string\">.5s</span> <span class=\"string\">alternate</span> <span class=\"type\">!important;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">定义摇详细图标晃弹跳动画的关键帧</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">@keyframes</span> <span class=\"string\">info-shake-bounce</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">0</span><span class=\"string\">%</span>,</span><br><span class=\"line\">  <span class=\"number\">100</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(0);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">25</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(10deg);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">50</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(-10deg);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">75</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(2.5deg);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">85</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(-2.5deg);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">/*</span> <span class=\"string\">定义摇小图标晃弹跳动画的关键帧</span> <span class=\"string\">*/</span></span><br><span class=\"line\"><span class=\"string\">@keyframes</span> <span class=\"string\">small-shake-bounce</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">0</span><span class=\"string\">%</span>,</span><br><span class=\"line\">  <span class=\"number\">100</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(0);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">25</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(15deg);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">50</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(-15deg);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">75</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(5deg);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"number\">85</span><span class=\"string\">%</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">transform:</span> <span class=\"string\">rotate(5deg);</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n"},{"title":"Docker-compose实例 bitwarden","abbrlink":"db3","date":"2025-02-24T13:33:08.000Z","_content":"\nBitwarden 支持全平台的开源密码管理器\n\nGitHub：[Bitwarden](https://github.com/bitwarden)\n\n官网：[https://bitwarden.com](https://bitwarden.com)\n\n\n自建：[vaultwarden](https://github.com/dani-garcia/vaultwarden)\n\n环境变量说明：[.env.template](https://github.com/dani-garcia/vaultwarden/blob/main/.env.template)\n\n```env\n# shellcheck disable=SC2034,SC2148\n## Vaultwarden 配置文件\n## 取消注释以下任何行以更改默认设置\n##\n## 请注意，如果在管理员界面中更改了这些设置，则大多数设置将被覆盖。这些覆盖会存储在 DATA_FOLDER/config.json 文件中。\n##\n## 默认情况下，Vaultwarden 希望此文件名为“.env”，并位于当前工作目录中。如果不是这种情况，可以在启动 Vaultwarden 之前设置环境变量 ENV_FILE 指向此文件的位置。\n \n####################\n### 数据文件夹 ###\n####################\n \n## 主数据文件夹\n# DATA_FOLDER=data\n \n## 单独的文件夹，这些选项会覆盖 %DATA_FOLDER%\n# RSA_KEY_FILENAME=data/rsa_key\n# ICON_CACHE_FOLDER=data/icon_cache\n# ATTACHMENTS_FOLDER=data/attachments\n# SENDS_FOLDER=data/sends\n# TMP_FOLDER=data/tmp\n \n## 模板数据文件夹，默认使用嵌入式模板\n## 查看源代码以了解格式\n# TEMPLATES_FOLDER=data/templates\n## 对每个请求自动重新加载模板，较慢，仅用于开发环境\n# RELOAD_TEMPLATES=false\n \n## Web 密码库设置\n# WEB_VAULT_FOLDER=web-vault/\n# WEB_VAULT_ENABLED=true\n \n#########################\n### 数据库设置 ###\n#########################\n \n## 数据库 URL\n## 使用 SQLite 时，这是 DB 文件的路径，默认为 %DATA_FOLDER%/db.sqlite3\n# DATABASE_URL=data/db.sqlite3\n## 使用 MySQL 时，请指定适当的连接 URI。\n## 详情：https://docs.diesel.rs/2.1.x/diesel/mysql/struct.MysqlConnection.html\n# DATABASE_URL=mysql://用户名:密码@主机[:端口]/数据库名\n## 使用 PostgreSQL 时，请指定适当的连接 URI（推荐）或关键字/值连接字符串。\n## 详情：\n## - https://docs.diesel.rs/2.1.x/diesel/pg/struct.PgConnection.html\n## - https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING\n# DATABASE_URL=postgresql://用户名:密码@主机[:端口]/数据库名\n \n## 启用 WAL（预写日志）\n## 设置为 false 以避免在启动时启用 WAL。\n## 注意，如果数据库已启用 WAL，您还需要在数据库中禁用 WAL，此设置仅阻止 Vaultwarden 在启动时自动启用它。\n## 请先阅读项目 wiki 页面中的相关设置，因为修改此值可能会导致性能下降或使服务无法启动。\n# ENABLE_DB_WAL=true\n \n## 数据库连接重试次数\n## 启动期间尝试连接数据库的次数，每次重试间隔 1 秒，设置为 0 表示无限次重试\n# DB_CONNECTION_RETRIES=15\n \n## 数据库超时时间\n## 获取数据库连接的超时时间\n# DATABASE_TIMEOUT=30\n \n## 数据库最大连接数\n## 定义用于连接数据库的连接池大小。\n# DATABASE_MAX_CONNS=10\n \n## 数据库连接初始化\n## 允许在创建新数据库连接时运行 SQL 语句。\n## 这主要用于连接范围的指令。\n## 如果为空，则使用数据库特定的默认值：\n## - SQLite: \"PRAGMA busy_timeout = 5000; PRAGMA synchronous = NORMAL;\"\n## - MySQL: \"\"\n## - PostgreSQL: \"\"\n# DATABASE_CONN_INIT=\"\"\n \n#################\n### WebSocket ###\n#################\n \n## 启用 WebSocket 通知\n# ENABLE_WEBSOCKET=true\n \n##########################\n### 推送通知 ###\n##########################\n \n## 启用推送通知（需要从 https://bitwarden.com/host 获取密钥和 ID）\n## 关于移动客户端推送通知的详情：\n## - https://github.com/dani-garcia/vaultwarden/wiki/Enabling-Mobile-Client-push-notification\n# PUSH_ENABLED=false\n# PUSH_INSTALLATION_ID=请替换此处\n# PUSH_INSTALLATION_KEY=请替换此处\n \n# 警告：除非完全理解其含义，否则不要修改以下设置！\n# 默认推送中继和身份验证 URI\n# PUSH_RELAY_URI=https://push.bitwarden.com\n# PUSH_IDENTITY_URI=https://identity.bitwarden.com\n# 欧盟数据区域设置\n# 如果选择了“欧盟”作为您的数据区域，请使用以下 URI：\n# PUSH_RELAY_URI=https://api.bitwarden.eu\n# PUSH_IDENTITY_URI=https://identity.bitwarden.eu\n \n#####################\n### 计划任务 ###\n#####################\n \n## 计划任务设置\n##\n## 任务计划使用类似 cron 的语法（由 https://crates.io/crates/cron 解析），并且始终基于 UTC 时间（无论您的本地时区设置如何）。\n##\n## 该格式与 crontab 略有不同，因为 crontab 不包含秒。\n## 您可以在这里测试格式：https://crontab.guru，但请删除第一个数字！\n## 秒   分   小时   月份中的某天    月   星期中的某天\n## \"0   30   9,12,15     1,15       May-Aug  Mon,Wed,Fri\"\n## \"0   30     *          *            *          *     \"\n## \"0   30     1          *            *          *     \"\n##\n## 工作调度线程检查需要运行的任务的时间间隔（毫秒）。设置为 0 可全局禁用计划任务。\n# JOB_POLL_INTERVAL_MS=30000\n##\n## 检查已过删除日期的发送任务的计划。默认每小时一次（整点后 5 分钟）。留空可禁用此任务。\n# SEND_PURGE_SCHEDULE=\"0 5 * * * *\"\n##\n## 检查应永久删除的垃圾箱项目的计划。默认每天一次（午夜后 5 分钟）。留空可禁用此任务。\n# TRASH_PURGE_SCHEDULE=\"0 5 0 * * *\"\n##\n## 检查未完成的双因素登录的计划。默认每分钟一次。留空可禁用此任务。\n# INCOMPLETE_2FA_SCHEDULE=\"30 * * * * *\"\n##\n## 发送紧急访问授权人到期提醒的计划。默认每小时一次（整点后 3 分钟）。留空可禁用此任务。\n# EMERGENCY_NOTIFICATION_REMINDER_SCHEDULE=\"0 3 * * * *\"\n##\n## 处理已达到等待时间的紧急访问请求的计划。默认每小时一次（整点后 7 分钟）。留空可禁用此任务。\n# EMERGENCY_REQUEST_TIMEOUT_SCHEDULE=\"0 7 * * * *\"\n##\n## 清理事件表中旧事件的计划。默认每天执行一次。如果不设置 EVENTS_DAYS_RETAIN，此任务不会启动。\n# EVENT_CLEANUP_SCHEDULE=\"0 10 0 * * *\"\n## 数据库中保留事件的天数。\n## 如果未设置（默认），事件将无限期保留，并禁用计划任务！\n# EVENTS_DAYS_RETAIN=\n##\n## 清理数据库中旧认证请求的计划。默认每分钟一次。留空可禁用此任务。\n# AUTH_REQUEST_PURGE_SCHEDULE=\"30 * * * * *\"\n##\n## 清理数据库中过期的 Duo 上下文的计划。如果 Duo MFA 被禁用或设置为使用旧版 iframe 提示，则不执行操作。默认每分钟一次。留空可禁用此任务。\n# DUO_CONTEXT_PURGE_SCHEDULE=\"30 * * * * *\"\n \n########################\n### 通用设置 ###\n########################\n \n## 域名设置\n## 域名必须与您访问服务器的地址匹配。\n## 推荐配置此值，否则某些功能可能无法工作，如附件下载、电子邮件链接和U2F。\n## 要使 U2F 正常工作，服务器必须使用 HTTPS，您可以使用 Let's Encrypt 获取免费证书。\n## 使用 HTTPS 的推荐方式是将 Vaultwarden 放在反向代理后面。\n## 详情：\n## - https://github.com/dani-garcia/vaultwarden/wiki/Enabling-HTTPS\n## - https://github.com/dani-garcia/vaultwarden/wiki/Proxy-examples\n## 开发环境\n# DOMAIN=http://localhost\n## 公共服务器\n# DOMAIN=https://vw.domain.tld\n## 公共服务器（带端口号的URL）\n# DOMAIN=https://vw.domain.tld:8443\n## 公共服务器（带路径的URL）\n# DOMAIN=https://domain.tld/vw\n \n## 控制是否允许用户创建 Bitwarden Sends。\n## 此设置对所有用户全局适用。\n## 若要按组织控制此设置，请使用“禁用发送”组织策略。\n# SENDS_ALLOWED=true\n \n## HIBP API 密钥\n## HaveIBeenPwned API 密钥，可在此请求：https://haveibeenpwned.com/API/Key\n# HIBP_API_KEY=\n \n## 每个组织的附件存储限制（KB）\n## 每个组织允许的最大附件存储量（以 KB 为单位）。\n## 当达到此限制时，组织成员将不允许上传更多属于该组织的密码附件。\n# ORG_ATTACHMENT_LIMIT=\n## 每个用户的附件存储限制（KB）\n## 每个用户允许的最大附件存储量（以 KB 为单位）。\n## 当达到此限制时，用户将不允许上传更多附件。\n# USER_ATTACHMENT_LIMIT=\n## 每个用户的发送存储限制（KB）\n## 每个用户允许的最大发送存储量（以 KB 为单位）。\n## 当达到此限制时，用户将不允许上传更多发送内容。\n# USER_SEND_LIMIT=\n \n## 在自动删除已放入回收站的项目前等待的天数。\n## 如果未设置（默认），则不会自动删除回收站中的项目。\n## 此设置全局适用，因此请确保通知所有用户有关此设置的任何更改。\n# TRASH_AUTO_DELETE_DAYS=\n \n## 等待多少分钟后认为两次验证登录不完整，并触发电子邮件通知。不完整的两次验证登录是指提供了正确的主密码但未完成所需的二次验证步骤，这可能表示主密码被泄露。设置为 0 可禁用此检查。\n## 此设置对所有用户全局适用。\n# INCOMPLETE_2FA_TIME_LIMIT=3\n \n## 禁用图标下载\n## 设置为 true 以禁用内部图标服务中的图标下载。\n## 这仍然会从 $ICON_CACHE_FOLDER 提供现有图标，而不生成任何外部网络请求。$ICON_CACHE_TTL 也必须设置为 0；否则，现有的图标最终会被删除，但不会再被下载。\n# DISABLE_ICON_DOWNLOAD=false\n \n## 控制是否允许新用户注册\n# SIGNUPS_ALLOWED=true\n \n## 控制新用户注册时是否需要验证其电子邮件地址。\n## 注意，如果将此选项设置为 true，则在验证电子邮件地址之前禁止登录！\n## 欢迎邮件中会包含一个验证链接，尝试登录时会定期触发重新发送验证邮件。\n# SIGNUPS_VERIFY=false\n \n## 如果 SIGNUPS_VERIFY 设置为 true，这限制了自上次发送电子邮件验证链接后多长时间会再次发送验证邮件（秒）\n# SIGNUPS_VERIFY_RESEND_TIME=3600\n \n## 如果 SIGNUPS_VERIFY 设置为 true，这限制了尝试登录时可以重新发送验证邮件的最大次数。\n# SIGNUPS_VERIFY_RESEND_LIMIT=6\n \n## 控制来自逗号分隔域名列表的新用户是否可以注册，即使 SIGNUPS_ALLOWED 设置为 false\n# SIGNUPS_DOMAINS_WHITELIST=example.com,example.net,example.org\n \n## 控制是否为组织启用事件日志记录。\n## 此设置适用于组织。\n## 默认情况下禁用。还需检查 EVENT_CLEANUP_SCHEDULE 和 EVENTS_DAYS_RETAIN 设置。\n# ORG_EVENTS_ENABLED=false\n \n## 控制哪些用户可以创建新的组织。\n## 空或 'all' 表示所有用户都可以创建组织（这是默认值）：\n# ORG_CREATION_USERS=\n## 'none' 表示没有用户可以创建组织：\n# ORG_CREATION_USERS=none\n## 逗号分隔列表表示只有这些用户可以创建组织：\n# ORG_CREATION_USERS=admin1@example.com,admin2@example.com\n \n## 即使注册被禁用，邀请组织管理员邀请用户\n# INVITATIONS_ALLOWED=true\n## 在不属于特定组织的邀请电子邮件中显示的名称\n# INVITATION_ORG_NAME=Vaultwarden\n \n## 组织邀请令牌、紧急访问邀请令牌、电子邮件验证令牌和删除请求令牌将在多少小时后过期（必须至少为 1 小时）\n# INVITATION_EXPIRATION_HOURS=120\n \n## 控制用户是否可以启用对其帐户的紧急访问。\n## 此设置对所有用户全局适用。\n# EMERGENCY_ACCESS_ALLOWED=true\n \n## 控制用户是否可以更改其电子邮件。\n## 此设置对所有用户全局适用。\n# EMAIL_CHANGE_ALLOWED=true\n \n## 密码哈希迭代次数用于服务器端密码哈希。\n## 新用户的默认值。如果更改，会在用户下次登录时更新现有用户的设置。\n# PASSWORD_ITERATIONS=600000\n \n## 控制用户是否可以设置或显示密码提示。此设置对所有用户全局适用。\n# PASSWORD_HINTS_ALLOWED=true\n \n## 控制当 SMTP 服务未配置且允许密码提示时，是否应在网页上直接显示密码提示。\n## 不建议在公共可访问实例上使用，因为这会提供对潜在敏感数据的未经授权访问。\n# SHOW_PASSWORD_HINT=false\n \n#########################\n### 高级设置 ###\n#########################\n \n## 客户端 IP 头，用于识别客户端的 IP，默认为 \"X-Real-IP\"\n## 设置为字符串 \"none\"（不带引号），以禁用任何头并仅使用远程 IP\n# IP_HEADER=X-Real-IP\n \n## 图标服务\n## 预定义的图标服务有：internal, bitwarden, duckduckgo, google。\n## 要指定自定义图标服务，请设置一个包含一个 `{}` 的 URL 模板，该模板会被替换为域名。例如：`https://icon.example.com/domain/{}`。\n##\n## `internal` 指的是 Vaultwarden 内置的图标获取实现。\n## 如果设置了外部服务，对 Vaultwarden 的图标请求将返回 HTTP 重定向到外部服务上的相应图标。外部服务可能在您的 Vaultwarden 实例没有外部网络连接时有用，或者如果您担心有人可能会探测您的实例以尝试检测某些站点的图标是否已缓存。\n# ICON_SERVICE=internal\n \n## 图标重定向代码\n## 用于重定向到外部图标服务的 HTTP 状态码。\n## 支持的代码有 301（永久）、302（临时）、307（临时）和 308（永久）。临时重定向在测试不同的图标服务时很有用，但一旦确定了服务，建议使用永久重定向以提高缓存能力。旧版代码目前在 Bitwarden 客户端中支持得更好。\n# ICON_REDIRECT_CODE=302\n \n## 成功获取的图标的缓存生存时间（秒），0 表示“永远”\n## 默认值：2592000（30天）\n# ICON_CACHE_TTL=2592000\n## 未找到的图标的缓存生存时间（秒），0 表示“永远”\n## 默认值：259200（3天）\n# ICON_CACHE_NEGTTL=259200\n \n## 图标下载超时\n## 配置下载 favicon 时的超时值。\n## 默认是 10 秒，但在较慢的网络连接上可能过低。\n# ICON_DOWNLOAD_TIMEOUT=10\n \n## 通过正则表达式阻止 HTTP 域名/IP\n## 任何匹配此正则表达式的域名或 IP 都不会被内部 HTTP 客户端获取。\n## 对于隐藏本地网络中的其他服务器很有用。更多信息请参阅 WIKI。\n## 注意：始终将此正则表达式用单引号括起来！\n# HTTP_REQUEST_BLOCK_REGEX='^(192\\.168\\.0\\.[0-9]+|192\\.168\\.1\\.[0-9]+)$'\n \n## 启用此选项将导致内部 HTTP 客户端拒绝连接到任何非全局 IP 地址。\n## 用于保护内部环境：参见 https://en.wikipedia.org/wiki/Reserved_IP_addresses 了解其会阻止的 IP 列表。\n# HTTP_REQUEST_BLOCK_NON_GLOBAL_IPS=true\n \n## 客户端设置\n## 启用客户端的实验性功能标志。\n## 这是一个逗号分隔的功能标志列表，例如 \"flag1,flag2,flag3\"。\n##\n## 可用的标志如下：\n## - \"autofill-overlay\": 在表单字段中添加一个覆盖菜单，以便快速访问凭据。\n## - \"autofill-v2\": 使用新的自动填充实现。\n## - \"browser-fileless-import\": 直接从其他提供商导入凭据而无需文件。\n## - \"extension-refresh\": 临时启用新扩展设计直到正式发布（应与 beta Chrome 扩展一起使用）。\n## - \"fido2-vault-credentials\": 启用 FIDO2 安全密钥作为第二因素。\n## - \"inline-menu-positioning-improvements\": 启用浏览器扩展中的内联菜单密码生成器和身份建议。\n## - \"ssh-key-vault-item\": 启用 SSH 密钥保险库项的创建和使用。（需要客户端 >=2024.12.0）\n## - \"ssh-agent\": 在桌面上启用 SSH 代理支持。（需要桌面 >=2024.12.0）\n# EXPERIMENTAL_CLIENT_FEATURE_FLAGS=fido2-vault-credentials\n \n## 要求新设备电子邮件。当用户登录时需要发送一封电子邮件。\n## 如果发送电子邮件失败，则登录尝试将失败！\n# REQUIRE_DEVICE_EMAIL=false\n \n## 启用扩展日志记录，这将在日志中显示时间戳和目标。\n# EXTENDED_LOGGING=true\n \n## 扩展日志记录的时间戳格式。\n## 格式说明符：https://docs.rs/chrono/latest/chrono/format/strftime\n# LOG_TIMESTAMP_FORMAT=\"%Y-%m-%d %H:%M:%S.%3f\"\n \n## 日志记录到 Syslog\n## 这需要扩展日志记录\n# USE_SYSLOG=false\n \n## 记录到文件\n# LOG_FILE=/path/to/log\n \n## 日志级别\n## 更改日志输出的详细程度。\n## 有效值为 \"trace\", \"debug\", \"info\", \"warn\", \"error\" 和 \"off\"。\n## 将其设置为 \"trace\" 或 \"debug\" 也会显示挂载路由和静态文件、WebSocket 和 alive 请求的日志。\n## 对于特定模块，可以附加一个逗号分隔的 `path::to::module=log_level`\n## 例如，要只为图标查看 info 日志，使用：LOG_LEVEL=\"info,vaultwarden::api::icons=debug\"\n# LOG_LEVEL=info\n \n## 管理界面的令牌，最好是 Argon2 PHC 字符串。\n## Vaultwarden 提供了一个内置生成器，可以通过调用 `vaultwarden hash` 来生成。\n## 详情请参阅：https://github.com/dani-garcia/vaultwarden/wiki/Enabling-admin-page#secure-the-admin_token\n## 如果未设置，管理面板将被禁用。\n## 新的 Argon2 PHC 字符串\n## 注意，在某些环境中，如 docker-compose 中，您需要将所有美元符号 `$` 转义为两个美元符号 `$$`。\n## 并且在必要时使用单引号 (') 而不是双引号 (\") 包含字符串。\n# ADMIN_TOKEN='$argon2id$v=19$m=65540,t=3,p=4$MmeKRnGK5RW5mJS7h3TOL89GrpLPXJPAtTK8FTqj9HM$DqsstvoSAETl9YhnsXbf43WeaUwJC6JhViIvuPoig78'\n## 旧的明文字符串（会产生警告，建议使用 Argon2）\n# ADMIN_TOKEN=Vy2VyYTTsKPv8W5aEOWUbB/Bt3DEKePbHmI4m9VcemUMS2rEviDowNAFqYi1xjmp\n \n## 启用此选项以绕过管理面板的安全性。此选项仅适用于前面带有单独认证层的情况。\n# DISABLE_ADMIN_TOKEN=false\n \n## 在相同的 IP 地址下，两次管理登录请求之间的平均秒数，超过这个时间限制才会触发限速。\n# ADMIN_RATELIMIT_SECONDS=300\n## 允许的最大突发请求数，同时保持由 `ADMIN_RATELIMIT_SECONDS` 指定的平均值。\n# ADMIN_RATELIMIT_MAX_BURST=3\n \n## 设置管理员会话的有效期为此值（分钟）。\n# ADMIN_SESSION_LIFETIME=20\n \n## 允许的 iframe 祖先（了解风险！）\n## https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-ancestors\n## 允许其他域嵌入 web vault 到 iframe 中，便于嵌入安全的内部网。\n## 此值将被添加到 'Content-Security-Policy' 头部的 'frame-ancestors' 值中。\n## 多个值必须用空格分隔。\n# ALLOWED_IFRAME_ANCESTORS=\n \n## 允许的 connect-src（了解风险！）\n## https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/connect-src\n## 允许其他域加载使用脚本接口（如转发电子邮件别名功能）的 URL。\n## 此值将被添加到 'Content-Security-Policy' 头部的 'connect-src' 值中。\n## 多个值必须用空格分隔，并且只允许 HTTPS 值。\n## 示例：\"https://my-addy-io.domain.tld https://my-simplelogin.domain.tld\"\n# ALLOWED_CONNECT_SRC=\"\"\n \n## 在相同的 IP 地址下，两次登录请求之间的平均秒数，超过这个时间限制才会触发限速。\n# LOGIN_RATELIMIT_SECONDS=60\n## 允许的最大突发请求数，同时保持由 `LOGIN_RATELIMIT_SECONDS` 指定的平均值。\n## 注意：这适用于登录和两步验证，因此建议至少允许突发大小为 2。\n# LOGIN_RATELIMIT_MAX_BURST=10\n \n## BETA 功能：组\n## 控制组织是否启用组支持。\n## 此设置适用于组织。\n## 默认情况下禁用，因为这是一个 Beta 功能，包含已知问题！\n## 了解你在做什么！\n# ORG_GROUPS_ENABLED=false\n \n## 增加安全笔记大小限制（了解风险！）\n## 将安全笔记大小限制设置为 100_000 而不是默认的 10_000。\n## 警告：这可能导致客户端出现问题。此外，在 Bitwarden 服务器上导出将不起作用！\n## 了解你在做什么！\n# INCREASE_NOTE_SIZE_LIMIT=false\n \n## 强制单组织策略与重置密码策略\n## 强制在启用重置密码策略之前启用单组织策略。\n## Bitwarden 默认强制执行此策略。在 Vaultwarden 中，我们鼓励使用多个组织，因为组不可用。\n## 将此设置为 true 将在启用重置密码策略之前强制启用单组织策略。\n# ENFORCE_SINGLE_ORG_WITH_RESET_PW_POLICY=false\n \n########################\n### MFA/2FA 设置 ###\n########################\n \n## Yubico (Yubikey) 设置\n## 设置您的 Yubikey OTP 的 Client ID 和 Secret Key。\n## 您可以在此生成：https://upgrade.yubico.com/getapikey/\n## 您也可以选择指定一个自定义的 OTP 服务器。\n# YUBICO_CLIENT_ID=11111\n# YUBICO_SECRET_KEY=AAAAAAAAAAAAAAAAAAAAAAAA\n# YUBICO_SERVER=http://yourdomain.com/wsapi/2.0/verify\n \n## Duo 设置\n## 您需要配置 DUO_IKEY, DUO_SKEY 和 DUO_HOST 选项以启用全局 Duo 支持。\n## 否则用户需要自己配置这些设置。\n## 创建账户并保护应用程序，请参阅此链接（仅第一步，其余步骤忽略）：\n## https://help.bitwarden.com/article/setup-two-step-login-duo/#create-a-duo-security-account\n## 然后根据最后一步获得的值设置以下选项：\n# DUO_IKEY=<Client ID>\n# DUO_SKEY=<Client Secret>\n# DUO_HOST=<API Hostname>\n## 之后，您可以继续按照上述链接中的指南操作，\n## 忽略那些您已经预先配置的字段。\n##\n## 如果您想尝试使用 Duo 的 'Traditional Prompt'（已弃用，基于 iframe），将 DUO_USE_IFRAME 设置为 'true'。\n## Duo 不再支持此功能，但某些集成仍然有效。\n## 如果不确定，请忽略此设置。\n# DUO_USE_IFRAME=false\n \n## 邮件 2FA 设置\n## 邮件令牌大小\n## 邮件 2FA 令牌中的数字位数（最小：6，最大：255）。\n## 注意：无论此设置如何，Bitwarden 客户端都硬编码为提及 6 位代码！\n# EMAIL_TOKEN_SIZE=6\n##\n## 令牌过期时间\n## 令牌有效的最长时间（秒）。用户打开邮件客户端并复制令牌的时间。\n# EMAIL_EXPIRATION_TIME=600\n##\n## 在重置邮件令牌并需要发送新邮件之前的最大尝试次数。\n# EMAIL_ATTEMPTS_LIMIT=3\n##\n## 无论任何组织策略，设置邮件 2FA\n# EMAIL_2FA_ENFORCE_ON_VERIFIED_INVITE=false\n## 在需要时自动设置邮件 2FA 作为备用提供程序\n# EMAIL_2FA_AUTO_FALLBACK=false\n \n## 其他 MFA/2FA 设置\n## 禁用记住 2FA\n## 启用此选项将强制用户每次登录时使用第二因素。\n## 注意：复选框仍然会显示，但会被忽略。\n# DISABLE_2FA_REMEMBER=false\n##\n## 身份验证器设置\n## 禁用身份验证器时间偏移代码的有效性。\n## 前 30 秒和后 30 秒的身份验证代码将无效。\n##\n## 根据 RFC6238（https://tools.ietf.org/html/rfc6238），\n## 我们默认允许前一步和下一步的有效 TOTP 代码。\n## 但是，这可能会让攻击者更容易成功，因为有 3 个有效的代码。\n## 您可以禁用此功能，以便只允许当前的 TOTP 代码。\n## 请注意，如果服务器时间偏移，有效的代码可能会被标记为无效。\n## 无论如何，一旦代码被使用，它就不能再次使用，并且之前的所有代码也将无效。\n# AUTHENTICATOR_DISABLE_TIME_DRIFT=false\n \n###########################\n### SMTP 邮件设置 ###\n###########################\n \n## 邮件特定设置，设置 SMTP_FROM 并设置 SMTP_HOST 或 USE_SENDMAIL 以启用邮件服务。\n## 为了确保电子邮件链接指向正确的主机，请设置 DOMAIN 变量。\n## 注意：如果指定了 SMTP_USERNAME，则必须指定 SMTP_PASSWORD。\n# SMTP_HOST=smtp.domain.tld\n# SMTP_FROM=vaultwarden@domain.tld\n# SMTP_FROM_NAME=Vaultwarden\n# SMTP_USERNAME=username\n# SMTP_PASSWORD=password\n# SMTP_TIMEOUT=15\n \n## 选择用于 SMTP 的安全连接类型。默认是 \"starttls\"。\n## 可用选项包括：\n## - \"starttls\": 默认端口是 587。\n## - \"force_tls\": 默认端口是 465。\n## - \"off\": 默认端口是 25。\n## 端口 587（提交）和 25（smtp）是标准无加密和通过 STARTTLS 加密的连接。端口 465（提交）用于加密提交（隐式 TLS）。\n# SMTP_SECURITY=starttls\n# SMTP_PORT=587\n \n# 是否通过 `sendmail` 命令发送邮件\n# USE_SENDMAIL=false\n# 使用哪个 sendmail 命令。如果没有指定，则使用 $PATH 中找到的命令。\n# SENDMAIL_COMMAND=\"/path/to/sendmail\"\n \n## 默认情况下 SSL 是 \"Plain\" 和 \"Login\"，非 SSL 连接不使用任何机制。\n## 可能的值：[\"Plain\", \"Login\", \"Xoauth2\"]。\n## 多个选项需要用逗号 ',' 分隔。\n# SMTP_AUTH_MECHANISM=\n \n## 发送 SMTP HELO 时使用的服务器名称\n## 默认情况下，该值应该是机器的主机名，\n## 但如果触发了一些反垃圾邮件过滤器，则可能需要更改此值。\n# HELO_NAME=\n \n## 将图像嵌入为邮件附件\n# SMTP_EMBED_IMAGES=true\n \n## SMTP 调试\n## 当设置为 true 时，这将输出非常详细的 SMTP 消息。\n## 警告：这可能包含敏感信息如密码和用户名！仅在故障排除时启用！\n# SMTP_DEBUG=false\n \n## 接受无效证书\n## 危险：此选项引入了中间人攻击的重大漏洞！\n## 仅在无法使用有效证书时作为最后手段使用。\n## 如果证书有效但主机名不匹配，请使用 SMTP_ACCEPT_INVALID_HOSTNAMES。\n# SMTP_ACCEPT_INVALID_CERTS=false\n \n## 接受无效主机名\n## 危险：此选项引入了中间人攻击的重大漏洞！\n## 仅在无法使用有效证书时作为最后手段使用。\n# SMTP_ACCEPT_INVALID_HOSTNAMES=false\n \n#######################\n### Rocket 设置 ###\n#######################\n \n## Rocket 特定设置\n## 详情请参见：https://rocket.rs/v0.5/guide/configuration/\n# ROCKET_ADDRESS=0.0.0.0\n## 默认端口是 8000，除非在 Docker 容器中运行，在这种情况下，默认端口是 80。\n# ROCKET_PORT=8000\n# ROCKET_TLS={certs=\"/path/to/certs.pem\",key=\"/path/to/key.pem\"}\n \n# vim: syntax=ini\n```\n\n‍\n\n‍\n\ndocker-compose\n\n```yaml\nservices:\n  vaultwarden:\n    image: 'docker.olinl.com.cn/vaultwarden/server:latest'\n    container_name: bitwarden\n    hostname: bitwarden\n    restart: always\n    environment:\n      DOMAIN: \"https://passwd.jianglin.cc\"\n    volumes:\n      - ./data/:/data/\n    #ports: # 映射端口：需要反向代理到域名\n    #  - 8092:80\n# 个人配置\n    networks:\n      - net\nnetworks:\n  net:\n    external: true\n    name: lin-net\n```\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/bitwarden.md","raw":"---\ntitle: Docker-compose实例 bitwarden\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - bitwarden\nabbrlink: db3\ndate: 2025-02-24 21:33:08\n---\n\nBitwarden 支持全平台的开源密码管理器\n\nGitHub：[Bitwarden](https://github.com/bitwarden)\n\n官网：[https://bitwarden.com](https://bitwarden.com)\n\n\n自建：[vaultwarden](https://github.com/dani-garcia/vaultwarden)\n\n环境变量说明：[.env.template](https://github.com/dani-garcia/vaultwarden/blob/main/.env.template)\n\n```env\n# shellcheck disable=SC2034,SC2148\n## Vaultwarden 配置文件\n## 取消注释以下任何行以更改默认设置\n##\n## 请注意，如果在管理员界面中更改了这些设置，则大多数设置将被覆盖。这些覆盖会存储在 DATA_FOLDER/config.json 文件中。\n##\n## 默认情况下，Vaultwarden 希望此文件名为“.env”，并位于当前工作目录中。如果不是这种情况，可以在启动 Vaultwarden 之前设置环境变量 ENV_FILE 指向此文件的位置。\n \n####################\n### 数据文件夹 ###\n####################\n \n## 主数据文件夹\n# DATA_FOLDER=data\n \n## 单独的文件夹，这些选项会覆盖 %DATA_FOLDER%\n# RSA_KEY_FILENAME=data/rsa_key\n# ICON_CACHE_FOLDER=data/icon_cache\n# ATTACHMENTS_FOLDER=data/attachments\n# SENDS_FOLDER=data/sends\n# TMP_FOLDER=data/tmp\n \n## 模板数据文件夹，默认使用嵌入式模板\n## 查看源代码以了解格式\n# TEMPLATES_FOLDER=data/templates\n## 对每个请求自动重新加载模板，较慢，仅用于开发环境\n# RELOAD_TEMPLATES=false\n \n## Web 密码库设置\n# WEB_VAULT_FOLDER=web-vault/\n# WEB_VAULT_ENABLED=true\n \n#########################\n### 数据库设置 ###\n#########################\n \n## 数据库 URL\n## 使用 SQLite 时，这是 DB 文件的路径，默认为 %DATA_FOLDER%/db.sqlite3\n# DATABASE_URL=data/db.sqlite3\n## 使用 MySQL 时，请指定适当的连接 URI。\n## 详情：https://docs.diesel.rs/2.1.x/diesel/mysql/struct.MysqlConnection.html\n# DATABASE_URL=mysql://用户名:密码@主机[:端口]/数据库名\n## 使用 PostgreSQL 时，请指定适当的连接 URI（推荐）或关键字/值连接字符串。\n## 详情：\n## - https://docs.diesel.rs/2.1.x/diesel/pg/struct.PgConnection.html\n## - https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING\n# DATABASE_URL=postgresql://用户名:密码@主机[:端口]/数据库名\n \n## 启用 WAL（预写日志）\n## 设置为 false 以避免在启动时启用 WAL。\n## 注意，如果数据库已启用 WAL，您还需要在数据库中禁用 WAL，此设置仅阻止 Vaultwarden 在启动时自动启用它。\n## 请先阅读项目 wiki 页面中的相关设置，因为修改此值可能会导致性能下降或使服务无法启动。\n# ENABLE_DB_WAL=true\n \n## 数据库连接重试次数\n## 启动期间尝试连接数据库的次数，每次重试间隔 1 秒，设置为 0 表示无限次重试\n# DB_CONNECTION_RETRIES=15\n \n## 数据库超时时间\n## 获取数据库连接的超时时间\n# DATABASE_TIMEOUT=30\n \n## 数据库最大连接数\n## 定义用于连接数据库的连接池大小。\n# DATABASE_MAX_CONNS=10\n \n## 数据库连接初始化\n## 允许在创建新数据库连接时运行 SQL 语句。\n## 这主要用于连接范围的指令。\n## 如果为空，则使用数据库特定的默认值：\n## - SQLite: \"PRAGMA busy_timeout = 5000; PRAGMA synchronous = NORMAL;\"\n## - MySQL: \"\"\n## - PostgreSQL: \"\"\n# DATABASE_CONN_INIT=\"\"\n \n#################\n### WebSocket ###\n#################\n \n## 启用 WebSocket 通知\n# ENABLE_WEBSOCKET=true\n \n##########################\n### 推送通知 ###\n##########################\n \n## 启用推送通知（需要从 https://bitwarden.com/host 获取密钥和 ID）\n## 关于移动客户端推送通知的详情：\n## - https://github.com/dani-garcia/vaultwarden/wiki/Enabling-Mobile-Client-push-notification\n# PUSH_ENABLED=false\n# PUSH_INSTALLATION_ID=请替换此处\n# PUSH_INSTALLATION_KEY=请替换此处\n \n# 警告：除非完全理解其含义，否则不要修改以下设置！\n# 默认推送中继和身份验证 URI\n# PUSH_RELAY_URI=https://push.bitwarden.com\n# PUSH_IDENTITY_URI=https://identity.bitwarden.com\n# 欧盟数据区域设置\n# 如果选择了“欧盟”作为您的数据区域，请使用以下 URI：\n# PUSH_RELAY_URI=https://api.bitwarden.eu\n# PUSH_IDENTITY_URI=https://identity.bitwarden.eu\n \n#####################\n### 计划任务 ###\n#####################\n \n## 计划任务设置\n##\n## 任务计划使用类似 cron 的语法（由 https://crates.io/crates/cron 解析），并且始终基于 UTC 时间（无论您的本地时区设置如何）。\n##\n## 该格式与 crontab 略有不同，因为 crontab 不包含秒。\n## 您可以在这里测试格式：https://crontab.guru，但请删除第一个数字！\n## 秒   分   小时   月份中的某天    月   星期中的某天\n## \"0   30   9,12,15     1,15       May-Aug  Mon,Wed,Fri\"\n## \"0   30     *          *            *          *     \"\n## \"0   30     1          *            *          *     \"\n##\n## 工作调度线程检查需要运行的任务的时间间隔（毫秒）。设置为 0 可全局禁用计划任务。\n# JOB_POLL_INTERVAL_MS=30000\n##\n## 检查已过删除日期的发送任务的计划。默认每小时一次（整点后 5 分钟）。留空可禁用此任务。\n# SEND_PURGE_SCHEDULE=\"0 5 * * * *\"\n##\n## 检查应永久删除的垃圾箱项目的计划。默认每天一次（午夜后 5 分钟）。留空可禁用此任务。\n# TRASH_PURGE_SCHEDULE=\"0 5 0 * * *\"\n##\n## 检查未完成的双因素登录的计划。默认每分钟一次。留空可禁用此任务。\n# INCOMPLETE_2FA_SCHEDULE=\"30 * * * * *\"\n##\n## 发送紧急访问授权人到期提醒的计划。默认每小时一次（整点后 3 分钟）。留空可禁用此任务。\n# EMERGENCY_NOTIFICATION_REMINDER_SCHEDULE=\"0 3 * * * *\"\n##\n## 处理已达到等待时间的紧急访问请求的计划。默认每小时一次（整点后 7 分钟）。留空可禁用此任务。\n# EMERGENCY_REQUEST_TIMEOUT_SCHEDULE=\"0 7 * * * *\"\n##\n## 清理事件表中旧事件的计划。默认每天执行一次。如果不设置 EVENTS_DAYS_RETAIN，此任务不会启动。\n# EVENT_CLEANUP_SCHEDULE=\"0 10 0 * * *\"\n## 数据库中保留事件的天数。\n## 如果未设置（默认），事件将无限期保留，并禁用计划任务！\n# EVENTS_DAYS_RETAIN=\n##\n## 清理数据库中旧认证请求的计划。默认每分钟一次。留空可禁用此任务。\n# AUTH_REQUEST_PURGE_SCHEDULE=\"30 * * * * *\"\n##\n## 清理数据库中过期的 Duo 上下文的计划。如果 Duo MFA 被禁用或设置为使用旧版 iframe 提示，则不执行操作。默认每分钟一次。留空可禁用此任务。\n# DUO_CONTEXT_PURGE_SCHEDULE=\"30 * * * * *\"\n \n########################\n### 通用设置 ###\n########################\n \n## 域名设置\n## 域名必须与您访问服务器的地址匹配。\n## 推荐配置此值，否则某些功能可能无法工作，如附件下载、电子邮件链接和U2F。\n## 要使 U2F 正常工作，服务器必须使用 HTTPS，您可以使用 Let's Encrypt 获取免费证书。\n## 使用 HTTPS 的推荐方式是将 Vaultwarden 放在反向代理后面。\n## 详情：\n## - https://github.com/dani-garcia/vaultwarden/wiki/Enabling-HTTPS\n## - https://github.com/dani-garcia/vaultwarden/wiki/Proxy-examples\n## 开发环境\n# DOMAIN=http://localhost\n## 公共服务器\n# DOMAIN=https://vw.domain.tld\n## 公共服务器（带端口号的URL）\n# DOMAIN=https://vw.domain.tld:8443\n## 公共服务器（带路径的URL）\n# DOMAIN=https://domain.tld/vw\n \n## 控制是否允许用户创建 Bitwarden Sends。\n## 此设置对所有用户全局适用。\n## 若要按组织控制此设置，请使用“禁用发送”组织策略。\n# SENDS_ALLOWED=true\n \n## HIBP API 密钥\n## HaveIBeenPwned API 密钥，可在此请求：https://haveibeenpwned.com/API/Key\n# HIBP_API_KEY=\n \n## 每个组织的附件存储限制（KB）\n## 每个组织允许的最大附件存储量（以 KB 为单位）。\n## 当达到此限制时，组织成员将不允许上传更多属于该组织的密码附件。\n# ORG_ATTACHMENT_LIMIT=\n## 每个用户的附件存储限制（KB）\n## 每个用户允许的最大附件存储量（以 KB 为单位）。\n## 当达到此限制时，用户将不允许上传更多附件。\n# USER_ATTACHMENT_LIMIT=\n## 每个用户的发送存储限制（KB）\n## 每个用户允许的最大发送存储量（以 KB 为单位）。\n## 当达到此限制时，用户将不允许上传更多发送内容。\n# USER_SEND_LIMIT=\n \n## 在自动删除已放入回收站的项目前等待的天数。\n## 如果未设置（默认），则不会自动删除回收站中的项目。\n## 此设置全局适用，因此请确保通知所有用户有关此设置的任何更改。\n# TRASH_AUTO_DELETE_DAYS=\n \n## 等待多少分钟后认为两次验证登录不完整，并触发电子邮件通知。不完整的两次验证登录是指提供了正确的主密码但未完成所需的二次验证步骤，这可能表示主密码被泄露。设置为 0 可禁用此检查。\n## 此设置对所有用户全局适用。\n# INCOMPLETE_2FA_TIME_LIMIT=3\n \n## 禁用图标下载\n## 设置为 true 以禁用内部图标服务中的图标下载。\n## 这仍然会从 $ICON_CACHE_FOLDER 提供现有图标，而不生成任何外部网络请求。$ICON_CACHE_TTL 也必须设置为 0；否则，现有的图标最终会被删除，但不会再被下载。\n# DISABLE_ICON_DOWNLOAD=false\n \n## 控制是否允许新用户注册\n# SIGNUPS_ALLOWED=true\n \n## 控制新用户注册时是否需要验证其电子邮件地址。\n## 注意，如果将此选项设置为 true，则在验证电子邮件地址之前禁止登录！\n## 欢迎邮件中会包含一个验证链接，尝试登录时会定期触发重新发送验证邮件。\n# SIGNUPS_VERIFY=false\n \n## 如果 SIGNUPS_VERIFY 设置为 true，这限制了自上次发送电子邮件验证链接后多长时间会再次发送验证邮件（秒）\n# SIGNUPS_VERIFY_RESEND_TIME=3600\n \n## 如果 SIGNUPS_VERIFY 设置为 true，这限制了尝试登录时可以重新发送验证邮件的最大次数。\n# SIGNUPS_VERIFY_RESEND_LIMIT=6\n \n## 控制来自逗号分隔域名列表的新用户是否可以注册，即使 SIGNUPS_ALLOWED 设置为 false\n# SIGNUPS_DOMAINS_WHITELIST=example.com,example.net,example.org\n \n## 控制是否为组织启用事件日志记录。\n## 此设置适用于组织。\n## 默认情况下禁用。还需检查 EVENT_CLEANUP_SCHEDULE 和 EVENTS_DAYS_RETAIN 设置。\n# ORG_EVENTS_ENABLED=false\n \n## 控制哪些用户可以创建新的组织。\n## 空或 'all' 表示所有用户都可以创建组织（这是默认值）：\n# ORG_CREATION_USERS=\n## 'none' 表示没有用户可以创建组织：\n# ORG_CREATION_USERS=none\n## 逗号分隔列表表示只有这些用户可以创建组织：\n# ORG_CREATION_USERS=admin1@example.com,admin2@example.com\n \n## 即使注册被禁用，邀请组织管理员邀请用户\n# INVITATIONS_ALLOWED=true\n## 在不属于特定组织的邀请电子邮件中显示的名称\n# INVITATION_ORG_NAME=Vaultwarden\n \n## 组织邀请令牌、紧急访问邀请令牌、电子邮件验证令牌和删除请求令牌将在多少小时后过期（必须至少为 1 小时）\n# INVITATION_EXPIRATION_HOURS=120\n \n## 控制用户是否可以启用对其帐户的紧急访问。\n## 此设置对所有用户全局适用。\n# EMERGENCY_ACCESS_ALLOWED=true\n \n## 控制用户是否可以更改其电子邮件。\n## 此设置对所有用户全局适用。\n# EMAIL_CHANGE_ALLOWED=true\n \n## 密码哈希迭代次数用于服务器端密码哈希。\n## 新用户的默认值。如果更改，会在用户下次登录时更新现有用户的设置。\n# PASSWORD_ITERATIONS=600000\n \n## 控制用户是否可以设置或显示密码提示。此设置对所有用户全局适用。\n# PASSWORD_HINTS_ALLOWED=true\n \n## 控制当 SMTP 服务未配置且允许密码提示时，是否应在网页上直接显示密码提示。\n## 不建议在公共可访问实例上使用，因为这会提供对潜在敏感数据的未经授权访问。\n# SHOW_PASSWORD_HINT=false\n \n#########################\n### 高级设置 ###\n#########################\n \n## 客户端 IP 头，用于识别客户端的 IP，默认为 \"X-Real-IP\"\n## 设置为字符串 \"none\"（不带引号），以禁用任何头并仅使用远程 IP\n# IP_HEADER=X-Real-IP\n \n## 图标服务\n## 预定义的图标服务有：internal, bitwarden, duckduckgo, google。\n## 要指定自定义图标服务，请设置一个包含一个 `{}` 的 URL 模板，该模板会被替换为域名。例如：`https://icon.example.com/domain/{}`。\n##\n## `internal` 指的是 Vaultwarden 内置的图标获取实现。\n## 如果设置了外部服务，对 Vaultwarden 的图标请求将返回 HTTP 重定向到外部服务上的相应图标。外部服务可能在您的 Vaultwarden 实例没有外部网络连接时有用，或者如果您担心有人可能会探测您的实例以尝试检测某些站点的图标是否已缓存。\n# ICON_SERVICE=internal\n \n## 图标重定向代码\n## 用于重定向到外部图标服务的 HTTP 状态码。\n## 支持的代码有 301（永久）、302（临时）、307（临时）和 308（永久）。临时重定向在测试不同的图标服务时很有用，但一旦确定了服务，建议使用永久重定向以提高缓存能力。旧版代码目前在 Bitwarden 客户端中支持得更好。\n# ICON_REDIRECT_CODE=302\n \n## 成功获取的图标的缓存生存时间（秒），0 表示“永远”\n## 默认值：2592000（30天）\n# ICON_CACHE_TTL=2592000\n## 未找到的图标的缓存生存时间（秒），0 表示“永远”\n## 默认值：259200（3天）\n# ICON_CACHE_NEGTTL=259200\n \n## 图标下载超时\n## 配置下载 favicon 时的超时值。\n## 默认是 10 秒，但在较慢的网络连接上可能过低。\n# ICON_DOWNLOAD_TIMEOUT=10\n \n## 通过正则表达式阻止 HTTP 域名/IP\n## 任何匹配此正则表达式的域名或 IP 都不会被内部 HTTP 客户端获取。\n## 对于隐藏本地网络中的其他服务器很有用。更多信息请参阅 WIKI。\n## 注意：始终将此正则表达式用单引号括起来！\n# HTTP_REQUEST_BLOCK_REGEX='^(192\\.168\\.0\\.[0-9]+|192\\.168\\.1\\.[0-9]+)$'\n \n## 启用此选项将导致内部 HTTP 客户端拒绝连接到任何非全局 IP 地址。\n## 用于保护内部环境：参见 https://en.wikipedia.org/wiki/Reserved_IP_addresses 了解其会阻止的 IP 列表。\n# HTTP_REQUEST_BLOCK_NON_GLOBAL_IPS=true\n \n## 客户端设置\n## 启用客户端的实验性功能标志。\n## 这是一个逗号分隔的功能标志列表，例如 \"flag1,flag2,flag3\"。\n##\n## 可用的标志如下：\n## - \"autofill-overlay\": 在表单字段中添加一个覆盖菜单，以便快速访问凭据。\n## - \"autofill-v2\": 使用新的自动填充实现。\n## - \"browser-fileless-import\": 直接从其他提供商导入凭据而无需文件。\n## - \"extension-refresh\": 临时启用新扩展设计直到正式发布（应与 beta Chrome 扩展一起使用）。\n## - \"fido2-vault-credentials\": 启用 FIDO2 安全密钥作为第二因素。\n## - \"inline-menu-positioning-improvements\": 启用浏览器扩展中的内联菜单密码生成器和身份建议。\n## - \"ssh-key-vault-item\": 启用 SSH 密钥保险库项的创建和使用。（需要客户端 >=2024.12.0）\n## - \"ssh-agent\": 在桌面上启用 SSH 代理支持。（需要桌面 >=2024.12.0）\n# EXPERIMENTAL_CLIENT_FEATURE_FLAGS=fido2-vault-credentials\n \n## 要求新设备电子邮件。当用户登录时需要发送一封电子邮件。\n## 如果发送电子邮件失败，则登录尝试将失败！\n# REQUIRE_DEVICE_EMAIL=false\n \n## 启用扩展日志记录，这将在日志中显示时间戳和目标。\n# EXTENDED_LOGGING=true\n \n## 扩展日志记录的时间戳格式。\n## 格式说明符：https://docs.rs/chrono/latest/chrono/format/strftime\n# LOG_TIMESTAMP_FORMAT=\"%Y-%m-%d %H:%M:%S.%3f\"\n \n## 日志记录到 Syslog\n## 这需要扩展日志记录\n# USE_SYSLOG=false\n \n## 记录到文件\n# LOG_FILE=/path/to/log\n \n## 日志级别\n## 更改日志输出的详细程度。\n## 有效值为 \"trace\", \"debug\", \"info\", \"warn\", \"error\" 和 \"off\"。\n## 将其设置为 \"trace\" 或 \"debug\" 也会显示挂载路由和静态文件、WebSocket 和 alive 请求的日志。\n## 对于特定模块，可以附加一个逗号分隔的 `path::to::module=log_level`\n## 例如，要只为图标查看 info 日志，使用：LOG_LEVEL=\"info,vaultwarden::api::icons=debug\"\n# LOG_LEVEL=info\n \n## 管理界面的令牌，最好是 Argon2 PHC 字符串。\n## Vaultwarden 提供了一个内置生成器，可以通过调用 `vaultwarden hash` 来生成。\n## 详情请参阅：https://github.com/dani-garcia/vaultwarden/wiki/Enabling-admin-page#secure-the-admin_token\n## 如果未设置，管理面板将被禁用。\n## 新的 Argon2 PHC 字符串\n## 注意，在某些环境中，如 docker-compose 中，您需要将所有美元符号 `$` 转义为两个美元符号 `$$`。\n## 并且在必要时使用单引号 (') 而不是双引号 (\") 包含字符串。\n# ADMIN_TOKEN='$argon2id$v=19$m=65540,t=3,p=4$MmeKRnGK5RW5mJS7h3TOL89GrpLPXJPAtTK8FTqj9HM$DqsstvoSAETl9YhnsXbf43WeaUwJC6JhViIvuPoig78'\n## 旧的明文字符串（会产生警告，建议使用 Argon2）\n# ADMIN_TOKEN=Vy2VyYTTsKPv8W5aEOWUbB/Bt3DEKePbHmI4m9VcemUMS2rEviDowNAFqYi1xjmp\n \n## 启用此选项以绕过管理面板的安全性。此选项仅适用于前面带有单独认证层的情况。\n# DISABLE_ADMIN_TOKEN=false\n \n## 在相同的 IP 地址下，两次管理登录请求之间的平均秒数，超过这个时间限制才会触发限速。\n# ADMIN_RATELIMIT_SECONDS=300\n## 允许的最大突发请求数，同时保持由 `ADMIN_RATELIMIT_SECONDS` 指定的平均值。\n# ADMIN_RATELIMIT_MAX_BURST=3\n \n## 设置管理员会话的有效期为此值（分钟）。\n# ADMIN_SESSION_LIFETIME=20\n \n## 允许的 iframe 祖先（了解风险！）\n## https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-ancestors\n## 允许其他域嵌入 web vault 到 iframe 中，便于嵌入安全的内部网。\n## 此值将被添加到 'Content-Security-Policy' 头部的 'frame-ancestors' 值中。\n## 多个值必须用空格分隔。\n# ALLOWED_IFRAME_ANCESTORS=\n \n## 允许的 connect-src（了解风险！）\n## https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/connect-src\n## 允许其他域加载使用脚本接口（如转发电子邮件别名功能）的 URL。\n## 此值将被添加到 'Content-Security-Policy' 头部的 'connect-src' 值中。\n## 多个值必须用空格分隔，并且只允许 HTTPS 值。\n## 示例：\"https://my-addy-io.domain.tld https://my-simplelogin.domain.tld\"\n# ALLOWED_CONNECT_SRC=\"\"\n \n## 在相同的 IP 地址下，两次登录请求之间的平均秒数，超过这个时间限制才会触发限速。\n# LOGIN_RATELIMIT_SECONDS=60\n## 允许的最大突发请求数，同时保持由 `LOGIN_RATELIMIT_SECONDS` 指定的平均值。\n## 注意：这适用于登录和两步验证，因此建议至少允许突发大小为 2。\n# LOGIN_RATELIMIT_MAX_BURST=10\n \n## BETA 功能：组\n## 控制组织是否启用组支持。\n## 此设置适用于组织。\n## 默认情况下禁用，因为这是一个 Beta 功能，包含已知问题！\n## 了解你在做什么！\n# ORG_GROUPS_ENABLED=false\n \n## 增加安全笔记大小限制（了解风险！）\n## 将安全笔记大小限制设置为 100_000 而不是默认的 10_000。\n## 警告：这可能导致客户端出现问题。此外，在 Bitwarden 服务器上导出将不起作用！\n## 了解你在做什么！\n# INCREASE_NOTE_SIZE_LIMIT=false\n \n## 强制单组织策略与重置密码策略\n## 强制在启用重置密码策略之前启用单组织策略。\n## Bitwarden 默认强制执行此策略。在 Vaultwarden 中，我们鼓励使用多个组织，因为组不可用。\n## 将此设置为 true 将在启用重置密码策略之前强制启用单组织策略。\n# ENFORCE_SINGLE_ORG_WITH_RESET_PW_POLICY=false\n \n########################\n### MFA/2FA 设置 ###\n########################\n \n## Yubico (Yubikey) 设置\n## 设置您的 Yubikey OTP 的 Client ID 和 Secret Key。\n## 您可以在此生成：https://upgrade.yubico.com/getapikey/\n## 您也可以选择指定一个自定义的 OTP 服务器。\n# YUBICO_CLIENT_ID=11111\n# YUBICO_SECRET_KEY=AAAAAAAAAAAAAAAAAAAAAAAA\n# YUBICO_SERVER=http://yourdomain.com/wsapi/2.0/verify\n \n## Duo 设置\n## 您需要配置 DUO_IKEY, DUO_SKEY 和 DUO_HOST 选项以启用全局 Duo 支持。\n## 否则用户需要自己配置这些设置。\n## 创建账户并保护应用程序，请参阅此链接（仅第一步，其余步骤忽略）：\n## https://help.bitwarden.com/article/setup-two-step-login-duo/#create-a-duo-security-account\n## 然后根据最后一步获得的值设置以下选项：\n# DUO_IKEY=<Client ID>\n# DUO_SKEY=<Client Secret>\n# DUO_HOST=<API Hostname>\n## 之后，您可以继续按照上述链接中的指南操作，\n## 忽略那些您已经预先配置的字段。\n##\n## 如果您想尝试使用 Duo 的 'Traditional Prompt'（已弃用，基于 iframe），将 DUO_USE_IFRAME 设置为 'true'。\n## Duo 不再支持此功能，但某些集成仍然有效。\n## 如果不确定，请忽略此设置。\n# DUO_USE_IFRAME=false\n \n## 邮件 2FA 设置\n## 邮件令牌大小\n## 邮件 2FA 令牌中的数字位数（最小：6，最大：255）。\n## 注意：无论此设置如何，Bitwarden 客户端都硬编码为提及 6 位代码！\n# EMAIL_TOKEN_SIZE=6\n##\n## 令牌过期时间\n## 令牌有效的最长时间（秒）。用户打开邮件客户端并复制令牌的时间。\n# EMAIL_EXPIRATION_TIME=600\n##\n## 在重置邮件令牌并需要发送新邮件之前的最大尝试次数。\n# EMAIL_ATTEMPTS_LIMIT=3\n##\n## 无论任何组织策略，设置邮件 2FA\n# EMAIL_2FA_ENFORCE_ON_VERIFIED_INVITE=false\n## 在需要时自动设置邮件 2FA 作为备用提供程序\n# EMAIL_2FA_AUTO_FALLBACK=false\n \n## 其他 MFA/2FA 设置\n## 禁用记住 2FA\n## 启用此选项将强制用户每次登录时使用第二因素。\n## 注意：复选框仍然会显示，但会被忽略。\n# DISABLE_2FA_REMEMBER=false\n##\n## 身份验证器设置\n## 禁用身份验证器时间偏移代码的有效性。\n## 前 30 秒和后 30 秒的身份验证代码将无效。\n##\n## 根据 RFC6238（https://tools.ietf.org/html/rfc6238），\n## 我们默认允许前一步和下一步的有效 TOTP 代码。\n## 但是，这可能会让攻击者更容易成功，因为有 3 个有效的代码。\n## 您可以禁用此功能，以便只允许当前的 TOTP 代码。\n## 请注意，如果服务器时间偏移，有效的代码可能会被标记为无效。\n## 无论如何，一旦代码被使用，它就不能再次使用，并且之前的所有代码也将无效。\n# AUTHENTICATOR_DISABLE_TIME_DRIFT=false\n \n###########################\n### SMTP 邮件设置 ###\n###########################\n \n## 邮件特定设置，设置 SMTP_FROM 并设置 SMTP_HOST 或 USE_SENDMAIL 以启用邮件服务。\n## 为了确保电子邮件链接指向正确的主机，请设置 DOMAIN 变量。\n## 注意：如果指定了 SMTP_USERNAME，则必须指定 SMTP_PASSWORD。\n# SMTP_HOST=smtp.domain.tld\n# SMTP_FROM=vaultwarden@domain.tld\n# SMTP_FROM_NAME=Vaultwarden\n# SMTP_USERNAME=username\n# SMTP_PASSWORD=password\n# SMTP_TIMEOUT=15\n \n## 选择用于 SMTP 的安全连接类型。默认是 \"starttls\"。\n## 可用选项包括：\n## - \"starttls\": 默认端口是 587。\n## - \"force_tls\": 默认端口是 465。\n## - \"off\": 默认端口是 25。\n## 端口 587（提交）和 25（smtp）是标准无加密和通过 STARTTLS 加密的连接。端口 465（提交）用于加密提交（隐式 TLS）。\n# SMTP_SECURITY=starttls\n# SMTP_PORT=587\n \n# 是否通过 `sendmail` 命令发送邮件\n# USE_SENDMAIL=false\n# 使用哪个 sendmail 命令。如果没有指定，则使用 $PATH 中找到的命令。\n# SENDMAIL_COMMAND=\"/path/to/sendmail\"\n \n## 默认情况下 SSL 是 \"Plain\" 和 \"Login\"，非 SSL 连接不使用任何机制。\n## 可能的值：[\"Plain\", \"Login\", \"Xoauth2\"]。\n## 多个选项需要用逗号 ',' 分隔。\n# SMTP_AUTH_MECHANISM=\n \n## 发送 SMTP HELO 时使用的服务器名称\n## 默认情况下，该值应该是机器的主机名，\n## 但如果触发了一些反垃圾邮件过滤器，则可能需要更改此值。\n# HELO_NAME=\n \n## 将图像嵌入为邮件附件\n# SMTP_EMBED_IMAGES=true\n \n## SMTP 调试\n## 当设置为 true 时，这将输出非常详细的 SMTP 消息。\n## 警告：这可能包含敏感信息如密码和用户名！仅在故障排除时启用！\n# SMTP_DEBUG=false\n \n## 接受无效证书\n## 危险：此选项引入了中间人攻击的重大漏洞！\n## 仅在无法使用有效证书时作为最后手段使用。\n## 如果证书有效但主机名不匹配，请使用 SMTP_ACCEPT_INVALID_HOSTNAMES。\n# SMTP_ACCEPT_INVALID_CERTS=false\n \n## 接受无效主机名\n## 危险：此选项引入了中间人攻击的重大漏洞！\n## 仅在无法使用有效证书时作为最后手段使用。\n# SMTP_ACCEPT_INVALID_HOSTNAMES=false\n \n#######################\n### Rocket 设置 ###\n#######################\n \n## Rocket 特定设置\n## 详情请参见：https://rocket.rs/v0.5/guide/configuration/\n# ROCKET_ADDRESS=0.0.0.0\n## 默认端口是 8000，除非在 Docker 容器中运行，在这种情况下，默认端口是 80。\n# ROCKET_PORT=8000\n# ROCKET_TLS={certs=\"/path/to/certs.pem\",key=\"/path/to/key.pem\"}\n \n# vim: syntax=ini\n```\n\n‍\n\n‍\n\ndocker-compose\n\n```yaml\nservices:\n  vaultwarden:\n    image: 'docker.olinl.com.cn/vaultwarden/server:latest'\n    container_name: bitwarden\n    hostname: bitwarden\n    restart: always\n    environment:\n      DOMAIN: \"https://passwd.jianglin.cc\"\n    volumes:\n      - ./data/:/data/\n    #ports: # 映射端口：需要反向代理到域名\n    #  - 8092:80\n# 个人配置\n    networks:\n      - net\nnetworks:\n  net:\n    external: true\n    name: lin-net\n```\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/bitwarden","published":1,"updated":"2025-06-02T07:26:05.728Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86xv00bfzcqb3uts8pzu","content":"<p>Bitwarden 支持全平台的开源密码管理器</p>\n<p>GitHub：<a href=\"https://github.com/bitwarden\">Bitwarden</a></p>\n<p>官网：<a href=\"https://bitwarden.com/\">https://bitwarden.com</a></p>\n<p>自建：<a href=\"https://github.com/dani-garcia/vaultwarden\">vaultwarden</a></p>\n<p>环境变量说明：<a href=\"https://github.com/dani-garcia/vaultwarden/blob/main/.env.template\">.env.template</a></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br><span class=\"line\">518</span><br><span class=\"line\">519</span><br><span class=\"line\">520</span><br><span class=\"line\">521</span><br><span class=\"line\">522</span><br><span class=\"line\">523</span><br><span class=\"line\">524</span><br><span class=\"line\">525</span><br><span class=\"line\">526</span><br><span class=\"line\">527</span><br><span class=\"line\">528</span><br><span class=\"line\">529</span><br><span class=\"line\">530</span><br><span class=\"line\">531</span><br><span class=\"line\">532</span><br><span class=\"line\">533</span><br><span class=\"line\">534</span><br><span class=\"line\">535</span><br><span class=\"line\">536</span><br><span class=\"line\">537</span><br><span class=\"line\">538</span><br><span class=\"line\">539</span><br><span class=\"line\">540</span><br><span class=\"line\">541</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># shellcheck disable=SC2034,SC2148</span><br><span class=\"line\">## Vaultwarden 配置文件</span><br><span class=\"line\">## 取消注释以下任何行以更改默认设置</span><br><span class=\"line\">##</span><br><span class=\"line\">## 请注意，如果在管理员界面中更改了这些设置，则大多数设置将被覆盖。这些覆盖会存储在 DATA_FOLDER/config.json 文件中。</span><br><span class=\"line\">##</span><br><span class=\"line\">## 默认情况下，Vaultwarden 希望此文件名为“.env”，并位于当前工作目录中。如果不是这种情况，可以在启动 Vaultwarden 之前设置环境变量 ENV_FILE 指向此文件的位置。</span><br><span class=\"line\"> </span><br><span class=\"line\">####################</span><br><span class=\"line\">### 数据文件夹 ###</span><br><span class=\"line\">####################</span><br><span class=\"line\"> </span><br><span class=\"line\">## 主数据文件夹</span><br><span class=\"line\"># DATA_FOLDER=data</span><br><span class=\"line\"> </span><br><span class=\"line\">## 单独的文件夹，这些选项会覆盖 %DATA_FOLDER%</span><br><span class=\"line\"># RSA_KEY_FILENAME=data/rsa_key</span><br><span class=\"line\"># ICON_CACHE_FOLDER=data/icon_cache</span><br><span class=\"line\"># ATTACHMENTS_FOLDER=data/attachments</span><br><span class=\"line\"># SENDS_FOLDER=data/sends</span><br><span class=\"line\"># TMP_FOLDER=data/tmp</span><br><span class=\"line\"> </span><br><span class=\"line\">## 模板数据文件夹，默认使用嵌入式模板</span><br><span class=\"line\">## 查看源代码以了解格式</span><br><span class=\"line\"># TEMPLATES_FOLDER=data/templates</span><br><span class=\"line\">## 对每个请求自动重新加载模板，较慢，仅用于开发环境</span><br><span class=\"line\"># RELOAD_TEMPLATES=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## Web 密码库设置</span><br><span class=\"line\"># WEB_VAULT_FOLDER=web-vault/</span><br><span class=\"line\"># WEB_VAULT_ENABLED=true</span><br><span class=\"line\"> </span><br><span class=\"line\">#########################</span><br><span class=\"line\">### 数据库设置 ###</span><br><span class=\"line\">#########################</span><br><span class=\"line\"> </span><br><span class=\"line\">## 数据库 URL</span><br><span class=\"line\">## 使用 SQLite 时，这是 DB 文件的路径，默认为 %DATA_FOLDER%/db.sqlite3</span><br><span class=\"line\"># DATABASE_URL=data/db.sqlite3</span><br><span class=\"line\">## 使用 MySQL 时，请指定适当的连接 URI。</span><br><span class=\"line\">## 详情：https://docs.diesel.rs/2.1.x/diesel/mysql/struct.MysqlConnection.html</span><br><span class=\"line\"># DATABASE_URL=mysql://用户名:密码@主机[:端口]/数据库名</span><br><span class=\"line\">## 使用 PostgreSQL 时，请指定适当的连接 URI（推荐）或关键字/值连接字符串。</span><br><span class=\"line\">## 详情：</span><br><span class=\"line\">## - https://docs.diesel.rs/2.1.x/diesel/pg/struct.PgConnection.html</span><br><span class=\"line\">## - https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING</span><br><span class=\"line\"># DATABASE_URL=postgresql://用户名:密码@主机[:端口]/数据库名</span><br><span class=\"line\"> </span><br><span class=\"line\">## 启用 WAL（预写日志）</span><br><span class=\"line\">## 设置为 false 以避免在启动时启用 WAL。</span><br><span class=\"line\">## 注意，如果数据库已启用 WAL，您还需要在数据库中禁用 WAL，此设置仅阻止 Vaultwarden 在启动时自动启用它。</span><br><span class=\"line\">## 请先阅读项目 wiki 页面中的相关设置，因为修改此值可能会导致性能下降或使服务无法启动。</span><br><span class=\"line\"># ENABLE_DB_WAL=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## 数据库连接重试次数</span><br><span class=\"line\">## 启动期间尝试连接数据库的次数，每次重试间隔 1 秒，设置为 0 表示无限次重试</span><br><span class=\"line\"># DB_CONNECTION_RETRIES=15</span><br><span class=\"line\"> </span><br><span class=\"line\">## 数据库超时时间</span><br><span class=\"line\">## 获取数据库连接的超时时间</span><br><span class=\"line\"># DATABASE_TIMEOUT=30</span><br><span class=\"line\"> </span><br><span class=\"line\">## 数据库最大连接数</span><br><span class=\"line\">## 定义用于连接数据库的连接池大小。</span><br><span class=\"line\"># DATABASE_MAX_CONNS=10</span><br><span class=\"line\"> </span><br><span class=\"line\">## 数据库连接初始化</span><br><span class=\"line\">## 允许在创建新数据库连接时运行 SQL 语句。</span><br><span class=\"line\">## 这主要用于连接范围的指令。</span><br><span class=\"line\">## 如果为空，则使用数据库特定的默认值：</span><br><span class=\"line\">## - SQLite: &quot;PRAGMA busy_timeout = 5000; PRAGMA synchronous = NORMAL;&quot;</span><br><span class=\"line\">## - MySQL: &quot;&quot;</span><br><span class=\"line\">## - PostgreSQL: &quot;&quot;</span><br><span class=\"line\"># DATABASE_CONN_INIT=&quot;&quot;</span><br><span class=\"line\"> </span><br><span class=\"line\">#################</span><br><span class=\"line\">### WebSocket ###</span><br><span class=\"line\">#################</span><br><span class=\"line\"> </span><br><span class=\"line\">## 启用 WebSocket 通知</span><br><span class=\"line\"># ENABLE_WEBSOCKET=true</span><br><span class=\"line\"> </span><br><span class=\"line\">##########################</span><br><span class=\"line\">### 推送通知 ###</span><br><span class=\"line\">##########################</span><br><span class=\"line\"> </span><br><span class=\"line\">## 启用推送通知（需要从 https://bitwarden.com/host 获取密钥和 ID）</span><br><span class=\"line\">## 关于移动客户端推送通知的详情：</span><br><span class=\"line\">## - https://github.com/dani-garcia/vaultwarden/wiki/Enabling-Mobile-Client-push-notification</span><br><span class=\"line\"># PUSH_ENABLED=false</span><br><span class=\"line\"># PUSH_INSTALLATION_ID=请替换此处</span><br><span class=\"line\"># PUSH_INSTALLATION_KEY=请替换此处</span><br><span class=\"line\"> </span><br><span class=\"line\"># 警告：除非完全理解其含义，否则不要修改以下设置！</span><br><span class=\"line\"># 默认推送中继和身份验证 URI</span><br><span class=\"line\"># PUSH_RELAY_URI=https://push.bitwarden.com</span><br><span class=\"line\"># PUSH_IDENTITY_URI=https://identity.bitwarden.com</span><br><span class=\"line\"># 欧盟数据区域设置</span><br><span class=\"line\"># 如果选择了“欧盟”作为您的数据区域，请使用以下 URI：</span><br><span class=\"line\"># PUSH_RELAY_URI=https://api.bitwarden.eu</span><br><span class=\"line\"># PUSH_IDENTITY_URI=https://identity.bitwarden.eu</span><br><span class=\"line\"> </span><br><span class=\"line\">#####################</span><br><span class=\"line\">### 计划任务 ###</span><br><span class=\"line\">#####################</span><br><span class=\"line\"> </span><br><span class=\"line\">## 计划任务设置</span><br><span class=\"line\">##</span><br><span class=\"line\">## 任务计划使用类似 cron 的语法（由 https://crates.io/crates/cron 解析），并且始终基于 UTC 时间（无论您的本地时区设置如何）。</span><br><span class=\"line\">##</span><br><span class=\"line\">## 该格式与 crontab 略有不同，因为 crontab 不包含秒。</span><br><span class=\"line\">## 您可以在这里测试格式：https://crontab.guru，但请删除第一个数字！</span><br><span class=\"line\">## 秒   分   小时   月份中的某天    月   星期中的某天</span><br><span class=\"line\">## &quot;0   30   9,12,15     1,15       May-Aug  Mon,Wed,Fri&quot;</span><br><span class=\"line\">## &quot;0   30     *          *            *          *     &quot;</span><br><span class=\"line\">## &quot;0   30     1          *            *          *     &quot;</span><br><span class=\"line\">##</span><br><span class=\"line\">## 工作调度线程检查需要运行的任务的时间间隔（毫秒）。设置为 0 可全局禁用计划任务。</span><br><span class=\"line\"># JOB_POLL_INTERVAL_MS=30000</span><br><span class=\"line\">##</span><br><span class=\"line\">## 检查已过删除日期的发送任务的计划。默认每小时一次（整点后 5 分钟）。留空可禁用此任务。</span><br><span class=\"line\"># SEND_PURGE_SCHEDULE=&quot;0 5 * * * *&quot;</span><br><span class=\"line\">##</span><br><span class=\"line\">## 检查应永久删除的垃圾箱项目的计划。默认每天一次（午夜后 5 分钟）。留空可禁用此任务。</span><br><span class=\"line\"># TRASH_PURGE_SCHEDULE=&quot;0 5 0 * * *&quot;</span><br><span class=\"line\">##</span><br><span class=\"line\">## 检查未完成的双因素登录的计划。默认每分钟一次。留空可禁用此任务。</span><br><span class=\"line\"># INCOMPLETE_2FA_SCHEDULE=&quot;30 * * * * *&quot;</span><br><span class=\"line\">##</span><br><span class=\"line\">## 发送紧急访问授权人到期提醒的计划。默认每小时一次（整点后 3 分钟）。留空可禁用此任务。</span><br><span class=\"line\"># EMERGENCY_NOTIFICATION_REMINDER_SCHEDULE=&quot;0 3 * * * *&quot;</span><br><span class=\"line\">##</span><br><span class=\"line\">## 处理已达到等待时间的紧急访问请求的计划。默认每小时一次（整点后 7 分钟）。留空可禁用此任务。</span><br><span class=\"line\"># EMERGENCY_REQUEST_TIMEOUT_SCHEDULE=&quot;0 7 * * * *&quot;</span><br><span class=\"line\">##</span><br><span class=\"line\">## 清理事件表中旧事件的计划。默认每天执行一次。如果不设置 EVENTS_DAYS_RETAIN，此任务不会启动。</span><br><span class=\"line\"># EVENT_CLEANUP_SCHEDULE=&quot;0 10 0 * * *&quot;</span><br><span class=\"line\">## 数据库中保留事件的天数。</span><br><span class=\"line\">## 如果未设置（默认），事件将无限期保留，并禁用计划任务！</span><br><span class=\"line\"># EVENTS_DAYS_RETAIN=</span><br><span class=\"line\">##</span><br><span class=\"line\">## 清理数据库中旧认证请求的计划。默认每分钟一次。留空可禁用此任务。</span><br><span class=\"line\"># AUTH_REQUEST_PURGE_SCHEDULE=&quot;30 * * * * *&quot;</span><br><span class=\"line\">##</span><br><span class=\"line\">## 清理数据库中过期的 Duo 上下文的计划。如果 Duo MFA 被禁用或设置为使用旧版 iframe 提示，则不执行操作。默认每分钟一次。留空可禁用此任务。</span><br><span class=\"line\"># DUO_CONTEXT_PURGE_SCHEDULE=&quot;30 * * * * *&quot;</span><br><span class=\"line\"> </span><br><span class=\"line\">########################</span><br><span class=\"line\">### 通用设置 ###</span><br><span class=\"line\">########################</span><br><span class=\"line\"> </span><br><span class=\"line\">## 域名设置</span><br><span class=\"line\">## 域名必须与您访问服务器的地址匹配。</span><br><span class=\"line\">## 推荐配置此值，否则某些功能可能无法工作，如附件下载、电子邮件链接和U2F。</span><br><span class=\"line\">## 要使 U2F 正常工作，服务器必须使用 HTTPS，您可以使用 Let&#x27;s Encrypt 获取免费证书。</span><br><span class=\"line\">## 使用 HTTPS 的推荐方式是将 Vaultwarden 放在反向代理后面。</span><br><span class=\"line\">## 详情：</span><br><span class=\"line\">## - https://github.com/dani-garcia/vaultwarden/wiki/Enabling-HTTPS</span><br><span class=\"line\">## - https://github.com/dani-garcia/vaultwarden/wiki/Proxy-examples</span><br><span class=\"line\">## 开发环境</span><br><span class=\"line\"># DOMAIN=http://localhost</span><br><span class=\"line\">## 公共服务器</span><br><span class=\"line\"># DOMAIN=https://vw.domain.tld</span><br><span class=\"line\">## 公共服务器（带端口号的URL）</span><br><span class=\"line\"># DOMAIN=https://vw.domain.tld:8443</span><br><span class=\"line\">## 公共服务器（带路径的URL）</span><br><span class=\"line\"># DOMAIN=https://domain.tld/vw</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制是否允许用户创建 Bitwarden Sends。</span><br><span class=\"line\">## 此设置对所有用户全局适用。</span><br><span class=\"line\">## 若要按组织控制此设置，请使用“禁用发送”组织策略。</span><br><span class=\"line\"># SENDS_ALLOWED=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## HIBP API 密钥</span><br><span class=\"line\">## HaveIBeenPwned API 密钥，可在此请求：https://haveibeenpwned.com/API/Key</span><br><span class=\"line\"># HIBP_API_KEY=</span><br><span class=\"line\"> </span><br><span class=\"line\">## 每个组织的附件存储限制（KB）</span><br><span class=\"line\">## 每个组织允许的最大附件存储量（以 KB 为单位）。</span><br><span class=\"line\">## 当达到此限制时，组织成员将不允许上传更多属于该组织的密码附件。</span><br><span class=\"line\"># ORG_ATTACHMENT_LIMIT=</span><br><span class=\"line\">## 每个用户的附件存储限制（KB）</span><br><span class=\"line\">## 每个用户允许的最大附件存储量（以 KB 为单位）。</span><br><span class=\"line\">## 当达到此限制时，用户将不允许上传更多附件。</span><br><span class=\"line\"># USER_ATTACHMENT_LIMIT=</span><br><span class=\"line\">## 每个用户的发送存储限制（KB）</span><br><span class=\"line\">## 每个用户允许的最大发送存储量（以 KB 为单位）。</span><br><span class=\"line\">## 当达到此限制时，用户将不允许上传更多发送内容。</span><br><span class=\"line\"># USER_SEND_LIMIT=</span><br><span class=\"line\"> </span><br><span class=\"line\">## 在自动删除已放入回收站的项目前等待的天数。</span><br><span class=\"line\">## 如果未设置（默认），则不会自动删除回收站中的项目。</span><br><span class=\"line\">## 此设置全局适用，因此请确保通知所有用户有关此设置的任何更改。</span><br><span class=\"line\"># TRASH_AUTO_DELETE_DAYS=</span><br><span class=\"line\"> </span><br><span class=\"line\">## 等待多少分钟后认为两次验证登录不完整，并触发电子邮件通知。不完整的两次验证登录是指提供了正确的主密码但未完成所需的二次验证步骤，这可能表示主密码被泄露。设置为 0 可禁用此检查。</span><br><span class=\"line\">## 此设置对所有用户全局适用。</span><br><span class=\"line\"># INCOMPLETE_2FA_TIME_LIMIT=3</span><br><span class=\"line\"> </span><br><span class=\"line\">## 禁用图标下载</span><br><span class=\"line\">## 设置为 true 以禁用内部图标服务中的图标下载。</span><br><span class=\"line\">## 这仍然会从 $ICON_CACHE_FOLDER 提供现有图标，而不生成任何外部网络请求。$ICON_CACHE_TTL 也必须设置为 0；否则，现有的图标最终会被删除，但不会再被下载。</span><br><span class=\"line\"># DISABLE_ICON_DOWNLOAD=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制是否允许新用户注册</span><br><span class=\"line\"># SIGNUPS_ALLOWED=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制新用户注册时是否需要验证其电子邮件地址。</span><br><span class=\"line\">## 注意，如果将此选项设置为 true，则在验证电子邮件地址之前禁止登录！</span><br><span class=\"line\">## 欢迎邮件中会包含一个验证链接，尝试登录时会定期触发重新发送验证邮件。</span><br><span class=\"line\"># SIGNUPS_VERIFY=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 如果 SIGNUPS_VERIFY 设置为 true，这限制了自上次发送电子邮件验证链接后多长时间会再次发送验证邮件（秒）</span><br><span class=\"line\"># SIGNUPS_VERIFY_RESEND_TIME=3600</span><br><span class=\"line\"> </span><br><span class=\"line\">## 如果 SIGNUPS_VERIFY 设置为 true，这限制了尝试登录时可以重新发送验证邮件的最大次数。</span><br><span class=\"line\"># SIGNUPS_VERIFY_RESEND_LIMIT=6</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制来自逗号分隔域名列表的新用户是否可以注册，即使 SIGNUPS_ALLOWED 设置为 false</span><br><span class=\"line\"># SIGNUPS_DOMAINS_WHITELIST=example.com,example.net,example.org</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制是否为组织启用事件日志记录。</span><br><span class=\"line\">## 此设置适用于组织。</span><br><span class=\"line\">## 默认情况下禁用。还需检查 EVENT_CLEANUP_SCHEDULE 和 EVENTS_DAYS_RETAIN 设置。</span><br><span class=\"line\"># ORG_EVENTS_ENABLED=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制哪些用户可以创建新的组织。</span><br><span class=\"line\">## 空或 &#x27;all&#x27; 表示所有用户都可以创建组织（这是默认值）：</span><br><span class=\"line\"># ORG_CREATION_USERS=</span><br><span class=\"line\">## &#x27;none&#x27; 表示没有用户可以创建组织：</span><br><span class=\"line\"># ORG_CREATION_USERS=none</span><br><span class=\"line\">## 逗号分隔列表表示只有这些用户可以创建组织：</span><br><span class=\"line\"># ORG_CREATION_USERS=admin1@example.com,admin2@example.com</span><br><span class=\"line\"> </span><br><span class=\"line\">## 即使注册被禁用，邀请组织管理员邀请用户</span><br><span class=\"line\"># INVITATIONS_ALLOWED=true</span><br><span class=\"line\">## 在不属于特定组织的邀请电子邮件中显示的名称</span><br><span class=\"line\"># INVITATION_ORG_NAME=Vaultwarden</span><br><span class=\"line\"> </span><br><span class=\"line\">## 组织邀请令牌、紧急访问邀请令牌、电子邮件验证令牌和删除请求令牌将在多少小时后过期（必须至少为 1 小时）</span><br><span class=\"line\"># INVITATION_EXPIRATION_HOURS=120</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制用户是否可以启用对其帐户的紧急访问。</span><br><span class=\"line\">## 此设置对所有用户全局适用。</span><br><span class=\"line\"># EMERGENCY_ACCESS_ALLOWED=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制用户是否可以更改其电子邮件。</span><br><span class=\"line\">## 此设置对所有用户全局适用。</span><br><span class=\"line\"># EMAIL_CHANGE_ALLOWED=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## 密码哈希迭代次数用于服务器端密码哈希。</span><br><span class=\"line\">## 新用户的默认值。如果更改，会在用户下次登录时更新现有用户的设置。</span><br><span class=\"line\"># PASSWORD_ITERATIONS=600000</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制用户是否可以设置或显示密码提示。此设置对所有用户全局适用。</span><br><span class=\"line\"># PASSWORD_HINTS_ALLOWED=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制当 SMTP 服务未配置且允许密码提示时，是否应在网页上直接显示密码提示。</span><br><span class=\"line\">## 不建议在公共可访问实例上使用，因为这会提供对潜在敏感数据的未经授权访问。</span><br><span class=\"line\"># SHOW_PASSWORD_HINT=false</span><br><span class=\"line\"> </span><br><span class=\"line\">#########################</span><br><span class=\"line\">### 高级设置 ###</span><br><span class=\"line\">#########################</span><br><span class=\"line\"> </span><br><span class=\"line\">## 客户端 IP 头，用于识别客户端的 IP，默认为 &quot;X-Real-IP&quot;</span><br><span class=\"line\">## 设置为字符串 &quot;none&quot;（不带引号），以禁用任何头并仅使用远程 IP</span><br><span class=\"line\"># IP_HEADER=X-Real-IP</span><br><span class=\"line\"> </span><br><span class=\"line\">## 图标服务</span><br><span class=\"line\">## 预定义的图标服务有：internal, bitwarden, duckduckgo, google。</span><br><span class=\"line\">## 要指定自定义图标服务，请设置一个包含一个 `&#123;&#125;` 的 URL 模板，该模板会被替换为域名。例如：`https://icon.example.com/domain/&#123;&#125;`。</span><br><span class=\"line\">##</span><br><span class=\"line\">## `internal` 指的是 Vaultwarden 内置的图标获取实现。</span><br><span class=\"line\">## 如果设置了外部服务，对 Vaultwarden 的图标请求将返回 HTTP 重定向到外部服务上的相应图标。外部服务可能在您的 Vaultwarden 实例没有外部网络连接时有用，或者如果您担心有人可能会探测您的实例以尝试检测某些站点的图标是否已缓存。</span><br><span class=\"line\"># ICON_SERVICE=internal</span><br><span class=\"line\"> </span><br><span class=\"line\">## 图标重定向代码</span><br><span class=\"line\">## 用于重定向到外部图标服务的 HTTP 状态码。</span><br><span class=\"line\">## 支持的代码有 301（永久）、302（临时）、307（临时）和 308（永久）。临时重定向在测试不同的图标服务时很有用，但一旦确定了服务，建议使用永久重定向以提高缓存能力。旧版代码目前在 Bitwarden 客户端中支持得更好。</span><br><span class=\"line\"># ICON_REDIRECT_CODE=302</span><br><span class=\"line\"> </span><br><span class=\"line\">## 成功获取的图标的缓存生存时间（秒），0 表示“永远”</span><br><span class=\"line\">## 默认值：2592000（30天）</span><br><span class=\"line\"># ICON_CACHE_TTL=2592000</span><br><span class=\"line\">## 未找到的图标的缓存生存时间（秒），0 表示“永远”</span><br><span class=\"line\">## 默认值：259200（3天）</span><br><span class=\"line\"># ICON_CACHE_NEGTTL=259200</span><br><span class=\"line\"> </span><br><span class=\"line\">## 图标下载超时</span><br><span class=\"line\">## 配置下载 favicon 时的超时值。</span><br><span class=\"line\">## 默认是 10 秒，但在较慢的网络连接上可能过低。</span><br><span class=\"line\"># ICON_DOWNLOAD_TIMEOUT=10</span><br><span class=\"line\"> </span><br><span class=\"line\">## 通过正则表达式阻止 HTTP 域名/IP</span><br><span class=\"line\">## 任何匹配此正则表达式的域名或 IP 都不会被内部 HTTP 客户端获取。</span><br><span class=\"line\">## 对于隐藏本地网络中的其他服务器很有用。更多信息请参阅 WIKI。</span><br><span class=\"line\">## 注意：始终将此正则表达式用单引号括起来！</span><br><span class=\"line\"># HTTP_REQUEST_BLOCK_REGEX=&#x27;^(192\\.168\\.0\\.[0-9]+|192\\.168\\.1\\.[0-9]+)$&#x27;</span><br><span class=\"line\"> </span><br><span class=\"line\">## 启用此选项将导致内部 HTTP 客户端拒绝连接到任何非全局 IP 地址。</span><br><span class=\"line\">## 用于保护内部环境：参见 https://en.wikipedia.org/wiki/Reserved_IP_addresses 了解其会阻止的 IP 列表。</span><br><span class=\"line\"># HTTP_REQUEST_BLOCK_NON_GLOBAL_IPS=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## 客户端设置</span><br><span class=\"line\">## 启用客户端的实验性功能标志。</span><br><span class=\"line\">## 这是一个逗号分隔的功能标志列表，例如 &quot;flag1,flag2,flag3&quot;。</span><br><span class=\"line\">##</span><br><span class=\"line\">## 可用的标志如下：</span><br><span class=\"line\">## - &quot;autofill-overlay&quot;: 在表单字段中添加一个覆盖菜单，以便快速访问凭据。</span><br><span class=\"line\">## - &quot;autofill-v2&quot;: 使用新的自动填充实现。</span><br><span class=\"line\">## - &quot;browser-fileless-import&quot;: 直接从其他提供商导入凭据而无需文件。</span><br><span class=\"line\">## - &quot;extension-refresh&quot;: 临时启用新扩展设计直到正式发布（应与 beta Chrome 扩展一起使用）。</span><br><span class=\"line\">## - &quot;fido2-vault-credentials&quot;: 启用 FIDO2 安全密钥作为第二因素。</span><br><span class=\"line\">## - &quot;inline-menu-positioning-improvements&quot;: 启用浏览器扩展中的内联菜单密码生成器和身份建议。</span><br><span class=\"line\">## - &quot;ssh-key-vault-item&quot;: 启用 SSH 密钥保险库项的创建和使用。（需要客户端 &gt;=2024.12.0）</span><br><span class=\"line\">## - &quot;ssh-agent&quot;: 在桌面上启用 SSH 代理支持。（需要桌面 &gt;=2024.12.0）</span><br><span class=\"line\"># EXPERIMENTAL_CLIENT_FEATURE_FLAGS=fido2-vault-credentials</span><br><span class=\"line\"> </span><br><span class=\"line\">## 要求新设备电子邮件。当用户登录时需要发送一封电子邮件。</span><br><span class=\"line\">## 如果发送电子邮件失败，则登录尝试将失败！</span><br><span class=\"line\"># REQUIRE_DEVICE_EMAIL=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 启用扩展日志记录，这将在日志中显示时间戳和目标。</span><br><span class=\"line\"># EXTENDED_LOGGING=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## 扩展日志记录的时间戳格式。</span><br><span class=\"line\">## 格式说明符：https://docs.rs/chrono/latest/chrono/format/strftime</span><br><span class=\"line\"># LOG_TIMESTAMP_FORMAT=&quot;%Y-%m-%d %H:%M:%S.%3f&quot;</span><br><span class=\"line\"> </span><br><span class=\"line\">## 日志记录到 Syslog</span><br><span class=\"line\">## 这需要扩展日志记录</span><br><span class=\"line\"># USE_SYSLOG=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 记录到文件</span><br><span class=\"line\"># LOG_FILE=/path/to/log</span><br><span class=\"line\"> </span><br><span class=\"line\">## 日志级别</span><br><span class=\"line\">## 更改日志输出的详细程度。</span><br><span class=\"line\">## 有效值为 &quot;trace&quot;, &quot;debug&quot;, &quot;info&quot;, &quot;warn&quot;, &quot;error&quot; 和 &quot;off&quot;。</span><br><span class=\"line\">## 将其设置为 &quot;trace&quot; 或 &quot;debug&quot; 也会显示挂载路由和静态文件、WebSocket 和 alive 请求的日志。</span><br><span class=\"line\">## 对于特定模块，可以附加一个逗号分隔的 `path::to::module=log_level`</span><br><span class=\"line\">## 例如，要只为图标查看 info 日志，使用：LOG_LEVEL=&quot;info,vaultwarden::api::icons=debug&quot;</span><br><span class=\"line\"># LOG_LEVEL=info</span><br><span class=\"line\"> </span><br><span class=\"line\">## 管理界面的令牌，最好是 Argon2 PHC 字符串。</span><br><span class=\"line\">## Vaultwarden 提供了一个内置生成器，可以通过调用 `vaultwarden hash` 来生成。</span><br><span class=\"line\">## 详情请参阅：https://github.com/dani-garcia/vaultwarden/wiki/Enabling-admin-page#secure-the-admin_token</span><br><span class=\"line\">## 如果未设置，管理面板将被禁用。</span><br><span class=\"line\">## 新的 Argon2 PHC 字符串</span><br><span class=\"line\">## 注意，在某些环境中，如 docker-compose 中，您需要将所有美元符号 `$` 转义为两个美元符号 `$$`。</span><br><span class=\"line\">## 并且在必要时使用单引号 (&#x27;) 而不是双引号 (&quot;) 包含字符串。</span><br><span class=\"line\"># ADMIN_TOKEN=&#x27;$argon2id$v=19$m=65540,t=3,p=4$MmeKRnGK5RW5mJS7h3TOL89GrpLPXJPAtTK8FTqj9HM$DqsstvoSAETl9YhnsXbf43WeaUwJC6JhViIvuPoig78&#x27;</span><br><span class=\"line\">## 旧的明文字符串（会产生警告，建议使用 Argon2）</span><br><span class=\"line\"># ADMIN_TOKEN=Vy2VyYTTsKPv8W5aEOWUbB/Bt3DEKePbHmI4m9VcemUMS2rEviDowNAFqYi1xjmp</span><br><span class=\"line\"> </span><br><span class=\"line\">## 启用此选项以绕过管理面板的安全性。此选项仅适用于前面带有单独认证层的情况。</span><br><span class=\"line\"># DISABLE_ADMIN_TOKEN=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 在相同的 IP 地址下，两次管理登录请求之间的平均秒数，超过这个时间限制才会触发限速。</span><br><span class=\"line\"># ADMIN_RATELIMIT_SECONDS=300</span><br><span class=\"line\">## 允许的最大突发请求数，同时保持由 `ADMIN_RATELIMIT_SECONDS` 指定的平均值。</span><br><span class=\"line\"># ADMIN_RATELIMIT_MAX_BURST=3</span><br><span class=\"line\"> </span><br><span class=\"line\">## 设置管理员会话的有效期为此值（分钟）。</span><br><span class=\"line\"># ADMIN_SESSION_LIFETIME=20</span><br><span class=\"line\"> </span><br><span class=\"line\">## 允许的 iframe 祖先（了解风险！）</span><br><span class=\"line\">## https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-ancestors</span><br><span class=\"line\">## 允许其他域嵌入 web vault 到 iframe 中，便于嵌入安全的内部网。</span><br><span class=\"line\">## 此值将被添加到 &#x27;Content-Security-Policy&#x27; 头部的 &#x27;frame-ancestors&#x27; 值中。</span><br><span class=\"line\">## 多个值必须用空格分隔。</span><br><span class=\"line\"># ALLOWED_IFRAME_ANCESTORS=</span><br><span class=\"line\"> </span><br><span class=\"line\">## 允许的 connect-src（了解风险！）</span><br><span class=\"line\">## https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/connect-src</span><br><span class=\"line\">## 允许其他域加载使用脚本接口（如转发电子邮件别名功能）的 URL。</span><br><span class=\"line\">## 此值将被添加到 &#x27;Content-Security-Policy&#x27; 头部的 &#x27;connect-src&#x27; 值中。</span><br><span class=\"line\">## 多个值必须用空格分隔，并且只允许 HTTPS 值。</span><br><span class=\"line\">## 示例：&quot;https://my-addy-io.domain.tld https://my-simplelogin.domain.tld&quot;</span><br><span class=\"line\"># ALLOWED_CONNECT_SRC=&quot;&quot;</span><br><span class=\"line\"> </span><br><span class=\"line\">## 在相同的 IP 地址下，两次登录请求之间的平均秒数，超过这个时间限制才会触发限速。</span><br><span class=\"line\"># LOGIN_RATELIMIT_SECONDS=60</span><br><span class=\"line\">## 允许的最大突发请求数，同时保持由 `LOGIN_RATELIMIT_SECONDS` 指定的平均值。</span><br><span class=\"line\">## 注意：这适用于登录和两步验证，因此建议至少允许突发大小为 2。</span><br><span class=\"line\"># LOGIN_RATELIMIT_MAX_BURST=10</span><br><span class=\"line\"> </span><br><span class=\"line\">## BETA 功能：组</span><br><span class=\"line\">## 控制组织是否启用组支持。</span><br><span class=\"line\">## 此设置适用于组织。</span><br><span class=\"line\">## 默认情况下禁用，因为这是一个 Beta 功能，包含已知问题！</span><br><span class=\"line\">## 了解你在做什么！</span><br><span class=\"line\"># ORG_GROUPS_ENABLED=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 增加安全笔记大小限制（了解风险！）</span><br><span class=\"line\">## 将安全笔记大小限制设置为 100_000 而不是默认的 10_000。</span><br><span class=\"line\">## 警告：这可能导致客户端出现问题。此外，在 Bitwarden 服务器上导出将不起作用！</span><br><span class=\"line\">## 了解你在做什么！</span><br><span class=\"line\"># INCREASE_NOTE_SIZE_LIMIT=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 强制单组织策略与重置密码策略</span><br><span class=\"line\">## 强制在启用重置密码策略之前启用单组织策略。</span><br><span class=\"line\">## Bitwarden 默认强制执行此策略。在 Vaultwarden 中，我们鼓励使用多个组织，因为组不可用。</span><br><span class=\"line\">## 将此设置为 true 将在启用重置密码策略之前强制启用单组织策略。</span><br><span class=\"line\"># ENFORCE_SINGLE_ORG_WITH_RESET_PW_POLICY=false</span><br><span class=\"line\"> </span><br><span class=\"line\">########################</span><br><span class=\"line\">### MFA/2FA 设置 ###</span><br><span class=\"line\">########################</span><br><span class=\"line\"> </span><br><span class=\"line\">## Yubico (Yubikey) 设置</span><br><span class=\"line\">## 设置您的 Yubikey OTP 的 Client ID 和 Secret Key。</span><br><span class=\"line\">## 您可以在此生成：https://upgrade.yubico.com/getapikey/</span><br><span class=\"line\">## 您也可以选择指定一个自定义的 OTP 服务器。</span><br><span class=\"line\"># YUBICO_CLIENT_ID=11111</span><br><span class=\"line\"># YUBICO_SECRET_KEY=AAAAAAAAAAAAAAAAAAAAAAAA</span><br><span class=\"line\"># YUBICO_SERVER=http://yourdomain.com/wsapi/2.0/verify</span><br><span class=\"line\"> </span><br><span class=\"line\">## Duo 设置</span><br><span class=\"line\">## 您需要配置 DUO_IKEY, DUO_SKEY 和 DUO_HOST 选项以启用全局 Duo 支持。</span><br><span class=\"line\">## 否则用户需要自己配置这些设置。</span><br><span class=\"line\">## 创建账户并保护应用程序，请参阅此链接（仅第一步，其余步骤忽略）：</span><br><span class=\"line\">## https://help.bitwarden.com/article/setup-two-step-login-duo/#create-a-duo-security-account</span><br><span class=\"line\">## 然后根据最后一步获得的值设置以下选项：</span><br><span class=\"line\"># DUO_IKEY=&lt;Client ID&gt;</span><br><span class=\"line\"># DUO_SKEY=&lt;Client Secret&gt;</span><br><span class=\"line\"># DUO_HOST=&lt;API Hostname&gt;</span><br><span class=\"line\">## 之后，您可以继续按照上述链接中的指南操作，</span><br><span class=\"line\">## 忽略那些您已经预先配置的字段。</span><br><span class=\"line\">##</span><br><span class=\"line\">## 如果您想尝试使用 Duo 的 &#x27;Traditional Prompt&#x27;（已弃用，基于 iframe），将 DUO_USE_IFRAME 设置为 &#x27;true&#x27;。</span><br><span class=\"line\">## Duo 不再支持此功能，但某些集成仍然有效。</span><br><span class=\"line\">## 如果不确定，请忽略此设置。</span><br><span class=\"line\"># DUO_USE_IFRAME=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 邮件 2FA 设置</span><br><span class=\"line\">## 邮件令牌大小</span><br><span class=\"line\">## 邮件 2FA 令牌中的数字位数（最小：6，最大：255）。</span><br><span class=\"line\">## 注意：无论此设置如何，Bitwarden 客户端都硬编码为提及 6 位代码！</span><br><span class=\"line\"># EMAIL_TOKEN_SIZE=6</span><br><span class=\"line\">##</span><br><span class=\"line\">## 令牌过期时间</span><br><span class=\"line\">## 令牌有效的最长时间（秒）。用户打开邮件客户端并复制令牌的时间。</span><br><span class=\"line\"># EMAIL_EXPIRATION_TIME=600</span><br><span class=\"line\">##</span><br><span class=\"line\">## 在重置邮件令牌并需要发送新邮件之前的最大尝试次数。</span><br><span class=\"line\"># EMAIL_ATTEMPTS_LIMIT=3</span><br><span class=\"line\">##</span><br><span class=\"line\">## 无论任何组织策略，设置邮件 2FA</span><br><span class=\"line\"># EMAIL_2FA_ENFORCE_ON_VERIFIED_INVITE=false</span><br><span class=\"line\">## 在需要时自动设置邮件 2FA 作为备用提供程序</span><br><span class=\"line\"># EMAIL_2FA_AUTO_FALLBACK=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 其他 MFA/2FA 设置</span><br><span class=\"line\">## 禁用记住 2FA</span><br><span class=\"line\">## 启用此选项将强制用户每次登录时使用第二因素。</span><br><span class=\"line\">## 注意：复选框仍然会显示，但会被忽略。</span><br><span class=\"line\"># DISABLE_2FA_REMEMBER=false</span><br><span class=\"line\">##</span><br><span class=\"line\">## 身份验证器设置</span><br><span class=\"line\">## 禁用身份验证器时间偏移代码的有效性。</span><br><span class=\"line\">## 前 30 秒和后 30 秒的身份验证代码将无效。</span><br><span class=\"line\">##</span><br><span class=\"line\">## 根据 RFC6238（https://tools.ietf.org/html/rfc6238），</span><br><span class=\"line\">## 我们默认允许前一步和下一步的有效 TOTP 代码。</span><br><span class=\"line\">## 但是，这可能会让攻击者更容易成功，因为有 3 个有效的代码。</span><br><span class=\"line\">## 您可以禁用此功能，以便只允许当前的 TOTP 代码。</span><br><span class=\"line\">## 请注意，如果服务器时间偏移，有效的代码可能会被标记为无效。</span><br><span class=\"line\">## 无论如何，一旦代码被使用，它就不能再次使用，并且之前的所有代码也将无效。</span><br><span class=\"line\"># AUTHENTICATOR_DISABLE_TIME_DRIFT=false</span><br><span class=\"line\"> </span><br><span class=\"line\">###########################</span><br><span class=\"line\">### SMTP 邮件设置 ###</span><br><span class=\"line\">###########################</span><br><span class=\"line\"> </span><br><span class=\"line\">## 邮件特定设置，设置 SMTP_FROM 并设置 SMTP_HOST 或 USE_SENDMAIL 以启用邮件服务。</span><br><span class=\"line\">## 为了确保电子邮件链接指向正确的主机，请设置 DOMAIN 变量。</span><br><span class=\"line\">## 注意：如果指定了 SMTP_USERNAME，则必须指定 SMTP_PASSWORD。</span><br><span class=\"line\"># SMTP_HOST=smtp.domain.tld</span><br><span class=\"line\"># SMTP_FROM=vaultwarden@domain.tld</span><br><span class=\"line\"># SMTP_FROM_NAME=Vaultwarden</span><br><span class=\"line\"># SMTP_USERNAME=username</span><br><span class=\"line\"># SMTP_PASSWORD=password</span><br><span class=\"line\"># SMTP_TIMEOUT=15</span><br><span class=\"line\"> </span><br><span class=\"line\">## 选择用于 SMTP 的安全连接类型。默认是 &quot;starttls&quot;。</span><br><span class=\"line\">## 可用选项包括：</span><br><span class=\"line\">## - &quot;starttls&quot;: 默认端口是 587。</span><br><span class=\"line\">## - &quot;force_tls&quot;: 默认端口是 465。</span><br><span class=\"line\">## - &quot;off&quot;: 默认端口是 25。</span><br><span class=\"line\">## 端口 587（提交）和 25（smtp）是标准无加密和通过 STARTTLS 加密的连接。端口 465（提交）用于加密提交（隐式 TLS）。</span><br><span class=\"line\"># SMTP_SECURITY=starttls</span><br><span class=\"line\"># SMTP_PORT=587</span><br><span class=\"line\"> </span><br><span class=\"line\"># 是否通过 `sendmail` 命令发送邮件</span><br><span class=\"line\"># USE_SENDMAIL=false</span><br><span class=\"line\"># 使用哪个 sendmail 命令。如果没有指定，则使用 $PATH 中找到的命令。</span><br><span class=\"line\"># SENDMAIL_COMMAND=&quot;/path/to/sendmail&quot;</span><br><span class=\"line\"> </span><br><span class=\"line\">## 默认情况下 SSL 是 &quot;Plain&quot; 和 &quot;Login&quot;，非 SSL 连接不使用任何机制。</span><br><span class=\"line\">## 可能的值：[&quot;Plain&quot;, &quot;Login&quot;, &quot;Xoauth2&quot;]。</span><br><span class=\"line\">## 多个选项需要用逗号 &#x27;,&#x27; 分隔。</span><br><span class=\"line\"># SMTP_AUTH_MECHANISM=</span><br><span class=\"line\"> </span><br><span class=\"line\">## 发送 SMTP HELO 时使用的服务器名称</span><br><span class=\"line\">## 默认情况下，该值应该是机器的主机名，</span><br><span class=\"line\">## 但如果触发了一些反垃圾邮件过滤器，则可能需要更改此值。</span><br><span class=\"line\"># HELO_NAME=</span><br><span class=\"line\"> </span><br><span class=\"line\">## 将图像嵌入为邮件附件</span><br><span class=\"line\"># SMTP_EMBED_IMAGES=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## SMTP 调试</span><br><span class=\"line\">## 当设置为 true 时，这将输出非常详细的 SMTP 消息。</span><br><span class=\"line\">## 警告：这可能包含敏感信息如密码和用户名！仅在故障排除时启用！</span><br><span class=\"line\"># SMTP_DEBUG=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 接受无效证书</span><br><span class=\"line\">## 危险：此选项引入了中间人攻击的重大漏洞！</span><br><span class=\"line\">## 仅在无法使用有效证书时作为最后手段使用。</span><br><span class=\"line\">## 如果证书有效但主机名不匹配，请使用 SMTP_ACCEPT_INVALID_HOSTNAMES。</span><br><span class=\"line\"># SMTP_ACCEPT_INVALID_CERTS=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 接受无效主机名</span><br><span class=\"line\">## 危险：此选项引入了中间人攻击的重大漏洞！</span><br><span class=\"line\">## 仅在无法使用有效证书时作为最后手段使用。</span><br><span class=\"line\"># SMTP_ACCEPT_INVALID_HOSTNAMES=false</span><br><span class=\"line\"> </span><br><span class=\"line\">#######################</span><br><span class=\"line\">### Rocket 设置 ###</span><br><span class=\"line\">#######################</span><br><span class=\"line\"> </span><br><span class=\"line\">## Rocket 特定设置</span><br><span class=\"line\">## 详情请参见：https://rocket.rs/v0.5/guide/configuration/</span><br><span class=\"line\"># ROCKET_ADDRESS=0.0.0.0</span><br><span class=\"line\">## 默认端口是 8000，除非在 Docker 容器中运行，在这种情况下，默认端口是 80。</span><br><span class=\"line\"># ROCKET_PORT=8000</span><br><span class=\"line\"># ROCKET_TLS=&#123;certs=&quot;/path/to/certs.pem&quot;,key=&quot;/path/to/key.pem&quot;&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"># vim: syntax=ini</span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n<p>‍</p>\n<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">vaultwarden:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;docker.olinl.com.cn/vaultwarden/server:latest&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">bitwarden</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">bitwarden</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">DOMAIN:</span> <span class=\"string\">&quot;https://passwd.jianglin.cc&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./data/:/data/</span></span><br><span class=\"line\">    <span class=\"comment\">#ports: # 映射端口：需要反向代理到域名</span></span><br><span class=\"line\">    <span class=\"comment\">#  - 8092:80</span></span><br><span class=\"line\"><span class=\"comment\"># 个人配置</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">net</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">net:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">lin-net</span></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=78e68e3d-a488-6913-9c23-82c9d540aea0","cover_type":"img","excerpt":"","more":"<p>Bitwarden 支持全平台的开源密码管理器</p>\n<p>GitHub：<a href=\"https://github.com/bitwarden\">Bitwarden</a></p>\n<p>官网：<a href=\"https://bitwarden.com/\">https://bitwarden.com</a></p>\n<p>自建：<a href=\"https://github.com/dani-garcia/vaultwarden\">vaultwarden</a></p>\n<p>环境变量说明：<a href=\"https://github.com/dani-garcia/vaultwarden/blob/main/.env.template\">.env.template</a></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br><span class=\"line\">518</span><br><span class=\"line\">519</span><br><span class=\"line\">520</span><br><span class=\"line\">521</span><br><span class=\"line\">522</span><br><span class=\"line\">523</span><br><span class=\"line\">524</span><br><span class=\"line\">525</span><br><span class=\"line\">526</span><br><span class=\"line\">527</span><br><span class=\"line\">528</span><br><span class=\"line\">529</span><br><span class=\"line\">530</span><br><span class=\"line\">531</span><br><span class=\"line\">532</span><br><span class=\"line\">533</span><br><span class=\"line\">534</span><br><span class=\"line\">535</span><br><span class=\"line\">536</span><br><span class=\"line\">537</span><br><span class=\"line\">538</span><br><span class=\"line\">539</span><br><span class=\"line\">540</span><br><span class=\"line\">541</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># shellcheck disable=SC2034,SC2148</span><br><span class=\"line\">## Vaultwarden 配置文件</span><br><span class=\"line\">## 取消注释以下任何行以更改默认设置</span><br><span class=\"line\">##</span><br><span class=\"line\">## 请注意，如果在管理员界面中更改了这些设置，则大多数设置将被覆盖。这些覆盖会存储在 DATA_FOLDER/config.json 文件中。</span><br><span class=\"line\">##</span><br><span class=\"line\">## 默认情况下，Vaultwarden 希望此文件名为“.env”，并位于当前工作目录中。如果不是这种情况，可以在启动 Vaultwarden 之前设置环境变量 ENV_FILE 指向此文件的位置。</span><br><span class=\"line\"> </span><br><span class=\"line\">####################</span><br><span class=\"line\">### 数据文件夹 ###</span><br><span class=\"line\">####################</span><br><span class=\"line\"> </span><br><span class=\"line\">## 主数据文件夹</span><br><span class=\"line\"># DATA_FOLDER=data</span><br><span class=\"line\"> </span><br><span class=\"line\">## 单独的文件夹，这些选项会覆盖 %DATA_FOLDER%</span><br><span class=\"line\"># RSA_KEY_FILENAME=data/rsa_key</span><br><span class=\"line\"># ICON_CACHE_FOLDER=data/icon_cache</span><br><span class=\"line\"># ATTACHMENTS_FOLDER=data/attachments</span><br><span class=\"line\"># SENDS_FOLDER=data/sends</span><br><span class=\"line\"># TMP_FOLDER=data/tmp</span><br><span class=\"line\"> </span><br><span class=\"line\">## 模板数据文件夹，默认使用嵌入式模板</span><br><span class=\"line\">## 查看源代码以了解格式</span><br><span class=\"line\"># TEMPLATES_FOLDER=data/templates</span><br><span class=\"line\">## 对每个请求自动重新加载模板，较慢，仅用于开发环境</span><br><span class=\"line\"># RELOAD_TEMPLATES=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## Web 密码库设置</span><br><span class=\"line\"># WEB_VAULT_FOLDER=web-vault/</span><br><span class=\"line\"># WEB_VAULT_ENABLED=true</span><br><span class=\"line\"> </span><br><span class=\"line\">#########################</span><br><span class=\"line\">### 数据库设置 ###</span><br><span class=\"line\">#########################</span><br><span class=\"line\"> </span><br><span class=\"line\">## 数据库 URL</span><br><span class=\"line\">## 使用 SQLite 时，这是 DB 文件的路径，默认为 %DATA_FOLDER%/db.sqlite3</span><br><span class=\"line\"># DATABASE_URL=data/db.sqlite3</span><br><span class=\"line\">## 使用 MySQL 时，请指定适当的连接 URI。</span><br><span class=\"line\">## 详情：https://docs.diesel.rs/2.1.x/diesel/mysql/struct.MysqlConnection.html</span><br><span class=\"line\"># DATABASE_URL=mysql://用户名:密码@主机[:端口]/数据库名</span><br><span class=\"line\">## 使用 PostgreSQL 时，请指定适当的连接 URI（推荐）或关键字/值连接字符串。</span><br><span class=\"line\">## 详情：</span><br><span class=\"line\">## - https://docs.diesel.rs/2.1.x/diesel/pg/struct.PgConnection.html</span><br><span class=\"line\">## - https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING</span><br><span class=\"line\"># DATABASE_URL=postgresql://用户名:密码@主机[:端口]/数据库名</span><br><span class=\"line\"> </span><br><span class=\"line\">## 启用 WAL（预写日志）</span><br><span class=\"line\">## 设置为 false 以避免在启动时启用 WAL。</span><br><span class=\"line\">## 注意，如果数据库已启用 WAL，您还需要在数据库中禁用 WAL，此设置仅阻止 Vaultwarden 在启动时自动启用它。</span><br><span class=\"line\">## 请先阅读项目 wiki 页面中的相关设置，因为修改此值可能会导致性能下降或使服务无法启动。</span><br><span class=\"line\"># ENABLE_DB_WAL=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## 数据库连接重试次数</span><br><span class=\"line\">## 启动期间尝试连接数据库的次数，每次重试间隔 1 秒，设置为 0 表示无限次重试</span><br><span class=\"line\"># DB_CONNECTION_RETRIES=15</span><br><span class=\"line\"> </span><br><span class=\"line\">## 数据库超时时间</span><br><span class=\"line\">## 获取数据库连接的超时时间</span><br><span class=\"line\"># DATABASE_TIMEOUT=30</span><br><span class=\"line\"> </span><br><span class=\"line\">## 数据库最大连接数</span><br><span class=\"line\">## 定义用于连接数据库的连接池大小。</span><br><span class=\"line\"># DATABASE_MAX_CONNS=10</span><br><span class=\"line\"> </span><br><span class=\"line\">## 数据库连接初始化</span><br><span class=\"line\">## 允许在创建新数据库连接时运行 SQL 语句。</span><br><span class=\"line\">## 这主要用于连接范围的指令。</span><br><span class=\"line\">## 如果为空，则使用数据库特定的默认值：</span><br><span class=\"line\">## - SQLite: &quot;PRAGMA busy_timeout = 5000; PRAGMA synchronous = NORMAL;&quot;</span><br><span class=\"line\">## - MySQL: &quot;&quot;</span><br><span class=\"line\">## - PostgreSQL: &quot;&quot;</span><br><span class=\"line\"># DATABASE_CONN_INIT=&quot;&quot;</span><br><span class=\"line\"> </span><br><span class=\"line\">#################</span><br><span class=\"line\">### WebSocket ###</span><br><span class=\"line\">#################</span><br><span class=\"line\"> </span><br><span class=\"line\">## 启用 WebSocket 通知</span><br><span class=\"line\"># ENABLE_WEBSOCKET=true</span><br><span class=\"line\"> </span><br><span class=\"line\">##########################</span><br><span class=\"line\">### 推送通知 ###</span><br><span class=\"line\">##########################</span><br><span class=\"line\"> </span><br><span class=\"line\">## 启用推送通知（需要从 https://bitwarden.com/host 获取密钥和 ID）</span><br><span class=\"line\">## 关于移动客户端推送通知的详情：</span><br><span class=\"line\">## - https://github.com/dani-garcia/vaultwarden/wiki/Enabling-Mobile-Client-push-notification</span><br><span class=\"line\"># PUSH_ENABLED=false</span><br><span class=\"line\"># PUSH_INSTALLATION_ID=请替换此处</span><br><span class=\"line\"># PUSH_INSTALLATION_KEY=请替换此处</span><br><span class=\"line\"> </span><br><span class=\"line\"># 警告：除非完全理解其含义，否则不要修改以下设置！</span><br><span class=\"line\"># 默认推送中继和身份验证 URI</span><br><span class=\"line\"># PUSH_RELAY_URI=https://push.bitwarden.com</span><br><span class=\"line\"># PUSH_IDENTITY_URI=https://identity.bitwarden.com</span><br><span class=\"line\"># 欧盟数据区域设置</span><br><span class=\"line\"># 如果选择了“欧盟”作为您的数据区域，请使用以下 URI：</span><br><span class=\"line\"># PUSH_RELAY_URI=https://api.bitwarden.eu</span><br><span class=\"line\"># PUSH_IDENTITY_URI=https://identity.bitwarden.eu</span><br><span class=\"line\"> </span><br><span class=\"line\">#####################</span><br><span class=\"line\">### 计划任务 ###</span><br><span class=\"line\">#####################</span><br><span class=\"line\"> </span><br><span class=\"line\">## 计划任务设置</span><br><span class=\"line\">##</span><br><span class=\"line\">## 任务计划使用类似 cron 的语法（由 https://crates.io/crates/cron 解析），并且始终基于 UTC 时间（无论您的本地时区设置如何）。</span><br><span class=\"line\">##</span><br><span class=\"line\">## 该格式与 crontab 略有不同，因为 crontab 不包含秒。</span><br><span class=\"line\">## 您可以在这里测试格式：https://crontab.guru，但请删除第一个数字！</span><br><span class=\"line\">## 秒   分   小时   月份中的某天    月   星期中的某天</span><br><span class=\"line\">## &quot;0   30   9,12,15     1,15       May-Aug  Mon,Wed,Fri&quot;</span><br><span class=\"line\">## &quot;0   30     *          *            *          *     &quot;</span><br><span class=\"line\">## &quot;0   30     1          *            *          *     &quot;</span><br><span class=\"line\">##</span><br><span class=\"line\">## 工作调度线程检查需要运行的任务的时间间隔（毫秒）。设置为 0 可全局禁用计划任务。</span><br><span class=\"line\"># JOB_POLL_INTERVAL_MS=30000</span><br><span class=\"line\">##</span><br><span class=\"line\">## 检查已过删除日期的发送任务的计划。默认每小时一次（整点后 5 分钟）。留空可禁用此任务。</span><br><span class=\"line\"># SEND_PURGE_SCHEDULE=&quot;0 5 * * * *&quot;</span><br><span class=\"line\">##</span><br><span class=\"line\">## 检查应永久删除的垃圾箱项目的计划。默认每天一次（午夜后 5 分钟）。留空可禁用此任务。</span><br><span class=\"line\"># TRASH_PURGE_SCHEDULE=&quot;0 5 0 * * *&quot;</span><br><span class=\"line\">##</span><br><span class=\"line\">## 检查未完成的双因素登录的计划。默认每分钟一次。留空可禁用此任务。</span><br><span class=\"line\"># INCOMPLETE_2FA_SCHEDULE=&quot;30 * * * * *&quot;</span><br><span class=\"line\">##</span><br><span class=\"line\">## 发送紧急访问授权人到期提醒的计划。默认每小时一次（整点后 3 分钟）。留空可禁用此任务。</span><br><span class=\"line\"># EMERGENCY_NOTIFICATION_REMINDER_SCHEDULE=&quot;0 3 * * * *&quot;</span><br><span class=\"line\">##</span><br><span class=\"line\">## 处理已达到等待时间的紧急访问请求的计划。默认每小时一次（整点后 7 分钟）。留空可禁用此任务。</span><br><span class=\"line\"># EMERGENCY_REQUEST_TIMEOUT_SCHEDULE=&quot;0 7 * * * *&quot;</span><br><span class=\"line\">##</span><br><span class=\"line\">## 清理事件表中旧事件的计划。默认每天执行一次。如果不设置 EVENTS_DAYS_RETAIN，此任务不会启动。</span><br><span class=\"line\"># EVENT_CLEANUP_SCHEDULE=&quot;0 10 0 * * *&quot;</span><br><span class=\"line\">## 数据库中保留事件的天数。</span><br><span class=\"line\">## 如果未设置（默认），事件将无限期保留，并禁用计划任务！</span><br><span class=\"line\"># EVENTS_DAYS_RETAIN=</span><br><span class=\"line\">##</span><br><span class=\"line\">## 清理数据库中旧认证请求的计划。默认每分钟一次。留空可禁用此任务。</span><br><span class=\"line\"># AUTH_REQUEST_PURGE_SCHEDULE=&quot;30 * * * * *&quot;</span><br><span class=\"line\">##</span><br><span class=\"line\">## 清理数据库中过期的 Duo 上下文的计划。如果 Duo MFA 被禁用或设置为使用旧版 iframe 提示，则不执行操作。默认每分钟一次。留空可禁用此任务。</span><br><span class=\"line\"># DUO_CONTEXT_PURGE_SCHEDULE=&quot;30 * * * * *&quot;</span><br><span class=\"line\"> </span><br><span class=\"line\">########################</span><br><span class=\"line\">### 通用设置 ###</span><br><span class=\"line\">########################</span><br><span class=\"line\"> </span><br><span class=\"line\">## 域名设置</span><br><span class=\"line\">## 域名必须与您访问服务器的地址匹配。</span><br><span class=\"line\">## 推荐配置此值，否则某些功能可能无法工作，如附件下载、电子邮件链接和U2F。</span><br><span class=\"line\">## 要使 U2F 正常工作，服务器必须使用 HTTPS，您可以使用 Let&#x27;s Encrypt 获取免费证书。</span><br><span class=\"line\">## 使用 HTTPS 的推荐方式是将 Vaultwarden 放在反向代理后面。</span><br><span class=\"line\">## 详情：</span><br><span class=\"line\">## - https://github.com/dani-garcia/vaultwarden/wiki/Enabling-HTTPS</span><br><span class=\"line\">## - https://github.com/dani-garcia/vaultwarden/wiki/Proxy-examples</span><br><span class=\"line\">## 开发环境</span><br><span class=\"line\"># DOMAIN=http://localhost</span><br><span class=\"line\">## 公共服务器</span><br><span class=\"line\"># DOMAIN=https://vw.domain.tld</span><br><span class=\"line\">## 公共服务器（带端口号的URL）</span><br><span class=\"line\"># DOMAIN=https://vw.domain.tld:8443</span><br><span class=\"line\">## 公共服务器（带路径的URL）</span><br><span class=\"line\"># DOMAIN=https://domain.tld/vw</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制是否允许用户创建 Bitwarden Sends。</span><br><span class=\"line\">## 此设置对所有用户全局适用。</span><br><span class=\"line\">## 若要按组织控制此设置，请使用“禁用发送”组织策略。</span><br><span class=\"line\"># SENDS_ALLOWED=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## HIBP API 密钥</span><br><span class=\"line\">## HaveIBeenPwned API 密钥，可在此请求：https://haveibeenpwned.com/API/Key</span><br><span class=\"line\"># HIBP_API_KEY=</span><br><span class=\"line\"> </span><br><span class=\"line\">## 每个组织的附件存储限制（KB）</span><br><span class=\"line\">## 每个组织允许的最大附件存储量（以 KB 为单位）。</span><br><span class=\"line\">## 当达到此限制时，组织成员将不允许上传更多属于该组织的密码附件。</span><br><span class=\"line\"># ORG_ATTACHMENT_LIMIT=</span><br><span class=\"line\">## 每个用户的附件存储限制（KB）</span><br><span class=\"line\">## 每个用户允许的最大附件存储量（以 KB 为单位）。</span><br><span class=\"line\">## 当达到此限制时，用户将不允许上传更多附件。</span><br><span class=\"line\"># USER_ATTACHMENT_LIMIT=</span><br><span class=\"line\">## 每个用户的发送存储限制（KB）</span><br><span class=\"line\">## 每个用户允许的最大发送存储量（以 KB 为单位）。</span><br><span class=\"line\">## 当达到此限制时，用户将不允许上传更多发送内容。</span><br><span class=\"line\"># USER_SEND_LIMIT=</span><br><span class=\"line\"> </span><br><span class=\"line\">## 在自动删除已放入回收站的项目前等待的天数。</span><br><span class=\"line\">## 如果未设置（默认），则不会自动删除回收站中的项目。</span><br><span class=\"line\">## 此设置全局适用，因此请确保通知所有用户有关此设置的任何更改。</span><br><span class=\"line\"># TRASH_AUTO_DELETE_DAYS=</span><br><span class=\"line\"> </span><br><span class=\"line\">## 等待多少分钟后认为两次验证登录不完整，并触发电子邮件通知。不完整的两次验证登录是指提供了正确的主密码但未完成所需的二次验证步骤，这可能表示主密码被泄露。设置为 0 可禁用此检查。</span><br><span class=\"line\">## 此设置对所有用户全局适用。</span><br><span class=\"line\"># INCOMPLETE_2FA_TIME_LIMIT=3</span><br><span class=\"line\"> </span><br><span class=\"line\">## 禁用图标下载</span><br><span class=\"line\">## 设置为 true 以禁用内部图标服务中的图标下载。</span><br><span class=\"line\">## 这仍然会从 $ICON_CACHE_FOLDER 提供现有图标，而不生成任何外部网络请求。$ICON_CACHE_TTL 也必须设置为 0；否则，现有的图标最终会被删除，但不会再被下载。</span><br><span class=\"line\"># DISABLE_ICON_DOWNLOAD=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制是否允许新用户注册</span><br><span class=\"line\"># SIGNUPS_ALLOWED=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制新用户注册时是否需要验证其电子邮件地址。</span><br><span class=\"line\">## 注意，如果将此选项设置为 true，则在验证电子邮件地址之前禁止登录！</span><br><span class=\"line\">## 欢迎邮件中会包含一个验证链接，尝试登录时会定期触发重新发送验证邮件。</span><br><span class=\"line\"># SIGNUPS_VERIFY=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 如果 SIGNUPS_VERIFY 设置为 true，这限制了自上次发送电子邮件验证链接后多长时间会再次发送验证邮件（秒）</span><br><span class=\"line\"># SIGNUPS_VERIFY_RESEND_TIME=3600</span><br><span class=\"line\"> </span><br><span class=\"line\">## 如果 SIGNUPS_VERIFY 设置为 true，这限制了尝试登录时可以重新发送验证邮件的最大次数。</span><br><span class=\"line\"># SIGNUPS_VERIFY_RESEND_LIMIT=6</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制来自逗号分隔域名列表的新用户是否可以注册，即使 SIGNUPS_ALLOWED 设置为 false</span><br><span class=\"line\"># SIGNUPS_DOMAINS_WHITELIST=example.com,example.net,example.org</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制是否为组织启用事件日志记录。</span><br><span class=\"line\">## 此设置适用于组织。</span><br><span class=\"line\">## 默认情况下禁用。还需检查 EVENT_CLEANUP_SCHEDULE 和 EVENTS_DAYS_RETAIN 设置。</span><br><span class=\"line\"># ORG_EVENTS_ENABLED=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制哪些用户可以创建新的组织。</span><br><span class=\"line\">## 空或 &#x27;all&#x27; 表示所有用户都可以创建组织（这是默认值）：</span><br><span class=\"line\"># ORG_CREATION_USERS=</span><br><span class=\"line\">## &#x27;none&#x27; 表示没有用户可以创建组织：</span><br><span class=\"line\"># ORG_CREATION_USERS=none</span><br><span class=\"line\">## 逗号分隔列表表示只有这些用户可以创建组织：</span><br><span class=\"line\"># ORG_CREATION_USERS=admin1@example.com,admin2@example.com</span><br><span class=\"line\"> </span><br><span class=\"line\">## 即使注册被禁用，邀请组织管理员邀请用户</span><br><span class=\"line\"># INVITATIONS_ALLOWED=true</span><br><span class=\"line\">## 在不属于特定组织的邀请电子邮件中显示的名称</span><br><span class=\"line\"># INVITATION_ORG_NAME=Vaultwarden</span><br><span class=\"line\"> </span><br><span class=\"line\">## 组织邀请令牌、紧急访问邀请令牌、电子邮件验证令牌和删除请求令牌将在多少小时后过期（必须至少为 1 小时）</span><br><span class=\"line\"># INVITATION_EXPIRATION_HOURS=120</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制用户是否可以启用对其帐户的紧急访问。</span><br><span class=\"line\">## 此设置对所有用户全局适用。</span><br><span class=\"line\"># EMERGENCY_ACCESS_ALLOWED=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制用户是否可以更改其电子邮件。</span><br><span class=\"line\">## 此设置对所有用户全局适用。</span><br><span class=\"line\"># EMAIL_CHANGE_ALLOWED=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## 密码哈希迭代次数用于服务器端密码哈希。</span><br><span class=\"line\">## 新用户的默认值。如果更改，会在用户下次登录时更新现有用户的设置。</span><br><span class=\"line\"># PASSWORD_ITERATIONS=600000</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制用户是否可以设置或显示密码提示。此设置对所有用户全局适用。</span><br><span class=\"line\"># PASSWORD_HINTS_ALLOWED=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## 控制当 SMTP 服务未配置且允许密码提示时，是否应在网页上直接显示密码提示。</span><br><span class=\"line\">## 不建议在公共可访问实例上使用，因为这会提供对潜在敏感数据的未经授权访问。</span><br><span class=\"line\"># SHOW_PASSWORD_HINT=false</span><br><span class=\"line\"> </span><br><span class=\"line\">#########################</span><br><span class=\"line\">### 高级设置 ###</span><br><span class=\"line\">#########################</span><br><span class=\"line\"> </span><br><span class=\"line\">## 客户端 IP 头，用于识别客户端的 IP，默认为 &quot;X-Real-IP&quot;</span><br><span class=\"line\">## 设置为字符串 &quot;none&quot;（不带引号），以禁用任何头并仅使用远程 IP</span><br><span class=\"line\"># IP_HEADER=X-Real-IP</span><br><span class=\"line\"> </span><br><span class=\"line\">## 图标服务</span><br><span class=\"line\">## 预定义的图标服务有：internal, bitwarden, duckduckgo, google。</span><br><span class=\"line\">## 要指定自定义图标服务，请设置一个包含一个 `&#123;&#125;` 的 URL 模板，该模板会被替换为域名。例如：`https://icon.example.com/domain/&#123;&#125;`。</span><br><span class=\"line\">##</span><br><span class=\"line\">## `internal` 指的是 Vaultwarden 内置的图标获取实现。</span><br><span class=\"line\">## 如果设置了外部服务，对 Vaultwarden 的图标请求将返回 HTTP 重定向到外部服务上的相应图标。外部服务可能在您的 Vaultwarden 实例没有外部网络连接时有用，或者如果您担心有人可能会探测您的实例以尝试检测某些站点的图标是否已缓存。</span><br><span class=\"line\"># ICON_SERVICE=internal</span><br><span class=\"line\"> </span><br><span class=\"line\">## 图标重定向代码</span><br><span class=\"line\">## 用于重定向到外部图标服务的 HTTP 状态码。</span><br><span class=\"line\">## 支持的代码有 301（永久）、302（临时）、307（临时）和 308（永久）。临时重定向在测试不同的图标服务时很有用，但一旦确定了服务，建议使用永久重定向以提高缓存能力。旧版代码目前在 Bitwarden 客户端中支持得更好。</span><br><span class=\"line\"># ICON_REDIRECT_CODE=302</span><br><span class=\"line\"> </span><br><span class=\"line\">## 成功获取的图标的缓存生存时间（秒），0 表示“永远”</span><br><span class=\"line\">## 默认值：2592000（30天）</span><br><span class=\"line\"># ICON_CACHE_TTL=2592000</span><br><span class=\"line\">## 未找到的图标的缓存生存时间（秒），0 表示“永远”</span><br><span class=\"line\">## 默认值：259200（3天）</span><br><span class=\"line\"># ICON_CACHE_NEGTTL=259200</span><br><span class=\"line\"> </span><br><span class=\"line\">## 图标下载超时</span><br><span class=\"line\">## 配置下载 favicon 时的超时值。</span><br><span class=\"line\">## 默认是 10 秒，但在较慢的网络连接上可能过低。</span><br><span class=\"line\"># ICON_DOWNLOAD_TIMEOUT=10</span><br><span class=\"line\"> </span><br><span class=\"line\">## 通过正则表达式阻止 HTTP 域名/IP</span><br><span class=\"line\">## 任何匹配此正则表达式的域名或 IP 都不会被内部 HTTP 客户端获取。</span><br><span class=\"line\">## 对于隐藏本地网络中的其他服务器很有用。更多信息请参阅 WIKI。</span><br><span class=\"line\">## 注意：始终将此正则表达式用单引号括起来！</span><br><span class=\"line\"># HTTP_REQUEST_BLOCK_REGEX=&#x27;^(192\\.168\\.0\\.[0-9]+|192\\.168\\.1\\.[0-9]+)$&#x27;</span><br><span class=\"line\"> </span><br><span class=\"line\">## 启用此选项将导致内部 HTTP 客户端拒绝连接到任何非全局 IP 地址。</span><br><span class=\"line\">## 用于保护内部环境：参见 https://en.wikipedia.org/wiki/Reserved_IP_addresses 了解其会阻止的 IP 列表。</span><br><span class=\"line\"># HTTP_REQUEST_BLOCK_NON_GLOBAL_IPS=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## 客户端设置</span><br><span class=\"line\">## 启用客户端的实验性功能标志。</span><br><span class=\"line\">## 这是一个逗号分隔的功能标志列表，例如 &quot;flag1,flag2,flag3&quot;。</span><br><span class=\"line\">##</span><br><span class=\"line\">## 可用的标志如下：</span><br><span class=\"line\">## - &quot;autofill-overlay&quot;: 在表单字段中添加一个覆盖菜单，以便快速访问凭据。</span><br><span class=\"line\">## - &quot;autofill-v2&quot;: 使用新的自动填充实现。</span><br><span class=\"line\">## - &quot;browser-fileless-import&quot;: 直接从其他提供商导入凭据而无需文件。</span><br><span class=\"line\">## - &quot;extension-refresh&quot;: 临时启用新扩展设计直到正式发布（应与 beta Chrome 扩展一起使用）。</span><br><span class=\"line\">## - &quot;fido2-vault-credentials&quot;: 启用 FIDO2 安全密钥作为第二因素。</span><br><span class=\"line\">## - &quot;inline-menu-positioning-improvements&quot;: 启用浏览器扩展中的内联菜单密码生成器和身份建议。</span><br><span class=\"line\">## - &quot;ssh-key-vault-item&quot;: 启用 SSH 密钥保险库项的创建和使用。（需要客户端 &gt;=2024.12.0）</span><br><span class=\"line\">## - &quot;ssh-agent&quot;: 在桌面上启用 SSH 代理支持。（需要桌面 &gt;=2024.12.0）</span><br><span class=\"line\"># EXPERIMENTAL_CLIENT_FEATURE_FLAGS=fido2-vault-credentials</span><br><span class=\"line\"> </span><br><span class=\"line\">## 要求新设备电子邮件。当用户登录时需要发送一封电子邮件。</span><br><span class=\"line\">## 如果发送电子邮件失败，则登录尝试将失败！</span><br><span class=\"line\"># REQUIRE_DEVICE_EMAIL=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 启用扩展日志记录，这将在日志中显示时间戳和目标。</span><br><span class=\"line\"># EXTENDED_LOGGING=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## 扩展日志记录的时间戳格式。</span><br><span class=\"line\">## 格式说明符：https://docs.rs/chrono/latest/chrono/format/strftime</span><br><span class=\"line\"># LOG_TIMESTAMP_FORMAT=&quot;%Y-%m-%d %H:%M:%S.%3f&quot;</span><br><span class=\"line\"> </span><br><span class=\"line\">## 日志记录到 Syslog</span><br><span class=\"line\">## 这需要扩展日志记录</span><br><span class=\"line\"># USE_SYSLOG=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 记录到文件</span><br><span class=\"line\"># LOG_FILE=/path/to/log</span><br><span class=\"line\"> </span><br><span class=\"line\">## 日志级别</span><br><span class=\"line\">## 更改日志输出的详细程度。</span><br><span class=\"line\">## 有效值为 &quot;trace&quot;, &quot;debug&quot;, &quot;info&quot;, &quot;warn&quot;, &quot;error&quot; 和 &quot;off&quot;。</span><br><span class=\"line\">## 将其设置为 &quot;trace&quot; 或 &quot;debug&quot; 也会显示挂载路由和静态文件、WebSocket 和 alive 请求的日志。</span><br><span class=\"line\">## 对于特定模块，可以附加一个逗号分隔的 `path::to::module=log_level`</span><br><span class=\"line\">## 例如，要只为图标查看 info 日志，使用：LOG_LEVEL=&quot;info,vaultwarden::api::icons=debug&quot;</span><br><span class=\"line\"># LOG_LEVEL=info</span><br><span class=\"line\"> </span><br><span class=\"line\">## 管理界面的令牌，最好是 Argon2 PHC 字符串。</span><br><span class=\"line\">## Vaultwarden 提供了一个内置生成器，可以通过调用 `vaultwarden hash` 来生成。</span><br><span class=\"line\">## 详情请参阅：https://github.com/dani-garcia/vaultwarden/wiki/Enabling-admin-page#secure-the-admin_token</span><br><span class=\"line\">## 如果未设置，管理面板将被禁用。</span><br><span class=\"line\">## 新的 Argon2 PHC 字符串</span><br><span class=\"line\">## 注意，在某些环境中，如 docker-compose 中，您需要将所有美元符号 `$` 转义为两个美元符号 `$$`。</span><br><span class=\"line\">## 并且在必要时使用单引号 (&#x27;) 而不是双引号 (&quot;) 包含字符串。</span><br><span class=\"line\"># ADMIN_TOKEN=&#x27;$argon2id$v=19$m=65540,t=3,p=4$MmeKRnGK5RW5mJS7h3TOL89GrpLPXJPAtTK8FTqj9HM$DqsstvoSAETl9YhnsXbf43WeaUwJC6JhViIvuPoig78&#x27;</span><br><span class=\"line\">## 旧的明文字符串（会产生警告，建议使用 Argon2）</span><br><span class=\"line\"># ADMIN_TOKEN=Vy2VyYTTsKPv8W5aEOWUbB/Bt3DEKePbHmI4m9VcemUMS2rEviDowNAFqYi1xjmp</span><br><span class=\"line\"> </span><br><span class=\"line\">## 启用此选项以绕过管理面板的安全性。此选项仅适用于前面带有单独认证层的情况。</span><br><span class=\"line\"># DISABLE_ADMIN_TOKEN=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 在相同的 IP 地址下，两次管理登录请求之间的平均秒数，超过这个时间限制才会触发限速。</span><br><span class=\"line\"># ADMIN_RATELIMIT_SECONDS=300</span><br><span class=\"line\">## 允许的最大突发请求数，同时保持由 `ADMIN_RATELIMIT_SECONDS` 指定的平均值。</span><br><span class=\"line\"># ADMIN_RATELIMIT_MAX_BURST=3</span><br><span class=\"line\"> </span><br><span class=\"line\">## 设置管理员会话的有效期为此值（分钟）。</span><br><span class=\"line\"># ADMIN_SESSION_LIFETIME=20</span><br><span class=\"line\"> </span><br><span class=\"line\">## 允许的 iframe 祖先（了解风险！）</span><br><span class=\"line\">## https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-ancestors</span><br><span class=\"line\">## 允许其他域嵌入 web vault 到 iframe 中，便于嵌入安全的内部网。</span><br><span class=\"line\">## 此值将被添加到 &#x27;Content-Security-Policy&#x27; 头部的 &#x27;frame-ancestors&#x27; 值中。</span><br><span class=\"line\">## 多个值必须用空格分隔。</span><br><span class=\"line\"># ALLOWED_IFRAME_ANCESTORS=</span><br><span class=\"line\"> </span><br><span class=\"line\">## 允许的 connect-src（了解风险！）</span><br><span class=\"line\">## https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/connect-src</span><br><span class=\"line\">## 允许其他域加载使用脚本接口（如转发电子邮件别名功能）的 URL。</span><br><span class=\"line\">## 此值将被添加到 &#x27;Content-Security-Policy&#x27; 头部的 &#x27;connect-src&#x27; 值中。</span><br><span class=\"line\">## 多个值必须用空格分隔，并且只允许 HTTPS 值。</span><br><span class=\"line\">## 示例：&quot;https://my-addy-io.domain.tld https://my-simplelogin.domain.tld&quot;</span><br><span class=\"line\"># ALLOWED_CONNECT_SRC=&quot;&quot;</span><br><span class=\"line\"> </span><br><span class=\"line\">## 在相同的 IP 地址下，两次登录请求之间的平均秒数，超过这个时间限制才会触发限速。</span><br><span class=\"line\"># LOGIN_RATELIMIT_SECONDS=60</span><br><span class=\"line\">## 允许的最大突发请求数，同时保持由 `LOGIN_RATELIMIT_SECONDS` 指定的平均值。</span><br><span class=\"line\">## 注意：这适用于登录和两步验证，因此建议至少允许突发大小为 2。</span><br><span class=\"line\"># LOGIN_RATELIMIT_MAX_BURST=10</span><br><span class=\"line\"> </span><br><span class=\"line\">## BETA 功能：组</span><br><span class=\"line\">## 控制组织是否启用组支持。</span><br><span class=\"line\">## 此设置适用于组织。</span><br><span class=\"line\">## 默认情况下禁用，因为这是一个 Beta 功能，包含已知问题！</span><br><span class=\"line\">## 了解你在做什么！</span><br><span class=\"line\"># ORG_GROUPS_ENABLED=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 增加安全笔记大小限制（了解风险！）</span><br><span class=\"line\">## 将安全笔记大小限制设置为 100_000 而不是默认的 10_000。</span><br><span class=\"line\">## 警告：这可能导致客户端出现问题。此外，在 Bitwarden 服务器上导出将不起作用！</span><br><span class=\"line\">## 了解你在做什么！</span><br><span class=\"line\"># INCREASE_NOTE_SIZE_LIMIT=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 强制单组织策略与重置密码策略</span><br><span class=\"line\">## 强制在启用重置密码策略之前启用单组织策略。</span><br><span class=\"line\">## Bitwarden 默认强制执行此策略。在 Vaultwarden 中，我们鼓励使用多个组织，因为组不可用。</span><br><span class=\"line\">## 将此设置为 true 将在启用重置密码策略之前强制启用单组织策略。</span><br><span class=\"line\"># ENFORCE_SINGLE_ORG_WITH_RESET_PW_POLICY=false</span><br><span class=\"line\"> </span><br><span class=\"line\">########################</span><br><span class=\"line\">### MFA/2FA 设置 ###</span><br><span class=\"line\">########################</span><br><span class=\"line\"> </span><br><span class=\"line\">## Yubico (Yubikey) 设置</span><br><span class=\"line\">## 设置您的 Yubikey OTP 的 Client ID 和 Secret Key。</span><br><span class=\"line\">## 您可以在此生成：https://upgrade.yubico.com/getapikey/</span><br><span class=\"line\">## 您也可以选择指定一个自定义的 OTP 服务器。</span><br><span class=\"line\"># YUBICO_CLIENT_ID=11111</span><br><span class=\"line\"># YUBICO_SECRET_KEY=AAAAAAAAAAAAAAAAAAAAAAAA</span><br><span class=\"line\"># YUBICO_SERVER=http://yourdomain.com/wsapi/2.0/verify</span><br><span class=\"line\"> </span><br><span class=\"line\">## Duo 设置</span><br><span class=\"line\">## 您需要配置 DUO_IKEY, DUO_SKEY 和 DUO_HOST 选项以启用全局 Duo 支持。</span><br><span class=\"line\">## 否则用户需要自己配置这些设置。</span><br><span class=\"line\">## 创建账户并保护应用程序，请参阅此链接（仅第一步，其余步骤忽略）：</span><br><span class=\"line\">## https://help.bitwarden.com/article/setup-two-step-login-duo/#create-a-duo-security-account</span><br><span class=\"line\">## 然后根据最后一步获得的值设置以下选项：</span><br><span class=\"line\"># DUO_IKEY=&lt;Client ID&gt;</span><br><span class=\"line\"># DUO_SKEY=&lt;Client Secret&gt;</span><br><span class=\"line\"># DUO_HOST=&lt;API Hostname&gt;</span><br><span class=\"line\">## 之后，您可以继续按照上述链接中的指南操作，</span><br><span class=\"line\">## 忽略那些您已经预先配置的字段。</span><br><span class=\"line\">##</span><br><span class=\"line\">## 如果您想尝试使用 Duo 的 &#x27;Traditional Prompt&#x27;（已弃用，基于 iframe），将 DUO_USE_IFRAME 设置为 &#x27;true&#x27;。</span><br><span class=\"line\">## Duo 不再支持此功能，但某些集成仍然有效。</span><br><span class=\"line\">## 如果不确定，请忽略此设置。</span><br><span class=\"line\"># DUO_USE_IFRAME=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 邮件 2FA 设置</span><br><span class=\"line\">## 邮件令牌大小</span><br><span class=\"line\">## 邮件 2FA 令牌中的数字位数（最小：6，最大：255）。</span><br><span class=\"line\">## 注意：无论此设置如何，Bitwarden 客户端都硬编码为提及 6 位代码！</span><br><span class=\"line\"># EMAIL_TOKEN_SIZE=6</span><br><span class=\"line\">##</span><br><span class=\"line\">## 令牌过期时间</span><br><span class=\"line\">## 令牌有效的最长时间（秒）。用户打开邮件客户端并复制令牌的时间。</span><br><span class=\"line\"># EMAIL_EXPIRATION_TIME=600</span><br><span class=\"line\">##</span><br><span class=\"line\">## 在重置邮件令牌并需要发送新邮件之前的最大尝试次数。</span><br><span class=\"line\"># EMAIL_ATTEMPTS_LIMIT=3</span><br><span class=\"line\">##</span><br><span class=\"line\">## 无论任何组织策略，设置邮件 2FA</span><br><span class=\"line\"># EMAIL_2FA_ENFORCE_ON_VERIFIED_INVITE=false</span><br><span class=\"line\">## 在需要时自动设置邮件 2FA 作为备用提供程序</span><br><span class=\"line\"># EMAIL_2FA_AUTO_FALLBACK=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 其他 MFA/2FA 设置</span><br><span class=\"line\">## 禁用记住 2FA</span><br><span class=\"line\">## 启用此选项将强制用户每次登录时使用第二因素。</span><br><span class=\"line\">## 注意：复选框仍然会显示，但会被忽略。</span><br><span class=\"line\"># DISABLE_2FA_REMEMBER=false</span><br><span class=\"line\">##</span><br><span class=\"line\">## 身份验证器设置</span><br><span class=\"line\">## 禁用身份验证器时间偏移代码的有效性。</span><br><span class=\"line\">## 前 30 秒和后 30 秒的身份验证代码将无效。</span><br><span class=\"line\">##</span><br><span class=\"line\">## 根据 RFC6238（https://tools.ietf.org/html/rfc6238），</span><br><span class=\"line\">## 我们默认允许前一步和下一步的有效 TOTP 代码。</span><br><span class=\"line\">## 但是，这可能会让攻击者更容易成功，因为有 3 个有效的代码。</span><br><span class=\"line\">## 您可以禁用此功能，以便只允许当前的 TOTP 代码。</span><br><span class=\"line\">## 请注意，如果服务器时间偏移，有效的代码可能会被标记为无效。</span><br><span class=\"line\">## 无论如何，一旦代码被使用，它就不能再次使用，并且之前的所有代码也将无效。</span><br><span class=\"line\"># AUTHENTICATOR_DISABLE_TIME_DRIFT=false</span><br><span class=\"line\"> </span><br><span class=\"line\">###########################</span><br><span class=\"line\">### SMTP 邮件设置 ###</span><br><span class=\"line\">###########################</span><br><span class=\"line\"> </span><br><span class=\"line\">## 邮件特定设置，设置 SMTP_FROM 并设置 SMTP_HOST 或 USE_SENDMAIL 以启用邮件服务。</span><br><span class=\"line\">## 为了确保电子邮件链接指向正确的主机，请设置 DOMAIN 变量。</span><br><span class=\"line\">## 注意：如果指定了 SMTP_USERNAME，则必须指定 SMTP_PASSWORD。</span><br><span class=\"line\"># SMTP_HOST=smtp.domain.tld</span><br><span class=\"line\"># SMTP_FROM=vaultwarden@domain.tld</span><br><span class=\"line\"># SMTP_FROM_NAME=Vaultwarden</span><br><span class=\"line\"># SMTP_USERNAME=username</span><br><span class=\"line\"># SMTP_PASSWORD=password</span><br><span class=\"line\"># SMTP_TIMEOUT=15</span><br><span class=\"line\"> </span><br><span class=\"line\">## 选择用于 SMTP 的安全连接类型。默认是 &quot;starttls&quot;。</span><br><span class=\"line\">## 可用选项包括：</span><br><span class=\"line\">## - &quot;starttls&quot;: 默认端口是 587。</span><br><span class=\"line\">## - &quot;force_tls&quot;: 默认端口是 465。</span><br><span class=\"line\">## - &quot;off&quot;: 默认端口是 25。</span><br><span class=\"line\">## 端口 587（提交）和 25（smtp）是标准无加密和通过 STARTTLS 加密的连接。端口 465（提交）用于加密提交（隐式 TLS）。</span><br><span class=\"line\"># SMTP_SECURITY=starttls</span><br><span class=\"line\"># SMTP_PORT=587</span><br><span class=\"line\"> </span><br><span class=\"line\"># 是否通过 `sendmail` 命令发送邮件</span><br><span class=\"line\"># USE_SENDMAIL=false</span><br><span class=\"line\"># 使用哪个 sendmail 命令。如果没有指定，则使用 $PATH 中找到的命令。</span><br><span class=\"line\"># SENDMAIL_COMMAND=&quot;/path/to/sendmail&quot;</span><br><span class=\"line\"> </span><br><span class=\"line\">## 默认情况下 SSL 是 &quot;Plain&quot; 和 &quot;Login&quot;，非 SSL 连接不使用任何机制。</span><br><span class=\"line\">## 可能的值：[&quot;Plain&quot;, &quot;Login&quot;, &quot;Xoauth2&quot;]。</span><br><span class=\"line\">## 多个选项需要用逗号 &#x27;,&#x27; 分隔。</span><br><span class=\"line\"># SMTP_AUTH_MECHANISM=</span><br><span class=\"line\"> </span><br><span class=\"line\">## 发送 SMTP HELO 时使用的服务器名称</span><br><span class=\"line\">## 默认情况下，该值应该是机器的主机名，</span><br><span class=\"line\">## 但如果触发了一些反垃圾邮件过滤器，则可能需要更改此值。</span><br><span class=\"line\"># HELO_NAME=</span><br><span class=\"line\"> </span><br><span class=\"line\">## 将图像嵌入为邮件附件</span><br><span class=\"line\"># SMTP_EMBED_IMAGES=true</span><br><span class=\"line\"> </span><br><span class=\"line\">## SMTP 调试</span><br><span class=\"line\">## 当设置为 true 时，这将输出非常详细的 SMTP 消息。</span><br><span class=\"line\">## 警告：这可能包含敏感信息如密码和用户名！仅在故障排除时启用！</span><br><span class=\"line\"># SMTP_DEBUG=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 接受无效证书</span><br><span class=\"line\">## 危险：此选项引入了中间人攻击的重大漏洞！</span><br><span class=\"line\">## 仅在无法使用有效证书时作为最后手段使用。</span><br><span class=\"line\">## 如果证书有效但主机名不匹配，请使用 SMTP_ACCEPT_INVALID_HOSTNAMES。</span><br><span class=\"line\"># SMTP_ACCEPT_INVALID_CERTS=false</span><br><span class=\"line\"> </span><br><span class=\"line\">## 接受无效主机名</span><br><span class=\"line\">## 危险：此选项引入了中间人攻击的重大漏洞！</span><br><span class=\"line\">## 仅在无法使用有效证书时作为最后手段使用。</span><br><span class=\"line\"># SMTP_ACCEPT_INVALID_HOSTNAMES=false</span><br><span class=\"line\"> </span><br><span class=\"line\">#######################</span><br><span class=\"line\">### Rocket 设置 ###</span><br><span class=\"line\">#######################</span><br><span class=\"line\"> </span><br><span class=\"line\">## Rocket 特定设置</span><br><span class=\"line\">## 详情请参见：https://rocket.rs/v0.5/guide/configuration/</span><br><span class=\"line\"># ROCKET_ADDRESS=0.0.0.0</span><br><span class=\"line\">## 默认端口是 8000，除非在 Docker 容器中运行，在这种情况下，默认端口是 80。</span><br><span class=\"line\"># ROCKET_PORT=8000</span><br><span class=\"line\"># ROCKET_TLS=&#123;certs=&quot;/path/to/certs.pem&quot;,key=&quot;/path/to/key.pem&quot;&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"># vim: syntax=ini</span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n<p>‍</p>\n<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">vaultwarden:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;docker.olinl.com.cn/vaultwarden/server:latest&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">bitwarden</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">bitwarden</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">DOMAIN:</span> <span class=\"string\">&quot;https://passwd.jianglin.cc&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./data/:/data/</span></span><br><span class=\"line\">    <span class=\"comment\">#ports: # 映射端口：需要反向代理到域名</span></span><br><span class=\"line\">    <span class=\"comment\">#  - 8092:80</span></span><br><span class=\"line\"><span class=\"comment\"># 个人配置</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">net</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">net:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">lin-net</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Docker-compose实例 flare","abbrlink":"1012","date":"2025-02-24T13:33:08.000Z","_content":"\n一个十分轻量级的个人导航页\n\n地址：[soulteary/docker-flare](https://github.com/soulteary/docker-flare)\n\n作者博客：[从零开始搭建个人书签导航应用：Flare](https://soulteary.com/2022/02/23/building-a-personal-bookmark-navigation-app-from-scratch-flare.html)\n\n\ndocker-compose\n\n```yaml\nservices:\n  flare:\n    image: 'docker.olinl.com.cn/soulteary/flare'\n    container_name: flare\n    hostname: flare\n    restart: always\n    # 启用账号登录模式\n    command: flare --nologin=0\n    environment:\n      # 如需开启用户登录模式，需要先设置 `nologin` 启动参数为 `0`\n      # 如开启 `nologin`，未设置 FLARE_USER，则默认用户为 `flare`\n      - FLARE_USER=admin\n      # 指定你自己的账号密码，如未设置 `FLARE_USER`，则会默认生成密码并展示在应用启动日志中\n      - FLARE_PASS=admin\n      # 是否开启“使用向导”，访问 `/guide`\n      # - FLARE_GUIDE=1\n    ports:\n      - 80:5005\n    volumes:\n      - ./app:/app\n\n# 个人配置\n    networks:\n     - lin-net\nnetworks:\n  lin-net:\n    external: true\n    name: lin-net\n```\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/flare.md","raw":"---\ntitle: Docker-compose实例 flare\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - flare\nabbrlink: '1012'\ndate: 2025-02-24 21:33:08\n---\n\n一个十分轻量级的个人导航页\n\n地址：[soulteary/docker-flare](https://github.com/soulteary/docker-flare)\n\n作者博客：[从零开始搭建个人书签导航应用：Flare](https://soulteary.com/2022/02/23/building-a-personal-bookmark-navigation-app-from-scratch-flare.html)\n\n\ndocker-compose\n\n```yaml\nservices:\n  flare:\n    image: 'docker.olinl.com.cn/soulteary/flare'\n    container_name: flare\n    hostname: flare\n    restart: always\n    # 启用账号登录模式\n    command: flare --nologin=0\n    environment:\n      # 如需开启用户登录模式，需要先设置 `nologin` 启动参数为 `0`\n      # 如开启 `nologin`，未设置 FLARE_USER，则默认用户为 `flare`\n      - FLARE_USER=admin\n      # 指定你自己的账号密码，如未设置 `FLARE_USER`，则会默认生成密码并展示在应用启动日志中\n      - FLARE_PASS=admin\n      # 是否开启“使用向导”，访问 `/guide`\n      # - FLARE_GUIDE=1\n    ports:\n      - 80:5005\n    volumes:\n      - ./app:/app\n\n# 个人配置\n    networks:\n     - lin-net\nnetworks:\n  lin-net:\n    external: true\n    name: lin-net\n```\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/flare","published":1,"updated":"2025-06-02T07:26:18.471Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86xw00bizcqb0y8lhkp9","content":"<p>一个十分轻量级的个人导航页</p>\n<p>地址：<a href=\"https://github.com/soulteary/docker-flare\">soulteary&#x2F;docker-flare</a></p>\n<p>作者博客：<a href=\"https://soulteary.com/2022/02/23/building-a-personal-bookmark-navigation-app-from-scratch-flare.html\">从零开始搭建个人书签导航应用：Flare</a></p>\n<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">flare:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;docker.olinl.com.cn/soulteary/flare&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">flare</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">flare</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"comment\"># 启用账号登录模式</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span> <span class=\"string\">flare</span> <span class=\"string\">--nologin=0</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"comment\"># 如需开启用户登录模式，需要先设置 `nologin` 启动参数为 `0`</span></span><br><span class=\"line\">      <span class=\"comment\"># 如开启 `nologin`，未设置 FLARE_USER，则默认用户为 `flare`</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">FLARE_USER=admin</span></span><br><span class=\"line\">      <span class=\"comment\"># 指定你自己的账号密码，如未设置 `FLARE_USER`，则会默认生成密码并展示在应用启动日志中</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">FLARE_PASS=admin</span></span><br><span class=\"line\">      <span class=\"comment\"># 是否开启“使用向导”，访问 `/guide`</span></span><br><span class=\"line\">      <span class=\"comment\"># - FLARE_GUIDE=1</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">80</span><span class=\"string\">:5005</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./app:/app</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 个人配置</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">lin-net</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">lin-net:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">lin-net</span></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=6a83ed99-1c93-cd19-9747-46e336450fb9","cover_type":"img","excerpt":"","more":"<p>一个十分轻量级的个人导航页</p>\n<p>地址：<a href=\"https://github.com/soulteary/docker-flare\">soulteary&#x2F;docker-flare</a></p>\n<p>作者博客：<a href=\"https://soulteary.com/2022/02/23/building-a-personal-bookmark-navigation-app-from-scratch-flare.html\">从零开始搭建个人书签导航应用：Flare</a></p>\n<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">flare:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;docker.olinl.com.cn/soulteary/flare&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">flare</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">flare</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"comment\"># 启用账号登录模式</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span> <span class=\"string\">flare</span> <span class=\"string\">--nologin=0</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"comment\"># 如需开启用户登录模式，需要先设置 `nologin` 启动参数为 `0`</span></span><br><span class=\"line\">      <span class=\"comment\"># 如开启 `nologin`，未设置 FLARE_USER，则默认用户为 `flare`</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">FLARE_USER=admin</span></span><br><span class=\"line\">      <span class=\"comment\"># 指定你自己的账号密码，如未设置 `FLARE_USER`，则会默认生成密码并展示在应用启动日志中</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">FLARE_PASS=admin</span></span><br><span class=\"line\">      <span class=\"comment\"># 是否开启“使用向导”，访问 `/guide`</span></span><br><span class=\"line\">      <span class=\"comment\"># - FLARE_GUIDE=1</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">80</span><span class=\"string\">:5005</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./app:/app</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 个人配置</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">lin-net</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">lin-net:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">lin-net</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Docker-compose实例 Portainer","abbrlink":"5a3f","date":"2025-02-24T13:33:08.000Z","_content":"\n> Portainer是一个容器管理工具，提供图形化界面来方便地管理和控制Docker。通过拉取镜像、启动容器，映射端口和数据卷，可以轻松实现对容器的监控、日志查看、启动和停止等操作。首次登录Portainer需要创建管理员账户，并可以选择本地Docker进行管理。如果遇到端口冲突或容器名重复问题，需相应解决，如更改端口或删除重复容器。\n\n[Kubernetes and Docker Container Management Software](https://www.portainer.io/)\n\n```yaml\nversion: '3.1'\nservices:\n  portainer:\n    image: 6053537/portainer-ce\n    container_name: portainer\n    hostname: portainer\n    restart: unless-stopped\n    ports:\n      - '6004:9000'\n    volumes:\n      - '/var/run/docker.sock:/var/run/docker.sock'\n      - '/volume1/docker/portainer/data:/data'\n    networks:\n      bridge0:\n        ipv4_address: 172.20.0.6\nnetworks:\n  bridge0:\n    external: true\n    name: bridge0\n\n```\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Portainer.md","raw":"---\ntitle: Docker-compose实例 Portainer\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - Portainer\nabbrlink: 5a3f\ndate: 2025-02-24 21:33:08\n---\n\n> Portainer是一个容器管理工具，提供图形化界面来方便地管理和控制Docker。通过拉取镜像、启动容器，映射端口和数据卷，可以轻松实现对容器的监控、日志查看、启动和停止等操作。首次登录Portainer需要创建管理员账户，并可以选择本地Docker进行管理。如果遇到端口冲突或容器名重复问题，需相应解决，如更改端口或删除重复容器。\n\n[Kubernetes and Docker Container Management Software](https://www.portainer.io/)\n\n```yaml\nversion: '3.1'\nservices:\n  portainer:\n    image: 6053537/portainer-ce\n    container_name: portainer\n    hostname: portainer\n    restart: unless-stopped\n    ports:\n      - '6004:9000'\n    volumes:\n      - '/var/run/docker.sock:/var/run/docker.sock'\n      - '/volume1/docker/portainer/data:/data'\n    networks:\n      bridge0:\n        ipv4_address: 172.20.0.6\nnetworks:\n  bridge0:\n    external: true\n    name: bridge0\n\n```\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/Portainer","published":1,"updated":"2025-06-02T07:26:46.660Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86xw00bmzcqb28u39nxc","content":"<blockquote>\n<p>Portainer是一个容器管理工具，提供图形化界面来方便地管理和控制Docker。通过拉取镜像、启动容器，映射端口和数据卷，可以轻松实现对容器的监控、日志查看、启动和停止等操作。首次登录Portainer需要创建管理员账户，并可以选择本地Docker进行管理。如果遇到端口冲突或容器名重复问题，需相应解决，如更改端口或删除重复容器。</p>\n</blockquote>\n<p><a href=\"https://www.portainer.io/\">Kubernetes and Docker Container Management Software</a></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3.1&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">portainer:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"number\">6053537</span><span class=\"string\">/portainer-ce</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">portainer</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">portainer</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;6004:9000&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/var/run/docker.sock:/var/run/docker.sock&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/volume1/docker/portainer/data:/data&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">        <span class=\"attr\">ipv4_address:</span> <span class=\"number\">172.20</span><span class=\"number\">.0</span><span class=\"number\">.6</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">bridge0</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=a252676e-48d2-9401-96c7-31720a64d95b","cover_type":"img","excerpt":"","more":"<blockquote>\n<p>Portainer是一个容器管理工具，提供图形化界面来方便地管理和控制Docker。通过拉取镜像、启动容器，映射端口和数据卷，可以轻松实现对容器的监控、日志查看、启动和停止等操作。首次登录Portainer需要创建管理员账户，并可以选择本地Docker进行管理。如果遇到端口冲突或容器名重复问题，需相应解决，如更改端口或删除重复容器。</p>\n</blockquote>\n<p><a href=\"https://www.portainer.io/\">Kubernetes and Docker Container Management Software</a></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3.1&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">portainer:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"number\">6053537</span><span class=\"string\">/portainer-ce</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">portainer</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">portainer</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;6004:9000&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/var/run/docker.sock:/var/run/docker.sock&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/volume1/docker/portainer/data:/data&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">        <span class=\"attr\">ipv4_address:</span> <span class=\"number\">172.20</span><span class=\"number\">.0</span><span class=\"number\">.6</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">bridge0</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n"},{"title":"Docker-compose实例 Nginx","abbrlink":"3939","date":"2025-02-24T13:33:08.000Z","_content":"\n> Nginx (engine x) 是一个高性能的HTTP和反向代理web服务器 ，同时也提供了IMAP/POP3/SMTP服务。Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点（俄文：Рамблер）开发的，公开版本1.19.6发布于2020年12月15日。\n\n[nginx](https://nginx.org/en/)\n\n#### 需配置文件 （nginx.conf、default.conf）\n\n```shell\n链接\n```\n\n```yaml\nversion: '2.0'\nservices:\n  nginx:\n    image: nginx\n    restart: always\n    container_name: nginx\n    ports:\n      - '81:81'\n    volumes:\n      - '/volume1/docker/nginx/conf.d:/etc/nginx/conf.d'\n      - '/volume1/docker/nginx/log:/var/log/nginx'\n      - '/volume1/docker/nginx/conf/nginx.conf:/etc/nginx/nginx.conf'\n      - '/volume1/docker/nginx/html:/usr/share/nginx/html'\n      - '/volume1/docker/nginx/etc/letsencrypt:/etc/letsencrypt'\n    networks:\n      bridge0:\n        ipv4_address: 172.20.0.11\nnetworks:\n  bridge0:\n    external: true\n    name: bridge0\n\n```\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/Nginx.md","raw":"---\ntitle: Docker-compose实例 Nginx\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - Nginx\nabbrlink: '3939'\ndate: 2025-02-24 21:33:08\n---\n\n> Nginx (engine x) 是一个高性能的HTTP和反向代理web服务器 ，同时也提供了IMAP/POP3/SMTP服务。Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点（俄文：Рамблер）开发的，公开版本1.19.6发布于2020年12月15日。\n\n[nginx](https://nginx.org/en/)\n\n#### 需配置文件 （nginx.conf、default.conf）\n\n```shell\n链接\n```\n\n```yaml\nversion: '2.0'\nservices:\n  nginx:\n    image: nginx\n    restart: always\n    container_name: nginx\n    ports:\n      - '81:81'\n    volumes:\n      - '/volume1/docker/nginx/conf.d:/etc/nginx/conf.d'\n      - '/volume1/docker/nginx/log:/var/log/nginx'\n      - '/volume1/docker/nginx/conf/nginx.conf:/etc/nginx/nginx.conf'\n      - '/volume1/docker/nginx/html:/usr/share/nginx/html'\n      - '/volume1/docker/nginx/etc/letsencrypt:/etc/letsencrypt'\n    networks:\n      bridge0:\n        ipv4_address: 172.20.0.11\nnetworks:\n  bridge0:\n    external: true\n    name: bridge0\n\n```\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/Nginx","published":1,"updated":"2025-06-02T07:26:43.402Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86xx00bpzcqb97599wh6","content":"<blockquote>\n<p>Nginx (engine x) 是一个高性能的HTTP和反向代理web服务器 ，同时也提供了IMAP&#x2F;POP3&#x2F;SMTP服务。Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点（俄文：Рамблер）开发的，公开版本1.19.6发布于2020年12月15日。</p>\n</blockquote>\n<p><a href=\"https://nginx.org/en/\">nginx</a></p>\n<h4 id=\"需配置文件-（nginx-conf、default-conf）\"><a href=\"#需配置文件-（nginx-conf、default-conf）\" class=\"headerlink\" title=\"需配置文件 （nginx.conf、default.conf）\"></a>需配置文件 （nginx.conf、default.conf）</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">链接</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;2.0&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">nginx:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">nginx</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">nginx</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;81:81&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/volume1/docker/nginx/conf.d:/etc/nginx/conf.d&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/volume1/docker/nginx/log:/var/log/nginx&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/volume1/docker/nginx/conf/nginx.conf:/etc/nginx/nginx.conf&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/volume1/docker/nginx/html:/usr/share/nginx/html&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/volume1/docker/nginx/etc/letsencrypt:/etc/letsencrypt&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">        <span class=\"attr\">ipv4_address:</span> <span class=\"number\">172.20</span><span class=\"number\">.0</span><span class=\"number\">.11</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">bridge0</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=a8663aa5-1bfb-9df6-1a53-219ee8ebaa4f","cover_type":"img","excerpt":"","more":"<blockquote>\n<p>Nginx (engine x) 是一个高性能的HTTP和反向代理web服务器 ，同时也提供了IMAP&#x2F;POP3&#x2F;SMTP服务。Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点（俄文：Рамблер）开发的，公开版本1.19.6发布于2020年12月15日。</p>\n</blockquote>\n<p><a href=\"https://nginx.org/en/\">nginx</a></p>\n<h4 id=\"需配置文件-（nginx-conf、default-conf）\"><a href=\"#需配置文件-（nginx-conf、default-conf）\" class=\"headerlink\" title=\"需配置文件 （nginx.conf、default.conf）\"></a>需配置文件 （nginx.conf、default.conf）</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">链接</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;2.0&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">nginx:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">nginx</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">nginx</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;81:81&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/volume1/docker/nginx/conf.d:/etc/nginx/conf.d&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/volume1/docker/nginx/log:/var/log/nginx&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/volume1/docker/nginx/conf/nginx.conf:/etc/nginx/nginx.conf&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/volume1/docker/nginx/html:/usr/share/nginx/html&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/volume1/docker/nginx/etc/letsencrypt:/etc/letsencrypt&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">        <span class=\"attr\">ipv4_address:</span> <span class=\"number\">172.20</span><span class=\"number\">.0</span><span class=\"number\">.11</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">bridge0</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n"},{"title":"Docker-compose实例 lsky-pro-plus","abbrlink":"1917","date":"2025-02-24T13:33:08.000Z","_content":"\n\ndocker-compose\n\n```yaml\nservices:\n  app:\n    build:\n      context: ..\n      dockerfile: ./docker/Dockerfile\n    image: lsky-pro-plus\n    container_name: lsky-pro-plus\n    environment:\n      APP_NAME: \"拾柒图床\"\n      APP_URL: \"https://img.olinl.com\"\n      APP_LICENSE_KEY: \"vrfhtbul1u3k\"\n      ADMIN_USERNAME: \"jianglin\"\n      ADMIN_EMAIL: \"jianglinper@163.com\"\n      ADMIN_PASSWORD: \"Lin203428\"\n      DB_HOST: \"mysql\"\n      DB_PORT: \"3306\"\n      DB_DATABASE: \"lsky\"\n      DB_USERNAME: \"root\"\n      DB_PASSWORD: \"root\"\n    ports:\n      - '18002:80'\n    volumes:\n      - './data/app-code:/var/www'\n      - './data/lsky-data:/var/www/data'\n    restart: unless-stopped\n    \n```\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/lsky-pro-plus.md","raw":"---\ntitle: Docker-compose实例 lsky-pro-plus\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - lsky-pro-plus\nabbrlink: '1917'\ndate: 2025-02-24 21:33:08\n---\n\n\ndocker-compose\n\n```yaml\nservices:\n  app:\n    build:\n      context: ..\n      dockerfile: ./docker/Dockerfile\n    image: lsky-pro-plus\n    container_name: lsky-pro-plus\n    environment:\n      APP_NAME: \"拾柒图床\"\n      APP_URL: \"https://img.olinl.com\"\n      APP_LICENSE_KEY: \"vrfhtbul1u3k\"\n      ADMIN_USERNAME: \"jianglin\"\n      ADMIN_EMAIL: \"jianglinper@163.com\"\n      ADMIN_PASSWORD: \"Lin203428\"\n      DB_HOST: \"mysql\"\n      DB_PORT: \"3306\"\n      DB_DATABASE: \"lsky\"\n      DB_USERNAME: \"root\"\n      DB_PASSWORD: \"root\"\n    ports:\n      - '18002:80'\n    volumes:\n      - './data/app-code:/var/www'\n      - './data/lsky-data:/var/www/data'\n    restart: unless-stopped\n    \n```\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/lsky-pro-plus","published":1,"updated":"2025-06-02T07:26:33.907Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86xy00btzcqb0ivr9uo8","content":"<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">app:</span></span><br><span class=\"line\">    <span class=\"attr\">build:</span></span><br><span class=\"line\">      <span class=\"attr\">context:</span> <span class=\"string\">..</span></span><br><span class=\"line\">      <span class=\"attr\">dockerfile:</span> <span class=\"string\">./docker/Dockerfile</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">lsky-pro-plus</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">lsky-pro-plus</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">APP_NAME:</span> <span class=\"string\">&quot;拾柒图床&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">APP_URL:</span> <span class=\"string\">&quot;https://img.olinl.com&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">APP_LICENSE_KEY:</span> <span class=\"string\">&quot;vrfhtbul1u3k&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">ADMIN_USERNAME:</span> <span class=\"string\">&quot;jianglin&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">ADMIN_EMAIL:</span> <span class=\"string\">&quot;jianglinper@163.com&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">ADMIN_PASSWORD:</span> <span class=\"string\">&quot;Lin203428&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">DB_HOST:</span> <span class=\"string\">&quot;mysql&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">DB_PORT:</span> <span class=\"string\">&quot;3306&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">DB_DATABASE:</span> <span class=\"string\">&quot;lsky&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">DB_USERNAME:</span> <span class=\"string\">&quot;root&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">DB_PASSWORD:</span> <span class=\"string\">&quot;root&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;18002:80&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;./data/app-code:/var/www&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;./data/lsky-data:/var/www/data&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\">    </span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=cd027532-4d36-2281-b81b-d3b97abb39bb","cover_type":"img","excerpt":"","more":"<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">app:</span></span><br><span class=\"line\">    <span class=\"attr\">build:</span></span><br><span class=\"line\">      <span class=\"attr\">context:</span> <span class=\"string\">..</span></span><br><span class=\"line\">      <span class=\"attr\">dockerfile:</span> <span class=\"string\">./docker/Dockerfile</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">lsky-pro-plus</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">lsky-pro-plus</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">APP_NAME:</span> <span class=\"string\">&quot;拾柒图床&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">APP_URL:</span> <span class=\"string\">&quot;https://img.olinl.com&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">APP_LICENSE_KEY:</span> <span class=\"string\">&quot;vrfhtbul1u3k&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">ADMIN_USERNAME:</span> <span class=\"string\">&quot;jianglin&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">ADMIN_EMAIL:</span> <span class=\"string\">&quot;jianglinper@163.com&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">ADMIN_PASSWORD:</span> <span class=\"string\">&quot;Lin203428&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">DB_HOST:</span> <span class=\"string\">&quot;mysql&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">DB_PORT:</span> <span class=\"string\">&quot;3306&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">DB_DATABASE:</span> <span class=\"string\">&quot;lsky&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">DB_USERNAME:</span> <span class=\"string\">&quot;root&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">DB_PASSWORD:</span> <span class=\"string\">&quot;root&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;18002:80&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;./data/app-code:/var/www&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;./data/lsky-data:/var/www/data&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\">    </span><br></pre></td></tr></table></figure>\n"},{"title":"Docker-compose实例 synctv","abbrlink":"ac41","date":"2025-02-24T13:33:08.000Z","_content":"# synctv-Docker-Compose\n\n[synctv/README-CN.md at main · synctv-org/synctv · GitHub](https://github.com/synctv-org/synctv/blob/main/README-CN.md)\n\n> SyncTV 是一个允许您远程一起观看电影和直播的程序。它提供了同步观影、直播、聊天等功能。使用 SyncTV，您可以与朋友和家人一起观看视频和直播，无论他们在哪里。\n>\n> SyncTV 的同步观影功能确保所有观看视频的人都在同一点上。这意味着您可以暂停、快进快退、倍速等操作，其他人也会同步到同一点。\n\n默认账号 root\n\n默认密码 root\n\n```yaml\nversion: '3.3'\nservices:\n  synctv:\n    container_name: synctv\n    ports:\n      - '6008:8080'\n    environment:\n      - PUID=0\n      - PGID=0\n      - TZ=Asia/Shanghai\n    restart: always\n    volumes:\n      - '/volume1/docker/synctv/data:/root/.synctv'\n    image: synctvorg/synctv\n    networks:\n      bridge0:\n        ipv4_address: 172.20.0.12\nnetworks:\n  bridge0:\n    external: true\n    name: bridge0\n\n```\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/synctv.md","raw":"---\ntitle: Docker-compose实例 synctv\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - synctv\nabbrlink: ac41\ndate: 2025-02-24 21:33:08\n---\n# synctv-Docker-Compose\n\n[synctv/README-CN.md at main · synctv-org/synctv · GitHub](https://github.com/synctv-org/synctv/blob/main/README-CN.md)\n\n> SyncTV 是一个允许您远程一起观看电影和直播的程序。它提供了同步观影、直播、聊天等功能。使用 SyncTV，您可以与朋友和家人一起观看视频和直播，无论他们在哪里。\n>\n> SyncTV 的同步观影功能确保所有观看视频的人都在同一点上。这意味着您可以暂停、快进快退、倍速等操作，其他人也会同步到同一点。\n\n默认账号 root\n\n默认密码 root\n\n```yaml\nversion: '3.3'\nservices:\n  synctv:\n    container_name: synctv\n    ports:\n      - '6008:8080'\n    environment:\n      - PUID=0\n      - PGID=0\n      - TZ=Asia/Shanghai\n    restart: always\n    volumes:\n      - '/volume1/docker/synctv/data:/root/.synctv'\n    image: synctvorg/synctv\n    networks:\n      bridge0:\n        ipv4_address: 172.20.0.12\nnetworks:\n  bridge0:\n    external: true\n    name: bridge0\n\n```\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/synctv","published":1,"updated":"2025-06-02T07:26:51.535Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86xy00bwzcqbfsrhhhcg","content":"<h1 id=\"synctv-Docker-Compose\"><a href=\"#synctv-Docker-Compose\" class=\"headerlink\" title=\"synctv-Docker-Compose\"></a>synctv-Docker-Compose</h1><p><a href=\"https://github.com/synctv-org/synctv/blob/main/README-CN.md\">synctv&#x2F;README-CN.md at main · synctv-org&#x2F;synctv · GitHub</a></p>\n<blockquote>\n<p>SyncTV 是一个允许您远程一起观看电影和直播的程序。它提供了同步观影、直播、聊天等功能。使用 SyncTV，您可以与朋友和家人一起观看视频和直播，无论他们在哪里。</p>\n<p>SyncTV 的同步观影功能确保所有观看视频的人都在同一点上。这意味着您可以暂停、快进快退、倍速等操作，其他人也会同步到同一点。</p>\n</blockquote>\n<p>默认账号 root</p>\n<p>默认密码 root</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3.3&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">synctv:</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">synctv</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;6008:8080&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">PUID=0</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">PGID=0</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">TZ=Asia/Shanghai</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/volume1/docker/synctv/data:/root/.synctv&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">synctvorg/synctv</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">        <span class=\"attr\">ipv4_address:</span> <span class=\"number\">172.20</span><span class=\"number\">.0</span><span class=\"number\">.12</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">bridge0</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=0a2f78d3-de64-0bae-142b-81909bbce939","cover_type":"img","excerpt":"","more":"<h1 id=\"synctv-Docker-Compose\"><a href=\"#synctv-Docker-Compose\" class=\"headerlink\" title=\"synctv-Docker-Compose\"></a>synctv-Docker-Compose</h1><p><a href=\"https://github.com/synctv-org/synctv/blob/main/README-CN.md\">synctv&#x2F;README-CN.md at main · synctv-org&#x2F;synctv · GitHub</a></p>\n<blockquote>\n<p>SyncTV 是一个允许您远程一起观看电影和直播的程序。它提供了同步观影、直播、聊天等功能。使用 SyncTV，您可以与朋友和家人一起观看视频和直播，无论他们在哪里。</p>\n<p>SyncTV 的同步观影功能确保所有观看视频的人都在同一点上。这意味着您可以暂停、快进快退、倍速等操作，其他人也会同步到同一点。</p>\n</blockquote>\n<p>默认账号 root</p>\n<p>默认密码 root</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3.3&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">synctv:</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">synctv</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;6008:8080&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">PUID=0</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">PGID=0</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">TZ=Asia/Shanghai</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/volume1/docker/synctv/data:/root/.synctv&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">synctvorg/synctv</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">        <span class=\"attr\">ipv4_address:</span> <span class=\"number\">172.20</span><span class=\"number\">.0</span><span class=\"number\">.12</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">bridge0:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">bridge0</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n"},{"title":"Docker-compose实例 Memos","abbrlink":"177d","date":"2025-02-24T13:33:08.000Z","_content":"\nMinio 是一个基于Apache License v2.0开源协议的对象存储服务，虽然轻量，却拥有着不错的性能。它兼容亚马逊S3云存储服务接口，非常适合于存储大容量非结构化的数据。\n\n官网：[https://www.minio.org.cn](https://www.minio.org.cn)\n\n部署参考：[布署单节点单磁盘的MinIO服务](https://www.minio.org.cn/docs/minio/container/operations/install-deploy-manage/deploy-minio-single-node-single-drive.html#id15)​\n\n\n\ndocker-compose\n\n```yaml\nservices:\n  minio:\n    image: 'docker.olinl.com.cn/minio/minio:latest'\n    container_name: minio\n    hostname: minio\n    ports:\n      - 9000:9000\n      - 9001:9001\n    volumes:\n      - ./data:/data\n    environment:\n\t\t# 用户名与密码\n      - MINIO_ROOT_USER=admin\n      - MINIO_ROOT_PASSWORD=Aa123456\n    restart: always\n    command: server --console-address ':9000' --address ':9001' /data  \n\n# 个人配置\n    networks:\n      - net\nnetworks:\n  net:\n    external: true\n    name: lin-net\n```\n\n‍\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/MinIo.md","raw":"---\ntitle: Docker-compose实例 Memos\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - Memos\nabbrlink: 177d\ndate: 2025-02-24 21:33:08\n---\n\nMinio 是一个基于Apache License v2.0开源协议的对象存储服务，虽然轻量，却拥有着不错的性能。它兼容亚马逊S3云存储服务接口，非常适合于存储大容量非结构化的数据。\n\n官网：[https://www.minio.org.cn](https://www.minio.org.cn)\n\n部署参考：[布署单节点单磁盘的MinIO服务](https://www.minio.org.cn/docs/minio/container/operations/install-deploy-manage/deploy-minio-single-node-single-drive.html#id15)​\n\n\n\ndocker-compose\n\n```yaml\nservices:\n  minio:\n    image: 'docker.olinl.com.cn/minio/minio:latest'\n    container_name: minio\n    hostname: minio\n    ports:\n      - 9000:9000\n      - 9001:9001\n    volumes:\n      - ./data:/data\n    environment:\n\t\t# 用户名与密码\n      - MINIO_ROOT_USER=admin\n      - MINIO_ROOT_PASSWORD=Aa123456\n    restart: always\n    command: server --console-address ':9000' --address ':9001' /data  \n\n# 个人配置\n    networks:\n      - net\nnetworks:\n  net:\n    external: true\n    name: lin-net\n```\n\n‍\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/MinIo","published":1,"updated":"2025-06-02T07:26:41.146Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86xz00bzzcqbgoc338zm","content":"<p>Minio 是一个基于Apache License v2.0开源协议的对象存储服务，虽然轻量，却拥有着不错的性能。它兼容亚马逊S3云存储服务接口，非常适合于存储大容量非结构化的数据。</p>\n<p>官网：<a href=\"https://www.minio.org.cn/\">https://www.minio.org.cn</a></p>\n<p>部署参考：<a href=\"https://www.minio.org.cn/docs/minio/container/operations/install-deploy-manage/deploy-minio-single-node-single-drive.html#id15\">布署单节点单磁盘的MinIO服务</a>​</p>\n<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">minio:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;docker.olinl.com.cn/minio/minio:latest&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">minio</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">minio</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9000</span><span class=\"string\">:9000</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9001</span><span class=\"string\">:9001</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./data:/data</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">\t\t<span class=\"comment\"># 用户名与密码</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">MINIO_ROOT_USER=admin</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">MINIO_ROOT_PASSWORD=Aa123456</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span> <span class=\"string\">server</span> <span class=\"string\">--console-address</span> <span class=\"string\">&#x27;:9000&#x27;</span> <span class=\"string\">--address</span> <span class=\"string\">&#x27;:9001&#x27;</span> <span class=\"string\">/data</span>  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 个人配置</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">net</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">net:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">lin-net</span></span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n","cover":"https://t.alcy.cc/pc?_r_=ff4bf018-23ce-f136-2120-7a4dd5858ddb","cover_type":"img","excerpt":"","more":"<p>Minio 是一个基于Apache License v2.0开源协议的对象存储服务，虽然轻量，却拥有着不错的性能。它兼容亚马逊S3云存储服务接口，非常适合于存储大容量非结构化的数据。</p>\n<p>官网：<a href=\"https://www.minio.org.cn/\">https://www.minio.org.cn</a></p>\n<p>部署参考：<a href=\"https://www.minio.org.cn/docs/minio/container/operations/install-deploy-manage/deploy-minio-single-node-single-drive.html#id15\">布署单节点单磁盘的MinIO服务</a>​</p>\n<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">minio:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;docker.olinl.com.cn/minio/minio:latest&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">minio</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">minio</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9000</span><span class=\"string\">:9000</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9001</span><span class=\"string\">:9001</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./data:/data</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">\t\t<span class=\"comment\"># 用户名与密码</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">MINIO_ROOT_USER=admin</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">MINIO_ROOT_PASSWORD=Aa123456</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span> <span class=\"string\">server</span> <span class=\"string\">--console-address</span> <span class=\"string\">&#x27;:9000&#x27;</span> <span class=\"string\">--address</span> <span class=\"string\">&#x27;:9001&#x27;</span> <span class=\"string\">/data</span>  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 个人配置</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">net</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">net:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">lin-net</span></span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n"},{"title":"Docker-compose实例 lucky","abbrlink":"d426","date":"2025-02-24T13:33:08.000Z","_content":"\n一个小工具\n\n官网：[https://lucky666.cn](https://lucky666.cn/)\n\nGitHub：[https://github.com/gdy666/lucky](https://github.com/gdy666/lucky)\n\n\n安装\n\n参考：[Docker-Compose](https://lucky666.cn/docs/install#docker%E9%95%9C%E5%83%8F)\n\n\ndocker-compose\n\n```yaml\nservices:\n  lucky:\n    image: 'gdy666/lucky'\n    container_name: lucky\n    hostname: lucky\n    ports:\n      - '8443:8443'\n    volumes:\n    - ./data:/goodluck\n    - ./web:/web # 自定义页面\n    restart: always\n\n# 个人配置\n\n#    networks:\n#      net:\n#        ipv4_address: 172.20.0.4\n#networks:\n#  net:\n#    external: true\n#    name: lin-net\n```\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/lucky.md","raw":"---\ntitle: Docker-compose实例 lucky\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - lucky\nabbrlink: d426\ndate: 2025-02-24 21:33:08\n---\n\n一个小工具\n\n官网：[https://lucky666.cn](https://lucky666.cn/)\n\nGitHub：[https://github.com/gdy666/lucky](https://github.com/gdy666/lucky)\n\n\n安装\n\n参考：[Docker-Compose](https://lucky666.cn/docs/install#docker%E9%95%9C%E5%83%8F)\n\n\ndocker-compose\n\n```yaml\nservices:\n  lucky:\n    image: 'gdy666/lucky'\n    container_name: lucky\n    hostname: lucky\n    ports:\n      - '8443:8443'\n    volumes:\n    - ./data:/goodluck\n    - ./web:/web # 自定义页面\n    restart: always\n\n# 个人配置\n\n#    networks:\n#      net:\n#        ipv4_address: 172.20.0.4\n#networks:\n#  net:\n#    external: true\n#    name: lin-net\n```\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/lucky","published":1,"updated":"2025-06-02T07:26:36.070Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86y000c3zcqb1blwdm6q","content":"<p>一个小工具</p>\n<p>官网：<a href=\"https://lucky666.cn/\">https://lucky666.cn</a></p>\n<p>GitHub：<a href=\"https://github.com/gdy666/lucky\">https://github.com/gdy666/lucky</a></p>\n<p>安装</p>\n<p>参考：<a href=\"https://lucky666.cn/docs/install#docker%E9%95%9C%E5%83%8F\">Docker-Compose</a></p>\n<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">lucky:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;gdy666/lucky&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">lucky</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">lucky</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;8443:8443&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">./data:/goodluck</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">./web:/web</span> <span class=\"comment\"># 自定义页面</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 个人配置</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#    networks:</span></span><br><span class=\"line\"><span class=\"comment\">#      net:</span></span><br><span class=\"line\"><span class=\"comment\">#        ipv4_address: 172.20.0.4</span></span><br><span class=\"line\"><span class=\"comment\">#networks:</span></span><br><span class=\"line\"><span class=\"comment\">#  net:</span></span><br><span class=\"line\"><span class=\"comment\">#    external: true</span></span><br><span class=\"line\"><span class=\"comment\">#    name: lin-net</span></span><br></pre></td></tr></table></figure>\n","cover":"https://t.alcy.cc/pc?_r_=dccda09a-9970-f74e-646e-e55b9ad6f39c","cover_type":"img","excerpt":"","more":"<p>一个小工具</p>\n<p>官网：<a href=\"https://lucky666.cn/\">https://lucky666.cn</a></p>\n<p>GitHub：<a href=\"https://github.com/gdy666/lucky\">https://github.com/gdy666/lucky</a></p>\n<p>安装</p>\n<p>参考：<a href=\"https://lucky666.cn/docs/install#docker%E9%95%9C%E5%83%8F\">Docker-Compose</a></p>\n<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">lucky:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;gdy666/lucky&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">lucky</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">lucky</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;8443:8443&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">./data:/goodluck</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">./web:/web</span> <span class=\"comment\"># 自定义页面</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 个人配置</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#    networks:</span></span><br><span class=\"line\"><span class=\"comment\">#      net:</span></span><br><span class=\"line\"><span class=\"comment\">#        ipv4_address: 172.20.0.4</span></span><br><span class=\"line\"><span class=\"comment\">#networks:</span></span><br><span class=\"line\"><span class=\"comment\">#  net:</span></span><br><span class=\"line\"><span class=\"comment\">#    external: true</span></span><br><span class=\"line\"><span class=\"comment\">#    name: lin-net</span></span><br></pre></td></tr></table></figure>\n"},{"title":"Docker-compose实例 wordpress","abbrlink":"bec6","date":"2025-02-24T13:33:08.000Z","_content":"\nWordpress是一个博客程序\n\n\ndocker-compose\n\n```yaml\nservices:\n  redis:\n    image: 'docker.olinl.com.cn/wordpress:6.6.0'\n    container_name: wordpress\n    hostname: wordpress\n    restart: always\n    #ports:\n    #  - '80:80'\n    volumes:\n      - ./data:/var/www/html\n      - ./conf/uploads.ini:/usr/local/etc/php/conf.d/uploads.ini\n    environment: # 数据库链接信息\n      WORDPRESS_DB_HOST: mysql:3306\n      WORDPRESS_DB_NAME: wordpress\n      WORDPRESS_DB_PASSWORD: root\n      WORDPRESS_DB_USER: root\n      WORDPRESS_DEBUG: 0\n# 个人配置\n    networks:\n      - net\nnetworks:\n  net:\n    external: true\n    name: lin-net\n```\n\n‍\n\nuploads.ini\n\n```yaml\nfile_uploads = On\nmemory_limit = 256M\nupload_max_filesize = 60M\npost_max_size = 50M\nmax_execution_time = 360\n\n\nextension=ixed.8.2.lin\n```\n\n‍\n","source":"_posts/服务器/Docker/Docker-Compose/Docker-Compose实例/wordpress.md","raw":"---\ntitle: Docker-compose实例 wordpress\ncategories:\n  - 服务器\ntags:\n  - Docker\n  - Docker-Compose\n  - wordpress\nabbrlink: bec6\ndate: 2025-02-24 21:33:08\n---\n\nWordpress是一个博客程序\n\n\ndocker-compose\n\n```yaml\nservices:\n  redis:\n    image: 'docker.olinl.com.cn/wordpress:6.6.0'\n    container_name: wordpress\n    hostname: wordpress\n    restart: always\n    #ports:\n    #  - '80:80'\n    volumes:\n      - ./data:/var/www/html\n      - ./conf/uploads.ini:/usr/local/etc/php/conf.d/uploads.ini\n    environment: # 数据库链接信息\n      WORDPRESS_DB_HOST: mysql:3306\n      WORDPRESS_DB_NAME: wordpress\n      WORDPRESS_DB_PASSWORD: root\n      WORDPRESS_DB_USER: root\n      WORDPRESS_DEBUG: 0\n# 个人配置\n    networks:\n      - net\nnetworks:\n  net:\n    external: true\n    name: lin-net\n```\n\n‍\n\nuploads.ini\n\n```yaml\nfile_uploads = On\nmemory_limit = 256M\nupload_max_filesize = 60M\npost_max_size = 50M\nmax_execution_time = 360\n\n\nextension=ixed.8.2.lin\n```\n\n‍\n","slug":"服务器/Docker/Docker-Compose/Docker-Compose实例/wordpress","published":1,"updated":"2025-06-02T07:26:54.373Z","comments":1,"layout":"post","photos":[],"_id":"cmbes86y100c6zcqbgja6crd9","content":"<p>Wordpress是一个博客程序</p>\n<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">redis:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;docker.olinl.com.cn/wordpress:6.6.0&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">wordpress</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">wordpress</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"comment\">#ports:</span></span><br><span class=\"line\">    <span class=\"comment\">#  - &#x27;80:80&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./data:/var/www/html</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./conf/uploads.ini:/usr/local/etc/php/conf.d/uploads.ini</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span> <span class=\"comment\"># 数据库链接信息</span></span><br><span class=\"line\">      <span class=\"attr\">WORDPRESS_DB_HOST:</span> <span class=\"string\">mysql:3306</span></span><br><span class=\"line\">      <span class=\"attr\">WORDPRESS_DB_NAME:</span> <span class=\"string\">wordpress</span></span><br><span class=\"line\">      <span class=\"attr\">WORDPRESS_DB_PASSWORD:</span> <span class=\"string\">root</span></span><br><span class=\"line\">      <span class=\"attr\">WORDPRESS_DB_USER:</span> <span class=\"string\">root</span></span><br><span class=\"line\">      <span class=\"attr\">WORDPRESS_DEBUG:</span> <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"comment\"># 个人配置</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">net</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">net:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">lin-net</span></span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n<p>uploads.ini</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">file_uploads</span> <span class=\"string\">=</span> <span class=\"string\">On</span></span><br><span class=\"line\"><span class=\"string\">memory_limit</span> <span class=\"string\">=</span> <span class=\"string\">256M</span></span><br><span class=\"line\"><span class=\"string\">upload_max_filesize</span> <span class=\"string\">=</span> <span class=\"string\">60M</span></span><br><span class=\"line\"><span class=\"string\">post_max_size</span> <span class=\"string\">=</span> <span class=\"string\">50M</span></span><br><span class=\"line\"><span class=\"string\">max_execution_time</span> <span class=\"string\">=</span> <span class=\"number\">360</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">extension=ixed.8.2.lin</span></span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n","cover":"https://t.alcy.cc/pc?_r_=80384ac3-301c-d346-0939-fc6cf620a712","cover_type":"img","excerpt":"","more":"<p>Wordpress是一个博客程序</p>\n<p>docker-compose</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">redis:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">&#x27;docker.olinl.com.cn/wordpress:6.6.0&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">wordpress</span></span><br><span class=\"line\">    <span class=\"attr\">hostname:</span> <span class=\"string\">wordpress</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"comment\">#ports:</span></span><br><span class=\"line\">    <span class=\"comment\">#  - &#x27;80:80&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./data:/var/www/html</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./conf/uploads.ini:/usr/local/etc/php/conf.d/uploads.ini</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span> <span class=\"comment\"># 数据库链接信息</span></span><br><span class=\"line\">      <span class=\"attr\">WORDPRESS_DB_HOST:</span> <span class=\"string\">mysql:3306</span></span><br><span class=\"line\">      <span class=\"attr\">WORDPRESS_DB_NAME:</span> <span class=\"string\">wordpress</span></span><br><span class=\"line\">      <span class=\"attr\">WORDPRESS_DB_PASSWORD:</span> <span class=\"string\">root</span></span><br><span class=\"line\">      <span class=\"attr\">WORDPRESS_DB_USER:</span> <span class=\"string\">root</span></span><br><span class=\"line\">      <span class=\"attr\">WORDPRESS_DEBUG:</span> <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"comment\"># 个人配置</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">net</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">net:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">lin-net</span></span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n<p>uploads.ini</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">file_uploads</span> <span class=\"string\">=</span> <span class=\"string\">On</span></span><br><span class=\"line\"><span class=\"string\">memory_limit</span> <span class=\"string\">=</span> <span class=\"string\">256M</span></span><br><span class=\"line\"><span class=\"string\">upload_max_filesize</span> <span class=\"string\">=</span> <span class=\"string\">60M</span></span><br><span class=\"line\"><span class=\"string\">post_max_size</span> <span class=\"string\">=</span> <span class=\"string\">50M</span></span><br><span class=\"line\"><span class=\"string\">max_execution_time</span> <span class=\"string\">=</span> <span class=\"number\">360</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">extension=ixed.8.2.lin</span></span><br></pre></td></tr></table></figure>\n\n<p>‍</p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cmbes86w10008zcqb7t7de57z","category_id":"cmbes86vz0004zcqb9hzq53gk","_id":"cmbes86w6000gzcqb6wr37ns9"},{"post_id":"cmbes86vu0001zcqb7yk59g5x","category_id":"cmbes86vz0004zcqb9hzq53gk","_id":"cmbes86w7000lzcqbe5czf8kb"},{"post_id":"cmbes86w20009zcqbawnb6nnt","category_id":"cmbes86vz0004zcqb9hzq53gk","_id":"cmbes86w8000nzcqb9pju6pnr"},{"post_id":"cmbes86w4000dzcqbck294cj3","category_id":"cmbes86vz0004zcqb9hzq53gk","_id":"cmbes86w9000rzcqbek5m1qyc"},{"post_id":"cmbes86vx0003zcqbafkg7you","category_id":"cmbes86w2000azcqb8j0tavje","_id":"cmbes86wa000uzcqbeytf3d06"},{"post_id":"cmbes86w00007zcqbadhk6hhl","category_id":"cmbes86vz0004zcqb9hzq53gk","_id":"cmbes86wa000zzcqbfgh874bz"},{"post_id":"cmbes86w9000qzcqbb6sc68ch","category_id":"cmbes86vz0004zcqb9hzq53gk","_id":"cmbes86wb0012zcqbfq0d4axv"},{"post_id":"cmbes86w5000fzcqbaxeratbw","category_id":"cmbes86w8000ozcqba6ch16kx","_id":"cmbes86wc0017zcqb9s9s20q5"},{"post_id":"cmbes86w6000kzcqb2w2phho8","category_id":"cmbes86wa000wzcqbbe8m1526","_id":"cmbes86wc001azcqb98ty7gua"},{"post_id":"cmbes86wc0019zcqb2gyda49o","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wf001gzcqbgf9xhhxa"},{"post_id":"cmbes86w7000mzcqb51q67346","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wf001kzcqb9iif73a8"},{"post_id":"cmbes86wc001bzcqbgfp3dbsd","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wg001nzcqb85u3gqvc"},{"post_id":"cmbes86wd001ezcqbfwkma7to","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wh001szcqb39a94zs1"},{"post_id":"cmbes86w9000tzcqb8z1456da","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wh001vzcqbcfzj8bef"},{"post_id":"cmbes86we001fzcqbciox86dg","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wi001zzcqbdr702zra"},{"post_id":"cmbes86wf001jzcqb4jbtc74g","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wk0022zcqbgaa78myc"},{"post_id":"cmbes86wa000yzcqb9npnchgi","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wk0025zcqb9yq6fq1s"},{"post_id":"cmbes86wg001mzcqb18qu0dw1","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wl0028zcqb3k5a0eww"},{"post_id":"cmbes86wg001rzcqb0o1n6nz8","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wl002azcqberds955m"},{"post_id":"cmbes86wb0011zcqb0k3vd8s5","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wm002ezcqbfzf16har"},{"post_id":"cmbes86wh001uzcqb5uwuc1q4","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wn002hzcqb6cd458lm"},{"post_id":"cmbes86wi001yzcqbg3cxbun2","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wo002kzcqbhfmafdrx"},{"post_id":"cmbes86wb0016zcqbg3d9c3sa","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wo002mzcqbges00h9f"},{"post_id":"cmbes86wj0021zcqb8oxret8l","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wo002qzcqb6kc76rsy"},{"post_id":"cmbes86wk0024zcqb0fts012z","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wp002szcqb72zz4lze"},{"post_id":"cmbes86wl0027zcqbf9qx68wm","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wp002wzcqb4ig847m3"},{"post_id":"cmbes86wl0029zcqb93s1da2m","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wq002zzcqb2pmp54sy"},{"post_id":"cmbes86wm002dzcqb63f53h7m","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wq0033zcqb05a5ak2e"},{"post_id":"cmbes86wm002gzcqb93ct9xj0","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wr0036zcqb7lcw7fkb"},{"post_id":"cmbes86wn002jzcqbgw2rgboh","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wr003azcqb7rngc3bn"},{"post_id":"cmbes86wo002lzcqbgs045245","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86ws003dzcqbd9kr6lal"},{"post_id":"cmbes86wo002pzcqbhby57fd7","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86ws003hzcqbgqz9fl59"},{"post_id":"cmbes86wp002rzcqbdva3cuwj","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wt003kzcqbeg5f0jbc"},{"post_id":"cmbes86wp002vzcqbew1s25o6","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wt003nzcqb8bbg1uyo"},{"post_id":"cmbes86wq002yzcqbgh6c8jjk","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wu003rzcqbhepdfe02"},{"post_id":"cmbes86wq0032zcqb86by3fcv","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wv003uzcqb97ln6pat"},{"post_id":"cmbes86wq0035zcqb8d1hh927","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wv003yzcqb1xc2cdxw"},{"post_id":"cmbes86wr0039zcqb11kb9z1e","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86ww0041zcqb3qzy8kvx"},{"post_id":"cmbes86ws003czcqb86ai2th9","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86ww0045zcqb33oyefir"},{"post_id":"cmbes86ws003gzcqbawaf1vvk","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wx0048zcqbf0ttch09"},{"post_id":"cmbes86wt003jzcqb7zgx2ae4","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wx004czcqbdysu0xi5"},{"post_id":"cmbes86wt003mzcqbdgexc0ts","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wy004fzcqbaw4vgb50"},{"post_id":"cmbes86wu003qzcqb4wbqh2tb","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wz004jzcqb00o3d4mp"},{"post_id":"cmbes86wu003tzcqbc2ip91ao","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86wz004mzcqb40p9a2gl"},{"post_id":"cmbes86wv003xzcqb49ph8d32","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86x0004qzcqbcwwv043d"},{"post_id":"cmbes86wv0040zcqb6cw5b97z","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86x2004tzcqb2lf195qj"},{"post_id":"cmbes86ww0044zcqb8z1x059j","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86x2004xzcqb5kbschww"},{"post_id":"cmbes86ww0047zcqb796xf3du","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86x30050zcqb8mzi783a"},{"post_id":"cmbes86wx004bzcqbf3r93enh","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86x30054zcqb3hjd0ixl"},{"post_id":"cmbes86wx004ezcqbf9s008hp","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86x40057zcqb3bd46knb"},{"post_id":"cmbes86wy004izcqbaa3t3rej","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86x5005bzcqbfork6220"},{"post_id":"cmbes86wz004lzcqbbtls29pm","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86x5005ezcqbgbqqcypo"},{"post_id":"cmbes86x0004pzcqb7nxyggq2","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86x6005izcqbdw9bfn3j"},{"post_id":"cmbes86x1004szcqb2he94b9r","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86x7005lzcqbg6jablz6"},{"post_id":"cmbes86x2004wzcqb142m00fc","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86x7005pzcqbfmgkh35n"},{"post_id":"cmbes86x2004zzcqb1dpudpu0","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86x8005szcqb2qbmeum3"},{"post_id":"cmbes86x30053zcqb8d2u5zuv","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86x8005wzcqbewy3gw2i"},{"post_id":"cmbes86x30056zcqb9rrv2xaa","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86x9005zzcqbgd97becj"},{"post_id":"cmbes86x4005azcqb3m7a5aq9","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86x90063zcqb9mlbdlp3"},{"post_id":"cmbes86x5005dzcqbf09137bi","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xa0066zcqbgeej7aj3"},{"post_id":"cmbes86x5005hzcqbae73ewba","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xb0069zcqbci757vvk"},{"post_id":"cmbes86x6005kzcqb60yyhzs9","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xb006dzcqb20ru0xs7"},{"post_id":"cmbes86x7005ozcqba8tr9jgw","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xc006fzcqb5pyq710z"},{"post_id":"cmbes86x7005rzcqb872i3p7c","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xc006izcqbdpu6543y"},{"post_id":"cmbes86x8005vzcqb3zua2r9t","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xc006kzcqb9as00vnx"},{"post_id":"cmbes86x9005yzcqb4qi8etl2","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xc006nzcqbf4mcf3gm"},{"post_id":"cmbes86x90062zcqbenjy2abs","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xc006pzcqb8p926sfn"},{"post_id":"cmbes86x90065zcqbekmvcutp","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xc006szcqbbosb4442"},{"post_id":"cmbes86xb0068zcqbgp6t8az1","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xc006uzcqb1zf2ff54"},{"post_id":"cmbes86xb006czcqb40drdetw","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xd006xzcqb2fo5fqv4"},{"post_id":"cmbes86xr00ayzcqb1wq25858","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xt00b3zcqb0ikn70z9"},{"post_id":"cmbes86xs00azzcqbdzi2hzq3","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xt00b5zcqb4wfb3une"},{"post_id":"cmbes86xs00b1zcqbdi4a5cu2","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xu00b9zcqb717df33q"},{"post_id":"cmbes86xt00b2zcqbbvvd6rvb","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xv00bczcqb3jhhebz4"},{"post_id":"cmbes86xt00b4zcqb56jq6owq","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xw00bgzcqbe88e5fpp"},{"post_id":"cmbes86xu00b8zcqbatnm1tjy","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xw00bjzcqbcf9h8r9d"},{"post_id":"cmbes86xu00bbzcqb10rzd68p","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xx00bnzcqbbxra4jz9"},{"post_id":"cmbes86xv00bfzcqb3uts8pzu","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xy00bqzcqb2ji52k9u"},{"post_id":"cmbes86xw00bizcqb0y8lhkp9","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xy00buzcqbe2ew9wia"},{"post_id":"cmbes86xw00bmzcqb28u39nxc","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86xz00bxzcqb6btseml0"},{"post_id":"cmbes86xx00bpzcqb97599wh6","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86y000c0zcqbcmp7ex53"},{"post_id":"cmbes86xy00btzcqb0ivr9uo8","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86y000c4zcqb4la1bpda"},{"post_id":"cmbes86xy00bwzcqbfsrhhhcg","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86y100c7zcqbg2oh05xt"},{"post_id":"cmbes86xz00bzzcqbgoc338zm","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86y100cazcqbarpohpsf"},{"post_id":"cmbes86y000c3zcqb1blwdm6q","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86y100cczcqb952p2xso"},{"post_id":"cmbes86y100c6zcqbgja6crd9","category_id":"cmbes86wb0014zcqb52jw5g57","_id":"cmbes86y200cfzcqbfcw6hm58"}],"PostTag":[{"post_id":"cmbes86w10008zcqb7t7de57z","tag_id":"cmbes86w00005zcqbfrl93x1n","_id":"cmbes86w4000czcqb2g7k5vz9"},{"post_id":"cmbes86vu0001zcqb7yk59g5x","tag_id":"cmbes86w00005zcqbfrl93x1n","_id":"cmbes86w5000ezcqbcyxg6zcm"},{"post_id":"cmbes86w20009zcqbawnb6nnt","tag_id":"cmbes86w00005zcqbfrl93x1n","_id":"cmbes86w6000jzcqbf7098fus"},{"post_id":"cmbes86w00007zcqbadhk6hhl","tag_id":"cmbes86w00005zcqbfrl93x1n","_id":"cmbes86w9000szcqb7snogbyu"},{"post_id":"cmbes86w00007zcqbadhk6hhl","tag_id":"cmbes86w6000hzcqb03ub3wv7","_id":"cmbes86wa000vzcqbaevx0tzh"},{"post_id":"cmbes86w9000qzcqbb6sc68ch","tag_id":"cmbes86w00005zcqbfrl93x1n","_id":"cmbes86wa0010zcqbfiqla81a"},{"post_id":"cmbes86w4000dzcqbck294cj3","tag_id":"cmbes86w00005zcqbfrl93x1n","_id":"cmbes86wb0013zcqbhxw90fxq"},{"post_id":"cmbes86w4000dzcqbck294cj3","tag_id":"cmbes86w8000pzcqb8lc414zr","_id":"cmbes86wc0018zcqbb9jq4gw5"},{"post_id":"cmbes86w5000fzcqbaxeratbw","tag_id":"cmbes86wa000xzcqbechi2isi","_id":"cmbes86wf001lzcqb7dng8522"},{"post_id":"cmbes86w5000fzcqbaxeratbw","tag_id":"cmbes86wb0015zcqbhztn9llt","_id":"cmbes86wg001pzcqbf49ogyvo"},{"post_id":"cmbes86w5000fzcqbaxeratbw","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86wh001tzcqb2nsjaoa3"},{"post_id":"cmbes86w6000kzcqb2w2phho8","tag_id":"cmbes86wf001izcqb54h3g3tj","_id":"cmbes86wj0020zcqb3pogdxok"},{"post_id":"cmbes86w6000kzcqb2w2phho8","tag_id":"cmbes86wg001qzcqb0uj35m4v","_id":"cmbes86wk0023zcqbhp1r5wm5"},{"post_id":"cmbes86w7000mzcqb51q67346","tag_id":"cmbes86wi001xzcqbfe6oerj5","_id":"cmbes86wm002czcqbaho40izc"},{"post_id":"cmbes86w7000mzcqb51q67346","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86wm002fzcqbat202i31"},{"post_id":"cmbes86wn002jzcqbgw2rgboh","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86wo002ozcqbeghe0xm3"},{"post_id":"cmbes86wo002pzcqbhby57fd7","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86wp002uzcqb549dehgn"},{"post_id":"cmbes86wo002pzcqbhby57fd7","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86wp002xzcqb2tss6op2"},{"post_id":"cmbes86w9000tzcqb8z1456da","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86wq0030zcqbfgmpefv2"},{"post_id":"cmbes86w9000tzcqb8z1456da","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86wq0034zcqb6f9489jt"},{"post_id":"cmbes86w9000tzcqb8z1456da","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86wr0037zcqb53r9evkf"},{"post_id":"cmbes86wq0032zcqb86by3fcv","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86wr003bzcqbg0wf4cax"},{"post_id":"cmbes86wq0032zcqb86by3fcv","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86ws003ezcqbh9tcb419"},{"post_id":"cmbes86wa000yzcqb9npnchgi","tag_id":"cmbes86wp002tzcqbabw99eaa","_id":"cmbes86ws003izcqb5uvg90jn"},{"post_id":"cmbes86wa000yzcqb9npnchgi","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86wt003lzcqbea5eercg"},{"post_id":"cmbes86wa000yzcqb9npnchgi","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86wu003pzcqb61gkhxlw"},{"post_id":"cmbes86ws003gzcqbawaf1vvk","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86wu003szcqb7o7p1mu7"},{"post_id":"cmbes86ws003gzcqbawaf1vvk","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86wv003wzcqb3q5eb0cj"},{"post_id":"cmbes86ws003gzcqbawaf1vvk","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86wv003zzcqb11c1b2ml"},{"post_id":"cmbes86wt003mzcqbdgexc0ts","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86ww0043zcqb6vneggib"},{"post_id":"cmbes86wu003qzcqb4wbqh2tb","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86ww0046zcqb6b33h05z"},{"post_id":"cmbes86wu003tzcqbc2ip91ao","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86wx004azcqb09u21lvt"},{"post_id":"cmbes86wu003tzcqbc2ip91ao","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86wx004dzcqb9r8udyjt"},{"post_id":"cmbes86wv003xzcqb49ph8d32","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86wy004hzcqbfhte75rl"},{"post_id":"cmbes86wv003xzcqb49ph8d32","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86wz004kzcqbg9fscz24"},{"post_id":"cmbes86wb0011zcqb0k3vd8s5","tag_id":"cmbes86ws003fzcqbfj31hmva","_id":"cmbes86wz004ozcqbh0teeeab"},{"post_id":"cmbes86wb0011zcqb0k3vd8s5","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86x1004rzcqbahiefmil"},{"post_id":"cmbes86wb0011zcqb0k3vd8s5","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86x2004vzcqb4w1deme1"},{"post_id":"cmbes86wv0040zcqb6cw5b97z","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86x2004yzcqbhwxyeeqe"},{"post_id":"cmbes86wv0040zcqb6cw5b97z","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86x30052zcqbgj6mhnix"},{"post_id":"cmbes86ww0044zcqb8z1x059j","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86x30055zcqbg3eufqpb"},{"post_id":"cmbes86ww0047zcqb796xf3du","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86x40059zcqbcgui24nk"},{"post_id":"cmbes86wx004bzcqbf3r93enh","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86x5005czcqb2y167r6n"},{"post_id":"cmbes86wx004bzcqbf3r93enh","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86x5005fzcqbfzzi1zyz"},{"post_id":"cmbes86wx004ezcqbf9s008hp","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86x6005jzcqb3gsg6r62"},{"post_id":"cmbes86wx004ezcqbf9s008hp","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86x7005mzcqb35ushb07"},{"post_id":"cmbes86wy004izcqbaa3t3rej","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86x7005qzcqbdcwffiby"},{"post_id":"cmbes86wb0016zcqbg3d9c3sa","tag_id":"cmbes86ww0042zcqb6o586grc","_id":"cmbes86x8005tzcqb4osm3185"},{"post_id":"cmbes86wb0016zcqbg3d9c3sa","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86x8005xzcqb0fq19zfp"},{"post_id":"cmbes86wb0016zcqbg3d9c3sa","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86x90060zcqb11ntgc66"},{"post_id":"cmbes86wz004lzcqbbtls29pm","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86x90064zcqb1clk8hep"},{"post_id":"cmbes86wc0019zcqb2gyda49o","tag_id":"cmbes86wz004nzcqbbiyz01hk","_id":"cmbes86xa0067zcqb0a6khmy0"},{"post_id":"cmbes86wc0019zcqb2gyda49o","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xb006bzcqb3kga4dsf"},{"post_id":"cmbes86wc0019zcqb2gyda49o","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xc006ezcqbeot1hvih"},{"post_id":"cmbes86wc001bzcqbgfp3dbsd","tag_id":"cmbes86x40058zcqbh6dkhcun","_id":"cmbes86xc006hzcqb9zmmb7pl"},{"post_id":"cmbes86wc001bzcqbgfp3dbsd","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xc006jzcqbe6gx20y8"},{"post_id":"cmbes86wc001bzcqbgfp3dbsd","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xc006mzcqb9aptbxy3"},{"post_id":"cmbes86wd001ezcqbfwkma7to","tag_id":"cmbes86ww0042zcqb6o586grc","_id":"cmbes86xc006ozcqbgj7bfj3e"},{"post_id":"cmbes86wd001ezcqbfwkma7to","tag_id":"cmbes86x90061zcqb2pt927z6","_id":"cmbes86xc006rzcqbfj4v2dzr"},{"post_id":"cmbes86wd001ezcqbfwkma7to","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xc006tzcqb0yt26exg"},{"post_id":"cmbes86wd001ezcqbfwkma7to","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xd006wzcqbh8xc8gjf"},{"post_id":"cmbes86we001fzcqbciox86dg","tag_id":"cmbes86xc006gzcqbdadfep4s","_id":"cmbes86xd006yzcqb432z7q66"},{"post_id":"cmbes86we001fzcqbciox86dg","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xd0070zcqb7jr9al4f"},{"post_id":"cmbes86we001fzcqbciox86dg","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xd0071zcqb9n986tnt"},{"post_id":"cmbes86wf001jzcqb4jbtc74g","tag_id":"cmbes86xc006qzcqb6laz3kcx","_id":"cmbes86xd0072zcqbakec6qy0"},{"post_id":"cmbes86wf001jzcqb4jbtc74g","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xd0074zcqbf80c6wh2"},{"post_id":"cmbes86wf001jzcqb4jbtc74g","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xd0075zcqb67635hgo"},{"post_id":"cmbes86wg001mzcqb18qu0dw1","tag_id":"cmbes86xd006zzcqb943uan4c","_id":"cmbes86xd0077zcqbc47phraa"},{"post_id":"cmbes86wg001mzcqb18qu0dw1","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xd0078zcqb1ekedixc"},{"post_id":"cmbes86wg001mzcqb18qu0dw1","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xd007azcqb43a8h018"},{"post_id":"cmbes86wg001rzcqb0o1n6nz8","tag_id":"cmbes86xd0076zcqbbcrw717o","_id":"cmbes86xe007czcqbbh8ohabf"},{"post_id":"cmbes86wg001rzcqb0o1n6nz8","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xe007dzcqb5t9g8leg"},{"post_id":"cmbes86wg001rzcqb0o1n6nz8","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xe007fzcqbh5a1edeb"},{"post_id":"cmbes86wh001uzcqb5uwuc1q4","tag_id":"cmbes86xe007bzcqbe30hfdcc","_id":"cmbes86xe007gzcqb8kwc6bw3"},{"post_id":"cmbes86wh001uzcqb5uwuc1q4","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xe007izcqb39anfmg7"},{"post_id":"cmbes86wi001yzcqbg3cxbun2","tag_id":"cmbes86xe007ezcqb56xs8m35","_id":"cmbes86xe007kzcqbaocofxh1"},{"post_id":"cmbes86wi001yzcqbg3cxbun2","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xe007lzcqb3w106zrl"},{"post_id":"cmbes86wi001yzcqbg3cxbun2","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xe007nzcqb6tiy91a2"},{"post_id":"cmbes86wj0021zcqb8oxret8l","tag_id":"cmbes86xe007jzcqb90rncz5s","_id":"cmbes86xf007pzcqb5ro0bpxa"},{"post_id":"cmbes86wj0021zcqb8oxret8l","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xf007qzcqbcmui2lqt"},{"post_id":"cmbes86wj0021zcqb8oxret8l","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xf007szcqbh8w2fhxh"},{"post_id":"cmbes86wk0024zcqb0fts012z","tag_id":"cmbes86xe007ozcqbbu0v1byw","_id":"cmbes86xf007uzcqb9w428y7t"},{"post_id":"cmbes86wk0024zcqb0fts012z","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xf007vzcqb71jh6onj"},{"post_id":"cmbes86wk0024zcqb0fts012z","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xf007xzcqbhm8t61zw"},{"post_id":"cmbes86wl0027zcqbf9qx68wm","tag_id":"cmbes86xf007tzcqb7763h4ct","_id":"cmbes86xf007yzcqbhmw96odo"},{"post_id":"cmbes86wl0027zcqbf9qx68wm","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xf0080zcqbgjb33wdf"},{"post_id":"cmbes86wl0029zcqb93s1da2m","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xg0082zcqb8zxh7ecu"},{"post_id":"cmbes86wl0029zcqb93s1da2m","tag_id":"cmbes86xf007wzcqb1o9mhjnz","_id":"cmbes86xg0083zcqb6nn993y1"},{"post_id":"cmbes86wl0029zcqb93s1da2m","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xg0085zcqb55v16ouh"},{"post_id":"cmbes86wm002dzcqb63f53h7m","tag_id":"cmbes86xf007tzcqb7763h4ct","_id":"cmbes86xg0086zcqb25e392lm"},{"post_id":"cmbes86wm002dzcqb63f53h7m","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xg0088zcqbd3gmc1uk"},{"post_id":"cmbes86wm002gzcqb93ct9xj0","tag_id":"cmbes86ws003fzcqbfj31hmva","_id":"cmbes86xh008azcqb5gjubsid"},{"post_id":"cmbes86wm002gzcqb93ct9xj0","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xh008bzcqb37m3dsnv"},{"post_id":"cmbes86wm002gzcqb93ct9xj0","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xh008dzcqb3s5d9iz8"},{"post_id":"cmbes86wo002lzcqbgs045245","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xh008ezcqb74tqfvj7"},{"post_id":"cmbes86wo002lzcqbgs045245","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xh008gzcqbcd0if58h"},{"post_id":"cmbes86wp002rzcqbdva3cuwj","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xi008izcqba6xy3gel"},{"post_id":"cmbes86wp002rzcqbdva3cuwj","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xi008jzcqb8uxi58av"},{"post_id":"cmbes86wp002rzcqbdva3cuwj","tag_id":"cmbes86x40058zcqbh6dkhcun","_id":"cmbes86xi008lzcqb9tdz9efm"},{"post_id":"cmbes86wp002rzcqbdva3cuwj","tag_id":"cmbes86xh008fzcqbceft12yy","_id":"cmbes86xi008mzcqb29dabeyq"},{"post_id":"cmbes86wp002vzcqbew1s25o6","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86xi008ozcqb1ruz05xe"},{"post_id":"cmbes86wp002vzcqbew1s25o6","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86xi008pzcqb7bht855h"},{"post_id":"cmbes86wp002vzcqbew1s25o6","tag_id":"cmbes86xi008kzcqbaj35ehd2","_id":"cmbes86xi008rzcqb6bnx3ykz"},{"post_id":"cmbes86wq002yzcqbgh6c8jjk","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xi008szcqbbppkc9e0"},{"post_id":"cmbes86wq002yzcqbgh6c8jjk","tag_id":"cmbes86xi008nzcqbgfku1s5z","_id":"cmbes86xi008uzcqbbr3ncpji"},{"post_id":"cmbes86wq0035zcqb8d1hh927","tag_id":"cmbes86wd001dzcqbcwaq0ogo","_id":"cmbes86xj008wzcqbcyii8qrw"},{"post_id":"cmbes86wq0035zcqb8d1hh927","tag_id":"cmbes86xf007wzcqb1o9mhjnz","_id":"cmbes86xj008xzcqb8c7166fe"},{"post_id":"cmbes86wq0035zcqb8d1hh927","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xj008zzcqbcgi5htmi"},{"post_id":"cmbes86wq0035zcqb8d1hh927","tag_id":"cmbes86xi008tzcqb8mophzd8","_id":"cmbes86xj0090zcqbcybcd417"},{"post_id":"cmbes86wr0039zcqb11kb9z1e","tag_id":"cmbes86x40058zcqbh6dkhcun","_id":"cmbes86xj0092zcqb3d9nh42x"},{"post_id":"cmbes86ws003czcqb86ai2th9","tag_id":"cmbes86x40058zcqbh6dkhcun","_id":"cmbes86xj0093zcqbb5363hxl"},{"post_id":"cmbes86wt003jzcqb7zgx2ae4","tag_id":"cmbes86x40058zcqbh6dkhcun","_id":"cmbes86xj0096zcqb7jv14jl5"},{"post_id":"cmbes86wt003jzcqb7zgx2ae4","tag_id":"cmbes86xj0094zcqb0xd55h9d","_id":"cmbes86xk0097zcqb3cze9geu"},{"post_id":"cmbes86wt003jzcqb7zgx2ae4","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xk0099zcqb24dwhh5m"},{"post_id":"cmbes86x0004pzcqb7nxyggq2","tag_id":"cmbes86xj0095zcqb4hjkgwyx","_id":"cmbes86xk009azcqbhu6h9vvi"},{"post_id":"cmbes86x1004szcqb2he94b9r","tag_id":"cmbes86xj0094zcqb0xd55h9d","_id":"cmbes86xk009czcqbawivc5nl"},{"post_id":"cmbes86x1004szcqb2he94b9r","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86xk009dzcqbdtu2ejd2"},{"post_id":"cmbes86x1004szcqb2he94b9r","tag_id":"cmbes86wo002nzcqb8ppv4fab","_id":"cmbes86xk009fzcqbd5cv7gwb"},{"post_id":"cmbes86x2004wzcqb142m00fc","tag_id":"cmbes86xk009bzcqb3tt38rah","_id":"cmbes86xl009hzcqb0xnba4i0"},{"post_id":"cmbes86x2004wzcqb142m00fc","tag_id":"cmbes86xk009ezcqb21ptgusn","_id":"cmbes86xl009izcqb83jc35bp"},{"post_id":"cmbes86x2004zzcqb1dpudpu0","tag_id":"cmbes86xj0095zcqb4hjkgwyx","_id":"cmbes86xl009kzcqb0qi32awk"},{"post_id":"cmbes86x30053zcqb8d2u5zuv","tag_id":"cmbes86xk009bzcqb3tt38rah","_id":"cmbes86xl009nzcqb7bwh29w1"},{"post_id":"cmbes86x30053zcqb8d2u5zuv","tag_id":"cmbes86xk009ezcqb21ptgusn","_id":"cmbes86xl009ozcqbg6y359me"},{"post_id":"cmbes86x30056zcqb9rrv2xaa","tag_id":"cmbes86xk009bzcqb3tt38rah","_id":"cmbes86xl009rzcqbdn6safdh"},{"post_id":"cmbes86x30056zcqb9rrv2xaa","tag_id":"cmbes86xk009ezcqb21ptgusn","_id":"cmbes86xm009szcqbgqu6eqs0"},{"post_id":"cmbes86x4005azcqb3m7a5aq9","tag_id":"cmbes86xk009bzcqb3tt38rah","_id":"cmbes86xm009vzcqbeu0tc43t"},{"post_id":"cmbes86x4005azcqb3m7a5aq9","tag_id":"cmbes86xk009ezcqb21ptgusn","_id":"cmbes86xm009wzcqb4sydg84t"},{"post_id":"cmbes86x5005dzcqbf09137bi","tag_id":"cmbes86xc006gzcqbdadfep4s","_id":"cmbes86xm009zzcqb2kbt7fq6"},{"post_id":"cmbes86x5005dzcqbf09137bi","tag_id":"cmbes86xc006qzcqb6laz3kcx","_id":"cmbes86xm00a0zcqbeeoz5ddz"},{"post_id":"cmbes86x5005hzcqbae73ewba","tag_id":"cmbes86xd006zzcqb943uan4c","_id":"cmbes86xn00a2zcqb8vu6b1py"},{"post_id":"cmbes86x6005kzcqb60yyhzs9","tag_id":"cmbes86xd006zzcqb943uan4c","_id":"cmbes86xn00a4zcqb9170grir"},{"post_id":"cmbes86x7005ozcqba8tr9jgw","tag_id":"cmbes86xd006zzcqb943uan4c","_id":"cmbes86xo00a6zcqbh3n38t87"},{"post_id":"cmbes86x7005rzcqb872i3p7c","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86xo00a8zcqbg3mp8qh1"},{"post_id":"cmbes86x7005rzcqb872i3p7c","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86xo00a9zcqb40jhgsxc"},{"post_id":"cmbes86x8005vzcqb3zua2r9t","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86xo00abzcqbdcbn3wdk"},{"post_id":"cmbes86x8005vzcqb3zua2r9t","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86xo00aczcqbcnld88os"},{"post_id":"cmbes86x9005yzcqb4qi8etl2","tag_id":"cmbes86xk009bzcqb3tt38rah","_id":"cmbes86xp00agzcqbgr3taof6"},{"post_id":"cmbes86x9005yzcqb4qi8etl2","tag_id":"cmbes86xk009ezcqb21ptgusn","_id":"cmbes86xp00ahzcqb13i37g1z"},{"post_id":"cmbes86x9005yzcqb4qi8etl2","tag_id":"cmbes86xo00aezcqb34l7cel7","_id":"cmbes86xp00ajzcqb8gem7qou"},{"post_id":"cmbes86x90062zcqbenjy2abs","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86xp00akzcqbbp3l1euq"},{"post_id":"cmbes86x90062zcqbenjy2abs","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86xp00amzcqb6liw17jm"},{"post_id":"cmbes86x90065zcqbekmvcutp","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86xp00anzcqb5gx14hol"},{"post_id":"cmbes86x90065zcqbekmvcutp","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86xp00apzcqb4qs49mpn"},{"post_id":"cmbes86xb0068zcqbgp6t8az1","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86xq00arzcqb1x91f36t"},{"post_id":"cmbes86xb0068zcqbgp6t8az1","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86xq00aszcqb9zrta6x1"},{"post_id":"cmbes86xb0068zcqbgp6t8az1","tag_id":"cmbes86xp00aozcqb0ktp8nm7","_id":"cmbes86xq00auzcqbcvbmdg2k"},{"post_id":"cmbes86xb006czcqb40drdetw","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86xq00avzcqbh8x79wno"},{"post_id":"cmbes86xb006czcqb40drdetw","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86xq00awzcqb2jzh9w0r"},{"post_id":"cmbes86xb006czcqb40drdetw","tag_id":"cmbes86xq00atzcqbggeh8qkd","_id":"cmbes86xq00axzcqb9rm6f4z2"},{"post_id":"cmbes86xr00ayzcqb1wq25858","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86xt00b7zcqbcx0s24lg"},{"post_id":"cmbes86xr00ayzcqb1wq25858","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86xu00bazcqbewk2bvjb"},{"post_id":"cmbes86xr00ayzcqb1wq25858","tag_id":"cmbes86xs00b0zcqbf4oa79dy","_id":"cmbes86xv00bezcqb2rz7cy4o"},{"post_id":"cmbes86xs00azzcqbdzi2hzq3","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86xw00bhzcqb5898apgz"},{"post_id":"cmbes86xs00azzcqbdzi2hzq3","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86xw00blzcqb7dbg7v5n"},{"post_id":"cmbes86xs00azzcqbdzi2hzq3","tag_id":"cmbes86xt00b6zcqb9c1a3qs0","_id":"cmbes86xx00bozcqbeyzhbey4"},{"post_id":"cmbes86xs00b1zcqbdi4a5cu2","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86xy00bszcqbf20f8fos"},{"post_id":"cmbes86xs00b1zcqbdi4a5cu2","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86xy00bvzcqba5xx6vom"},{"post_id":"cmbes86xs00b1zcqbdi4a5cu2","tag_id":"cmbes86xv00bdzcqb9vaqdky5","_id":"cmbes86xz00byzcqbhrbgawu7"},{"post_id":"cmbes86xt00b2zcqbbvvd6rvb","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86y000c2zcqb3am43wr8"},{"post_id":"cmbes86xt00b2zcqbbvvd6rvb","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86y100c5zcqb0634ga38"},{"post_id":"cmbes86xt00b2zcqbbvvd6rvb","tag_id":"cmbes86xw00bkzcqb3pe0f1qq","_id":"cmbes86y100c9zcqbh2u2g2fc"},{"post_id":"cmbes86xx00bpzcqb97599wh6","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86y100cbzcqbe8k0anjo"},{"post_id":"cmbes86xx00bpzcqb97599wh6","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86y200cezcqbfzsd4e69"},{"post_id":"cmbes86xx00bpzcqb97599wh6","tag_id":"cmbes86xc006qzcqb6laz3kcx","_id":"cmbes86y200cgzcqb9blx0mvb"},{"post_id":"cmbes86xt00b4zcqb56jq6owq","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86y200cizcqb2m5276ec"},{"post_id":"cmbes86xt00b4zcqb56jq6owq","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86y200cjzcqb62jr1iaq"},{"post_id":"cmbes86xt00b4zcqb56jq6owq","tag_id":"cmbes86xy00brzcqb18dj30pj","_id":"cmbes86y200ckzcqbfqkmgxwy"},{"post_id":"cmbes86y000c3zcqb1blwdm6q","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86y200cmzcqb1v218bw1"},{"post_id":"cmbes86y000c3zcqb1blwdm6q","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86y200cnzcqb5bream6i"},{"post_id":"cmbes86y000c3zcqb1blwdm6q","tag_id":"cmbes86xi008kzcqbaj35ehd2","_id":"cmbes86y200cpzcqb4zgoabj9"},{"post_id":"cmbes86xu00b8zcqbatnm1tjy","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86y200cqzcqb1gv2bryp"},{"post_id":"cmbes86xu00b8zcqbatnm1tjy","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86y300cszcqb9xyj9wv4"},{"post_id":"cmbes86xu00b8zcqbatnm1tjy","tag_id":"cmbes86y000c1zcqb19xh460z","_id":"cmbes86y300ctzcqbfji3fht1"},{"post_id":"cmbes86xu00bbzcqb10rzd68p","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86y300cvzcqb095bcoxj"},{"post_id":"cmbes86xu00bbzcqb10rzd68p","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86y300cwzcqb5h6hh2kb"},{"post_id":"cmbes86xu00bbzcqb10rzd68p","tag_id":"cmbes86y100c8zcqbbgx18gns","_id":"cmbes86y300cyzcqb52dq4z8d"},{"post_id":"cmbes86xv00bfzcqb3uts8pzu","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86y300czzcqbe7jpe4sf"},{"post_id":"cmbes86xv00bfzcqb3uts8pzu","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86y300d0zcqb6n90af2x"},{"post_id":"cmbes86xv00bfzcqb3uts8pzu","tag_id":"cmbes86y100cdzcqb1zjf5abq","_id":"cmbes86y300d1zcqba5r00lu7"},{"post_id":"cmbes86xw00bizcqb0y8lhkp9","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86y300d2zcqb34i75s20"},{"post_id":"cmbes86xw00bizcqb0y8lhkp9","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86y300d3zcqbcycc0usd"},{"post_id":"cmbes86xw00bizcqb0y8lhkp9","tag_id":"cmbes86y200chzcqb3aklbu6d","_id":"cmbes86y300d4zcqbbtotalir"},{"post_id":"cmbes86xw00bmzcqb28u39nxc","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86y300d5zcqb4gos3ohf"},{"post_id":"cmbes86xw00bmzcqb28u39nxc","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86y300d6zcqbc7v1d1vn"},{"post_id":"cmbes86xw00bmzcqb28u39nxc","tag_id":"cmbes86y200clzcqbbpqa8zey","_id":"cmbes86y300d7zcqbaodf7vwi"},{"post_id":"cmbes86xy00btzcqb0ivr9uo8","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86y300d8zcqbgnib6nu7"},{"post_id":"cmbes86xy00btzcqb0ivr9uo8","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86y300d9zcqb0w8b7rcy"},{"post_id":"cmbes86xy00btzcqb0ivr9uo8","tag_id":"cmbes86y200cozcqbgrao49n2","_id":"cmbes86y300dazcqb3ll116eq"},{"post_id":"cmbes86xy00bwzcqbfsrhhhcg","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86y300dbzcqb6jg7hh5a"},{"post_id":"cmbes86xy00bwzcqbfsrhhhcg","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86y300dczcqb3o5672dp"},{"post_id":"cmbes86xy00bwzcqbfsrhhhcg","tag_id":"cmbes86y200crzcqbdur4c9be","_id":"cmbes86y300ddzcqbgenh0jda"},{"post_id":"cmbes86xz00bzzcqbgoc338zm","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86y300dezcqb53t92fud"},{"post_id":"cmbes86xz00bzzcqbgoc338zm","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86y400dfzcqbanj00hff"},{"post_id":"cmbes86xz00bzzcqbgoc338zm","tag_id":"cmbes86y000c1zcqb19xh460z","_id":"cmbes86y400dgzcqbg6c7079y"},{"post_id":"cmbes86y100c6zcqbgja6crd9","tag_id":"cmbes86wl002bzcqbg6erdhwp","_id":"cmbes86y400dhzcqb7ph4c8pi"},{"post_id":"cmbes86y100c6zcqbgja6crd9","tag_id":"cmbes86xh008hzcqbamb18j5r","_id":"cmbes86y400dizcqb95ub0dp2"},{"post_id":"cmbes86y100c6zcqbgja6crd9","tag_id":"cmbes86y300cxzcqbd53vdzlx","_id":"cmbes86y400djzcqb2n46hue6"}],"Tag":[{"name":"vue","_id":"cmbes86w00005zcqbfrl93x1n"},{"name":"bladex","_id":"cmbes86w6000hzcqb03ub3wv7"},{"name":"flv","_id":"cmbes86w8000pzcqb8lc414zr"},{"name":"SpringBoot","_id":"cmbes86wa000xzcqbechi2isi"},{"name":"easypoi","_id":"cmbes86wb0015zcqbhztn9llt"},{"name":"Centos","_id":"cmbes86wd001dzcqbcwaq0ogo"},{"name":"DB-GPT","_id":"cmbes86wf001izcqb54h3g3tj"},{"name":"GPT","_id":"cmbes86wg001qzcqb0uj35m4v"},{"name":"LVM","_id":"cmbes86wi001xzcqbfe6oerj5"},{"name":"Docker","_id":"cmbes86wl002bzcqbg6erdhwp"},{"name":"食用教程","_id":"cmbes86wo002nzcqb8ppv4fab"},{"name":"Java","_id":"cmbes86wp002tzcqbabw99eaa"},{"name":"Kafka","_id":"cmbes86ws003fzcqbfj31hmva"},{"name":"Maven","_id":"cmbes86ww0042zcqb6o586grc"},{"name":"MongoDB","_id":"cmbes86wz004nzcqbbiyz01hk"},{"name":"MySQL","_id":"cmbes86x40058zcqbh6dkhcun"},{"name":"Nexus","_id":"cmbes86x90061zcqb2pt927z6"},{"name":"Minio","_id":"cmbes86xc006gzcqbdadfep4s"},{"name":"Nginx","_id":"cmbes86xc006qzcqb6laz3kcx"},{"name":"Redis","_id":"cmbes86xd006zzcqb943uan4c"},{"name":"Vim","_id":"cmbes86xd0076zcqbbcrw717o"},{"name":"命令","_id":"cmbes86xe007bzcqbe30hfdcc"},{"name":"Squid","_id":"cmbes86xe007ezcqb56xs8m35"},{"name":"Wget","_id":"cmbes86xe007jzcqb90rncz5s"},{"name":"Samba","_id":"cmbes86xe007ozcqbbu0v1byw"},{"name":"网络","_id":"cmbes86xf007tzcqb7763h4ct"},{"name":"SH脚本","_id":"cmbes86xf007wzcqb1o9mhjnz"},{"name":"Xtrabackup","_id":"cmbes86xh008fzcqbceft12yy"},{"name":"Docker-Compose","_id":"cmbes86xh008hzcqbamb18j5r"},{"name":"lucky","_id":"cmbes86xi008kzcqbaj35ehd2"},{"name":"宝塔","_id":"cmbes86xi008nzcqbgfku1s5z"},{"name":"java","_id":"cmbes86xi008tzcqb8mophzd8"},{"name":"Ubuntu","_id":"cmbes86xj0094zcqb0xd55h9d"},{"name":"Nacos","_id":"cmbes86xj0095zcqb4hjkgwyx"},{"name":"K8S","_id":"cmbes86xk009bzcqb3tt38rah"},{"name":"Kubesphere","_id":"cmbes86xk009ezcqb21ptgusn"},{"name":"RabbitMQ","_id":"cmbes86xo00aezcqb34l7cel7"},{"name":"Alist","_id":"cmbes86xp00aozcqb0ktp8nm7"},{"name":"Dashdot","_id":"cmbes86xq00atzcqbggeh8qkd"},{"name":"Elasticsearch","_id":"cmbes86xs00b0zcqbf4oa79dy"},{"name":"Halo","_id":"cmbes86xt00b6zcqb9c1a3qs0"},{"name":"Immich","_id":"cmbes86xv00bdzcqb9vaqdky5"},{"name":"jenkins","_id":"cmbes86xw00bkzcqb3pe0f1qq"},{"name":"Homarr","_id":"cmbes86xy00brzcqb18dj30pj"},{"name":"Memos","_id":"cmbes86y000c1zcqb19xh460z"},{"name":"Sun-Panel","_id":"cmbes86y100c8zcqbbgx18gns"},{"name":"bitwarden","_id":"cmbes86y100cdzcqb1zjf5abq"},{"name":"flare","_id":"cmbes86y200chzcqb3aklbu6d"},{"name":"Portainer","_id":"cmbes86y200clzcqbbpqa8zey"},{"name":"lsky-pro-plus","_id":"cmbes86y200cozcqbgrao49n2"},{"name":"synctv","_id":"cmbes86y200crzcqbdur4c9be"},{"name":"wordpress","_id":"cmbes86y300cxzcqbd53vdzlx"}]}}